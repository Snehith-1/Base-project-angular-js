!function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){e.customer_pnl=!0,e.sanction_pnl=!0,g.calender1=function(t){t.preventDefault(),t.stopPropagation(),g.open1=!0},g.calender2=function(t){t.preventDefault(),t.stopPropagation(),g.open2=!0},g.calender3=function(t){t.preventDefault(),t.stopPropagation(),g.open3=!0},g.calender4=function(t){t.preventDefault(),t.stopPropagation(),g.open4=!0};var t=new Date,a=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2);e.txtdate=[n,a,t.getFullYear()].join("-"),g.formats=["dd-MM-yyyy"],g.format=g.formats[0],g.dateOptions={formatYear:"yy",startingDay:1};var o="api/customer/state";r.get(o).then(function(t){e.state_list=t.data.state_list});var o="api/IdasTrnLsaManagement/branch";r.get(o).then(function(t){e.branch_list=t.data.branch_list})}var g=this;g.title="createLSAController",_(),e.complete=function(t){if(t.length>=3){e.message="";var a="api/customer/ExploreCustomer",n={customername:t};r.getparams(a,n).then(function(t){1==t.data.status?(e.message="",e.customer_list=t.data.Customers):e.message="No Records"})}else e.customer_list=null,e.message="Enter atleast three character"},e.fillTextbox=function(t,a){e.customer=a,e.customer_gid=t,e.customer_list=null;var n={customer_gid:t},o="api/IdasTrnLsaManagement/customerdtl";r.getparams(o,n).then(function(t){e.customer_pnl=!1,e.txtzonalHead=t.data.zonal_head,e.txtbusinessHead=t.data.business_head,e.txtclustermanager=t.data.cluster_head,e.txtrelationshipMgmt=t.data.rm_name,e.txtcreditmgmt_name=t.data.credit_manager,e.txtcustomer_location=t.data.customer_location,e.txtcustomer_urn=t.data.customer_urn,e.txtaddress=t.data.address,e.txtvertical=t.data.vertical,e.txtgst_no=t.data.gst_no,e.txtpan_no=t.data.pan_no,e.txtconstitution=t.data.constitution,e.txtmajor_corporate=t.data.major_corporate,e.lbladdress1=t.data.address1});var o="api/IdasTrnLsaManagement/customer2sanction";r.getparams(o,n).then(function(t){e.customer2sanction_list=t.data.customer2sanction_list})},e.onselectedchangesanction=function(t){var a={customer2sanction_gid:e.cbocustomer2sanction_gid.customer2sanction_gid},n="api/IdasTrnLsaManagement/Getloanfacilityinfo";r.getparams(n,a).then(function(t){if(e.sanction_pnl=!0,e.loanfacility_validation=t.data.loanfacility_validation,"N"==t.data.loanfacility_validation){var a={customer2sanction_gid:e.cbocustomer2sanction_gid.customer2sanction_gid},n="api/IdasTrnLsaManagement/customer2sanctiondtl";r.getparams(n,a).then(function(t){e.sanction_pnl=!1,e.txtsanctiondate=t.data.sanction_date,e.txtpurpose_lending=t.data.purpose_lending,e.txtfacility=t.data.facility,e.txtproduct_solution=t.data.product_solution,e.txtmajor_intervention=t.data.majot_intervention,e.txtprimaryvalue_chain=t.data.primaryvalue_chain,e.txtsecondaryvalue_chain=t.data.secondaryvalue_chain,e.lblsanction_branch_name=t.data.sanction_branch_name,e.lblsanction_state_name=t.data.sanction_state_name,e.lblccapproved_by=t.data.ccapproved_by,e.lblccapproved_date=t.data.ccapproved_date,e.lblsanction_type=t.data.sanction_type,e.lblnatureof_proposal=t.data.natureof_proposal,e.customer2sanction_flag=t.data.customer2sanction_flag,e.limitinfo_limit=t.data.limitinfo_limit})}else e.cbocustomer2sanction_gid="",s.alert("Cant able to create LSA, Loan Facility Type is not added in sanction",{status:"warning",pos:"top-center",timeout:3e3})})},e.lsaback=function(){a.go("app.lsaManagement")},e.lsasubmit=function(){var t={branch_name:e.lblsanction_branch_name,state:e.lblsanction_state_name,customer2sanction_gid:e.cbocustomer2sanction_gid.customer2sanction_gid,customer_name:e.customer,customer_gid:e.customer_gid,customer_urn:e.txtcustomer_urn,sanctionref_no:e.cbocustomer2sanction_gid.sanctionref_no,sanctiondate:e.txtsanctiondate,approved_by:e.lblccapproved_by,approveddate:e.lblccapproved_date,constitution:e.txtconstitution,gst_no:e.txtgst_no,pan_no:e.txtpan_no,customer_location:e.txtcustomer_location,address:e.txtaddress,address1:e.lbladdress1,rm_name:e.txtrelationshipMgmt,cluster_head:e.txtclustermanager,business_head:e.txtbusinessHead,credit_manager:e.txtcreditmgmt_name,zonal_head:e.txtzonalHead,sa_code:e.txtsa_code,purpose_lending:e.txtpurpose_lending,facility:e.txtfacility,major_corporate:e.txtmajor_corporate,hypothecation_date:e.txthypothecation_date,mortgage_date:e.txtmortgage_date,product_solution:e.txtproduct_solution,majot_intervention:e.txtmajor_intervention,sector:e.txtvertical,primaryvalue_chain:e.txtprimaryvalue_chain,secondaryvalue_chain:e.txtsecondaryvalue_chain,remarks:e.txtremarks,vertical:e.txtvertical,sanction_type:e.lblsanction_type,natureof_proposal:e.lblnatureof_proposal,customer2sanction_flag:e.customer2sanction_flag};console.log(t);var n="api/IdasTrnLsaManagement/createLSA";lockUI(),r.post(n,t).then(function(t){1==t.data.status?(unlockUI(),_(),a.go("app.lsaManagement"),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})}}angular.module("angle").controller("createLSAController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){lockUI();var t="api/idasMstDigitalSignature/GetDigitalSignatureList";s.get(t).then(function(t){unlockUI(),e.digitalsignaturelist=t.data.digitalsignaturelist})}var f=this;f.title="DocDigitalSignatureSummaryController",g(),e.addSignature=function(){function t(t,a,n,o,i,c,r,s,d,l,u,m,p){a.close=function(){e.close("closed")};var f="api/idasMstDigitalSignature/GetEmployeeList";d.get(f).then(function(t){a.employee_list=t.data.employeelist}),a.upload=function(t,e,n){var o={name:t[0].name,file:t[0]},i=_.fnCheckValidDocType(t[0].name,"");if(0==i)return l.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("employee_gid",a.cboemployee_name.employee_gid),c.append("employee_name",a.cboemployee_name.employee_name),c.append("project_flag","Default"),a.uploadfrm=c},a.signaturesubmit=function(){var t="api/idasMstDigitalSignature/SignatureUpload";lockUI(),d.postFile(t,a.uploadfrm).then(function(t){1==t.data.status?(l.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),g(),e.close("closed")):(unlockUI(),l.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),e.close("closed")),$("#digitaldocupload").val("")})}}var e=a.open({templateUrl:"/addSignatureContent.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},e.deletesignature=function(t){lockUI();var a={digitalsignature_gid:t},n="api/idasMstDigitalSignature/DeleteSignature";s.getparams(n,a).then(function(t){if(1==t.data.status){var a="api/idasMstDigitalSignature/GetDigitalSignatureList";s.get(a).then(function(t){e.digitalsignaturelist=t.data.digitalsignaturelist}),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3});unlockUI()})},e.downloads=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");e.split(".");s.download=e;var d=r;s.href=d,s.click()}}angular.module("angle").controller("DocDigitalSignatureSummaryController",t),t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m){function p(){g=localStorage.getItem("courier_gid"),v=localStorage.getItem("page"),e.courier_gid=g,_.calender1=function(t){t.preventDefault(),t.stopPropagation(),_.open1=!0},_.calender2=function(t){t.preventDefault(),t.stopPropagation(),_.open2=!0},_.formats=["dd-MM-yyyy"],_.format=_.formats[0],_.dateOptions={formatYear:"yy",startingDay:1},_.open=function(t){t.preventDefault(),t.stopPropagation(),_.opened=!0},_.dateOptions={formatYear:"yy",startingDay:1},_.formats=["dd-MM-yyyy"],_.format=_.formats[0];var t="api/customer/customer";c.get(t).then(function(t){e.customer_list=t.data.customer_list});var t="api/employee/employee";c.get(t).then(function(t){e.employee_list=t.data.employee_list});var a={courier_gid:g},t="api/IdasMstCourierCompany/CourierCompanySummary";c.get(t).then(function(t){e.couriercompany_list=t.data.MdlCourierCompany});var t="api/IdasCourierManagement/GetEditCourierDetail";c.getparams(t,a).then(function(t){if(console.log(t.data),1==t.data.status){if(""==t.data.customer_gid?(e.rdbcustomeredit="No",e.customerno=!0,e.customernameedit=t.data.customer_name):(e.rdbcustomeredit="Yes",e.customeryes=!0,e.customername=t.data.customer_gid),e.date_of_courier=t.data.date_of_courier,e.date_of_courier=Date.parse(e.date_of_courier),console.log(e.date_of_courier),e.courierref_no=t.data.courierref_no,e.document_type=t.data.document_type,e.address=t.data.address,e.pod_no=t.data.pod_no,e.courier_company_name=t.data.couriercompany_name,e.courier_type=t.data.courier_type,e.remarks=t.data.remarks,e.courier_sender_name=t.data.sender_gid,e.handover_name=t.data.courierhandover_to_gid,e.uploadDoc_list=t.data.uploadcourierdocument,f=t.data.sanction_gid,e.ack_status=t.data.ack_status,e.employee_list=t.data.MdlEmployee,null!=t.data.MdlCourierByList){e.sender_name=[];for(var a=t.data.MdlCourierByList.length,n=0;n<a;n++){var o=e.employee_list.map(function(t){return t.employee_gid}).indexOf(t.data.MdlCourierByList[n].employee_gid);e.sender_name.push(e.employee_list[o])}}if(null!=t.data.MdlCourierToList){var a=t.data.MdlCourierToList.length;e.handover_name=[];for(var n=0;n<a;n++){var o=e.employee_list.map(function(t){return t.employee_gid}).indexOf(t.data.MdlCourierToList[n].employee_gid);e.handover_name.push(e.employee_list[o])}}var i={customer_gid:t.data.customer_gid},r="api/loan/customer_getheads";c.getparams(r,i).then(function(t){e.sanctiondtl=t.data.sanctiondtl,console.log("sanctiondtl",e.sanctiondtl)}),e.cbosanctionGid=f}"Courier Outward"!=e.courier_type&&"Courier Inward"!=e.courier_type||(document.getElementById("courier_company_name").disabled=!1,document.getElementById("pod_no").disabled=!1,e.physical_value=!1),"Courier Outward"==e.courier_type&&(e.courier_outward=!0,e.courier_inward=!1,e.physical_inward=!1,e.physical_outward=!1),"Courier Inward"==e.courier_type&&(e.courier_outward=!1,e.courier_inward=!0,e.physical_inward=!1,e.physical_outward=!1),"Physical Inward"==e.courier_type&&(e.courier_outward=!1,e.courier_inward=!1,e.physical_inward=!0,e.physical_outward=!1),"Physical Outward"==e.courier_type&&(e.courier_outward=!1,e.courier_inward=!1,e.physical_inward=!1,e.physical_outward=!0),"Physical Inward"!=e.courier_type&&"Physical Outward"!=e.courier_type||(document.getElementById("courier_company_name").disabled=!0,document.getElementById("pod_no").disabled=!0,e.physical_value=!0)}),e.rdbcustomer_yes=function(){e.customerno=!1,e.customeryes=!0},e.rdbcustomer_no=function(){e.customerno=!0,e.customeryes=!1}}e.title="idasCourierEdit";var _=this;_.title="idasTrnCourierCreation";var g,f,v;p(),e.onselectedchangecustomer=function(t){var a={customer_gid:t};console.log("customer params",a);var n="api/loan/customer_getheads";c.getparams(n,a).then(function(t){console.log("sanctionDtls",t.data),null!=t.data.sanctiondtl?e.sanctiondtl=t.data.sanctiondtl:e.sanctiondtl=null})},e.downloadsdocument=function(t,e){u.Downloaddocument(t,e)},e.commondocumentupload=function(t,a,n){var o={name:t[0].name,file:t[0]},i=m.fnCheckValidDocType(t[0].name,"");if(0==i)return r.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var s=new FormData;s.append("fileupload",o.file),s.append("file_name",o.name),s.append("document_name",e.documentname),s.append("document_gid",e.document_gid),s.append("Trn_Gid",g),s.append("document_title",e.txtdocument_title),s.append("project_flag","Default"),e.uploadfrm=s;var d="api/IdasCourierManagement/CourierDocUpload";lockUI(),c.postFile(d,e.uploadfrm).then(function(t){$("#addupload").val(""),$("#editupload").val(""),1==t.data.status?(unlockUI(),p()):(unlockUI(),r.alert("File Format Not Supported!"))})},e.courierback=function(){s.url("app/idasCourierMgmtsummary?lstab="+v)},e.update=function(){var t;if("Acknowledged"==e.ack_status&&(console.log(e.ack_date),void 0==e.ack_date||""==e.ack_date))return void r.alert("Select the Acknowledgement Date");if("Courier Inward"==e.courier_type||"Courier Outward"==e.courier_type){if(void 0==e.courier_company_name||""==e.courier_company_name)return void r.alert("Select the Courier Company");if(t=$("#courier_company_name :selected").text(),void 0==e.pod_no||""==e.pod_no)return void r.alert("Enter the POD No.")}else t="",e.pod_no="";if(""==e.cbosanctionGid?(e.sanctionref_no="",e.sanction_gid=""):(e.sanctionref_no=$("#cbosanctionGid :selected").text(),e.sanction_gid=e.cbosanctionGid),"No"==e.rdbcustomeredit){var a=e.customernameedit;e.customername=""}else var a=$("#customername :selected").text();var n={date_of_courier:e.date_of_courier,document_type:e.document_type,remarks:e.remarks,pod_no:e.pod_no,couriercompany_name:t,address:e.address,customer_gid:e.customername,customer_name:a,sanction_gid:e.sanction_gid,sanctionref_no:e.sanctionref_no,courierMgmt_gid:g,courier_type:e.courier_type,ack_status:e.ack_status,ack_date:e.ack_date,MdlCourierByList:e.sender_name,MdlCourierToList:e.handover_name};lockUI();var o="api/IdasCourierManagement/PostUpdateCourier";c.post(o,n).then(function(t){unlockUI(),1==t.data.status?(s.url("app/idasCourierMgmtsummary?lstab="+v),r.alert(t.data.message,"success")):r.alert(t.data.message,"warning")})}}angular.module("angle").controller("idasCourierEdit",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){var t="api/IdasCourierManagement/CourierAckList";r.get(t).then(function(t){e.courierackpending_list=t.data.CourierAckPending,e.courierack_list=t.data.CourierMgmt})}var f=this;f.title="idasCourierMgmtAckList",g(),e.back=function(){a.go("app.idasCourierMgmtsummary")},e.ack_submit=function(t){function e(e,n){e.ok=function(){a.close("closed")};var o={courierMgmt_gid:t},i="api/IdasCourierManagement/CourierAckView";r.getparams(i,o).then(function(t){e.courierref_no=t.data.courierref_no,e.date_of_courier=t.data.date_of_courier,e.sanctionref_no=t.data.sanctionref_no,e.customer_name=t.data.customer_name,e.document_type=t.data.document_type,e.sender_name=t.data.sender_name,e.pod_no=t.data.pod_no,e.couriercompany_name=t.data.couriercompany_name,e.courierhandover_to=t.data.courierhandover_to,e.courier_type=t.data.courier_type,e.ack_status=t.data.ack_status,e.remarks=t.data.remarks,e.ack_date=t.data.ack_date,e.ackby_name=t.data.ackby_name}),e.sendcourierack=function(){var e={courierMgmt_gid:t};lockUI();var n="api/IdasCourierManagement/AckStatus";r.post(n,e).then(function(t){1==t.data.status?(a.close("closed"),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),g(),unlockUI()):(a.close("closed"),s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.ok=function(){a.close("closed")}}var a=o.open({templateUrl:"/sendack.html",controller:e,backdrop:"static",keyboard:!1,size:"lg"});e.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("idasCourierMgmtAckList",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$timeout","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){e.totalDisplayed=100,e.total=0,e.tab={};var t="api/IdasCourierManagement/GetCourierMgmt",a=window.location.href,n=a.split("lstab="),o=n[1];void 0!=o?"CI"==o?(e.tabci=!0,g={courier_type:"Courier Inward"}):"CO"==o?(e.tabco=!0,g={courier_type:"Courier Outward"}):"PI"==o?(e.tabpi=!0,g={courier_type:"Physical Inward"}):"PO"==o&&(e.tabpo=!0,g={courier_type:"Physical Outward"}):void 0==e.tab.activeTabId?(e.tabci=!0,g={courier_type:"Courier Inward"}):"CI"==e.tab.activeTabId?(e.tabci=!0,g={courier_type:"Courier Inward"}):"CO"==e.tab.activeTabId?(e.tabco=!0,g={courier_type:"Courier Outward"}):"PI"==e.tab.activeTabId?(e.tabpi=!0,g={courier_type:"Physical Inward"}):"PO"==e.tab.activeTabId&&(e.tabpo=!0,g={courier_type:"Physical Outward"}),r.getparams(t,g).then(function(t){1==t.data.status?("Courier Inward"==g.courier_type&&(e.courierInward_List=t.data.CourierMgmt,null==e.courierInward_List?(e.total=0,e.totalDisplayed=0):(e.total=e.courierInward_List.length,e.courierInward_List.length<100&&(e.totalDisplayed=e.courierInward_List.length))),"Courier Outward"==g.courier_type&&(e.courieroutward_List=t.data.CourierMgmt,null==e.courieroutward_List?(e.total=0,e.totalDisplayed=0):(e.total=e.courieroutward_List.length,e.courieroutward_List.length<100&&(e.totalDisplayed=e.courieroutward_List.length))),"Physical Inward"==g.courier_type&&(e.courierphysicalInward_List=t.data.CourierMgmt,null==e.courierphysicalInward_List?(e.total=0,e.totalDisplayed=0):(e.total=e.courierphysicalInward_List.length,e.courierphysicalInward_List.length<100&&(e.totalDisplayed=e.courierphysicalInward_List.length))),"Physical Outward"==g.courier_type&&(e.courierphysicaloutward_List=t.data.CourierMgmt,null==e.courierphysicaloutward_List?(e.total=0,e.totalDisplayed=0):(e.total=e.courierphysicaloutward_List.length,e.courierphysicaloutward_List.length<100&&(e.totalDisplayed=e.courierphysicaloutward_List.length)))):(e.total=0,e.totalDisplayed=0)});var t="api/IdasCourierManagement/CourierCount";r.get(t).then(function(t){e.courier_inward=t.data.courier_inward,e.courier_outward=t.data.courier_outward,e.physical_inward=t.data.physical_inward,e.physical_outward=t.data.physical_outward});var t="api/IdasCourierManagement/GetACKNotification";r.get(t).then(function(t){e.ack_status=t.data.ack_status})}e.title="idasCourierMgmtsummary";var g;_(),e.tabcourierinward=function(){var t="api/IdasCourierManagement/GetCourierMgmt";g={courier_type:"Courier Inward"},r.getparams(t,g).then(function(t){1==t.data.status?(e.courierInward_List=t.data.CourierMgmt,null==e.courierInward_List?(e.total=0,e.totalDisplayed=0):(e.total=e.courierInward_List.length,e.courierInward_List.length<100&&(e.totalDisplayed=e.courierInward_List.length))):(e.total=0,e.totalDisplayed=0)})},e.tabcourieroutward=function(){var t="api/IdasCourierManagement/GetCourierMgmt";g={courier_type:"Courier Outward"},r.getparams(t,g).then(function(t){1==t.data.status?(e.courieroutward_List=t.data.CourierMgmt,null==e.courieroutward_List?(e.total=0,e.totalDisplayed=0):(e.total=e.courieroutward_List.length,e.courieroutward_List.length<100&&(e.totalDisplayed=e.courieroutward_List.length))):(e.total=0,e.totalDisplayed=0)})},e.tabphysicalinward=function(){var t="api/IdasCourierManagement/GetCourierMgmt";g={courier_type:"Physical Inward"},r.getparams(t,g).then(function(t){1==t.data.status?(e.courierphysicalInward_List=t.data.CourierMgmt,null==e.courierphysicalInward_List?(e.total=0,e.totalDisplayed=0):(e.total=e.courierphysicalInward_List.length,e.courierphysicalInward_List.length<100&&(e.totalDisplayed=e.courierphysicalInward_List.length))):(e.total=0,e.totalDisplayed=0)})},e.tabphysicaloutward=function(){var t="api/IdasCourierManagement/GetCourierMgmt";g={courier_type:"Physical Outward"},r.getparams(t,g).then(function(t){1==t.data.status?(e.courierphysicaloutward_List=t.data.CourierMgmt,null==e.courierphysicaloutward_List?(e.total=0,e.totalDisplayed=0):(e.total=e.courierphysicaloutward_List.length,e.courierphysicaloutward_List.length<100&&(e.totalDisplayed=e.courierphysicaloutward_List.length))):(e.total=0,e.totalDisplayed=0)})},e.loadMore=function(t){if(console.log("courier_test"),void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);if(0!=e.total){if(!(t<e.total))return unlockUI(),void s.alert(" Total Summary "+e.total+" Records Only","warning");e.totalDisplayed+=a,e.total<e.totalDisplayed&&(e.totalDisplayed=e.total,s.alert(" Total Summary "+e.total+" Records Only","warning")),unlockUI()}unlockUI()},e.popupcourier=function(){localStorage.setItem("courier_type",g.courier_type),a.go("app.idasCourierCreation")},e.editCI=function(t){localStorage.setItem("courier_gid",t),localStorage.setItem("page","CI"),a.go("app.idasCourierEdit")},e.editCO=function(t){localStorage.setItem("courier_gid",t),localStorage.setItem("page","CO"),a.go("app.idasCourierEdit")},e.editPI=function(t){localStorage.setItem("courier_gid",t),localStorage.setItem("page","PI"),a.go("app.idasCourierEdit")},e.editPO=function(t){localStorage.setItem("courier_gid",t),localStorage.setItem("page","PO"),a.go("app.idasCourierEdit")},e.ViewCI=function(t){localStorage.setItem("courier_gid",t),localStorage.setItem("page","CI"),a.go("app.idasTrnCourierView")},e.ViewCO=function(t){localStorage.setItem("courier_gid",t),localStorage.setItem("page","CO"),a.go("app.idasTrnCourierView")},e.ViewPI=function(t){localStorage.setItem("courier_gid",t),localStorage.setItem("page","PI"),a.go("app.idasTrnCourierView")},e.ViewPO=function(t){localStorage.setItem("courier_gid",t),localStorage.setItem("page","PO"),a.go("app.idasTrnCourierView")}}angular.module("angle").controller("idasCourierMgmtsummary",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f){function v(){var t="api/IdasDashboard/IdasUserPrivilege",a={module_gid:"IDS"};d.getparams(t,a).then(function(t){var a=t.data.idasUserPrivilege_List.map(function(t){return t.idasUserPrivilege}).indexOf("IDSMSTCOR"),n=t.data.idasUserPrivilege_List.map(function(t){return t.idasUserPrivilege}).indexOf("IDSDOCMAK"),o=t.data.idasUserPrivilege_List.map(function(t){return t.idasUserPrivilege}).indexOf("IDSDOCCHK"),i=t.data.idasUserPrivilege_List.map(function(t){return t.idasUserPrivilege}).indexOf("IDSDOCRMR"),c=t.data.idasUserPrivilege_List.map(function(t){return t.idasUserPrivilege}).indexOf("IDSDOCLSA"),r=t.data.idasUserPrivilege_List.map(function(t){return t.idasUserPrivilege}).indexOf("IDSDOCPHY"),s=t.data.idasUserPrivilege_List.map(function(t){return t.idasUserPrivilege}).indexOf("IDSDOMARC"),d=t.data.idasUserPrivilege_List.map(function(t){return t.idasUserPrivilege}).indexOf("IDSDOMRET"),l=t.data.idasUserPrivilege_List.map(function(t){return t.idasUserPrivilege}).indexOf("IDSDOMUPL"),u=t.data.idasUserPrivilege_List.map(function(t){return t.idasUserPrivilege}).indexOf("IDSDOMCOU"),m=t.data.idasUserPrivilege_List.map(function(t){return t.idasUserPrivilege}).indexOf("IDSDOMCUL");a!=-1?e.SanctionDocument="Y":e.SanctionDocument="N",n!=-1?e.Maker="Y":e.Maker="N",o!=-1?e.Checker="Y":e.Checker="N",i!=-1?e.RmResponse="Y":e.RmResponse="N",c!=-1?e.lsa="Y":e.lsa="N",r!=-1?e.PhysicalDoc="Y":e.PhysicalDoc="N",s!=-1?e.FileMgmt="Y":e.FileMgmt="N",d!=-1?e.RetrievalReq="Y":e.RetrievalReq="N",u!=-1?e.CourierMgmt="Y":e.CourierMgmt="N",l!=-1?e.DocUpload="Y":e.DocUpload="N",m!=-1?e.DocumentTagging="Y":e.DocumentTagging="N"})}var h=this;h.title="idasDashboard",v()}angular.module("angle").controller("idasDashboard",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","Colors","ChartData","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$timeout","SweetAlert","$cookies"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l){function u(){var t="api/idasMstTemplate/GetTemplateType";c.get(t).then(function(t){e.cbotemplatetype_list=t.data.templatetype_list})}e.title="idasMstAddTemplateController";u(),e.titleOptions={placeholderText:"Add a Title",charCounterCount:!1,toolbarInline:!0,events:{contentChanged:function(t,a){console.log("content changed",e.titleOptions.froalaEditor.html.get())},initialized:function(t){console.log("initialized",this)}}},e.initialize=function(t){e.initControls=t,e.deleteAll=function(){t.getEditor().html.set("34434")}},e.imgModel={src:"image.jpg"},e.buttonModel={innerHTML:"Click Me"},e.inputModel={placeholder:"I am an input!"},e.inputOptions={angularIgnoreAttrs:["class","ng-model","id","froala"]},e.initializeLink=function(t){e.linkInitControls=t},e.linkModel={href:"https://www.froala.com/wysiwyg-editor"},e.submitTemplate=function(){var t={template_name:e.templatename,templatetype_name:e.cbotemplatetype.templatetype_name,template_content:e.content},n="api/idasMstTemplate/IdasTemplateSubmit";c.post(n,t).then(function(t){1==t.data.status?(a.go("app.idasMstTemplateSummary"),r.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):r.alert(t.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.back=function(){a.go("app.idasMstTemplateSummary")}}angular.module("angle").controller("idasMstAddTemplateController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){var t="api/IdasMstSanction/checkertmpdoc_delete";r.get(t).then(function(t){});var t="api/IdasMstSanction/SanctionDtlsEdit",a={sanction_gid:v};lockUI(),r.getparams(t,a).then(function(t){unlockUI(),e.sanctionrefnoEdit=t.data.sanction_refno,e.SanctionDateEdit=t.data.sanction_date,e.SanctionAmountEdit=t.data.sanction_amount,e.customerNameEdit=t.data.customername,e.CustomerurnEdit=t.data.customer_urn,e.verticalCodeEdit=t.data.vertical,e.txtSanctionLimit=t.data.sanction_limit,e.checkerletter_flag=t.data.checkerletter_flag});var t="api/IdasMstSanction/Getcheckerdocument";lockUI(),r.getparams(t,a).then(function(t){unlockUI(),1==t.data.status&&(e.uploadedfile=!0,e.file_name=t.data.document_name,e.file_gid=t.data.document_gid)});var t="api/IdasMstSanction/SanctionmarkerEdit";lockUI(),r.getparams(t,a).then(function(t){unlockUI(),e.makerfile_name=t.data.makerfile_name,e.makerfile_path=t.data.makerfile_path});var t="api/IdasMstSanction/SanctioncheckerEdit";lockUI(),r.getparams(t,a).then(function(t){unlockUI(),e.checkerfile_name=t.data.checkerfile_name,e.checkerfile_path=t.data.checkerfile_path,e.uploaded_by=t.data.uploaded_by,e.uploaded_date=t.data.updated_date})}var f=this;f.title="idasMstCheckerSanctionViewController";var v=d.search().sanction_gid,h=d.search().lspage;g(),e.checkerdoc_download=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");s.download=e;var d=r;s.href=d,s.click()},e.makerdoc_download=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");s.download=e;var d=r;s.href=d,s.click()},e.checkerUpdate=function(){var t="api/IdasMstSanction/UpdateCheckerdoc",e={sanction_gid:v};r.getparams(t,e).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.go("app.idasMstCheckerPendingSummary")):s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})})},e.Checkerback=function(){var t="api/IdasMstSanction/checkertmpdoc_delete";r.get(t).then(function(t){}),"Pending"==h?a.go("app.idasMstCheckerPendingSummary"):a.go("app.idasMstCheckerCompletedSummary")},e.canceluploadedfile=function(){var t={sanction_gid:v},a="api/IdasMstSanction/checkerdoc_delete";r.getparams(a,t).then(function(t){1==t.data.status?(e.uploadedfile=!1,s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})})},e.uploades_checkerfile=function(t,a,n){var o={name:t[0].name,file:t[0]},i=_.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("sanction_gid",v),c.append("project_flag","Default"),e.uploadfrm=c,lockUI();var d="api/IdasMstSanction/Checkerupload_file";r.postFile(d,e.uploadfrm).then(function(t){if($("#uploadwordfile").val(""),unlockUI(),1==t.data.status){var a="api/IdasMstSanction/Getcheckertmpdocument";r.get(a).then(function(t){1==t.data.status&&(e.uploadedfile=!0,e.file_name=t.data.document_name,e.file_gid=t.data.document_gid,e.checkerfile_name=t.data.checkerfile_name,e.checkerfile_path=t.data.checkerfile_path)}),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})})},e.downloadsBAL=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");s.download=e;var d=r;s.href=d,s.click()},e.esdownloaddocument=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");e.split(".");s.download=e;var d=r;s.href=d,s.click()},e.downloadmail=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");e.split(".");s.download=e;var d=r;s.href=d,s.click()},e.downloadsCAM=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");e.split(".");s.download=e;var d=r;s.href=d,s.click()},e.downloadsMOM=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");e.split(".");s.download=e;var d=r;s.href=d,s.click()},e.downloadsanctionletter=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");e.split(".");s.download=e;var d=r;s.href=d,s.click()},e.downloadsgeneral=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");e.split(".");s.download=e;var d=r;s.href=d,s.click()}}angular.module("angle").controller("idasMstCheckerSanctionViewController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){lockUI(),e.totalDisplayed=100;var t="api/IdasMstCourierCompany/CourierCompanySummary";r.get(t).then(function(t){unlockUI(),e.couriercompany_list=t.data.MdlCourierCompany,e.total=e.couriercompany_list.length})}e.title="IdasMstCourierCompanyController",_(),document.getElementById("pagecount").onkeyup=function(){if(null==e.pagecount){var t=document.getElementById("loadmore");t.style.backgroundColor="#DCDCDC"}else{var t=document.getElementById("loadmore");t.style.backgroundColor="#ffa"}},e.addCourier=function(t){function e(t,e){t.Submit=function(){void 0==t.description&&(t.description="");var a={couriercompany_name:t.couriercompany_name,description:t.description};console.log(a),lockUI();var n="api/IdasMstCourierCompany/CourierCompany";r.post(n,a).then(function(t){
1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),e.close("closed"),_()):(e.close("closed"),s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},t.ok=function(){e.close("closed")}}o.open({templateUrl:"/addDocumentModalContent.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.loadMore=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayed+=a,unlockUI()},e.edit=function(t,e,a){function n(n,o){n.courierNameEdit=e,n.descriptionEdit=a,n.close=function(){o.close("closed")},n.Update=function(){lockUI();var e={couriercompany_name:n.courierNameEdit,description:n.descriptionEdit,couriercompany_gid:t},a="api/IdasMstCourierCompany/UpdateCourierCompany";r.post(a,e).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),o.close("closed"),unlockUI(),_()):(o.close("closed"),s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}o.open({templateUrl:"/editDocumentModalContent.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]},e["delete"]=function(t){var e={couriercompany_gid:t};u.swal({title:"Are you sure?",text:"Do You Want To Delete the Courier Company ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasMstCourierCompany/DeleteCourierCompany";r.getparams(a,e).then(function(t){1==t.data.status?(_(),u.swal("Deleted Successfully!"),unlockUI()):(s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})}}angular.module("angle").controller("IdasMstCourierCompanyController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){e.colandingyes=!1,e.colandingyes=!1,v.calender1=function(t){t.preventDefault(),t.stopPropagation(),v.open1=!0},v.dateOptions={formatYear:"yy",startingDay:1},e.mandatorycolending=!1,v.formats=["dd-MM-yyyy"],v.format=v.formats[0],e.customer_pnl=!1;var t="api/entity/Entity";r.get(t).then(function(t){e.entity_list=t.data.entity_list});var t="api/employee/employee";r.get(t).then(function(t){e.employee_list=t.data.employee_list});var t="api/customer/state";r.get(t).then(function(t){e.state_list=t.data.state_list});var t="api/IdasTrnLsaManagement/branch";r.get(t).then(function(t){e.branch_list=t.data.branch_list});var t="api/IdasMstSanction/tempdelete";r.get(t).then(function(t){})}function f(t){var e=["","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ","Eleven ","Twelve ","Thirteen ","Fourteen ","Fifteen ","Sixteen ","Seventeen ","Eighteen ","Nineteen "],a=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],n=t.toString();if(n=n.replace(/[\, ]/g,""),n!=parseFloat(n))return"";if((t=t.toString()).length>9)return"Overflow";var o=("000000000"+t).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(o){var i="";return i+=0!=o[1]?(e[Number(o[1])]||a[o[1][0]]+" "+e[o[1][1]])+"Crore ":"",i+=0!=o[2]?(e[Number(o[2])]||a[o[2][0]]+" "+e[o[2][1]])+"Lakh ":"",i+=0!=o[3]?(e[Number(o[3])]||a[o[3][0]]+" "+e[o[3][1]])+"Thousand ":"",i+=0!=o[4]?(e[Number(o[4])]||a[o[4][0]]+" "+e[o[4][1]])+"Hundred ":"",i+=0!=o[5]?(""!=i?"and ":"")+(e[Number(o[5])]||a[o[5][0]]+" "+e[o[5][1]])+"only ":""}}var v=this;v.title="idasMstCreateSanction";var h,y;g(),e.complete=function(t){if(t.length>=3){e.message="";var a="api/customer/ExploreCustomer",n={customername:t};r.getparams(a,n).then(function(t){1==t.data.status?(e.message="",e.customer_list=t.data.Customers):e.message="No Records"})}else e.customer_list=null,e.message="Enter atleast three character"},e.fillTextbox=function(t,a){e.customer=a,e.customer_gid=t,e.customer_list=null;var n={customer_gid:t},o="api/loan/customer_getheads";r.getparams(o,n).then(function(t){e.customer_pnl=!0,e.mdlheadsofcustomer=t.data,e.zonalHead=t.data.zonalGid,e.businessHead=t.data.businessHeadGid,e.clustermanager=t.data.clustermanagerGid,e.relationshipMgmt=t.data.relationshipMgmtGid,e.creditmgmt_name=t.data.creditmanager_gid,e.vertical_code=t.data.vertical_code,h=t.data.vertical_gid,y=t.data.vertical_code})},e.rdbcolanding_yes=function(){e.mandatorycolending=!1,e.colandingyes=!0},e.rdbcolanding_no=function(){e.mandatorycolending=!1,e.colandingyes=!1},e.rdbdeclaration_yes=function(){e.esdeclarationyes=!0,e.esdeclarationno=!1},e.rdbdeclaration_no=function(){e.esdeclarationyes=!1,e.esdeclarationno=!0},e.amountschange=function(){var t=document.getElementById("txtInput").value,a=t.replace(/,/g,""),n=Number(a).toLocaleString("en-IN"),o=f(a);"NaN"==n?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtSanctionAmount=""):(document.getElementById("words_requestedloan").innerHTML=o,e.txtSanctionAmount=n,e.sanction_validation=!1)},e.ngclickevent=function(){e.mandatorycolending=!1},e.sanctionSubmit=function(){var t={esdeclaration_status:e.rdbdeclaration},n="api/IdasMstSanction/mandatoryfile_check";r.getparams(n,t).then(function(t){if(1==t.data.status)if("No"==e.rdbcolanding)if("FPO"==y)if(""==e.rdbpaycard||void 0==e.rdbpaycard)s.alert("Kindly Select Paycard value");else{e.mandatorycolending=!1;var n,o=e.txtSanctionAmount,i=o.split(",");for(n=0;n<i.length;n++){var c=o.replace(",","");o=c}var d=$("#zonal_name :selected").text(),l=$("#businesshead_name :selected").text(),u=$("#relationshipmgmt_name :selected").text(),m=$("#cluster_manager_name :selected").text(),p=$("#creditmanager_name :selected").text(),_={sanction_refno:e.sanctionrefno,sanction_amount:o,sanction_date:e.txtSanctionDate,customername:e.customer,customer_gid:e.customer_gid,vertical_gid:h,vertical_code:y,zonal_name:d,businesshead_name:l,relationshipmgmt_name:u,cluster_manager_name:m,creditmanager_name:p,zonalGid:e.zonalHead,businessHeadGid:e.businessHead,relationshipMgmtGid:e.relationshipMgmt,clustermanagerGid:e.clustermanager,creditmanagerGid:e.creditmgmt_name,sanction_branch_name:e.branch_gid.branch_name,sanction_state_name:e.state_gid.state_name,sanction_branch_gid:e.branch_gid.branch_gid,sanction_state_gid:e.state_gid.state_gid,colanding_status:e.rdbcolanding,colander_name:e.txtcolander_name,entity:e.cboentity_type.entity_name,entity_gid:e.cboentity_type.entity_gid,paycard:e.rdbpaycard,esdeclaration_status:e.rdbdeclaration},f="api/IdasMstSanction/CreateSanction";lockUI(),r.post(f,_).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success"),a.go("app.idasMstSanctionSummary")):(unlockUI(),s.alert(t.data.message)),g()})}else{e.mandatorycolending=!1;var n,o=e.txtSanctionAmount,i=o.split(",");for(n=0;n<i.length;n++){var c=o.replace(",","");o=c}var d=$("#zonal_name :selected").text(),l=$("#businesshead_name :selected").text(),u=$("#relationshipmgmt_name :selected").text(),m=$("#cluster_manager_name :selected").text(),p=$("#creditmanager_name :selected").text(),_={sanction_refno:e.sanctionrefno,sanction_amount:o,sanction_date:e.txtSanctionDate,customername:e.customer,customer_gid:e.customer_gid,vertical_gid:h,vertical_code:y,zonal_name:d,businesshead_name:l,relationshipmgmt_name:u,cluster_manager_name:m,creditmanager_name:p,zonalGid:e.zonalHead,businessHeadGid:e.businessHead,relationshipMgmtGid:e.relationshipMgmt,clustermanagerGid:e.clustermanager,creditmanagerGid:e.creditmgmt_name,sanction_branch_name:e.branch_gid.branch_name,sanction_state_name:e.state_gid.state_name,sanction_branch_gid:e.branch_gid.branch_gid,sanction_state_gid:e.state_gid.state_gid,colanding_status:e.rdbcolanding,colander_name:e.txtcolander_name,entity:e.cboentity_type.entity_name,entity_gid:e.cboentity_type.entity_gid,paycard:e.rdbpaycard,esdeclaration_status:e.rdbdeclaration},f="api/IdasMstSanction/CreateSanction";lockUI(),r.post(f,_).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success"),a.go("app.idasMstSanctionSummary")):(unlockUI(),s.alert(t.data.message)),g()})}else if("FPO"==y)if(""==e.rdbpaycard||void 0==e.rdbpaycard)s.alert("Kindly Select Paycard value");else if(""==e.txtcolander_name||void 0==e.txtcolander_name)e.mandatorycolending=!0;else{e.mandatorycolending=!1;var n,o=e.txtSanctionAmount,i=o.split(",");for(n=0;n<i.length;n++){var c=o.replace(",","");o=c}var d=$("#zonal_name :selected").text(),l=$("#businesshead_name :selected").text(),u=$("#relationshipmgmt_name :selected").text(),m=$("#cluster_manager_name :selected").text(),p=$("#creditmanager_name :selected").text(),_={sanction_refno:e.sanctionrefno,sanction_amount:o,sanction_date:e.txtSanctionDate,customername:e.customer,customer_gid:e.customer_gid,vertical_gid:h,vertical_code:y,zonal_name:d,businesshead_name:l,relationshipmgmt_name:u,cluster_manager_name:m,creditmanager_name:p,zonalGid:e.zonalHead,businessHeadGid:e.businessHead,relationshipMgmtGid:e.relationshipMgmt,clustermanagerGid:e.clustermanager,creditmanagerGid:e.creditmgmt_name,sanction_branch_name:e.branch_gid.branch_name,sanction_state_name:e.state_gid.state_name,sanction_branch_gid:e.branch_gid.branch_gid,sanction_state_gid:e.state_gid.state_gid,colanding_status:e.rdbcolanding,colander_name:e.txtcolander_name,entity:e.cboentity_type.entity_name,entity_gid:e.cboentity_type.entity_gid,paycard:e.rdbpaycard,esdeclaration_status:e.rdbdeclaration},f="api/IdasMstSanction/CreateSanction";lockUI(),r.post(f,_).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success"),a.go("app.idasMstSanctionSummary")):(unlockUI(),s.alert(t.data.message)),g()})}else if(""==e.txtcolander_name||void 0==e.txtcolander_name)e.mandatorycolending=!0;else{e.mandatorycolending=!1;var n,o=e.txtSanctionAmount,i=o.split(",");for(n=0;n<i.length;n++){var c=o.replace(",","");o=c}var d=$("#zonal_name :selected").text(),l=$("#businesshead_name :selected").text(),u=$("#relationshipmgmt_name :selected").text(),m=$("#cluster_manager_name :selected").text(),p=$("#creditmanager_name :selected").text(),_={sanction_refno:e.sanctionrefno,sanction_amount:o,sanction_date:e.txtSanctionDate,customername:e.customer,customer_gid:e.customer_gid,vertical_gid:h,vertical_code:y,zonal_name:d,businesshead_name:l,relationshipmgmt_name:u,cluster_manager_name:m,creditmanager_name:p,zonalGid:e.zonalHead,businessHeadGid:e.businessHead,relationshipMgmtGid:e.relationshipMgmt,clustermanagerGid:e.clustermanager,creditmanagerGid:e.creditmgmt_name,sanction_branch_name:e.branch_gid.branch_name,sanction_state_name:e.state_gid.state_name,sanction_branch_gid:e.branch_gid.branch_gid,sanction_state_gid:e.state_gid.state_gid,colanding_status:e.rdbcolanding,colander_name:e.txtcolander_name,entity:e.cboentity_type.entity_name,entity_gid:e.cboentity_type.entity_gid,paycard:e.rdbpaycard,esdeclaration_status:e.rdbdeclaration},f="api/IdasMstSanction/CreateSanction";lockUI(),r.post(f,_).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success"),a.go("app.idasMstSanctionSummary")):(unlockUI(),s.alert(t.data.message)),g()})}else s.alert(t.data.message,"warning")})},e.sanctionback=function(t){a.go("app.idasMstSanctionSummary")},e.importExcel=function(){function t(t,e){t.ok=function(){e.close("closed"),$("#excelImport").val("")},t.upload=function(e,a,n){var o={name:e[0].name,file:e[0]},i=new FormData;i.append("fileupload",o.file),i.append("file_name",o.name),i.append("document_name",t.documentname),i.append("uploadtype",t.cboexcel_type),i.append("project_flag","Default"),t.uploadfrm=i},t.uploadexcelclick=function(){lockUI();var a="api/IdasMstSanction/postexcelupload";r.postFile(a,t.uploadfrm).then(function(t){$("#excelImport").val(""),1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed"),g()):s.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}}o.open({templateUrl:"/excelImport.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.deleteCAM=function(t,a){var n={document_gid:t},o="api/IdasMstSanction/camdoc_delete_add";r.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.CAMfilename_list,function(a,n){a.document_gid==t&&e.CAMfilename_list.splice(n,1)}),s.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):s.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.deleteMOM=function(t,a){var n={document_gid:t},o="api/IdasMstSanction/momdoc_delete_add";r.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.MOMfilename_list,function(a,n){a.document_gid==t&&e.MOMfilename_list.splice(n,1)}),s.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):s.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.document_cancelclick=function(t,a){var n={document_gid:t},o="api/IdasMstSanction/sanctionletter_delete";r.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.SANfilename_list,function(a,n){a.document_gid==t&&e.SANfilename_list.splice(n,1)}),s.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):s.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.uploadclick=function(){e.uploadddiv=!0,e.uploaddclickdiv=!1},e.cancelupload=function(){e.uploadddiv=!1,e.uploaddclickdiv=!0,$("#addupload").val("")},e.uploadclickMOM=function(){e.uploadMOMdiv=!0,e.uploadMOMclickdiv=!1},e.cancelMOMupload=function(){e.uploadMOMdiv=!1,e.uploadMOMclickdiv=!0,$("#addupload").val("")},e.uploadCAM_doc=function(t,a,n){if(null==e.CAMdocument_type||""==e.CAMdocument_type||void 0==e.CAMdocument_type)$("#addCAMupload").val(""),s.alert("Kindly Enter the Document Title","warning");else{var o={name:t[0].name,file:t[0]},i=_.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_type",e.CAMdocument_type),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasMstSanction/EditCAMddocument";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if($("#addCAMupload").val(""),unlockUI(),1==t.data.status){e.CAMdocument_type="",e.showdiv=!0,e.hidediv=!1;var a="api/IdasMstSanction/Getcamdocmentadd";r.get(a).then(function(t){e.CAMfilename_list=t.data.UploadCOMDocumentList}),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else s.alert("File Format Not Supported!",{status:"info",pos:"top-center",timeout:3e3})})}},e.uploadMOM_doc=function(t,a,n){if(null==e.MOMdocument_type||""==e.MOMdocument_type||void 0==e.MOMdocument_type)$("#addMOMupload").val(""),s.alert("Kindly Enter the Document Title","warning");else{var o={name:t[0].name,file:t[0]},i=_.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_type",e.MOMdocument_type),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasMstSanction/EditMOMddocument";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if(1==t.data.status){$("#addMOMupload").val(""),unlockUI(),e.MOMdocument_type="",e.showdiv=!0,e.hidediv=!1;var a="api/IdasMstSanction/Getmomdocmentadd";r.get(a).then(function(t){e.MOMfilename_list=t.data.UploadMOMDocumentList}),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else unlockUI(),s.alert("File Format Not Supported!",{status:"info",pos:"top-center",timeout:3e3})})}},e.upload=function(t,a,n){var o={name:t[0].name,file:t[0]},i=new FormData;i.append("fileupload",o.file),i.append("file_name",o.name),i.append("document_name",e.documentname),i.append("document_type",e.SANdocument_type),i.append("project_flag","Default"),e.uploadfrm=i;var c="api/IdasMstSanction/Uploadsanctionletter";lockUI(),r.postFile(c,e.uploadfrm).then(function(t){if($("#addSANupload").val(""),1==t.data.status){unlockUI(),e.SANdocument_type="",e.showdiv=!0,e.hidediv=!1;var a="api/IdasMstSanction/Getsanctionletter";r.get(a).then(function(t){e.SANfilename_list=t.data.UploadSANDocumentList}),s.alert(t.data.message,"success")}else unlockUI(),s.alert(t.data.message)})},e.downloadsCAM=function(t,e){p.Downloaddocument(t,e)},e.downloadsMOM=function(t,e){p.Downloaddocument(t,e)},e.downloadsanctionletter=function(t,e){p.Downloaddocument(t,e)},e.uploades_declaration=function(t,a,n){if(null==e.es_declarationdocument_type||""==e.es_declarationdocument_type||void 0==e.es_declarationdocument_type)$("#adduploades_declaration").val(""),s.alert("Kindly Enter the Document Title","warning");else{var o={name:t[0].name,file:t[0]},i=_.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_type",e.es_declarationdocument_type),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasMstSanction/Uploades_declarationdocument";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if(1==t.data.status){$("#adduploades_declaration").val(""),unlockUI(),e.es_declarationdocument_type="";var a="api/IdasMstSanction/Getesdocument";r.get(a).then(function(t){e.uploadesfilename_list=t.data.UploadES_DocumentList}),s.alert(t.data.message,"success")}else unlockUI(),s.alert(t.data.message)})}},e.esdownloaddocument=function(t,e){p.Downloaddocument(t,e)},e.esdocument_cancelclick=function(t,a){var n={document_gid:t},o="api/IdasMstSanction/uploadesdocumentadd_delete";r.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.uploadesfilename_list,function(a,n){a.document_gid==t&&e.uploadesfilename_list.splice(n,1)}),s.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):s.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.deviationmailupload=function(t,a,n){if(null==e.deviationmaildocument_type||""==e.deviationmaildocument_type||void 0==e.deviationmaildocument_type)$("#addmailupload").val(""),s.alert("Kindly Enter the Document Title","warning");else{var o={name:t[0].name,file:t[0]},i=_.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_type",e.deviationmaildocument_type),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasMstSanction/Uploadmaildocument";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if(1==t.data.status){$("#addmailupload").val(""),unlockUI(),e.deviationmaildocument_type="";var a="api/IdasMstSanction/GetMaildocument";r.get(a).then(function(t){e.mailfilename_list=t.data.DeviationMail_DocumentList}),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else unlockUI(),s.alert(t.data.message)})}},e.downloadmail=function(t,e){p.Downloaddocument(t,e)},e.maildocument_cancelclick=function(t,a){var n={document_gid:t},o="api/IdasMstSanction/Maildocumentadd_delete";r.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.mailfilename_list,function(a,n){a.document_gid==t&&e.mailfilename_list.splice(n,1)}),s.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):s.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})}}angular.module("angle").controller("idasMstCreateSanction",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","SweetAlert","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f,v,h){function y(){e.totalDisplayed=50;var t="api/IdasTrnDocumentUpload/DocumentLabelSummary";s.get(t).then(function(t){unlockUI(),e.label_list=t.data.DocumentLabelList,null==e.label_list?(e.total=0,e.totalDisplayed=0):(e.total=e.label_list.length,e.label_list.length<100&&(e.totalDisplayed=e.label_list.length))})}var I=this;I.title="idasMstDocLabelSummaryController",y(),lockUI(),e.createlabel=function(){function t(t,e){t.documenttname=function(e){e.length>128?t.message="Allowed only  128 Characters":t.message=""};var a="api/IdasTrnDocumentUpload/GetDepartmentList";s.get(a).then(function(e){t.department_list=e.data.department_list}),t.documentlabelSubmit=function(){var a="",n="";void 0==t.cbodepartment&&null==t.cbodepartment||(a=t.cbodepartment.department_name,n=t.cbodepartment.department_gid);var o={documentlabel_name:t.document_label,documentlabel_desc:t.label_description,department_name:a,department_gid:n};lockUI();var i="api/IdasTrnDocumentUpload/CreateDocumentLabel";s.post(i,o).then(function(t){1==t.data.status?(d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),e.close("closed"),y()):(e.close("closed"),d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},t.ok=function(){e.close("closed")}}a.open({templateUrl:"/createDocumentLabelModalContent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.editlabel=function(t){function e(e,a){e.documentretname=function(t){t.length>128?e.message1="Allowed only  128 Characters":e.message1=""};var n="api/IdasTrnDocumentUpload/GetDepartmentList";s.get(n).then(function(t){e.department_list=t.data.department_list});var o={documentlabel_gid:t},n="api/IdasTrnDocumentUpload/GetDocumentLabel";s.getparams(n,o).then(function(t){e.editdocument_label=t.data.documentlabel_name,e.editlabel_description=t.data.documentlabel_desc,e.cbodepartment=t.data.department_gid}),e.close=function(){a.close("closed")},e.update_documentlabel=function(){lockUI();var n={documentlabel_name:e.editdocument_label,documentlabel_desc:e.editlabel_description,documentlabel_gid:t,department_name:$("#department_name :selected").text(),department_gid:e.cbodepartment},o="api/IdasTrnDocumentUpload/UpdateDocumentLabel";s.post(o,n).then(function(t){1==t.data.status?(d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed"),unlockUI(),y()):(a.close("closed"),d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.ok=function(){a.close("closed")}}a.open({templateUrl:"/editDocumentLabelModalContent.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.deletelabel=function(t){var e={documentlabel_gid:t};o.swal({title:"Are you sure?",text:"Do You Want To Delete the Document List ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnDocumentUpload/DocumentLabelDelete";s.getparams(a,e).then(function(t){1==t.data.status?(y(),o.swal("Deleted Successfully!"),unlockUI()):(d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},e.loadMore=function(t){if(void 0==t)return void d.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);if(null!=e.label_list){if(!(t<e.label_list.length))return unlockUI(),void d.alert("TotalSummary"+e.label_list.length+"RecordsOnly","warning");e.totalDisplayed+=a,e.label_list.length<e.totalDisplayed&&(e.totalDisplayed=e.label_list.length,d.alert("TotalSummary"+e.label_list.length+"RecordsOnly","warning")),unlockUI()}unlockUI()}}angular.module("angle").controller("idasMstDocLabelSummaryController",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){lockUI(),e.totalDisplayed=100;var t="api/IdasMstDocList/GetDocumentList";r.get(t).then(function(t){e.documentation_list=t.data.IDASDocument,e.total=e.documentation_list.length,unlockUI()})}e.title="IdasMstDocListController",g(),document.getElementById("pagecount").onkeyup=function(){if(null==e.pagecount){var t=document.getElementById("loadmore");t.style.backgroundColor="#DCDCDC"}else{var t=document.getElementById("loadmore");t.style.backgroundColor="#ffa"}},e.exportdocumentdata=function(){lockUI();var t="api/IdasMstDocList/ExportDocument";r.get(t).then(function(t){1==t.data.status?(unlockUI(),_.Downloaddocument(t.data.lscloudpath,t.data.lsname)):(unlockUI(),s.alert("Error Occurred While Export !","success"),g())})},e.addDocument=function(t){function e(t,e){t.documentformSubmit=function(){void 0==t.comments&&(t.comments="");var a={document_name:t.documentListName,display_order:t.display_order,comments:t.comments};lockUI();var n="api/IdasMstDocList/PostCreationDocList";r.post(n,a).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),e.close("closed"),g()):(e.close("closed"),s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},t.ok=function(){e.close("closed")}}o.open({templateUrl:"/addDocumentModalContent.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.loadMore=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayed+=a,unlockUI()},e.editDocument=function(t){function e(e,a){var n={doclist_gid:t},o="api/IdasMstDocList/GetEditDocList";r.getparams(o,n).then(function(t){e.documentNameEdit=t.data.document_name,e.documentCodeEdit=t.data.document_code,e.commentsEdit=t.data.comments,e.displayOrderEdit=t.data.display_order}),e.close=function(){a.close("closed")},e.documentformUpdate=function(){lockUI();var n={document_name:e.documentNameEdit,comments:e.commentsEdit,display_order:e.displayOrderEdit,documentlist_gid:t},o="api/IdasMstDocList/PostUpdateDoc";r.post(o,n).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed"),unlockUI(),g()):(a.close("closed"),s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}o.open({templateUrl:"/editDocumentModalContent.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.deleteDocument=function(t){var e={doclist_gid:t};u.swal({title:"Are you sure?",text:"Do You Want To Delete the Document List ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasMstDocList/PostDocDelete";r.getparams(a,e).then(function(t){1==t.data.status?(g(),u.swal("Deleted Successfully!"),unlockUI()):(s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},e.commondocumentupload=function(t,a,n){for(var o in e.documentname);var i={name:t[0].name,file:t[0]},c=new FormData;c.append("fileupload",i.file),c.append("file_name",i.name),c.append("document_name",e.documentname),c.append("document_title",e.txtdocument_title),c.append("sanction_gid",sanction_gid),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasTrnSanctionDoc/CommonDocUpload";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if(e.txtdocument_title="",$("#commonupload").val(""),1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetCommonDoc",n={sanction_gid:sanction_gid};r.getparams(a,n).then(function(t){e.commondocument=t.data.uploaddocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.uploadTemplate=function(t){d.url("app/idasMstDocTemplate?documentlist_gid="+t)}}angular.module("angle").controller("IdasMstDocListController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l){function u(){var t={doclist_gid:e.documentlist_gid},a="api/IdasMstDocList/GetEditDocList";c.getparams(a,t).then(function(t){e.documentNameEdit=t.data.document_name,e.documentCodeEdit=t.data.document_code,e.template_contentEdit=t.data.template_content})}e.title="idasMstDocTemplateController";e.documentlist_gid=s.search().documentlist_gid,u(),e.updateTemplate=function(){if(""==e.template_contentEdit||null==e.template_contentEdit||void 0==e.template_contentEdit)r.alert("Kindly Enter Template Content","warning");else{var t={template_content:e.template_contentEdit,documentlist_gid:e.documentlist_gid},n="api/IdasMstDocList/PostDocTemplate";lockUI(),c.post(n,t).then(function(t){unlockUI(),1==t.data.status?(a.go("app.idasMstDocList"),r.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):r.alert(t.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})}},e.back=function(){a.go("app.idasMstDocList")}}angular.module("angle").controller("idasMstDocTemplateController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l){function u(){var t="api/idasMstTemplate/GetTemplateType";c.get(t).then(function(t){e.cbotemplatetype_list=t.data.templatetype_list}),lockUI();var t="api/idasMstTemplate/GetTemplateDtl",a={template_gid:e.template_gid};c.getparams(t,a).then(function(t){unlockUI(),e.template_name=t.data.template_name,e.templatetype_gid=t.data.templatetype_gid,e.templatetype_name=t.data.templatetype_name,e.content=t.data.template_content})}e.title="idasMstEditTemplateController";e.template_gid=s.search().template_gid,u(),e.titleOptions={placeholderText:"Add a Title",charCounterCount:!1,toolbarInline:!0,events:{contentChanged:function(t,a){console.log("content changed",e.titleOptions.froalaEditor.html.get())},initialized:function(t){console.log("initialized",this)}}},e.initialize=function(t){e.initControls=t,e.deleteAll=function(){t.getEditor().html.set("34434")}},e.imgModel={src:"image.jpg"},e.buttonModel={innerHTML:"Click Me"},e.inputModel={placeholder:"I am an input!"},e.inputOptions={angularIgnoreAttrs:["class","ng-model","id","froala"]},e.initializeLink=function(t){e.linkInitControls=t},e.linkModel={href:"https://www.froala.com/wysiwyg-editor"},e.updateTemplate=function(){var t=$("#templatetype_name :selected").text(),n={template_gid:e.template_gid,template_name:e.template_name,templatetype_name:t,template_content:e.content},o="api/idasMstTemplate/IdasUpdateTemplate";c.post(o,n).then(function(t){1==t.data.status?(a.go("app.idasMstTemplateSummary"),r.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):r.alert(t.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.back=function(){a.go("app.idasMstTemplateSummary")}}angular.module("angle").controller("idasMstEditTemplateController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){e.customer2sanction_gid=localStorage.getItem("customer2sanction_gid"),lockUI();var t="api/IdasMstSanction/historysanctionref_no",a={customer2sanction_gid:e.customer2sanction_gid};r.getparams(t,a).then(function(t){unlockUI(),e.lblcustomer_name=t.data.customer_name,e.lblcustomer_urn=t.data.customer_urn,e.historySanctionDtlsEdit=t.data.historySanctionDtlsEdit,console.log(t.data.historySanctionDtlsEdit)})}e.title="idasMsthistorysanctionrefno",_(),e.back=function(t){a.go("app.IdasMstSanctionReset")}}angular.module("angle").controller("idasMsthistorysanctionrefno",t),
t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){g.calender1=function(t){t.preventDefault(),t.stopPropagation(),g.open1=!0},g.dateOptions={formatYear:"yy",startingDay:1},g.calenderEdit=function(t){t.preventDefault(),t.stopPropagation(),g.openEdit=!0},g.dateOptionsEdit={formatYear:"yy",startingDay:1},g.formats=["dd-MM-yyyy"],g.format=g.formats[0];var t="api/customer/customer";r.get(t).then(function(t){e.customer_list=t.data.customer_list});var t="api/employee/employee";r.get(t).then(function(t){e.employee_list=t.data.employee_list});var t="api/loan/loan_list";r.get(t).then(function(t){e.loan_list=t.data.loanmasterdtls})}var g=this;g.title="idasMstSanction";var f,v;_(),e.onselectedchangecustomer=function(t){var a={customer_gid:t},n="api/loan/customer_getheads";r.getparams(n,a).then(function(t){e.mdlheadsofcustomer=t.data,e.zonalHead=t.data.zonalGid,e.businessHead=t.data.businessHeadGid,e.clustermanager=t.data.clustermanagerGid,e.relationshipMgmt=t.data.relationshipMgmtGid,e.creditmgmt_name=t.data.creditmanager_gid,e.vertical_code=t.data.vertical_code,f=t.data.vertical_gid,v=t.data.vertical_code})},e.amountschange=function(){var t,a=document.getElementById("txtInput").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=Number(o).toLocaleString("en-US");e.txtSanctionAmount=i},e.sanctionSubmit=function(){var t,n=e.txtSanctionAmount,o=n.split(",");for(t=0;t<o.length;t++){var i=n.replace(",","");n=i}var c=$("#facility_type :selected").text(),d=$("#customername :selected").text(),l=$("#zonal_name :selected").text(),u=$("#businesshead_name :selected").text(),m=$("#relationshipmgmt_name :selected").text(),p=$("#cluster_manager_name :selected").text(),g=$("#creditmanager_name :selected").text(),h=($("#facility_type:selected").text(),{sanction_refno:e.sanctionrefno,sanction_amount:n,sanction_date:e.txtSanctionDate,customer_gid:e.customer,customername:d,vertical_gid:f,vertical_code:v,zonal_name:l,businesshead_name:u,relationshipmgmt_name:m,cluster_manager_name:p,creditmanager_name:g,zonalGid:e.zonalHead,businessHeadGid:e.businessHead,relationshipMgmtGid:e.relationshipMgmt,clustermanagerGid:e.clustermanager,creditmanagerGid:e.creditmgmt_name,facility_type:c,facilitytype_gid:e.facility_type,collateral:e.collateral}),y="api/IdasMstSanction/CreateSanction";lockUI(),r.post(y,h).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success"),a.go("app.idasMstSanctionSummary")):(unlockUI(),s.alert(t.data.message)),_()})},e.sanctionback=function(t){a.go("app.idasMstSanctionSummary")}}angular.module("angle").controller("idasMstSanction",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g){function f(){var t=window.location.href,a=t.split("lstab=");e.relpath1=a[1],e.uploaddclickdiv=!0,e.uploadMOMclickdiv=!0,e.bal_pnl=!1,e.warningfacility_amount=!0,e.existing_customer=!0,e.amount_validation=!0,e.facility_pnl=!1,e.addfacility_pnl=!0,e.panel=!0,e.panel1=!0,e.warningfacility_amount=!0,e.amount_validation=!0,e.interchangeabilityno=!1,e.interchangeabilityyes=!1,e.onchangefacility=!1,e.colandingyes=!1,e.sanction_validation=!1,e.warningcbomember=!0,e.warningcbofacility=!0,e.mandatoryfields=!1,e.validitymonth=!1,x.calenderEdit=function(t){t.preventDefault(),t.stopPropagation(),x.openEdit=!0},x.calender2=function(t){t.preventDefault(),t.stopPropagation(),x.open2=!0},x.calender3=function(t){t.preventDefault(),t.stopPropagation(),x.open3=!0},x.dateOptionsEdit={formatYear:"yy",startingDay:1},x.formats=["dd-MM-yyyy"],x.format=x.formats[0],e.cboloanfacility_typeedit=[],e.cbocc_membersedit=[];var t="api/entity/Entity";s.get(t).then(function(t){e.entity_list=t.data.entity_list});var t="api/loan/loan_list";s.get(t).then(function(t){e.loan_list=t.data.loanmasterdtls});var t="api/IdasTrnLsaManagement/loanfacility";s.get(t).then(function(t){e.loanfacility_list=t.data.loanfacility_list});var t="api/employee/employee";s.get(t).then(function(t){e.employee_list=t.data.employee_list});var t="api/MstCCMember/Getccgroup";s.get(t).then(function(t){e.ccgroup_list=t.data.ccgroup_list}),w=localStorage.getItem("sanction_gid");var t="api/IdasMstSanction/SanctionDtlsEdit",n={sanction_gid:w};lockUI(),s.getparams(t,n).then(function(t){e.sanctionrefnoEdit=t.data.sanction_refno,e.SanctionDateEdit=t.data.sanctionDate,e.SanctionAmountEdit=t.data.sanction_amount,e.FacilityTypeEdit=t.data.facilitytype_gid,e.customerNameEdit=t.data.customername,e.CustomerurnEdit=t.data.customer_urn,e.collateralEdit=t.data.collateral_security,e.zonalHeadNameEdit=t.data.zonal_name,e.businessHeadNameEdit=t.data.businesshead_name,e.clusterManagerEdit=t.data.cluster_manager_name,e.creditManagerEdit=t.data.creditmanager_name,e.relationshipmgmtEdit=t.data.relationshipmgmt_name,e.verticalCodeEdit=t.data.vertical,e.txtSanctionLimit=t.data.sanction_limit,e.txtpurpose_lendingedit=t.data.purpose_lending,e.rdbfacility_typeedit=t.data.facility_secure_type,e.txtproduct_solutionedit=t.data.product_solution,e.txtmajor_interventionedit=t.data.major_intervention,e.txtprimaryvalue_chainedit=t.data.primary_value_chain,e.txtsecondaryvalue_chainedit=t.data.secondary_value_chain,e.customer2security_list=t.data.customersecurity_list,e.filename_list=t.data.UploadgeneralDocumentList,e.sanction_branch_gid=t.data.sanction_branch_gid,e.sanction_branch_name=t.data.sanction_branch_name,e.sanction_state_name=t.data.sanction_state_name,e.sanction_state_gid=t.data.sanction_state_gid,e.sanctionfilename_list=t.data.UploadSANDocumentList,e.MOMfilename_list=t.data.UploadMOMDocumentList,e.CAMfilename_list=t.data.UploadCOMDocumentList,e.buyer_list=t.data.buyer_list,e.rdb_bal=t.data.status_ofBAL,e.txtvirtualaccount_no=t.data.virtual_accountno,e.txtexternalratingedit=t.data.external_rating,e.txtbusiness_descriptionedit=t.data.business_description,e.txtassociate_nameedit=t.data.associate_name,e.txtsapayoutedit=t.data.sa_payout,e.txttypeof_enterprisesedit=t.data.typeof_enterprise,e.txtrisk_categorizationedit=t.data.risk_categorization,e.txtes_applicationedit=t.data.es_application,e.txtesrisk_categorizationedit=t.data.esrisk_categorization,e.txtinternal_ratingedit=t.data.internal_rating,e.rdb_psl=t.data.status_ofPSL,e.msme_classification=t.data.msme_classification,e.txtindustryedit=t.data.industry,e.txtinvesment_pmedit=t.data.invesment_pme,e.txtturn_overedit=t.data.turn_over,e.txtregno_msmeedit=t.data.regno_msme,e.txtvalidity_monthsedit=t.data.validity_months,e.txtpenal_interestedit=t.data.penal_interest,e.rdbdeclaration=t.data.esdeclaration_status,e.uploadesfilename_list=t.data.UploadES_DocumentList,e.mailfilename_list=t.data.DeviationMail_DocumentList,"Yes"==t.data.status_ofBAL?e.bal_pnl=!0:e.bal_pnl=!1,"Yes"==t.data.colanding_status?e.colandingyes=!0:e.colandingyes=!1,"Yes"==t.data.esdeclaration_status&&(e.esdeclarationyes=!0,e.esdeclarationno=!1),"No"==t.data.esdeclaration_status&&(e.esdeclarationyes=!1,e.esdeclarationno=!0),e.cboapproved_byedit=t.data.ccapprovedby_gid,e.cbocc_decisionedit=t.data.ccdecision,e.txtccfeedbackedit=t.data.ccfeedback,e.txtgeneral_remarksedit=t.data.general_remarks,e.mdlccmember=t.data.mdlccmember,e.loanfacilitytype_list=t.data.loanfacilitytype_list,console.log(t.data.loanfacilitytype_list),"0001-01-01T00:00:00"!=t.data.ccapprovedDate&&(e.txtapproveddateedit=t.data.ccapprovedDate),e.rdbsanction_type=t.data.sanction_type,"Existing Customer"==t.data.sanction_type?e.existing_customer=!0:e.existing_customer=!1,e.cbonature_proposal=t.data.natureof_proposal,e.rdbcolanding=t.data.colanding_status,e.txtcolander_name=t.data.colander_name,e.cboentity_type=t.data.entity_gid,e.rdbpaycard=t.data.paycard});var t="api/IdasMstSanction/GetPenalInterest";s.getparams(t,n).then(function(t){e.penal_interest=t.data.loanfacilitytype_list});var t="api/customer/state";s.get(t).then(function(t){e.state_list=t.data.state_list});var t="api/IdasTrnLsaManagement/branch";s.get(t).then(function(t){e.branch_list=t.data.branch_list});var t="api/IdasMstSanction/tempdelete";s.getparams(t,n).then(function(t){}),unlockUI();var t="api/IdasMstSanction/editvalidation";s.getparams(t,n).then(function(t){"0"==t.data.totalloanfacility_amount||""==t.data.totalloanfacility_amount?e.totalloanfacilityamount="0,0":e.totalloanfacilityamount=t.data.totalloanfacility_amount,""==t.data.total_documentlimit||"0"==t.data.total_documentlimit?e.totaldocumentlimitamount="0,0":e.totaldocumentlimitamount=t.data.total_documentlimit,e.interchangeability_amount=t.data.interchangeability_amount})}function v(t){var e=["","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ","Eleven ","Twelve ","Thirteen ","Fourteen ","Fifteen ","Sixteen ","Seventeen ","Eighteen ","Nineteen "],a=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],n=t.toString();if(n=n.replace(/[\, ]/g,""),n!=parseFloat(n))return"";if((t=t.toString()).length>9)return"Overflow";var o=("000000000"+t).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(o){var i="";return i+=0!=o[1]?(e[Number(o[1])]||a[o[1][0]]+" "+e[o[1][1]])+"Crore ":"",i+=0!=o[2]?(e[Number(o[2])]||a[o[2][0]]+" "+e[o[2][1]])+"Lakh ":"",i+=0!=o[3]?(e[Number(o[3])]||a[o[3][0]]+" "+e[o[3][1]])+"Thousand ":"",i+=0!=o[4]?(e[Number(o[4])]||a[o[4][0]]+" "+e[o[4][1]])+"Hundred ":"",i+=0!=o[5]?(""!=i?"and ":"")+(e[Number(o[5])]||a[o[5][0]]+" "+e[o[5][1]])+"only ":""}}function h(){var t={sanction_gid:w},a="api/IdasMstSanction/Getgeneraldocment";s.getparams(a,t).then(function(t){e.filename_list=t.data.UploadDocumentList})}function y(){var t={sanction_gid:w},a="api/IdasMstSanction/Getcamdocment";s.getparams(a,t).then(function(t){e.CAMfilename_list=t.data.UploadDocumentList})}function I(){var t={sanction_gid:w},a="api/IdasMstSanction/Getmomdocment";s.getparams(a,t).then(function(t){e.MOMfilename_list=t.data.UploadMOMDocumentList})}function k(){var t={sanction_gid:w},a="api/IdasMstSanction/GetEditsanctionletter";s.getparams(a,t).then(function(t){e.sanctionfilename_list=t.data.UploadSANDocumentList})}function b(){var t="api/IdasMstSanction/GetBuyerinfoEdit",a={sanction_gid:w};s.getparams(t,a).then(function(t){e.buyer_list=t.data.buyer_list})}function D(){var t="api/IdasMstSanction/Editccmember",a={sanction_gid:w};s.getparams(t,a).then(function(t){e.mdlccmember=t.data.mdlccmember})}function S(){var t={sanction_gid:w},a="api/IdasMstSanction/GetPenalInterest";s.getparams(a,t).then(function(t){e.penal_interest=t.data.loanfacilitytype_list});var t={sanction_gid:w},a="api/IdasMstSanction/EditLoanfacilitytype";s.getparams(a,t).then(function(t){e.loanfacilitytype_list=t.data.loanfacilitytype_list});var a="api/IdasTrnLsaManagement/loanfacility";s.get(a).then(function(t){e.loanfacility_list=t.data.loanfacility_list})}var x=this;x.title="idasMstSanctionEdit";var w;f(),e.sanctionback=function(t){l.url("app/idasMstSanctionSummary?lstab="+t)},e.sanctiontype_existing=function(){e.existing_customer=!0},e.sanctiontype_new=function(){e.existing_customer=!1},e.interchangeability_yes=function(){e.interchangeabilityno=!1,e.interchangeabilityyes=!0,e.mandatoryfields=!1},e.interchangeability_no=function(){e.interchangeabilityno=!0,e.interchangeabilityyes=!1,e.mandatoryfields=!1},e.rdbcolanding_yes=function(){e.colandingyes=!0},e.rdbcolanding_no=function(){e.colandingyes=!1},e.rdbdeclaration_yes=function(){e.esdeclarationyes=!0,e.esdeclarationno=!1},e.rdbdeclaration_no=function(){e.esdeclarationyes=!1,e.esdeclarationno=!0},e.amountschange=function(){var t=document.getElementById("txtInput").value,a=t.replace(/,/g,""),n=Number(a).toLocaleString("en-IN"),o=v(a);"NaN"==n?(d.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.SanctionAmountEdit=""):(document.getElementById("sanctionamount_words").innerHTML=o,e.SanctionAmountEdit=n)},e.sanctionUpdate=function(t){var a=parseInt(e.SanctionAmountEdit.replace(/[\s,]+/g,"").trim()),n=parseInt(e.totalloanfacilityamount.replace(/[\s,]+/g,"").trim()),o=parseInt(e.interchangeability_amount.replace(/[\s,]+/g,"").trim());if("Existing Customer"==e.rdbsanction_type)if(""==e.cbonature_proposal||null==e.cbonature_proposal)d.alert("Kindly Select Nature of Proposal","warning");else if(a<n+o)d.alert("Loan Facility Amount is exceeded from Sanction Amount","warning");else{var i="api/IdasMstSanction/editmandatory_check",c={sanction_gid:w,esdeclaration_status:e.rdbdeclaration};s.getparams(i,c).then(function(a){if(1==a.data.status)if("FPO"==e.verticalCodeEdit)if(""==e.rdbpaycard||void 0==e.rdbpaycard)d.alert("Kindly Select Paycard value");else{var n,o=e.SanctionAmountEdit,i=o.split(",");for(n=0;n<i.length;n++){var c=o.replace(",","");o=c}var r=$("#FacilityType_Edit :selected").text(),u=$("#branch_name :selected").text(),m=$("#state_name :selected").text(),p=$("#ccgroup_name :selected").text(),_={sanction_refno:e.sanctionrefnoEdit,sanction_amount:o,sanction_date:e.SanctionDateEdit,facility_type:r,facilitytype_gid:e.FacilityTypeEdit,collateral_security:e.collateralEdit,vertical:e.verticalCodeEdit,customer2sanction_gid:w,purpose_lending:e.txtpurpose_lendingedit,facility_secure_type:e.rdbfacility_typeedit,product_solution:e.txtproduct_solutionedit,major_intervention:e.txtmajor_interventionedit,primary_value_chain:e.txtprimaryvalue_chainedit,secondary_value_chain:e.txtsecondaryvalue_chainedit,sanction_branch_name:u,sanction_state_name:m,sanction_branch_gid:e.sanction_branch_gid,sanction_state_gid:e.sanction_state_gid,virtual_accountno:e.txtvirtualaccount_no,status_ofBAL:e.rdb_bal,ccmember_listedit:e.cbocc_membersedit,ccapprovedby_gid:e.cboapproved_byedit,ccapproved_by:p,ccapproved_date:e.txtapproveddateedit,ccdecision:e.cbocc_decisionedit,ccfeedback:e.txtccfeedbackedit,general_remarks:e.txtgeneral_remarksedit,colanding_status:e.rdbcolanding,colander_name:e.txtcolander_name,sanction_type:e.rdbsanction_type,natureof_proposal:e.cbonature_proposal,entity:e.cboentity_type,external_rating:e.txtexternalratingedit,business_description:e.txtbusiness_descriptionedit,associate_name:e.txtassociate_nameedit,sa_payout:e.txtsapayoutedit,typeof_enterprise:e.txttypeof_enterprisesedit,risk_categorization:e.txtrisk_categorizationedit,es_application:e.txtes_applicationedit,esrisk_categorization:e.txtesrisk_categorizationedit,internal_rating:e.txtinternal_ratingedit,status_ofPSL:e.rdb_psl,msme_classification:e.msme_classification,industry:e.txtindustryedit,invesment_pme:e.txtinvesment_pmedit,turn_over:e.txtturn_overedit,regno_msme:e.txtregno_msmeedit,validity_months:e.txtvalidity_monthsedit,penal_interest:e.txtpenal_interestedit,paycard:e.rdbpaycard};console.log(p);var g="api/IdasMstSanction/UpdateSanction";lockUI(),s.post(g,_).then(function(e){1==e.data.status?(unlockUI(),d.alert(e.data.message,"success"),l.url("app/idasMstSanctionSummary?lstab="+t)):(unlockUI(),d.alert(e.data.message)),f()})}else{var n,o=e.SanctionAmountEdit,i=o.split(",");for(n=0;n<i.length;n++){var c=o.replace(",","");o=c}var r=$("#FacilityType_Edit :selected").text(),u=$("#branch_name :selected").text(),m=$("#state_name :selected").text(),p=$("#ccgroup_name :selected").text(),_={sanction_refno:e.sanctionrefnoEdit,sanction_amount:o,sanction_date:e.SanctionDateEdit,facility_type:r,facilitytype_gid:e.FacilityTypeEdit,collateral_security:e.collateralEdit,vertical:e.verticalCodeEdit,customer2sanction_gid:w,purpose_lending:e.txtpurpose_lendingedit,facility_secure_type:e.rdbfacility_typeedit,product_solution:e.txtproduct_solutionedit,major_intervention:e.txtmajor_interventionedit,primary_value_chain:e.txtprimaryvalue_chainedit,secondary_value_chain:e.txtsecondaryvalue_chainedit,sanction_branch_name:u,sanction_state_name:m,sanction_branch_gid:e.sanction_branch_gid,sanction_state_gid:e.sanction_state_gid,virtual_accountno:e.txtvirtualaccount_no,status_ofBAL:e.rdb_bal,ccmember_listedit:e.cbocc_membersedit,ccapprovedby_gid:e.cboapproved_byedit,ccapproved_by:p,ccapproved_date:e.txtapproveddateedit,ccdecision:e.cbocc_decisionedit,ccfeedback:e.txtccfeedbackedit,general_remarks:e.txtgeneral_remarksedit,colanding_status:e.rdbcolanding,colander_name:e.txtcolander_name,sanction_type:e.rdbsanction_type,natureof_proposal:e.cbonature_proposal,entity:e.cboentity_type,external_rating:e.txtexternalratingedit,business_description:e.txtbusiness_descriptionedit,associate_name:e.txtassociate_nameedit,sa_payout:e.txtsapayoutedit,typeof_enterprise:e.txttypeof_enterprisesedit,risk_categorization:e.txtrisk_categorizationedit,es_application:e.txtes_applicationedit,esrisk_categorization:e.txtesrisk_categorizationedit,internal_rating:e.txtinternal_ratingedit,status_ofPSL:e.rdb_psl,msme_classification:e.msme_classification,industry:e.txtindustryedit,invesment_pme:e.txtinvesment_pmedit,turn_over:e.txtturn_overedit,regno_msme:e.txtregno_msmeedit,validity_months:e.txtvalidity_monthsedit,penal_interest:e.txtpenal_interestedit,paycard:e.rdbpaycard,esdeclaration_status:e.rdbdeclaration};console.log(p);var g="api/IdasMstSanction/UpdateSanction";lockUI(),s.post(g,_).then(function(e){1==e.data.status?(unlockUI(),d.alert(e.data.message,"success"),l.url("app/idasMstSanctionSummary?lstab="+t)):(unlockUI(),d.alert(e.data.message)),f()})}else d.alert(a.data.message,"warning")})}else if(a<n+o)d.alert("Loan Facility Amount is exceeded from Sanction Amount","warning");else{var i="api/IdasMstSanction/editmandatory_check",c={sanction_gid:w,esdeclaration_status:e.rdbdeclaration};s.getparams(i,c).then(function(a){if(1==a.data.status)if("FPO"==e.verticalCodeEdit)if(""==e.rdbpaycard||void 0==e.rdbpaycard)d.alert("Kindly Select Paycard value");else{var n,o=e.SanctionAmountEdit,i=o.split(",");for(n=0;n<i.length;n++){var c=o.replace(",","");o=c}var r=$("#FacilityType_Edit :selected").text(),u=$("#branch_name :selected").text(),m=$("#state_name :selected").text(),p=$("#ccgroup_name :selected").text(),_={sanction_refno:e.sanctionrefnoEdit,sanction_amount:o,sanction_date:e.SanctionDateEdit,facility_type:r,facilitytype_gid:e.FacilityTypeEdit,collateral_security:e.collateralEdit,vertical:e.verticalCodeEdit,customer2sanction_gid:w,purpose_lending:e.txtpurpose_lendingedit,facility_secure_type:e.rdbfacility_typeedit,product_solution:e.txtproduct_solutionedit,major_intervention:e.txtmajor_interventionedit,primary_value_chain:e.txtprimaryvalue_chainedit,secondary_value_chain:e.txtsecondaryvalue_chainedit,sanction_branch_name:u,sanction_state_name:m,sanction_branch_gid:e.sanction_branch_gid,sanction_state_gid:e.sanction_state_gid,virtual_accountno:e.txtvirtualaccount_no,status_ofBAL:e.rdb_bal,ccmember_listedit:e.cbocc_membersedit,ccapprovedby_gid:e.cboapproved_byedit,ccapproved_date:e.txtapproveddateedit,ccdecision:e.cbocc_decisionedit,ccfeedback:e.txtccfeedbackedit,general_remarks:e.txtgeneral_remarksedit,colanding_status:e.rdbcolanding,colander_name:e.txtcolander_name,sanction_type:e.rdbsanction_type,natureof_proposal:e.cbonature_proposal,entity:e.cboentity_type,external_rating:e.txtexternalratingedit,business_description:e.txtbusiness_descriptionedit,associate_name:e.txtassociate_nameedit,sa_payout:e.txtsapayoutedit,typeof_enterprise:e.txttypeof_enterprisesedit,risk_categorization:e.txtrisk_categorizationedit,es_application:e.txtes_applicationedit,esrisk_categorization:e.txtesrisk_categorizationedit,internal_rating:e.txtinternal_ratingedit,status_ofPSL:e.rdb_psl,msme_classification:e.msme_classification,industry:e.txtindustryedit,invesment_pme:e.txtinvesment_pmedit,turn_over:e.txtturn_overedit,regno_msme:e.txtregno_msmeedit,validity_months:e.txtvalidity_monthsedit,penal_interest:e.txtpenal_interestedit,paycard:e.rdbpaycard,esdeclaration_status:e.rdbdeclaration,ccapproved_by:p};console.log(p);var g="api/IdasMstSanction/UpdateSanction";lockUI(),s.post(g,_).then(function(e){1==e.data.status?(unlockUI(),d.alert(e.data.message,"success"),l.url("app/idasMstSanctionSummary?lstab="+t)):(unlockUI(),d.alert(e.data.message)),f()})}else{var n,o=e.SanctionAmountEdit,i=o.split(",");for(n=0;n<i.length;n++){var c=o.replace(",","");o=c}var r=$("#FacilityType_Edit :selected").text(),u=$("#branch_name :selected").text(),m=$("#state_name :selected").text(),p=$("#ccgroup_name :selected").text(),_={sanction_refno:e.sanctionrefnoEdit,sanction_amount:o,sanction_date:e.SanctionDateEdit,facility_type:r,facilitytype_gid:e.FacilityTypeEdit,collateral_security:e.collateralEdit,vertical:e.verticalCodeEdit,customer2sanction_gid:w,purpose_lending:e.txtpurpose_lendingedit,facility_secure_type:e.rdbfacility_typeedit,product_solution:e.txtproduct_solutionedit,major_intervention:e.txtmajor_interventionedit,primary_value_chain:e.txtprimaryvalue_chainedit,secondary_value_chain:e.txtsecondaryvalue_chainedit,sanction_branch_name:u,sanction_state_name:m,sanction_branch_gid:e.sanction_branch_gid,sanction_state_gid:e.sanction_state_gid,virtual_accountno:e.txtvirtualaccount_no,status_ofBAL:e.rdb_bal,ccmember_listedit:e.cbocc_membersedit,ccapprovedby_gid:e.cboapproved_byedit,ccapproved_date:e.txtapproveddateedit,ccdecision:e.cbocc_decisionedit,ccfeedback:e.txtccfeedbackedit,general_remarks:e.txtgeneral_remarksedit,colanding_status:e.rdbcolanding,colander_name:e.txtcolander_name,sanction_type:e.rdbsanction_type,natureof_proposal:e.cbonature_proposal,entity:e.cboentity_type,external_rating:e.txtexternalratingedit,business_description:e.txtbusiness_descriptionedit,associate_name:e.txtassociate_nameedit,sa_payout:e.txtsapayoutedit,typeof_enterprise:e.txttypeof_enterprisesedit,risk_categorization:e.txtrisk_categorizationedit,es_application:e.txtes_applicationedit,esrisk_categorization:e.txtesrisk_categorizationedit,internal_rating:e.txtinternal_ratingedit,status_ofPSL:e.rdb_psl,msme_classification:e.msme_classification,industry:e.txtindustryedit,invesment_pme:e.txtinvesment_pmedit,turn_over:e.txtturn_overedit,regno_msme:e.txtregno_msmeedit,validity_months:e.txtvalidity_monthsedit,penal_interest:e.txtpenal_interestedit,paycard:e.rdbpaycard,esdeclaration_status:e.rdbdeclaration,ccapproved_by:p};console.log(p);var g="api/IdasMstSanction/UpdateSanction";lockUI(),s.post(g,_).then(function(e){1==e.data.status?(unlockUI(),d.alert(e.data.message,"success"),l.url("app/idasMstSanctionSummary?lstab="+t)):(unlockUI(),d.alert(e.data.message)),f()})}else d.alert(a.data.message,"warning")})}},e.upload=function(t,a,n){if(null==e.document_type||""==e.document_type||void 0==e.document_type)$("#addupload").val(""),d.alert("Kindly Enter the Document Title","warning");else{var o={name:t[0].name,file:t[0]},i=g.fnCheckValidDocType(t[0].name,"");if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_type",e.document_type),c.append("project_flag","Default"),e.uploadfrm=c;var r="api/IdasMstSanction/Editgeneraldocument";lockUI(),s.postFile(r,e.uploadfrm).then(function(t){$("#addupload").val(""),1==t.data.status?(unlockUI(),e.document_type="",e.showdiv=!0,e.hidediv=!1,d.alert(t.data.message,"success")):(unlockUI(),d.alert(t.data.message)),h()})}},e.deleteCAM=function(t,a){var n={document_gid:t},o="api/IdasMstSanction/camdoc_delete";s.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.CAMfilename_list,function(a,n){a.document_gid==t&&e.CAMfilename_list.splice(n,1)}),d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):d.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.deleteMOM=function(t,a){var n={document_gid:t},o="api/IdasMstSanction/momdoc_delete";s.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.MOMfilename_list,function(a,n){a.document_gid==t&&e.MOMfilename_list.splice(n,1)}),d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):d.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.sandocument_cancelclick=function(t,a){var n={document_gid:t},o="api/IdasMstSanction/sanctionletter_delete";s.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.sanctionfilename_list,function(a,n){a.document_gid==t&&e.sanctionfilename_list.splice(n,1)}),d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):d.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.document_cancelclick=function(t,a){var n={document_gid:t},o="api/IdasMstSanction/documentdelete";s.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.filename_list,function(a,n){a.document_gid==t&&e.filename_list.splice(n,1)}),d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):d.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.uploadclick=function(){e.uploadddiv=!0,e.uploaddclickdiv=!1},e.cancelupload=function(){e.uploadddiv=!1,e.uploaddclickdiv=!0,$("#addupload").val("")},e.uploadclickMOM=function(){e.uploadMOMdiv=!0,e.uploadMOMclickdiv=!1},e.cancelMOMupload=function(){e.uploadMOMdiv=!1,e.uploadMOMclickdiv=!0,$("#addupload").val("")},e.uploadCAM_doc=function(t,a,n){if(null==e.CAMdocument_type||""==e.CAMdocument_type||void 0==e.CAMdocument_type)$("#addCAMupload").val(""),d.alert("Kindly Enter the Document Title","warning");else{var o={name:t[0].name,file:t[0]},i=g.fnCheckValidDocType(t[0].name,"");if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_type",e.CAMdocument_type),c.append("project_flag","Default"),e.uploadfrm=c;var r="api/IdasMstSanction/EditCAMddocument";lockUI(),s.postFile(r,e.uploadfrm).then(function(t){$("#addCAMupload").val(""),1==t.data.status?(e.CAMdocument_type="",unlockUI(),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),y()):(unlockUI(),d.alert("File Format Not Supported!",{status:"info",pos:"top-center",timeout:3e3}))})}},e.uploadMOM_doc=function(t,a,n){if(null==e.MOMdocument_type||""==e.MOMdocument_type||void 0==e.MOMdocument_type)$("#addMOMupload").val(""),d.alert("Kindly Enter the Document Title","warning");else{var o={name:t[0].name,file:t[0]},i=g.fnCheckValidDocType(t[0].name,"");if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_type",e.MOMdocument_type),c.append("project_flag","Default"),e.uploadfrm=c;var r="api/IdasMstSanction/EditMOMddocument";lockUI(),s.postFile(r,e.uploadfrm).then(function(t){$("#addMOMupload").val(""),e.MOMfilename_list=t.data.UploadMOMDocumentList,unlockUI(),1==t.data.status?(e.MOMdocument_type="",d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),I()):d.alert("File Format Not Supported!",{status:"info",pos:"top-center",timeout:3e3})})}},e.sanupload=function(t,a,n){if(null==e.SANdocument_type||""==e.SANdocument_type||void 0==e.SANdocument_type)$("#addSANupload").val(""),d.alert("Kindly Enter the Document Title","warning");else{var o={name:t[0].name,file:t[0]},i=g.fnCheckValidDocType(t[0].name,"");if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_type",e.SANdocument_type),c.append("project_flag","Default"),e.uploadfrm=c;var r="api/IdasMstSanction/Uploadsanctionletter";lockUI(),s.postFile(r,e.uploadfrm).then(function(t){1==t.data.status?($("#addSANupload").val(""),unlockUI(),e.SANdocument_type="",e.showdiv=!0,e.hidediv=!1,d.alert(t.data.message,"success")):(unlockUI(),d.alert(t.data.message)),k()})}},e.downloadsCAM=function(t,e){_.Downloaddocument(t,e)},e.downloadsMOM=function(t,e){_.Downloaddocument(t,e)},e.downloadsanctionletter=function(t,e){_.Downloaddocument(t,e)},e.downloadsgeneral=function(t,e){_.Downloaddocument(t,e)},e.addbuyer=function(){function t(t,e){t.txtbuyer_exposure=0,t.ok=function(){e.close("closed")},t.uploadBAL_doc=function(e,a,n){var o={name:e[0].name,file:e[0]},i=g.fnCheckValidDocType(e[0].name,"");if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("project_flag","Default"),t.uploadfrm=c},t.submit_buyer=function(){var a="api/IdasMstSanction/postBALdocument";s.postFile(a,t.uploadfrm).then(function(a){var n={buyer_name:t.txtbuyer_name,buyer_exposure:t.txtbuyer_exposure},o="api/IdasMstSanction/PostBuyerInfo";lockUI(),s.post(o,n).then(function(t){unlockUI(),1==t.data.status?(d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),b()):d.alert("File Format Not Supported!",{status:"info",pos:"top-center",timeout:3e3})}),e.close("closed")})}}n.open({templateUrl:"/addbuyer.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.rdbbal_yes=function(){e.bal_pnl=!0},e.rdbbal_no=function(){e.bal_pnl=!1},e.downloadsBAL=function(t,e){_.Downloaddocument(t,e)},e.delete_buyer=function(t,a){var n={buyer_gid:t},o="api/IdasMstSanction/buyerdelete";s.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.buyer_list,function(a,n){a.buyer_gid==t&&e.buyer_list.splice(n,1)}),d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):d.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.ccmember_add=function(){if(e.cbocc_members){e.warningcbomember=!0;var t={ccmember_gid:e.cbocc_members.ccmember_gid,ccmember_name:e.cbocc_members.CCMember_name,ccmember_remarks:e.txtccmember_remarks,ccgroup_name:e.cboccgroup_name.ccgroup_name,sanction_gid:w},a="api/IdasMstSanction/updateccmembers";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),e.txtccmember_remarks="",e.cbocc_members="",d.alert(t.data.message,"success"),D()):(unlockUI(),d.alert(t.data.message,"warning"))})}else e.warningcbomember=!1},e.deleteccmember=function(t){var e={ccmemberlist_gid:t},a="api/IdasMstSanction/deleteccmember";s.getparams(a,e).then(function(t){1==t.data.status?(unlockUI(),d.alert(t.data.message,"success"),D()):(unlockUI(),d.alert(t.data.message,"warning"))})},e.onselectedchangeccgroup=function(){var t={ccgroupname_gid:e.cboccgroup_name.ccgroupname_gid},a="api/MstCCMember/Getccgroup2member";s.getparams(a,t).then(function(t){e.ccmember_list=t.data.ccmember_list})},e.addloanfacilitytype=function(){var t={sanction_gid:w},a="api/IdasMstSanction/editvalidation";s.getparams(a,t).then(function(t){""==t.data.totalloanfacility_amount?e.totalloanfacilityamount="0,0":e.totalloanfacilit_amount=t.data.totalloanfacility_amount,""==t.data.total_documentlimit?e.totaldocumentlimit_amount="0,0":e.totaldocumentlimit_amount=t.data.total_documentlimit}),void 0==e.SanctionAmountEdit?(e.facility_pnl=!1,e.addfacility_pnl=!0,e.sanction_validation=!0):(e.facility_pnl=!0,e.addfacility_pnl=!1)},e.changevaliditymnt=function(t){void 0==e.txtvalidity_monthsedit?e.validitymonth=!0:e.validitymonth=!1},e.loanfacilitytype_add=function(){if(e.cboloanfacility_typeedit)if(e.warningcbofacility=!0,e.txtloanfacility_amount){e.warningcbofacility=!0,e.warningfacility_amount=!0;var t={loanfacility_gid:e.cboloanfacility_typeedit.loanmaster_gid,loanfacility_type:e.cboloanfacility_typeedit.loanTitle,loanfacility_amount:e.txtloanfacility_amount,sanction_amount:e.SanctionAmountEdit,totalloanfacility_amount:e.totalloanfacilityamount,total_documentlimit:e.totaldocumentlimit_amount},a="api/IdasMstSanction/postloanfacilitytype";lockUI(),s.post(a,t).then(function(t){if(1==t.data.status){unlockUI(),
e.cbofacility_type="",e.txtloanfacility_amount="",d.alert(t.data.message,"success"),S();var a={sanction_gid:w},n="api/IdasMstSanction/editvalidation";s.getparams(n,a).then(function(t){""==t.data.totalloanfacility_amount?e.totalloanfacility_amount="0,0":e.totalloanfacility_amount=t.data.totalloanfacility_amount})}else unlockUI(),d.alert(t.data.message,"warning")})}else e.warningfacility_amount=!1;else e.warningcbofacility=!1},e.onchangemandaotory=function(){e.mandatoryfields=!1},e.deleteloanfacility=function(t){var a={sanction2loanfacilitytype_gid:t},n="api/IdasMstSanction/deleteloanfacilitytype";s.getparams(n,a).then(function(t){if(1==t.data.status){unlockUI(),d.alert(t.data.message,"success");var a={sanction_gid:w},n="api/IdasMstSanction/editvalidation";s.getparams(n,a).then(function(t){""==t.data.totalloanfacility_amount?e.totalloanfacilityamount="0,0":e.totalloanfacilityamount=t.data.totalloanfacility_amount,""==t.data.total_documentlimit?e.totaldocumentlimitamount="0,0":e.totaldocumentlimitamount=t.data.total_documentlimit,e.interchangeability_amount=t.data.interchangeability_amount})}else unlockUI(),d.alert(t.data.message,"warning");S()})},e.addloanfacility=function(){if(void 0==e.txtloanfacility_amount||void 0==e.loanmaster_gid||void 0==e.txtdocument_limit||void 0==e.rdbrevolving||void 0==e.txtexpiry_date||void 0==e.rdbinterchangeability||""==e.rdbrevolving||""==e.rdbinterchangeability||""==e.txtexpiry_date||""==e.txtloanfacility_amount||""==e.txtdocument_limit||void 0==e.txtproposed_roi||""==e.txtproposed_roi)e.mandatoryfields=!0;else if(e.mandatoryfields=!1,"No"==e.rdbinterchangeability)if(void 0==e.cboapplicable_condition||""==e.cboapplicable_condition)e.mandatoryfields=!0;else{e.mandatoryfields=!1;var t={loanfacility_gid:e.loanmaster_gid.loanmaster_gid,loanfacility_type:e.loanmaster_gid.loan_title,loanfacility_amount:e.txtloanfacility_amount,sanction_amount:e.SanctionAmountEdit,totalloanfacility_amount:e.totalloanfacilityamount,margin:e.txtmargin,document_limit:e.txtdocument_limit,tenure:e.txttenure,revolving_type:e.rdbrevolving,expiry_date:e.txtexpiry_date,interchangeability:e.rdbinterchangeability,report_structure:e.$parent.cboreport_structure,total_documentlimit:e.totaldocumentlimitamount,customer2sanction_gid:w,applicable_condition:e.cboapplicable_condition,proposed_roi:e.txtproposed_roi},a="api/IdasMstSanction/updateloanfacilitytype";lockUI(),s.post(a,t).then(function(t){if(1==t.data.status){unlockUI(),e.loanmaster_gid.loanmaster_gid="",e.loanmaster_gid.loan_title="",e.txtloanfacility_amount="",e.txtproposed_roi="",e.totalloanfacility_amount="",e.txtmargin="",e.txtdocument_limit="",e.txttenure="",e.rdbrevolving="",e.txtexpiry_date="",e.rdbinterchangeability="",e.$parent.cboreport_structure="";var a={sanction_gid:w},n="api/IdasMstSanction/editvalidation";s.getparams(n,a).then(function(t){""==t.data.totalloanfacility_amount?e.totalloanfacilityamount="0,0":e.totalloanfacilityamount=t.data.totalloanfacility_amount,""==t.data.total_documentlimit?e.totaldocumentlimitamount="0,0":e.totaldocumentlimitamount=t.data.total_documentlimit,e.interchangeability_amount=t.data.interchangeability_amount})}else unlockUI(),d.alert(t.data.message,"warning");S(),e.facility_pnl=!1,e.addfacility_pnl=!0})}else if(void 0==e.cboreport_structure||""==e.cboreport_structure)e.mandatoryfields=!0;else{e.mandatoryfields=!1;var t={loanfacility_gid:e.loanmaster_gid.loanmaster_gid,loanfacility_type:e.loanmaster_gid.loan_title,loanfacility_amount:e.txtloanfacility_amount,sanction_amount:e.SanctionAmountEdit,totalloanfacility_amount:e.totalloanfacilityamount,margin:e.txtmargin,document_limit:e.txtdocument_limit,tenure:e.txttenure,revolving_type:e.rdbrevolving,expiry_date:e.txtexpiry_date,interchangeability:e.rdbinterchangeability,report_structure:e.$parent.cboreport_structure,total_documentlimit:e.totaldocumentlimitamount,customer2sanction_gid:w,applicable_condition:e.cboapplicable_condition,proposed_roi:e.txtproposed_roi},a="api/IdasMstSanction/updateloanfacilitytype";lockUI(),s.post(a,t).then(function(t){if(1==t.data.status){unlockUI(),e.loanmaster_gid.loanmaster_gid="",e.loanmaster_gid.loan_title="",e.txtloanfacility_amount="",e.txtproposed_roi="",e.totalloanfacility_amount="",e.txtmargin="",e.txtdocument_limit="",e.txttenure="",e.rdbrevolving="",e.txtexpiry_date="",e.rdbinterchangeability="",e.$parent.cboreport_structure="";var a={sanction_gid:w},n="api/IdasMstSanction/editvalidation";s.getparams(n,a).then(function(t){""==t.data.totalloanfacility_amount?e.totalloanfacilityamount="0,0":e.totalloanfacilityamount=t.data.totalloanfacility_amount,""==t.data.total_documentlimit?e.totaldocumentlimitamount="0,0":e.totaldocumentlimitamount=t.data.total_documentlimit,e.interchangeability_amount=t.data.interchangeability_amount})}else unlockUI(),d.alert(t.data.message,"warning");S(),e.facility_pnl=!1,e.addfacility_pnl=!0})}},e.loanfacilitycancel=function(){e.facility_pnl=!1,e.addfacility_pnl=!0,e.loanmaster_gid.loanmaster_gid="",e.loanmaster_gid.loan_title="",e.txtloanfacility_amount="",e.totalloanfacility_amount="",e.txtmargin="",e.txtdocument_limit="",e.txttenure="",e.rdbrevolving="",e.txtexpiry_date="",e.rdbinterchangeability="",e.$parent.cboreport_structure=""},e.cbofacility_msg=function(){e.warningcbofacility=!0},e.cbomember_msg=function(){e.warningcbomember=!0},e.facilitytype_amount=function(){var t,a=document.getElementById("txtInputloanfacility_type").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=Number(o).toLocaleString("en-IN"),c=v(o);"NaN"==i?(d.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtloanfacility_amount=""):(e.txtloanfacility_amount=i,e.warningfacility_amount=!0,document.getElementById("loanfacilityamount_words").innerHTML=c,e.SanctionAmountEdit.replace(/[\s,]+/g,"").trim()-e.totalloanfacilityamount.replace(/[\s,]+/g,"").trim()>=e.txtloanfacility_amount.replace(/[\s,]+/g,"").trim()?e.amount_validation=!0:e.amount_validation=!1),e.mandatoryfields=!1},e.documentlimitchange=function(){var t,a=document.getElementById("txtInput1").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=Number(o).toLocaleString("en-US"),c=v(o),r=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==i?(d.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtdocument_limit=""):(document.getElementById("documentlimitamount_words").innerHTML=c,e.txtdocument_limit=r,e.SanctionAmountEdit.replace(/[\s,]+/g,"").trim()-e.totaldocumentlimitamount.replace(/[\s,]+/g,"").trim()<e.txtdocument_limit.replace(/[\s,]+/g,"").trim()?e.panel1=!1:e.panel1=!0),e.mandatoryfields=!1},e.btnupdate=function(t,e,a){function o(n,o){n.loanfacility_type=a,n.loanfacilityref_no=e,n.ok=function(){o.close("closed")},n.UrnUpdate=function(){var e={sanction2loanfacilitytype_gid:t,proposed_roi:n.txtroi};lockUI();var a="api/IdasMstSanction/UpdateProposedROI";s.post(a,e).then(function(t){1==t.data.status?(d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),o.close("closed"),S()):(o.close("closed"),d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),S()),S()})}}n.open({templateUrl:"/updateROI.html",controller:o,size:"md"});o.$inject=["$scope","$modalInstance"]},e.uploades_declaration=function(t,a,n){if(null==e.es_declarationdocument_type||""==e.es_declarationdocument_type||void 0==e.es_declarationdocument_type)$("#adduploades_declaration").val(""),d.alert("Kindly Enter the Document Title","warning");else{var o={name:t[0].name,file:t[0]},i=g.fnCheckValidDocType(t[0].name,"");if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_type",e.es_declarationdocument_type),c.append("project_flag","Default"),e.uploadfrm=c;var r="api/IdasMstSanction/Uploades_declarationdocument";lockUI(),s.postFile(r,e.uploadfrm).then(function(t){if(1==t.data.status){$("#adduploades_declaration").val(""),unlockUI(),e.es_declarationdocument_type="";var a="api/IdasMstSanction/Getesdocument";s.get(a).then(function(t){e.uploadesfilename_list=t.data.UploadES_DocumentList}),d.alert(t.data.message,"success")}else unlockUI(),d.alert(t.data.message)})}},e.esdownloaddocument=function(t,e){_.Downloaddocument(t,e)},e.esdocument_cancelclick=function(t,a){var n={document_gid:t},o="api/IdasMstSanction/uploadesdocument_delete";s.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.uploadesfilename_list,function(a,n){a.document_gid==t&&e.uploadesfilename_list.splice(n,1)}),d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):d.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.deviationmailupload=function(t,a,n){if(null==e.deviationmaildocument_type||""==e.deviationmaildocument_type||void 0==e.deviationmaildocument_type)$("#addmailupload").val(""),d.alert("Kindly Enter the Document Title","warning");else{var o={name:t[0].name,file:t[0]},i=g.fnCheckValidDocType(t[0].name,"");if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_type",e.deviationmaildocument_type),c.append("project_flag","Default"),e.uploadfrm=c;var r="api/IdasMstSanction/Uploadmaildocument";lockUI(),s.postFile(r,e.uploadfrm).then(function(t){if(1==t.data.status){$("#addmailupload").val(""),unlockUI();var a="api/IdasMstSanction/GetMaildocument";s.get(a).then(function(t){e.mailfilename_list=t.data.DeviationMail_DocumentList}),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else unlockUI(),d.alert(t.data.message)})}},e.downloadmail=function(t,e){_.Downloaddocument(t,e)},e.maildocument_cancelclick=function(t,a){var n={document_gid:t},o="api/IdasMstSanction/Maildocument_delete";s.getparams(o,n).then(function(a){1==a.data.status?(angular.forEach(e.mailfilename_list,function(a,n){a.document_gid==t&&e.mailfilename_list.splice(n,1)}),d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3})):d.alert(a.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})}}angular.module("angle").controller("idasMstSanctionEdit",t),t.$inject=["$rootScope","$scope","$state","$modal","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f){function v(){lockUI();var t=window.location.href,a=t.split("lstab=");e.relpath1=a[1];var t="api/IdasMstSanction/SanctionDtlsEdit",n={sanction_gid:y};lockUI(),s.getparams(t,n).then(function(t){e.sanctionrefnoEdit=t.data.sanction_refno,e.SanctionDateEdit=t.data.sanctionDate,e.sanction_date=t.data.sanction_date,e.SanctionAmountEdit=t.data.sanction_amount,e.customerNameEdit=t.data.customername});var t="api/IdasMstSanction/GetTemplate_list";s.get(t).then(function(t){e.template_list=t.data.template_list});var t="api/IdasMstSanction/GetTemplateDetails";s.getparams(t,n).then(function(t){e.sanctionletter_status=t.data.sanctionletter_status,e.template_name=t.data.template_name,e.content=t.data.template_content,e.sanctionletter_flag=t.data.sanctionletter_flag,e.checkerpushback_remarks=t.data.checkerpushback_remarks,unlockUI(),"Generated"==t.data.sanctionletter_status?(e.sanction_template=!0,e.sanction_template_bind=!0):(e.sanction_template=!1,e.sanction_template_bind=!1)});var t="api/IdasMstSanction/SanctionLetterSummary";s.getparams(t,n).then(function(t){e.sanctiontocheckerlist=t.data.sanctiondetails});var t="api/IdasMstSanction/SanctionDocumentList";s.getparams(t,n).then(function(t){e.uploaddocument=t.data.UploadDocumentList})}var h=this;h.title="idasMstSanctionLetterGenerationController";var y=l.search().sanction_gid;v(),e.sanctionback=function(t){l.url("app/idasMstSanctionSummary?lstab="+t)},e.sanctiontemplatesubmit=function(){if(lockUI(),"Sanction - Simplified Norms Single Facility"==e.cbotemplate.template_name){var t={sanction_gid:y,template_gid:e.cbotemplate.template_gid,template_name:e.cbotemplate.template_name,lstab:e.relpath1},a="api/IdasMstSanction/SanctionContent";s.post(a,t).then(function(t){e.content=t.data.template_content,unlockUI(),e.sanction_template=!0,e.sanction_template_bind=!0,e.template_name=t.data.template_name})}else if("Sanction - Simplified Norms 2 Facility"==e.cbotemplate.template_name){var t={sanction_gid:y,template_gid:e.cbotemplate.template_gid,template_name:e.cbotemplate.template_name,lstab:e.relpath1},a="api/IdasMstSanction/Sanction2Facility";s.post(a,t).then(function(t){e.content=t.data.template_content,unlockUI(),e.sanction_template=!0,e.sanction_template_bind=!0,e.template_name=t.data.template_name})}else if("Sanction - Multiple Facility"==e.cbotemplate.template_name){var t={sanction_gid:y,template_gid:e.cbotemplate.template_gid,template_name:e.cbotemplate.template_name,lstab:e.relpath1},a="api/IdasMstSanction/SanctionMultipleFacility";s.post(a,t).then(function(t){e.content=t.data.template_content,unlockUI(),e.sanction_template=!0,e.sanction_template_bind=!0,e.template_name=t.data.template_name})}else if("Sanction - Interchangability"==e.cbotemplate.template_name){var t={sanction_gid:y,template_gid:e.cbotemplate.template_gid,template_name:e.cbotemplate.template_name,lstab:e.relpath1},a="api/IdasMstSanction/SanctionContent";s.post(a,t).then(function(t){e.content=t.data.template_content,unlockUI(),e.sanction_template=!0,e.sanction_template_bind=!0,e.template_name=t.data.template_name})}else if("Sanction - DBS Colending"==e.cbotemplate.template_name){var t={sanction_gid:y,template_gid:e.cbotemplate.template_gid,template_name:e.cbotemplate.template_name,lstab:e.relpath1},a="api/IdasMstSanction/DBSColending";s.post(a,t).then(function(t){e.content=t.data.template_content,unlockUI(),e.sanction_template=!0,e.sanction_template_bind=!0,e.template_name=t.data.template_name})}else if("Sanction - Stand by line of credit"==e.cbotemplate.template_name){var t={sanction_gid:y,template_gid:e.cbotemplate.template_gid,template_name:e.cbotemplate.template_name,lstab:e.relpath1},a="api/IdasMstSanction/SanctionContent";s.post(a,t).then(function(t){e.content=t.data.template_content,unlockUI(),e.sanction_template=!0,e.sanction_template_bind=!0,e.template_name=t.data.template_name})}else d.alert("Error occurred","warning");e.cancel=function(){e.sanction_template=!1,e.sanction_template_bind=!1}},e.sanctionletterSubmit=function(){lockUI();var t={sanction_gid:y,template_content:e.content},a="api/IdasMstSanction/SanctionLetterSubmit";s.post(a,t).then(function(t){unlockUI(),1==t.data.status?(d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),v(),l.hash("sanctionlettertopview"),$anchorScroll()):(d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())})},e.sanctionletterview=function(t){l.url("app/idasMstSanctionLetterWordView?sanction_gid="+y+"&lstab="+t)},e.proceedtochecker=function(){lockUI();var t={sanction_gid:y,template_content:e.content},a="api/IdasMstSanction/PostProceedToChecker";s.post(a,t).then(function(t){unlockUI(),1==t.data.status?(d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),v()):(d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())})},e.sanctiontocheckerview=function(t,e,a){l.url("app/idasMstSanctionLetterWordView?sanctionapprovallog_gid="+t+"&sanction_gid="+e+"&lstab="+a)},e.uploadattachment=function(){var t=document.getElementById("file");if(t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),a.append("project_flag","Default"),e.uploadfrm=a;var o=t.files.item(n).name,i=(t.files.item(n).size,f.fnCheckValidDocType(o,""));if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("sanction_gid",y),a.append("project_flag","Default"),e.uploadfrm=a;var c="api/IdasMstSanction/SanctionDocAttachment";lockUI(),s.postFile(c,e.uploadfrm).then(function(t){if($("#file").val(""),1==t.data.status){var a={sanction_gid:y},n="api/IdasMstSanction/SanctionDocumentList";s.getparams(n,a).then(function(t){e.uploaddocument=t.data.UploadDocumentList}),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()}else unlockUI(),d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})})}else alert("Please select a file.")},e.downloads=function(t,e){g.Downloaddocument(t,e)},e.UploadDocCancel=function(t){var a={sanctiondoc_gid:t,sanction_gid:y},n="api/IdasMstSanction/SanctionDocumentDelete";lockUI(),s.getparams(n,a).then(function(t){if(1==t.data.status){var a={sanction_gid:y},n="api/IdasMstSanction/SanctionDocumentList";s.getparams(n,a).then(function(t){e.uploaddocument=t.data.UploadDocumentList}),unlockUI(),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else unlockUI(),d.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3})})},e.titleOptions={placeholderText:"Add a Title",charCounterCount:!1,toolbarInline:!0,events:{contentChanged:function(t,a){console.log("content changed",e.titleOptions.froalaEditor.html.get())},initialized:function(t){console.log("initialized",this)}}},e.initialize=function(t){e.initControls=t,e.deleteAll=function(){t.getEditor().html.set("34434")}},e.imgModel={src:"image.jpg"},e.buttonModel={innerHTML:"Click Me"},e.inputModel={placeholder:"I am an input!"},e.inputOptions={angularIgnoreAttrs:["class","ng-model","id","froala"]},e.initializeLink=function(t){e.linkInitControls=t},e.linkModel={href:"https://www.froala.com/wysiwyg-editor"}}angular.module("angle").controller("idasMstSanctionLetterGenerationController",t),t.$inject=["$rootScope","$scope","$state","$modal","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){var t=window.location.href,a=t.split("lstab=");e.relpath1=a[1],"completed"==e.relpath1?e.approvalicon=!1:e.approvalicon=!0;var t="api/IdasMstSanction/SanctionDtlsEdit",n={sanction_gid:v};lockUI(),r.getparams(t,n).then(function(t){e.sanction_refno=t.data.sanction_refno,e.SanctionDateEdit=t.data.sanctionDate,e.sanction_date=t.data.sanction_date,e.sanction_amount=t.data.sanction_amount,e.customername=t.data.customername,e.customer_urn=t.data.customer_urn});var t="api/IdasMstSanction/SanctionDocumentList";if(r.getparams(t,n).then(function(t){e.uploaddocument=t.data.UploadDocumentList}),e.trustAsHtml=function(t){return m.trustAsHtml(t)},""==h||void 0==h||null==h){e.templatelogdetails=!1,e.templatedetails=!0;var n={sanction_gid:v};lockUI();var t="api/IdasMstSanction/GetTemplateDetails";r.getparams(t,n).then(function(t){e.lspath=t.data.makerfile_path,e.lsname=t.data.makerfile_name,e.content=t.data.template_content,e.checkerletter_flag=t.data.checkerletter_flag,e.checkerapproval_flag=t.data.checkerapproval_flag,e.sanctionletter_flag=t.data.sanctionletter_flag,e.sanctionletter_status=t.data.sanctionletter_status,e.digitalsignature_flag=t.data.digitalsignature_flag,e.checkerupdated_by=t.data.checkerupdated_by,e.checkerupdated_on=t.data.checkerupdated_on,e.makersubmitted_by=t.data.makersubmitted_by,e.makersubmitted_on=t.data.makersubmitted_on,unlockUI()})}else{e.templatelogdetails=!0,e.templatedetails=!1;var n={sanctionapprovallog_gid:h,sanction_gid:v};lockUI();var t="api/IdasMstSanction/GetTemplateLogDetails";r.getparams(t,n).then(function(t){e.content=t.data.template_content,e.sanction_status=t.data.sanction_status,e.makersubmitted_by=t.data.makersubmitted_by,e.makersubmitted_on=t.data.makersubmitted_on,unlockUI()})}}var f=this;f.title="idasMstSanctionLetterWordView";var v=d.search().sanction_gid,h=d.search().sanctionapprovallog_gid,y=d.search().lspage;g(),e.downloaddocument=function(t,e){_.Downloaddocument(t,e)},e.sanctionlogdocdownload=function(){var t={sanctionapprovallog_gid:h,sanction_gid:v};lockUI();var e="api/IdasMstSanction/SanctionLetterLogDownload";r.getparams(e,t).then(function(t){if(1==t.data.status){unlockUI();var e=t.data.lspath,a=t.data,e=e.replace("\\","/"),e=e.replace("//","/"),n=e.split("EMS/"),o=n[1].replace("\\","/"),i=a,c=(i.substring(i.lastIndexOf("/")+1),"api/azurestorage/FileUploadDocument"),d={file_path:o};r.post(c,d).then(function(t){1==t.data.status?_.Downloaddocument(val1,val2):(unlockUI(),s.alert("Error Occurred While Export PDF !","warning"))}),_.Downloaddocument(val1,val2),s.alert(t.data.message,"success")}else unlockUI(),s.alert(t.data.message,"warning"),g()})},e.Back=function(t){"checkersummary"==y?a.go("app.MstCheckerSummary"):"checkerapprovalsummary"==y?a.go("app.MstCheckerApprovalSummary"):d.url("app/idasMstSanctionLetterGeneration?sanction_gid="+v+"&lstab="+t)},e.proceedtocheckerapproval=function(){lockUI();var t={sanction_gid:v},e="api/IdasMstSanction/PostProceedToApproval";r.post(e,t).then(function(t){unlockUI(),1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.go("app.MstCheckerSummary")):(s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())})},e.pushbacktomaker=function(){function t(t,e){t.PushbackSanctionSubmit=function(){var n={sanction_gid:v,pushback_remarks:t.pushback_remarks},o="api/IdasMstSanction/PusbackToMaker";r.post(o,n).then(function(t){unlockUI(),1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed"),a.go("app.MstCheckerSummary")):(s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI(),e.close("closed"))})},t.close=function(){e.close("closed")}}n.open({templateUrl:"/pushbacksanctionpopup.html",controller:t,size:"md",backdrop:"static",keyboard:!1});t.$inject=["$scope","$modalInstance"]},e.checkerapprove=function(){lockUI();var t={sanction_gid:v,sanction_status:"Approved"},e="api/IdasMstSanction/UpdateCheckerApproval";r.post(e,t).then(function(t){unlockUI(),1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.go("app.MstCheckerApprovalSummary")):(s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())})},e.checkerreject=function(){function t(t,e){t.RejectSanctionSubmit=function(){var n={sanction_gid:v,reject_remarks:t.reject_remarks,sanction_status:"Rejected"},o="api/IdasMstSanction/UpdateCheckerApproval";r.post(o,n).then(function(t){unlockUI(),1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed"),a.go("app.MstCheckerApprovalSummary")):(s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI(),e.close("closed"))})},t.close=function(){e.close("closed")}}n.open({templateUrl:"/rejectsanctionpopup.html",controller:t,size:"md",backdrop:"static",keyboard:!1});t.$inject=["$scope","$modalInstance"]},e.insert_signature=function(){lockUI();var t={sanction_gid:v},e="api/IdasMstSanction/PostDigitalSignature";r.getparams(e,t).then(function(t){unlockUI(),1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),g()):(s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())})},e.download_signature=function(t,e){_.Downloaddocument(t,e)},e.downloads=function(t,e){_.Downloaddocument(t,e)}}angular.module("angle").controller("idasMstSanctionLetterWordView",t),t.$inject=["$rootScope","$scope","$state","$modal","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$sce","$anchorScroll","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){e.tab={},lockUI();var t="api/IdasMstSanction/GetSanctionsummary";r.get(t).then(function(t){unlockUI(),e.sanctionlist=t.data.sanctiondetails});var t=window.location.href,a=t.split("lstab="),n=a[1];void 0!=n?"pending"==n?e.tabpending=!0:"completed"==n&&(e.tabcompleted=!0):void 0==e.tab.activeTabId?e.tabpending=!0:"pending"==e.tab.activeTabId?e.tabpending=!0:"completed"==e.tab.activeTabId&&(e.tabcompleted=!0)}e.title="idasMstSanctioneset",_(),e.history=function(t){localStorage.setItem("customer2sanction_gid",t),a.go("app.IdasMstHistorySanctionRefNo")},e.sanction_cancel=function(t){function e(e,a){var n="api/entity/Entity";r.get(n).then(function(t){e.entity_list=t.data.entity_list});var o={sanction_gid:t},n="api/IdasMstSanction/GetSanctioninfo";r.getparams(n,o).then(function(t){e.lblcustomername=t.data.customername,e.lblsanction_refno=t.data.sanction_refno,e.lblcustomer_urn=t.data.customer_urn,e.lblsanction_date=t.data.sanction_date,e.lblsanction_amount=t.data.sanction_amount,e.cboentity_type=t.data.entity_gid,e.rdbcolanding=t.data.colanding_status,e.txtcolander_name=t.data.colander_name,"Yes"==t.data.colanding_status&&(e.colandingyes=!0)}),e["default"]=!0,e.close=function(){a.close("closed")},e.rdbcolanding_yes=function(){e.colandingyes=!0,e.mandatoryremarks=!1},e.rdbcolanding_no=function(){e.colandingyes=!1,e.mandatoryremarks=!1},e.remarks=function(){e.mandatoryremarks=!1},e.reset=function(){if(""==e.txtremarks||void 0==e.txtremarks)e.mandatoryremarks=!0;else{e.mandatoryremarks=!1;var n={customer2sanction_gid:t,general_remarks:e.txtremarks,colanding_status:e.rdbcolanding,colander_name:e.txtcolander_name,entity_gid:e.cboentity_type};console.log(n);var o="api/IdasMstSanction/Sanction_cancel";lockUI(),r.post(o,n).then(function(t){unlockUI(),1==t.data.status?(a.close("closed"),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),_()):(a.close("closed"),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})}}}o.open({templateUrl:"/cancelsanction.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("idasMstSanctioneset",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){e.totalDisplayedpending=100,e.totalDisplayedapproved=100,e.tab={},lockUI();var t="api/IdasMstSanction/PendingSanctionDtl";r.get(t).then(function(t){unlockUI(),e.sanctionlist=t.data.sanctiondetails,e.pending_count=t.data.pending_count,e.completed_count=t.data.completed_count,e.pendingCount=e.sanctionlist.length});var t=window.location.href,a=t.split("lstab="),n=a[1];if(void 0!=n?"pending"==n?e.tabpending=!0:"completed"==n&&(e.tabcompleted=!0):void 0==e.tab.activeTabId?e.tabpending=!0:"pending"==e.tab.activeTabId?e.tabpending=!0:"completed"==e.tab.activeTabId&&(e.tabcompleted=!0),"completed"==n){e.totalDisplayedcompleted=100,lockUI();var t="api/IdasMstSanction/CompletedSanctionDtl";r.get(t).then(function(t){e.completed_sanctiondetails=t.data.completed_sanctiondetails,e.pending_count=t.data.pending_count,e.completed_count=t.data.completed_count,e.completedCount=e.completed_sanctiondetails.length}),unlockUI()}}e.title="idasMstSanctionSummary",_(),e.completed=function(){e.totalDisplayedcompleted=100,lockUI();var t="api/IdasMstSanction/CompletedSanctionDtl";r.get(t).then(function(t){e.completed_sanctiondetails=t.data.completed_sanctiondetails,e.pending_count=t.data.pending_count,e.completed_count=t.data.completed_count,e.completedCount=e.completed_sanctiondetails.length}),unlockUI()},e.pending=function(){lockUI();var t="api/IdasMstSanction/PendingSanctionDtl";r.get(t).then(function(t){e.sanctionlist=t.data.sanctiondetails,e.pending_count=t.data.pending_count,e.completed_count=t.data.completed_count,e.pendingCount=e.sanctionlist.length}),unlockUI()},e.createSanction=function(){a.go("app.idasMstCreateSanction")},e.EditSanction_completed=function(t){localStorage.setItem("sanction_gid",t),d.url("app/idasMstSanctionEdit?lstab=completed")},e.EditSanction_pending=function(t){localStorage.setItem("sanction_gid",t),d.url("app/idasMstSanctionEdit?lstab=pending")},e.editgenerate=function(t){d.url("app/idasMstSanctionLetterGeneration?sanction_gid="+t+"&lstab=pending")},e.generate=function(t){d.url("app/idasMstSanctionLetterGeneration?sanction_gid="+t+"&lstab=completed")},e.loadMorepending=function(t){lockUI();var a=parseInt(t);e.totalDisplayedpending+=a,unlockUI()},e.loadMorecompleted=function(t){lockUI();var a=parseInt(t);e.totalDisplayedcompleted+=a,unlockUI()},e.WordGenerate=function(t){var e={sanction_gid:t},a="api/IdasMstSanction/GetWordGenerate";lockUI(),r.getparams(a,e).then(function(t){if(1==t.data.status){var e=t.data.lspath,a=t.data,e=e.replace("\\","/"),e=e.replace("//","/"),n=e.split("EMS/"),o=n[1].replace("\\","/"),i=a,c=i.substring(i.lastIndexOf("/")+1),d="api/azurestorage/FileUploadDocument",l={file_path:o};r.post(d,l).then(function(t){1==t.data.status?DownloaddocumentService.Downloaddocument(o,c):(unlockUI(),s.alert("Error Occurred While Export PDF !","warning"))}),unlockUI()}else unlockUI(),s.alert("Error Occurred While Downloading !","warning"),_()})}}angular.module("angle").controller("idasMstSanctionSummary",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){e.lsacreate_gid=localStorage.getItem("lsacreate_gid"),g.mytime=new Date,g.hstep=1,g.mstep=15,g.ismeridian=!1,g.calender1=function(t){t.preventDefault(),t.stopPropagation(),g.open1=!0};var t="api/security/getSecuritytype";r.get(t).then(function(t){e.security_data=t.data.securitytype_list,console.log(t.data.securitytype_list)}),e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0}var g=this;g.title="idasMstsecurityAdd";_(),e.sanctionback=function(){a.go("app.lsaManagementadd")},e.show_additional=function(){var t=$("#security_type :selected").text();"UDC From Borrower"==t.match(/UDC From Borrower/g)?(e.borrower=!1,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"UDC From Guarantor"==t.match(/UDC From Guarantor/g)?(e.guarantor=!1,e.borrower=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Personal Guarantee"==t.match(/Personal Guarantee/g)?(e.personal_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.corporate_guarantee=!0):"Corporate Guarantee"==t.match(/Corporate Guarantee/g)?(e.corporate_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0):"Bank Guarantee"==t.match(/Bank Guarantee/g)?(e.bank_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Fixed Deposits"==t.match(/Fixed Deposits/g)?(e.fixed_deposits=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Assignment of Insurance Policy"==t.match(/Assignment of Insurance Policy/g)?(e.insurance=!1,e.borrower=!0,e.guarantor=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):(e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0)},e.security_submit=function(t){var n=$("#security_type :selected").text();if("Fixed Deposits"==n.match(/Fixed Deposits/g)){var o=new Date;o.setFullYear(e.txtfd_expiry_date.getFullYear()),o.setMonth(e.txtfd_expiry_date.getMonth()),o.setDate(e.txtfd_expiry_date.getDate());
}else o=null;if("Bank Guarantee"==n.match(/Bank Guarantee/g)){var i=new Date;i.setFullYear(e.txtbankguarantee_expirydate.getFullYear()),i.setMonth(e.txtbankguarantee_expirydate.getMonth()),i.setDate(e.txtbankguarantee_expirydate.getDate())}else i=null;if("Assignment of Insurance Policy"==n.match(/Assignment of Insurance Policy/g)){var c=new Date;c.setFullYear(e.txtpolicy_expiry_date.getFullYear()),c.setMonth(e.txtpolicy_expiry_date.getMonth()),c.setDate(e.txtpolicy_expiry_date.getDate())}else c=null;var d={security_type:n,securitytype_gid:e.cbosecurity_type,account_status:e.account_status,borrowercheque_no:e.txtborrowercheque_no,borrowertbank_name:e.txtborrowertbank_name,borroweraccount_no:e.txtborroweraccount_no,borrowerdeviation:e.txtborrowerdeviation,borrowerother_remarks:e.txtborrowerother_remarks,guarantor_cheque:e.txtguarantor_cheque,guarantor_bankname:e.txtguarantor_bankname,guarantor_acno:e.txtguarantor_acno,guarantor_deviation:e.txtguarantor_deviation,personalguarantor_name:e.txtpersonalguarantor_name,guarantor_panno:e.txtguarantor_panno,corporate_guarantee:e.txtcorporate_guarantee,personal_guarantee:e.txtpersonal_guarantee,fd_bank_name:e.txtfd_bank_name,fd_no:e.txtfd_no,fd_expiry_date:o,auto_renewal:e.rdbauto_renewal,bankguarantee_bankname:e.txtbankguarantee_bankname,bankguarantee_expirydate:i,insurancecompany_name:e.txtinsurancecompany_name,policy_no:e.txtpolicy_no,policy_expiry_date:c,security_description:e.txtsecurity_description,lsacreate_gid:e.lsacreate_gid,lsacreate_gid1:t};console.log(d);var l="api/IdasTrnLsaManagement/postsecurityinfo";r.post(l,d).then(function(t){1==t.data.status?(a.go("app.lsaManagementadd"),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):s.alert(t.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})}}angular.module("angle").controller("idasMstsecurityAdd",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l){function u(){var t="api/idasMstTemplate/GetTemplateSummary";lockUI(),c.get(t).then(function(t){e.templatelist=t.data.TemplateDtlsList,unlockUI()})}e.title="idasMstTemplateSummaryController";u(),e.viewtemplatedtl=function(t){s.url("app/viewTemplateDetails?template_gid="+t)},e.edittemplatedtl=function(t){s.url("app/idasMstEditTemplate?template_gid="+t)},e.popupTemplate=function(){a.go("app.idasMstAddTemplate")}}angular.module("angle").controller("idasMstTemplateSummaryController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m){function p(){var t={sanction_gid:g};lockUI();var a="api/IdasSanctionMIS/GetSanctionMISDetails";r.getparams(a,t).then(function(t){console.log(t),e.txtsanctionrefnoEdit=t.data.sanction_refno,e.SanctionDateEdit=t.data.sanction_date,e.txtSanctionAmountEdit=t.data.sanction_amount,e.txtSanctionLimitEdit=t.data.sanction_limit,e.entityedit=t.data.entity,e.cboFacilityTypeEdit=t.data.facility_type,e.customerNameEdit=t.data.customername,e.CustomerurnEdit=t.data.customer_urn,e.txtcollateralEdit=t.data.collateral_security,e.zonalHeadNameEdit=t.data.zonal_name,e.businessHeadNameEdit=t.data.businesshead_name,e.clusterManagerEdit=t.data.cluster_manager_name,e.creditManagerEdit=t.data.creditmanager_name,e.relationshipmgmtEdit=t.data.relationshipmgmt_name,e.txtapprovalauthority=t.data.approval_authority,e.verticalCodeEdit=t.data.vertical,e.txtstate=t.data.state,e.loan_type=t.data.loan_type,e.txtccapproval_date=t.data.ccapproval_date,e.txtnatureofproposal=t.data.nature_ofproposal,e.txtEditclassificationofMSME=t.data.classification_MSME,e.txtEditValidity=t.data.validity_months,e.txtEditExpiryDate=t.data.sanctionexpiry_Date,e.txtEditReviewDate=t.data.sanctionreview_Date,e.earliersancrefnoEdit=t.data.earlier_sanctionrefno,e.txtEditconstitution=t.data.constitution,e.postalcode=t.data.postalcode,e.customer_email=t.data.customer_email,e.contact_person=t.data.contact_person,e.txtrm_mobileno=t.data.rm_mobileno,e.txtrm_emailid=t.data.rm_email,e.credit_manager=t.data.credit_manager,e.txtEditexistingLimit=t.data.existing_limit,e.txtEditAdditProposedLimit=t.data.additional_proposedlimit,e.txtEditOverallLimit=t.data.overall_limit,e.revisied_limit=t.data.revisied_limit,e.txtEditpurpose=t.data.purpose_lending,e.txtEdittenureMonths=t.data.tenure_months,e.txtEditRepaymentPrinicipal=t.data.repayment_principal,e.txtEditRepInterest=t.data.repayment_interest,e.txtdateof_receiptofOriginalDoc=t.data.dateof_receiptofOriginalDoc,e.txtEditCollateralSecurity=t.data.collateral_security,e.personal_guarantee=t.data.personal_guarantee,e.txtEditMargin=t.data.margin,e.txtEditRateofInterest=t.data.rateof_interest,e.penal_interest=t.data.penal_interest,e.txtEditProcessingFee=t.data.processing_fee,e.txtEditChequeRealization=t.data.chequerealizationDate,e.txtEditDocumentationCharge=t.data.documentation_clientvisitcharge,e.txtEditGSTNumber=t.data.GST_number,e.receiptdocsDateEdit=t.data.dateof_receiptDocsVetting,e.cboEditEscrowAccount=t.data.escrow_account,e.txtEditVirtualAccountNo=t.data.virtual_accountno,e.txtEditBuyersName=t.data.nameofthe_buyers,e.txtEditStatusBAL=t.data.status_ofBAL,e.dateofReleaseOrder=t.data.releaseorder_Date,e.lblcasesvetted_bycadmaker=t.data.casesvetted_bycadmaker,e.lblcasesvetted_bycadchecker=t.data.casesvetted_bycadchecker,e.txtothers=t.data.others,e.contactperson=t.data.contactperson,e.mobileno=t.data.mobileno,e.addressline1=t.data.addressline1,e.addressline2=t.data.addressline2,e.contact_number=t.data.contact_no,e.lbldocumentation_list=t.data.documentationlist,e.txthypothecation_date=t.data.hypothecation_date,e.txtmortgage_date=t.data.mortgage_date,e.txtprimaryvalue_chain=t.data.primaryvalue_chain,e.txtsecondaryvalue_chain=t.data.secondaryvalue_chain,e.txtpan_number=t.data.pan_number,e.txtsanctiontype=t.data.sanction_type,e.customersecurity_listdtl=t.data.customersecurity_listdtl,e.sanction_status=t.data.sanction_status,e.esdeclaration_status=t.data.esdeclaration_status,e.es_application=t.data.es_application,e.esrisk_categorization=t.data.esrisk_categorization,e.colander_name=t.data.colander_name,unlockUI()})}var _=this;_.title="idasSanctionMIS360controller",e.sanction_gid=d.search().sanction_gid;var g=e.sanction_gid;p(),e.sanctionback=function(){a.go("app.idasTrnSanctionMIS")}}angular.module("angle").controller("idasSanctionMIS360controller",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){f.formats=["dd-MM-yyyy"],f.format=f.formats[0],f.calender1=function(t){t.preventDefault(),t.stopPropagation(),f.open1=!0},f.calender=function(t){t.preventDefault(),t.stopPropagation(),f.open2=!0},f.calender3=function(t){t.preventDefault(),t.stopPropagation(),f.open3=!0},f.dateOptions={formatYear:"yy",startingDay:1};var t="api/employee/employee";s.get(t).then(function(t){e.employee_list=t.data.employee_list});var t="api/IdasNocAndNdc/TempClear";s.get(t).then(function(t){});var t="api/IdasNocAndNdc/GetDropDown";s.get(t).then(function(t){e.vertical_list=t.data.vertical_list})}var f=this;f.title="idasTrnAddNocAndNdcController",g(),e.Back=function(){n.go("app.idasTrnNocAndNdc")},e.submit=function(){var t="",a="";void 0==e.cbovertical&&null==e.cbovertical||(t=e.cbovertical.vertical_gid,a=e.cbovertical.vertical_name);var o={maker_gid:e.cbomaker.employee_gid,maker_name:e.cbomaker.employee_name,checker_gid:e.cbochecker.employee_gid,checker_name:e.cbochecker.employee_name,vertical_gid:t,vertical_name:a,customer_name:e.txtcustomer_name,sanction_ref_no:e.txtsanction_ref_no,sanction_date:e.txtsanctiondate,loan_account_no:e.txtloan_account_no,noc_issuance_date:e.txtnocissuancedate,nocandndc_date:e.txtnocrequestdate},i="api/IdasNocAndNdc/CreateIdasNocAndNdc";lockUI(),s.post(i,o).then(function(t){1==t.data.status?(unlockUI(),n.go("app.idasTrnNocAndNdc"),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})},e.NocNDcDocumentUpload=function(){var t=document.getElementById("file");if(t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),a.append("project_flag","Default"),e.uploadfrm=a;var o=t.files.item(n).name,i=(t.files.item(n).size,_.fnCheckValidDocType(o,""));if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("file_name",e.txtdoc_name);var c="api/IdasNocAndNdc/NocDocumentUpload";lockUI(),s.postFile(c,e.uploadfrm).then(function(t){if($("#file").val(""),unlockUI(),1==t.data.status){var a="api/IdasNocAndNdc/GetNocDocumentList";s.get(a).then(function(t){e.UploadDocumentList=t.data.UploadNocDocumentList}),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3});unlockUI()})}else alert("Please select a file."),unlockUI();e.txtdoc_name=""},e.downloads=function(t,e){var a=t,n=a.split("StoryboardAPI"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");s.download=e;var d=r;s.href=d,s.click()},e.uploaddocumentcancel=function(t){var a={nocandndcdocument_gid:t},n="api/IdasNocAndNdc/GetNocDocumentAddDelete";s.getparams(n,a).then(function(t){if(1==t.data.status){var a="api/IdasNocAndNdc/GetNocDocumentList";s.get(a).then(function(t){e.UploadDocumentList=t.data.UploadNocDocumentList}),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3});unlockUI()})}}angular.module("angle").controller("idasTrnAddNocAndNdcController",t),t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f,v,h,y){function I(){k=localStorage.getItem("sanctiondocument_gid");var t="api/IdasTrnPhyDoc/PhyDocConversationExternal",a={sanctiondocument_gid:k};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),1==t.data.status&&(e.docconversation=t.data.MdlDocConversation)}),e.typeofcopy="Scan Copy";var t="api/IdasTrnSanctionDoc/GetDocDetailsView",a={sanctiondocument_gid:k};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),e.sanction_gid=t.data.sanction_gid,e.document_gid=t.data.document_gid,e.document_code=t.data.document_code,e.document_name=t.data.document_name,e.phydocument_date=t.data.phydocument_date,e.documentrecord_id=t.data.documentrecord_id,e.phyfinal_remarks=t.data.phyfinal_remarks,e.scanfinal_remarks=t.data.scanfinal_remarks,e.maker_status=t.data.maker_status,e.checker_status=t.data.checker_status,e.phydoc_status=t.data.phydoc_status,e.types_of_copy=t.data.phydocument_type});var t="api/IdasTrnSanctionDoc/GetDocComments";s.getparams(t,a).then(function(t){e.doc_comments=t.data.doc_comments});var t="api/IdasTrnSanctionDoc/ScanDocConversationInternal",a={sanctiondocument_gid:k};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0):e.valueInternal=!1});var t="api/IdasTrnSanctionDoc/ScanDocConversationExternal",a={sanctiondocument_gid:k};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistExternal=t.data.MdlDocConversation,e.valueExternal=!0):e.valueExternal=!1})}e.title="IdasTrnBatchConversationView";var k;I(),e.PopupDownload=function(t){function e(e,a){e.ok=function(){a.close("closed")},e.downloads=function(t,e){y.Downloaddocument(t,e)};var n="api/IdasTrnDocConversation/GetUploadDoc",o={docconversation_gid:t};s.getparams(n,o).then(function(t){e.viewDocumentList=t.data.uploaddocument})}a.open({templateUrl:"/mailconversation.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.docconback=function(){n.go("app.IdasTrnBatchView")}}angular.module("angle").controller("IdasTrnBatchConversationView",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g){function f(){v=localStorage.getItem("sanction_gid"),y=localStorage.getItem("page");var t="api/IdasMstSanction/SanctionDtlsEdit",a={sanction_gid:v};r.getparams(t,a).then(function(t){e.sanctionrefno=t.data.sanction_refno,e.SanctionDate=t.data.sanction_date,e.SanctionAmount=t.data.sanction_amount,e.FacilityType=t.data.facility_type,e.customerName=t.data.customername,e.Customerurn=t.data.customer_urn,e.collateral_security=t.data.collateral_security,e.zonalHeadName=t.data.zonal_name,e.businessHeadName=t.data.businesshead_name,e.clusterManager=t.data.cluster_manager_name,e.creditManager=t.data.creditmanager_name,e.relationshipmgmt=t.data.relationshipmgmt_name,e.customercode=t.data.customercode,e.verticalCode=t.data.vertical,e.contactperson=t.data.contactperson,e.mobileno=t.data.mobileno,e.addressline1=t.data.addressline1,e.addressline2=t.data.addressline2,h=t.data.customer_gid,e.batch_status=t.data.batch_status});var t="api/IdasTrnSanctionDoc/ScanDocSummary",a={sanction_gid:v};r.getparams(t,a).then(function(t){e.documentation_list=t.data.MdlScannDocSummary});var t="api/IdasTrnPhyDoc/GetPhyUnVerifiedCount",a={sanction_gid:v};r.getparams(t,a).then(function(t){e.phydocunverified_count=t.data.phydocunverified_count,console.log("count",t.data)});var t="api/IdasTrnSanctionDoc/GetCommonDoc",a={sanction_gid:v};r.getparams(t,a).then(function(t){e.commondocument=t.data.uploaddocument})}e.title="IdasTrnBatchView";var v,h,y;f(),e["export"]=function(){var t={sanction_gid:v,type_of_copy:"Physical Copy"},e="api/IdasTrnSanctionDoc/ScanDocConExport";r.post(e,t).then(function(t){1==t.data.status?g.Downloaddocument(t.data.attachment_cloudpath,t.data.attachment_name):(s.alert(t.data.message,"success"),f())})},e.downloadsdocument=function(t,e){g.Downloaddocument(t,e)},e.batchviewback=function(){"batch"==y?a.go("app.idasTrnFile2Despatch?lstab=batch"):"box"==y?a.go("app.IdasTrnBoxDtlsView"):"Despatch"==y?a.go("app.IdasTrnDespatchBoxDtlsView"):"pendingbatch"==y?d.url("app/idasTrnFile2Despatch?lstab=pendingbatch"):d.url("app/idasTrnFile2Despatch?lstab=batch")},e.docConMkr=function(t){localStorage.setItem("sanctiondocument_gid",t),a.go("app.IdasTrnBatchConversationView")}}angular.module("angle").controller("IdasTrnBatchView",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){g=localStorage.getItem("cartonbox_gid");var t="api/IdasTrnFile2Despatch/BoxDtls",a={cartonbox_gid:g};r.getparams(t,a).then(function(t){console.log(t.data),e.boxref_no=t.data.boxref_no,e.stampref_no=t.data.stampref_no,e.cartonbox_date=t.data.cartonbox_date,e.remarks=t.data.remarks,e.boxbarcoderef_no=t.data.boxbarcoderef_no});var t="api/IdasTrnFile2Despatch/TaggedBatchDtls",a={cartonbox_gid:g};r.getparams(t,a).then(function(t){e.batch_list=t.data.MdlbatchSummary})}e.title="IdasTrnBoxDtlsView";var g;_(),e.back=function(){d.url("app/idasTrnFile2Despatch?lstab=box")},e.gotoBatch360=function(t){localStorage.setItem("page","box"),localStorage.setItem("sanction_gid",t),a.go("app.IdasTrnBatchView")}}angular.module("angle").controller("IdasTrnBoxDtlsView",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){var t={caddropdown:"employee",from_date:"",to_date:""},a="api/IdasDashboard/GetCadDashboardSummary";r.getparams(a,t).then(function(t){unlockUI(),e.caddashboard_list=t.data.caddashboard_list}),g.calender1=function(t){t.preventDefault(),t.stopPropagation(),g.open1=!0},g.calender2=function(t){t.preventDefault(),t.stopPropagation(),g.open2=!0},g.formats=["dd-MM-yyyy"],g.format=g.formats[0],g.dateOptions={formatYear:"yy",startingDay:1}}var g=this;g.title="idasTrnCadDashboardController",lockUI(),_(),e.search=function(){if(void 0==e.txtfrom_date||""==e.txtfrom_date)var t=null;else var a=e.txtfrom_date,t=new Date(a.getTime()-6e4*a.getTimezoneOffset()).toISOString().split("T")[0];if(void 0==e.txtto_date||""==e.txtto_date)var n=null;else var o=e.txtto_date,n=new Date(o.getTime()-6e4*o.getTimezoneOffset()).toISOString().split("T")[0];if(t<=n){var i={caddropdown:e.cbocaddashboard,from_date:t,to_date:n},c="api/IdasDashboard/GetCadDashboardSummary";lockUI(),r.getparams(c,i).then(function(t){"Customer master updation"==e.cbocaddashboard?e.caddashboard_list=t.data.customerupdation_list:"Sanction Ref.No"==e.cbocaddashboard?e.caddashboard_list=t.data.sanction_list:"Sanction Master updation"==e.cbocaddashboard?e.caddashboard_list=t.data.sanctionupdation_list:"LSA Maker"==e.cbocaddashboard?e.caddashboard_list=t.data.lsamaker_list:"LSA Checker"==e.cbocaddashboard?e.caddashboard_list=t.data.lsachecker_list:"Collateral Updation"==e.cbocaddashboard?e.caddashboard_list=t.data.collateralUpdation_list:"Deferral Stage updated"==e.cbocaddashboard?e.caddashboard_list=t.data.deferralstage_list:"Deferral Checker Approval"==e.cbocaddashboard?e.caddashboard_list=t.data.deferralapproval_list:"CAD Compliance Certificate generated"==e.cbocaddashboard?e.caddashboard_list=t.data.cadcompliance_list:"Document Tagged"==e.cbocaddashboard?e.caddashboard_list=t.data.doctagged_list:"Deferrals Created"==e.cbocaddashboard?e.caddashboard_list=t.data.deferralcreate_list:"Document Vetting Maker"==e.cbocaddashboard?e.caddashboard_list=t.data.docvettingmaker_list:e.caddashboard_list=t.data.docvettingchecker_list,e.showvalue=e.cbocaddashboard,e.txtto_date="",e.txtfrom_date="",unlockUI()})}else s.alert("Enter Date Format Correctly",{status:"warning",pos:"top-center",timeout:3e3}),e.showvalue=e.cbocaddashboard,e.txtto_date="",e.txtfrom_date=""}}angular.module("angle").controller("idasTrnCadDashboardController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){var t="api/idasTrnLsaReport/GetColletarlSummary";lockUI(),s.get(t).then(function(t){e.customersecurity_list=t.data.customersecurity_list,unlockUI()})}var f=this;f.title="idasTrnCollateralReportcontroller",g(),e["export"]=function(){lockUI();var t="api/idasTrnLsaReport/ColletralReportExcel";s.get(t).then(function(t){1==t.data.status?(_.Downloaddocument(t.data.lscloudpath,t.data.lsname),unlockUI()):(unlockUI(),d.alert("Error Occurred While Export !","warning"))})}}angular.module("angle").controller("idasTrnCollateralReportcontroller",t),t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f){function v(){e.rdbcustomer="Yes",e.customerno=!1,e.customeryes=!0,e.courier_type=localStorage.getItem("courier_type"),"Physical Inward"==e.courier_type||"Physical Outward"==e.courier_type?(document.getElementById("txtcourier_company_name").disabled=!1,e.txtcourier_company_name="",e.txtpod_no="",e.isDisabled=!0):e.isDisabled=!1,h.calender1=function(t){t.preventDefault(),t.stopPropagation(),h.open1=!0},h.calender2=function(t){t.preventDefault(),t.stopPropagation(),h.open2=!0},h.formats=["dd-MM-yyyy"],h.format=h.formats[0],h.dateOptions={formatYear:"yy",startingDay:1};var t="api/customer/customer";r.get(t).then(function(t){e.customer_list=t.data.customer_list});var t="api/employee/employee";r.get(t).then(function(t){e.employee_list=t.data.employee_list});var t="api/IdasMstCourierCompany/CourierCompanySummary";r.get(t).then(function(t){e.couriercompany_list=t.data.MdlCourierCompany});var a={courierdocument_gid:"undefine"},t="api/IdasCourierManagement/DeleteCourierDoc";r.getparams(t,a).then(function(t){}),e.rdbcustomer_yes=function(){e.customerno=!1,e.customeryes=!0},e.rdbcustomer_no=function(){e.customerno=!0,e.customeryes=!1}}e.title="idasTrnCourierCreation";var h=this;h.title="idasTrnCourierCreation",v(),e.courierback=function(){"Courier Inward"==e.courier_type?d.url("app/idasCourierMgmtsummary?lstab=CI"):"Courier Outward"==e.courier_type?d.url("app/idasCourierMgmtsummary?lstab=CO"):"Physical Outward"==e.courier_type?d.url("app/idasCourierMgmtsummary?lstab=PO"):"Physical Inward"==e.courier_type?d.url("app/idasCourierMgmtsummary?lstab=PI"):d.url("app/idasCourierMgmtsummary?lstab=CI")},e.OnChangeCourierType=function(t){"Physical Inward"==t||"Physical Outward"==t?(e.txtcourier_company_name="",e.txtpod_no="",e.isDisabled=!0):e.isDisabled=!1},e.onselectedchangecustomer=function(t){e.customer_gid=localStorage.setItem("onchangecustomer_gid",t);var a={customer_gid:e.cbocustomergid.customer_gid},n="api/IdasTrnLsaManagement/customer2sanction";r.getparams(n,a).then(function(t){e.customer2sanction_list=t.data.customer2sanction_list})},e.onselectedchangesanction=function(t){({customer2sanction_gid:e.cbocustomer2sanction_gid.customer2sanction_gid})},e.deletedocument=function(t){u.swal({title:"Are you sure?",text:"Do You Want To Delete the Uploaded Document?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(a){if(a){lockUI();var n={courierdocument_gid:t},o="api/IdasCourierManagement/DeleteCourierDoc";lockUI(),r.getparams(o,n).then(function(t){if(1==t.data.status){unlockUI(),u.swal("Document Deleted Successfully!");var a="api/IdasCourierManagement/GetCourierDoc";r.get(a).then(function(t){e.commondocument=t.data.uploadcourierdocument})}else unlockUI(),u.swal("Error Occured")})}})},e.downloadsdocument=function(t,e){g.Downloaddocument(t,e)},e.commondocumentupload=function(t,a,n){for(var o in e.documentname)console.log("1");var i={name:t[0].name,file:t[0]},c=f.fnCheckValidDocType(t[0].name,"");if(0==c)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var d=new FormData;d.append("fileupload",i.file),d.append("file_name",i.name),d.append("document_name",e.documentname),d.append("document_gid",e.document_gid),d.append("Trn_Gid",""),d.append("document_title",e.txtdocument_title),d.append("project_flag","Default"),e.uploadfrm=d;var l="api/IdasCourierManagement/CourierDocUpload";lockUI(),r.postFile(l,e.uploadfrm).then(function(t){if($("#commonupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasCourierManagement/GetCourierDoc";r.get(a).then(function(t){e.commondocument=t.data.uploadcourierdocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.courierSubmit=function(){var t;if("Courier Inward"==e.courier_type||"Courier Outward"==e.courier_type){if(void 0==e.txtcourier_company_name||""==e.txtcourier_company_name)return void s.alert("Select the Courier Company");if(t=e.txtcourier_company_name.couriercompany_name,void 0==e.txtpod_no||""==e.txtpod_no)return void s.alert("Enter the POD No.")}else t="",e.txtpod_no="";void 0==e.cbocustomer2sanction_gid?(e.sanctionref_no="",e.sanction_gid=""):(e.sanctionref_no=e.cbocustomer2sanction_gid.sanctionref_no,e.sanction_gid=e.cbocustomer2sanction_gid.customer2sanction_gid),"No"==e.rdbcustomer?(e.customer_name=e.txtcustomer_name,e.customer_gid=""):(e.customer_name=e.cbocustomergid.customername,e.customer_gid=e.cbocustomergid.customer_gid);var a={customer_name:e.customer_name,customer_gid:e.customer_gid,sanctionref_no:e.sanctionref_no,sanction_gid:e.sanction_gid,MdlCourierByList:e.txtcourier_sender_name,MdlCourierToList:e.txtcourier_handoverto,document_type:e.txtdocument_type,date_of_courier:e.txtdate_of_courier,pod_no:e.txtpod_no,couriercompany_name:t,address:e.txtaddress1,courier_type:e.courier_type,remarks:e.txtremarks};console.log(a);var n="api/IdasCourierManagement/IdasCourierSubmit";lockUI(),r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),console.log("courier type",e.courier_type),"Courier Inward"==e.courier_type?d.url("app/idasCourierMgmtsummary?lstab=CI"):"Courier Outward"==e.courier_type?d.url("app/idasCourierMgmtsummary?lstab=CO"):"Physical Outward"==e.courier_type?d.url("app/idasCourierMgmtsummary?lstab=PO"):"Physical Inward"==e.courier_type&&d.url("app/idasCourierMgmtsummary?lstab=PI"),s.alert(t.data.message,"success")):(unlockUI(),s.alert(t.data.message,"warning")),v()})}}angular.module("angle").controller("idasTrnCourierCreation",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$filter","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){var t="api/CourierReport/CourierReportSummary";lockUI(),s.get(t).then(function(t){e.idasTrnCourierReport=t.data.CourierReportSummaryDtls,unlockUI()})}var f=this;f.title="idasTrnCourierReportController",g(),e.complete=function(t){if(t.length>=3){e.message="";var a="api/customer/ExploreCustomer",n={customername:t};s.getparams(a,n).then(function(t){1==t.data.status?(e.message="",e.customer_list=t.data.Customers):e.message="No Records"})}else e.customer_list=null,e.message="Type atleast three character"},e.fillTextbox=function(t,a){e.cbocustomer_name=a,e.customer_gid=t,e.customer_list=null},e.all=function(){e.cbocustomer_name="",e.cbocourier_type="",g()},e.search=function(){var t={courier_type:e.cbocourier_type,customer_name:e.cbocustomer_name},a="api/CourierReport/ReportSearch";lockUI(),s.getparams(a,t).then(function(t){e.idasTrnCourierReport=t.data.CourierReportSummaryDtls,unlockUI()})},e.exportcourierreport=function(){var t={courier_type:e.cbocourier_type,customer_name:e.cbocustomer_name};lockUI();var a="api/CourierReport/ExportReport";s.getparams(a,t).then(function(t){1==t.data.status?(unlockUI(),_.Downloaddocument(t.data.lscloudpath,t.data.lsname)):(unlockUI(),d.alert("Error Occurred While Export !","success"))})}}angular.module("angle").controller("idasTrnCourierReportController",t),t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u){function m(){e.courier_value=!0,e.physical_value=!1,e.courier_inward=!0,e.courier_outward=!1,e.physical_inward=!1,e.physical_outward=!1,_=localStorage.getItem("courier_gid"),g=localStorage.getItem("page"),e.courier_gid=_;var t={courier_gid:_},a="api/IdasCourierManagement/GetEditCourierDetail";c.getparams(a,t).then(function(t){console.log(t.data),1==t.data.status&&(e.customer_name=t.data.customer_name,e.courierref_no=t.data.courierref_no,e.date_of_courier=t.data.date_of_courier,e.document_type=t.data.document_type,e.address=t.data.address,e.sender_name=t.data.sender_name,e.pod_no=t.data.pod_no,e.courier_company_name=t.data.couriercompany_name,e.courierhandover_to=t.data.courierhandover_to,e.courier_type=t.data.courier_type,e.remarks=t.data.remarks,e.handover_name=t.data.courierhandover_to_gid,e.uploadDoc_list=t.data.uploadcourierdocument,e.sanctionref_no=t.data.sanctionref_no,e.ack_status=t.data.ack_status,e.ack_date=t.data.ack_date,e.ackby_name=t.data.ackby_name,e.created_by=t.data.created_by,e.created_date=t.data.created_date),"Courier Outward"!=e.courier_type&&"Courier Inward"!=e.courier_type||(e.courier_value=!0,e.physical_value=!1),"Courier Outward"==e.courier_type&&(e.courier_outward=!0,e.courier_inward=!1,e.physical_inward=!1,e.physical_outward=!1),"Courier Inward"==e.courier_type&&(e.courier_outward=!1,e.courier_inward=!0,e.physical_inward=!1,e.physical_outward=!1),"Physical Inward"==e.courier_type&&(e.courier_outward=!1,e.courier_inward=!1,e.physical_inward=!0,e.physical_outward=!1),"Physical Outward"==e.courier_type&&(e.courier_outward=!1,e.courier_inward=!1,e.physical_inward=!1,e.physical_outward=!0),"Physical Inward"!=e.courier_type&&"Physical Outward"!=e.courier_type||(e.courier_value=!1,e.physical_value=!0)}),console.log("courier",e.courier_value)}e.title="idasTrnCourierView";var p=this;p.title="idasTrnCourierView";var _,g;m(),e.downloadsdocument=function(t,e){u.Downloaddocument(t,e)},e.courierback=function(){s.url("app/idasCourierMgmtsummary?lstab="+g)}}angular.module("angle").controller("idasTrnCourierView",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u){function m(){p.open=function(t){t.preventDefault(),t.stopPropagation(),p.opened=!0},p.dateOptions={formatYear:"yy",startingDay:1};var t="api/IdasTrnCartonBox/BatchSummary";lockUI(),r.get(t).then(function(t){unlockUI(),e.batch_list=t.data.MdlbathSummary,console.log(t.data.MdlbathSummary)})}var p=this;p.title="idasTrnCreateBox",m(),e.box_back=function(){a.go("app.boxMgmt")},e.box_submit=function(){var t=[];angular.forEach(e.batch_list,function(e){if(1==e.checked){var a=e.batch_gid;t.push(a)}});var n={cartonbox_date:e.box_date,remarks:e.boxremarks,batch_gid:t};console.log(n);var o="api/IdasTrnCartonBox/CartonBoxCreate";lockUI(),r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),a.go("app.boxMgmt"),s.alert(t.data.message,"success")):(unlockUI(),a.go("app.boxMgmt"),s.alert(t.data.message))})},e.checkall=function(t){angular.forEach(e.batch_list,function(e){e.checked=t})}}angular.module("angle").controller("idasTrnCreateBox",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g){function f(){v=localStorage.getItem("despatch_gid");var t="api/IdasTrnFile2Despatch/DespatchDtls",a={despatch_gid:v};r.getparams(t,a).then(function(t){console.log(t.data),e.despatchref_no=t.data.despatchref_no,e.despatch_date=t.data.despatch_date,e.vendor_name=t.data.vendor_name,e.remarks=t.data.remarks,e.contact_person=t.data.contact_person,e.mobile_no=t.data.mobile_no,e.desptached_by=t.data.desptached_by,e.stampref_no=t.data.stampref_no});var t="api/IdasTrnFile2Despatch/DespatchDocument",a={despatch_gid:v};r.getparams(t,a).then(function(t){e.uploaddocument=t.data.uploaddocument}),h=localStorage.getItem("cartonbox_gid");var t="api/IdasTrnFile2Despatch/BoxDtls",a={cartonbox_gid:h};r.getparams(t,a).then(function(t){console.log(t.data),e.boxref_no=t.data.boxref_no,e.stampref_no=t.data.stampref_no,e.cartonbox_date=t.data.cartonbox_date,e.remarks=t.data.remarks,e.boxbarcoderef_no=t.data.boxbarcoderef_no});var t="api/IdasTrnFile2Despatch/TaggedBatchDtls",a={cartonbox_gid:h};r.getparams(t,a).then(function(t){e.batch_list=t.data.MdlbatchSummary})}e.title="IdasTrnDespatchBoxDtlsView";var v,h;f(),e.back=function(){a.go("app.IdasTrnDespatchDtlsView");
},e.gotoBatch360=function(t){localStorage.setItem("sanction_gid",t),localStorage.setItem("page","Despatch"),a.go("app.IdasTrnBatchView")},e.downloadsdocument=function(t,e){g.Downloaddocument(t,e)}}angular.module("angle").controller("IdasTrnDespatchBoxDtlsView",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){f=localStorage.getItem("despatch_gid");var t="api/IdasTrnFile2Despatch/DespatchDtls",a={despatch_gid:f};r.getparams(t,a).then(function(t){e.despatchref_no=t.data.despatchref_no,e.despatch_date=t.data.despatch_date,e.vendor_name=t.data.vendor_name,e.remarks=t.data.remarks,e.contact_person=t.data.contact_person,e.mobile_no=t.data.mobile_no,e.desptached_by=t.data.desptached_by,e.stampref_no=t.data.stampref_no});var t="api/IdasTrnFile2Despatch/DespatchDocument",a={despatch_gid:f};r.getparams(t,a).then(function(t){e.uploaddocument=t.data.uploaddocument});var t="api/IdasTrnFile2Despatch/TaggedBoxDtls",a={despatch_gid:f};r.getparams(t,a).then(function(t){e.box_list=t.data.MdlCartonBoxSummary})}e.title="IdasTrnDespatchDtlsView";var f;g(),e.back=function(){d.url("app/idasTrnFile2Despatch?lstab=despatch")},e.gotoBox360=function(t){localStorage.setItem("cartonbox_gid",t),a.go("app.IdasTrnDespatchBoxDtlsView")},e.downloadsdocument=function(t,e){_.Downloaddocument(t,e)}}angular.module("angle").controller("IdasTrnDespatchDtlsView",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f,v,h,y,I){function k(){e.DivFile=!1,e.IsVisible=!1,e.Visible=!0,e.valueExternal=!1,e.valueInternal=!1,D=localStorage.getItem("sanctiondocument_gid"),e.conversation_count=localStorage.getItem("conversation_count"),"0"==e.conversation_count?e.showraisequery=!1:e.showraisequery=!0,b.calender1=function(t){t.preventDefault(),t.stopPropagation(),b.open1=!0},b.formats=["dd-MM-yyyy"],b.format=b.formats[0],b.dateOptions={formatYear:"yy",startingDay:1};var t="api/IdasTrnSanctionDoc/ScanDocConversationInternal",a={sanctiondocument_gid:D};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0):e.valueInternal=!1});var t="api/IdasTrnSanctionDoc/ScanDocConversationExternal",a={sanctiondocument_gid:D};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistExternal=t.data.MdlDocConversation,e.valueExternal=!0):e.valueExternal=!1}),e.typeofcopy="Scan Copy";var t="api/IdasTrnSanctionDoc/GetDocDetailsView",a={sanctiondocument_gid:D};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),e.sanction_gid=t.data.sanction_gid,e.document_gid=t.data.document_gid,e.document_code=t.data.document_code,e.document_name=t.data.document_name,e.document_date=t.data.scandocument_date,e.documentrecord_id=t.data.documentrecord_id,e.scanfinal_remarks=t.data.scanfinal_remarks,e.maker_status=t.data.maker_status,e.checker_status=t.data.checker_status,e.types_of_copy=t.data.types_of_copy,e.txtfinalremarks=t.data.finalremarks,"Others"==t.data.finalremarks?e.other_remarks=!0:e.other_remarks=!1});var t="api/IdasTrnSanctionDoc/GetDocComments";s.getparams(t,a).then(function(t){e.doc_comments=t.data.doc_comments})}var b=this;b.title="idasTrnDocConversationMkr";var D;k(),e.onchangeremarks=function(t){"Others"==t?(e.other_remarks=!0,e.scanfinal_remarks=""):(e.other_remarks=!1,e.scanfinal_remarks="")},e.ShowRaiseQuery=function(){0==e.showraisequery?e.showraisequery=!0:e.showraisequery=!1},e.raiseNoQuery=function(){var t={sanctiondocument_gid:D,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:"No Query",document_name:e.document_name,type_of_conversation:"Internal",noquery_flag:"Y"};o.swal({title:"Are you sure?",text:'Do you want to send "No Query"?',showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Send it!",closeOnConfirm:!1},function(a){if(a){lockUI();var n="api/IdasTrnSanctionDoc/RaiseConversation";s.post(n,t).then(function(t){1==t.data.status?(o.swal("Query Sent Successfully!"),unlockUI(),e.conversation_count="1",localStorage.setItem("conversation_count","1"),k()):(d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},e.onchangecopy=function(t){var a={sanctiondocument_gid:D,type_copy:e.types_of_copy},n="api/IdasTrnDocConversation/PostTypeOfCopy";s.post(n,a).then(function(t){1==t.data.status?(unlockUI(),k(),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),k(),d.alert(t.data.message))})},e.MkrVerify=function(){var t="api/IdasTrnSanctionDoc/DocumentConfirmation",e={sanctiondocument_gid:D};s.getparams(t,e).then(function(t){1==t.data.status?(unlockUI(),k(),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),d.alert(t.data.message))})},e.btnShow=function(t,a){e.IsVisible=!0,e.Visible=!1},e.btnHide=function(){e.IsVisible=!1,e.Visible=!0},e.PopupDownload=function(t){function e(e,a){e.ok=function(){a.close("closed")},e.downloads=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");e.split(".");s.download=e;var d=r;s.href=d,s.click()};var n="api/IdasTrnDocConversation/GetUploadDoc",o={docconversation_gid:t};s.getparams(n,o).then(function(t){e.viewDocumentList=t.data.uploaddocument})}a.open({templateUrl:"/mailconversation.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.raiseQueryRM=function(){var t={sanctiondocument_gid:D,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:e.content,document_name:e.document_name,document_title:e.txtdocument_title,type_of_conversation:"External"},a="api/IdasTrnSanctionDoc/RaiseConversation";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert("Conversation Added Successfully..!!","success"),e.content="",k()):(unlockUI(),d.alert(t.data.message)),k()})},e.raiseQueryChecker=function(){var t={sanctiondocument_gid:D,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:e.content,document_name:e.document_name,document_title:e.txtdocument_title,type_of_conversation:"Internal"},a="api/IdasTrnSanctionDoc/RaiseConversation";lockUI(),s.post(a,t).then(function(t){if(1==t.data.status){unlockUI(),d.alert("Conversation Added Successfully..!!","success"),e.content="";var a="api/IdasTrnSanctionDoc/GetConverseDoc";s.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument}),k()}else unlockUI(),d.alert(t.data.message);k()})},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.uploadallocation=function(t,a,n){var o={name:t[0].name,file:t[0]},i=I.fnCheckValidDocType(t[0].name,"");if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_title",e.txtdocument_title),c.append("project_flag","Default"),e.uploadfrm=c;var r="api/IdasTrnSanctionDoc/ConversationDocUpload";lockUI(),s.postFile(r,e.uploadfrm).then(function(t){if($("#addupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";s.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),d.alert("File Format Not Supported!")})},e.update=function(){var t={sanctiondocument_gid:D,document_date:e.document_date},a="api/IdasTrnSanctionDoc/PostScanDocDate";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert(t.data.message,"success"),k()):(unlockUI(),d.alert(t.data.message,"warning"))})},e.forwardedRaiseQuery=function(t,a,n){var i;i="Query Confirmed."==n?t:n;var c={sanctiondocument_gid:D,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:i,document_name:e.document_name,type_of_conversation:"External",reference_query:a};o.swal({title:"Are you sure?",text:"Do you want to send this query to RM ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Send it!",closeOnConfirm:!1},function(t){if(t){lockUI();var e="api/IdasTrnSanctionDoc/RaiseConversation";s.post(e,c).then(function(t){1==t.data.status?(o.swal("Query Sent Successfully!"),unlockUI(),k()):(d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},e.btncopy=function(t,a){"Query Confirmed."==a?e.content=t:e.content=a,l.hash("down"),y()},e.updateFinalRemarks=function(){if("Others"!=e.txtfinalremarks||""!=e.scanfinal_remarks&&void 0!=e.scanfinal_remarks&&null!=e.scanfinal_remarks){var t={sanctiondocument_gid:D,scanfinal_remarks:e.scanfinal_remarks,finalremarks:e.txtfinalremarks},a="api/IdasTrnSanctionDoc/DocScanFinalRemarks";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert(t.data.message,"success"),k()):(unlockUI(),d.alert(t.data.message,"warning"),e.txtfinalremarks="",e.scanfinal_remarks="")})}else d.alert("Kindly Enter Remarks","warning")},e.UploadDocCancel=function(t){var a={conversationdocument_gid:t},n="api/IdasTrnSanctionDoc/deleteconversedoc";lockUI(),s.getparams(n,a).then(function(t){if(1==t.data.status){unlockUI(),d.alert("Document deleted Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";s.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),d.alert("Error Occurred")})},e.docconback=function(){n.go("app.idasTrnDocVerifyMkr")},e.raiseResponse=function(t,a,n){var o={docconversation_gid:t,rm_response:n},i="api/IdasTrnSanctionDoc/DocRmResponse";lockUI(),s.post(i,o).then(function(t){1==t.data.status?(unlockUI(),d.alert("Conversation Added Successfully..!!","success"),e.content=" ",k()):(unlockUI(),d.alert("Error Occurred!")),k()})}}angular.module("angle").controller("idasTrnDocConversationMkr",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","$anchorScroll","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f,v,h,y,I){function k(){e.DivFile=!1,e.IsVisible=!1,e.Visible=!0,D=localStorage.getItem("sanctiondocument_gid"),e.conversation_count=localStorage.getItem("conversation_count"),S=localStorage.getItem("phydoc_status"),console.log(S),"0"==e.conversation_count&&"Pending"==S?(e.showraisequery=!1,e.hideraisequery=!1):(e.showraisequery=!0,e.hideraisequery=!0),b.calender1=function(t){t.preventDefault(),t.stopPropagation(),b.open1=!0},b.formats=["dd-MM-yyyy"],b.format=b.formats[0],b.dateOptions={formatYear:"yy",startingDay:1};var t="api/IdasTrnPhyDoc/PhyDocConversationExternal",a={sanctiondocument_gid:D};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),1==t.data.status&&(e.docconversation=t.data.MdlDocConversation)}),e.typeofcopy="Scan Copy";var t="api/IdasTrnSanctionDoc/GetDocDetailsView",a={sanctiondocument_gid:D};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),e.sanction_gid=t.data.sanction_gid,e.document_gid=t.data.document_gid,e.document_code=t.data.document_code,e.document_name=t.data.document_name,e.phydocument_date=t.data.phydocument_date,e.documentrecord_id=t.data.documentrecord_id,e.phyfinal_remarks=t.data.phyfinal_remarks,e.scanfinal_remarks=t.data.scanfinal_remarks,e.maker_status=t.data.maker_status,e.checker_status=t.data.checker_status,e.phydoc_status=t.data.phydoc_status,e.types_of_copy=t.data.phydocument_type});var t="api/IdasTrnSanctionDoc/GetDocComments";s.getparams(t,a).then(function(t){e.doc_comments=t.data.doc_comments});var t="api/IdasTrnSanctionDoc/ScanDocConversationInternal",a={sanctiondocument_gid:D};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0):e.valueInternal=!1});var t="api/IdasTrnSanctionDoc/ScanDocConversationExternal",a={sanctiondocument_gid:D};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistExternal=t.data.MdlDocConversation,e.valueExternal=!0):e.valueExternal=!1})}var b=this;b.title="idasTrnDocConversationPhy";var D,S;k(),e.ShowRaiseQuery=function(){0==e.showraisequery?e.showraisequery=!0:e.showraisequery=!1},e.raiseNoQuery=function(){var t={sanctiondocument_gid:D};o.swal({title:"Are you sure?",text:"Do you want to Confirm this Document ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Confirm it!",closeOnConfirm:!1},function(a){if(a){lockUI();var n="api/IdasTrnPhyDoc/NoQuery";s.getparams(n,t).then(function(t){1==t.data.status?(o.swal("Document Confirmed Successfully!"),unlockUI(),e.conversation_count="1",localStorage.setItem("conversation_count","1"),k()):(d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},e.Verify=function(){var t="api/IdasTrnPhyDoc/PhyDocVerify",e={sanctiondocument_gid:D};s.getparams(t,e).then(function(t){1==t.data.status?(unlockUI(),d.alert(t.data.message,"success"),k()):(unlockUI(),d.alert(t.data.message)),k()})},e.raiseQueryRM=function(){var t={sanctiondocument_gid:D,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:e.content,document_name:e.document_name,document_title:e.txtdocument_title,type_of_conversation:"External"},a="api/IdasTrnPhyDoc/PhyDocCadQuery";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert("Conversation Added Successfully..!!","success"),e.content=""):(unlockUI(),d.alert(t.data.message)),k()})},e.raiseResponse=function(t,a){var n={docconversation_gid:t,rm_response:a},o="api/IdasTrnSanctionDoc/DocRmResponse";lockUI(),s.post(o,n).then(function(t){1==t.data.status?(unlockUI(),d.alert("Conversation Added Successfully..!!","success"),e.content=" ",k()):(unlockUI(),d.alert("Error Occurred!")),k()})},e.PopupDownload=function(t){function e(e,a){e.ok=function(){a.close("closed")},e.downloads=function(t,e){y.Downloaddocument(t,e)};var n="api/IdasTrnDocConversation/GetUploadDoc",o={docconversation_gid:t};s.getparams(n,o).then(function(t){e.viewDocumentList=t.data.uploaddocument})}a.open({templateUrl:"/mailconversation.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.uploadallocation=function(t,a,n){var o={name:t[0].name,file:t[0]},i=I.fnCheckValidDocType(t[0].name,"");if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_title",e.txtdocument_title),c.append("project_flag","Default"),e.uploadfrm=c;var r="api/IdasTrnSanctionDoc/ConversationDocUpload";lockUI(),s.postFile(r,e.uploadfrm).then(function(t){if($("#addupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";s.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),d.alert("File Format Not Supported!")})},e.UploadDocCancel=function(t){var a={conversationdocument_gid:t},n="api/IdasTrnSanctionDoc/deleteconversedoc";lockUI(),s.getparams(n,a).then(function(t){if(1==t.data.status){unlockUI(),d.alert("Document deleted Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";s.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),d.alert("Error Occurred")})},e.updateFinalRemarks=function(){var t={sanctiondocument_gid:D,phyfinal_remarks:e.phyfinal_remarks},a="api/IdasTrnPhyDoc/DocPhyFinalRemarks";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert("Final Remarks Updated Successfully..!!","success"),k()):(unlockUI(),d.alert(t.data.message,"warning"))})},e.docconback=function(){n.go("app.idasTrnPhyDocVerification")},e.update=function(){var t={sanctiondocument_gid:D,document_date:e.phydocument_date},a="api/IdasTrnPhyDoc/PostPhyDocDate";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert(t.data.message,"success"),k()):(unlockUI(),d.alert(t.data.message,"warning")),k()})},e.onchangecopy=function(t){var a={sanctiondocument_gid:D,type_copy:e.types_of_copy},n="api/IdasTrnPhyDoc/PostPhyDocumentType";s.post(n,a).then(function(t){1==t.data.status?(unlockUI(),k(),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),k(),d.alert(t.data.message))})}}angular.module("angle").controller("idasTrnDocConversationPhy",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f,v,h,y){function I(){e.DivFile=!1,e.IsVisible=!1,e.Visible=!0,b=localStorage.getItem("sanctiondocument_gid"),e.lspage=localStorage.getItem("lspage"),k.calender1=function(t){t.preventDefault(),t.stopPropagation(),k.open1=!0},k.dateOptions={formatYear:"yy",startingDay:1},k.formats=["dd-MM-yyyy"],k.format=k.formats[0];var t="api/IdasTrnSanctionDoc/DocConversation",a={sanctiondocument_gid:b};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),e.docconversationlist=t.data.MdlDocConversation}),e.typeofcopy="Scan Copy";var t="api/IdasTrnSanctionDoc/GetDocDetailsView",a={sanctiondocument_gid:b};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),e.sanction_gid=t.data.sanction_gid,e.document_gid=t.data.document_gid,e.document_code=t.data.document_code,e.document_name=t.data.document_name,e.document_date=t.data.scandocument_date,e.documentrecord_id=t.data.documentrecord_id,e.scanfinal_remarks=t.data.scanfinal_remarks})}var k=this;k.title="idasTrnDocCoversation";var b;I(),e.btnShow=function(t,a){e.IsVisible=!0,e.Visible=!1},e.btnHide=function(){e.IsVisible=!1,e.Visible=!0},e.PopupDownload=function(t){function e(e,a){e.ok=function(){a.close("closed")},e.downloads=function(t,e){var a=t;console.log(a);var n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c="http://",r=c.concat(i,o),s=document.createElement("a");e.split(".");s.download=e;var d=r;s.href=d,s.click()};var n="api/IdasTrnDocConversation/GetUploadDoc",o={docconversation_gid:t};s.getparams(n,o).then(function(t){e.viewDocumentList=t.data.uploaddocument})}a.open({templateUrl:"/mailconversation.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.raiseQuery=function(){var t={sanctiondocument_gid:b,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:e.content},a="api/IdasTrnSanctionDoc/RaiseConversation";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert("Conversation Added Successfully..!!","success"),e.content="",I()):(unlockUI(),d.alert("Error Occurred!")),I()})},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.uploadallocation=function(t,a,n){var o={name:t[0].name,file:t[0]},i=y.fnCheckValidDocType(t[0].name,"");if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_title",e.txtdocument_title),c.append("project_flag","Default"),e.uploadfrm=c;var r="api/IdasTrnSanctionDoc/ConversationDocUpload";lockUI(),s.postFile(r,e.uploadfrm).then(function(t){if($("#addupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";s.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),d.alert("File Format Not Supported!")})},e.update=function(){var t={sanctiondocument_gid:b,document_date:e.document_date},a="api/IdasTrnSanctionDoc/PostScanDocDate";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert(t.data.message,"success"),I()):(unlockUI(),d.alert("Error Occurred!")),I()})},e.updateFinalRemarks=function(){var t={sanctiondocument_gid:b,scanfinal_remarks:e.scanfinal_remarks},a="api/IdasTrnSanctionDoc/DocScanFinalRemarks";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert("Final Remarks Updated Successfully..!!","success"),I()):(unlockUI(),d.alert("Error Occurred!")),I()})},e.UploadDocCancel=function(t){var a={conversationdocument_gid:t},n="api/IdasTrnSanctionDoc/deleteconversedoc";lockUI(),s.getparams(n,a).then(function(t){if(1==t.data.status){unlockUI(),d.alert("Document deleted Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";s.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),d.alert("Error Occurred")})},e.docconback=function(){"Maker"==e.lspage&&n.go("app.idasTrnDocVerifyMkr"),"Checker"==e.lspage&&n.go("app.idasTrnDocVerifyChkr")},e.raiseResponse=function(t,a,n){var o={docconversation_gid:t,rm_response:n},i="api/IdasTrnSanctionDoc/DocRmResponse";lockUI(),s.post(i,o).then(function(t){1==t.data.status?(unlockUI(),d.alert("Conversation Added Successfully..!!","success"),e.content=" ",I()):(unlockUI(),d.alert("Error Occurred!")),I()})}}angular.module("angle").controller("idasTrnDocCoversation",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f,v,h,y,I){function k(){e.DivFile=!1,e.IsVisible=!1,e.Visible=!0,e.valueExternal=!1,e.valueInternal=!1,D=localStorage.getItem("sanctiondocument_gid"),e.conversation_count=localStorage.getItem("conversation_count"),b.calender1=function(t){t.preventDefault(),t.stopPropagation(),b.open1=!0},b.dateOptions={formatYear:"yy",startingDay:1},b.formats=["dd-MM-yyyy"],b.format=b.formats[0];var t="api/IdasTrnSanctionDoc/ScanDocConversationInternal",a={sanctiondocument_gid:D};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,console.log(e.docconversationlistInternal),e.valueInternal=!0):e.valueInternal=!1});var t="api/IdasTrnSanctionDoc/ScanDocConversationExternal",a={sanctiondocument_gid:D};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistExternal=t.data.MdlDocConversation,e.valueExternal=!0):e.valueExternal=!1}),e.typeofcopy="Scan Copy";var t="api/IdasTrnSanctionDoc/GetDocDetailsView",a={sanctiondocument_gid:D};lockUI(),s.getparams(t,a).then(function(t){unlockUI(),e.sanction_gid=t.data.sanction_gid,e.document_gid=t.data.document_gid,e.document_code=t.data.document_code,e.document_name=t.data.document_name,e.document_date=t.data.scandocument_date,e.documentrecord_id=t.data.documentrecord_id,e.scanfinal_remarks=t.data.scanfinal_remarks,e.maker_status=t.data.maker_status,e.types_of_copy=t.data.types_of_copy,e.checker_status=t.data.checker_status,e.txtfinalremarks=t.data.finalremarks,"Others"==t.data.finalremarks?e.other_remarks=!0:e.other_remarks=!1});var t="api/IdasTrnSanctionDoc/GetDocComments";s.getparams(t,a).then(function(t){e.doc_comments=t.data.doc_comments})}var b=this;b.title="idasTrnDocCoversationChkr";var D;k(),e.onchangeremarks=function(t){"Others"==t?e.other_remarks=!0:e.other_remarks=!1},e.btncopyinternal=function(t,a){e.docconversationlistInternal[t].reply=a},e.btnShow=function(t,a){e.IsVisible=!0,e.Visible=!1},e.btnHide=function(){e.IsVisible=!1,e.Visible=!0},e.PopupDownload=function(t){function e(e,a){e.ok=function(){a.close("closed")},e.downloads=function(t,e){var a=t;console.log(a);var n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");e.split(".");s.download=e;var d=r;s.href=d,s.click()};var n="api/IdasTrnDocConversation/GetUploadDoc",o={docconversation_gid:t};s.getparams(n,o).then(function(t){e.viewDocumentList=t.data.uploaddocument});var n="api/IdasTrnSanctionDoc/GetConverseDoc";s.get(n).then(function(t){e.uploaddocument=t.data.uploaddocument})}a.open({templateUrl:"/mailconversation.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.raiseQuery=function(){var t={sanctiondocument_gid:D,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:e.content,document_name:e.document_name,document_title:e.txtdocument_title,type_of_conversation:"External"},a="api/IdasTrnSanctionDoc/RaiseConversation";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert("Conversation Added Successfully..!!","success"),e.content="",k()):(unlockUI(),d.alert(t.data.message)),k()})},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.uploadallocation=function(t,a,n){var o={name:t[0].name,file:t[0]},i=I.fnCheckValidDocType(t[0].name,"");if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_title",e.txtdocument_title),c.append("project_flag","Default"),e.uploadfrm=c;var r="api/IdasTrnSanctionDoc/ConversationDocUpload";lockUI(),s.postFile(r,e.uploadfrm).then(function(t){if($("#addupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";s.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),d.alert("File Format Not Supported!")})},e.update=function(){var t={sanctiondocument_gid:D,document_date:e.document_date},a="api/IdasTrnSanctionDoc/PostScanDocDate";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert(t.data.message,"success"),k()):(unlockUI(),d.alert(t.data.message,"warning")),k()})},e.updateFinalRemarks=function(){if("Others"!=e.txtfinalremarks||""!=e.scanfinal_remarks&&void 0!=e.scanfinal_remarks&&null!=e.scanfinal_remarks){var t={sanctiondocument_gid:D,scanfinal_remarks:e.scanfinal_remarks,finalremarks:e.txtfinalremarks},a="api/IdasTrnSanctionDoc/DocScanFinalRemarks";lockUI(),s.post(a,t).then(function(t){1==t.data.status?(unlockUI(),d.alert(t.data.message,"success"),k()):(unlockUI(),d.alert(t.data.message,"warning"),e.txtfinalremarks="",e.scanfinal_remarks="")})}else d.alert("Kindly Enter Remarks","warning")},e.UploadDocCancel=function(t){var a={conversationdocument_gid:t},n="api/IdasTrnSanctionDoc/deleteconversedoc";lockUI(),s.getparams(n,a).then(function(t){if(1==t.data.status){unlockUI(),d.alert("Document deleted Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";s.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),d.alert("Error Occurred")})},e.ChkrVerify=function(){var t="api/IdasTrnSanctionDoc/DocumentConfirmation",e={sanctiondocument_gid:D};s.getparams(t,e).then(function(t){1==t.data.status?(unlockUI(),localStorage.setItem("conversation_count","1"),k(),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),d.alert(t.data.message))})},e.docconback=function(){n.go("app.idasTrnDocVerifyChkr")},e.forwardQuery=function(t){var e={docconversation_gid:t};o.swal({title:"Are you sure?",text:"Do you want to forward this query to RM ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Forward it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/idasTrnMakerCheckerDtls/PostForwardedQuery";s.getparams(a,e).then(function(t){1==t.data.status?(o.swal("Forwarded Successfully!"),unlockUI(),k()):(d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},e.confirmQuery=function(t,e){o.swal({title:"Are you sure?",text:"Do you want to confirm this query to checker ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Confirmed it!",closeOnConfirm:!1},function(a){if(a){lockUI();var n={docconversation_gid:t,rm_response:"Query Confirmed."};if("Y"==e){var i="api/IdasTrnSanctionDoc/DocNoQueryRmResponse";s.getparams(i,n).then(function(t){1==t.data.status?(o.swal("Document Confirmed Successfully!"),unlockUI(),k()):(d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}else{var i="api/IdasTrnSanctionDoc/DocRmResponse";s.post(i,n).then(function(t){1==t.data.status?(o.swal("Query Confirmed Successfully!"),unlockUI(),k()):(d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}})},e.btncopy=function(t){e.content=t,l.hash("down"),y()},e.raiseResponse=function(t,a){var n={docconversation_gid:t,rm_response:a},o="api/IdasTrnSanctionDoc/DocRmResponse";lockUI(),s.post(o,n).then(function(t){1==t.data.status?(unlockUI(),d.alert("Conversation Added Successfully..!!","success"),e.content=" ",k()):(unlockUI(),d.alert("Error Occurred!")),k()})},e.onchangecopy=function(t){var a={sanctiondocument_gid:D,type_copy:e.types_of_copy},n="api/IdasTrnDocConversation/PostTypeOfCopy";s.post(n,a).then(function(t){1==t.data.status?(unlockUI(),k(),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),k(),d.alert(t.data.message))})}}angular.module("angle").controller("idasTrnDocCoversationChkr",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","$anchorScroll","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l){function u(){if(lockUI(),"Y"==e.doctemplate_flag){var t={document_gid:e.documentlist_gid,sanction_gid:e.sanction_gid},a="api/IdasMstDocList/GetEditDoc2sanction";c.getparams(a,t).then(function(t){unlockUI(),e.documentNameEdit=t.data.document_name,e.documentCodeEdit=t.data.document_code,e.template_content=t.data.template_content})}else{var t={doclist_gid:e.documentlist_gid},a="api/IdasMstDocList/GetEditDocList";c.getparams(a,t).then(function(t){e.documentNameEdit=t.data.document_name,e.documentCodeEdit=t.data.document_code});var a="api/IdasMstDocList/GetDocTemplateContent";c.getparams(a,t).then(function(t){e.template_content=t.data.template_content,unlockUI()})}}e.title="idasTrnDocumentGenerationController";e.documentlist_gid=s.search().documentlist_gid,e.sanction_gid=s.search().sanction_gid,e.document_code=s.search().document_code,e.doctemplate_flag=s.search().doctemplate_flag;var m=s.search().lspage,p=e.sanction_gid;u(),e.generatedocument=function(){var t={documentlist_gid:e.documentlist_gid,template_content:e.template_content,document_code:e.document_code,sanction_gid:e.sanction_gid},n="api/IdasMstDocList/PostDocTemplateGenerate";lockUI(),c.post(n,t).then(function(t){unlockUI(),1==t.data.status?(r.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),"createprefil"==m?a.go("app.idasTrnPreFilManagement"):s.url("app/idasTrnPreFilGeneration?sanction_gid="+p+"&lspage="+m)):r.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})})},e.back=function(){"createprefil"==m?a.go("app.idasTrnPreFilManagement"):s.url("app/idasTrnPreFilGeneration?sanction_gid="+p+"&lspage="+m)}}angular.module("angle").controller("idasTrnDocumentGenerationController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"];
}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f,v,h){function y(){e.totalDisplayed=50;var t="api/IdasTrnDocumentUpload/GetDocumentTaggedCustomer";s.get(t).then(function(t){unlockUI(),e.customer_data=t.data.customer_list,null==e.customer_data?(e.total=0,e.totalDisplayed=0):(e.total=e.customer_data.length,e.customer_data.length<100&&(e.totalDisplayed=e.customer_data.length))});var t="api/IdasTrnDocumentUpload/GetDocumentCustomerCount";s.get(t).then(function(t){unlockUI(),e.tagged_count=t.data.tagged_count,e.untagged_count=t.data.untagged_count})}var I=this;I.title="idasTrnDocumentTaggingController",y(),lockUI(),e.viewcustomerdocument=function(t){l.url("app/idasTrnDocumentTaggingView?customer_gid="+t)},e.UnTagged_customer=function(){lockUI(),e.totalDisplayed=50;var t="api/IdasTrnDocumentUpload/GetDocumentUnTaggedCustomer";s.get(t).then(function(t){unlockUI(),e.customer_data=t.data.customer_list,null==e.customer_data?(e.total=0,e.totalDisplayed=0):(e.total=e.customer_data.length,e.customer_data.length<100&&(e.totalDisplayed=e.customer_data.length))})},e.Tagged_customer=function(){lockUI(),e.totalDisplayed=50;var t="api/IdasTrnDocumentUpload/GetDocumentTaggedCustomer";s.get(t).then(function(t){unlockUI(),e.customer_data=t.data.customer_list,null==e.customer_data?(e.total=0,e.totalDisplayed=0):(e.total=e.customer_data.length,e.customer_data.length<100&&(e.totalDisplayed=e.customer_data.length))})},e.loadMore=function(t){if(void 0==t)return void d.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);if(null!=e.customer_data){if(!(t<e.customer_data.length))return unlockUI(),void d.alert("TotalSummary"+e.customer_data.length+"RecordsOnly","warning");e.totalDisplayed+=a,e.customer_data.length<e.totalDisplayed&&(e.totalDisplayed=e.customer_data.length,d.alert("TotalSummary"+e.customer_data.length+"RecordsOnly","warning")),unlockUI()}}}angular.module("angle").controller("idasTrnDocumentTaggingController",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g){function f(){I=localStorage.getItem("parent_directorygid"),h=localStorage.getItem("customer_gid"),y=localStorage.getItem("creditfileupload_gid");var t={creditfileupload_gid:y},a="api/IdasTrnDocumentUpload/CreditFilesBreadCrumb";r.getparams(a,t).then(function(t){e.BreadCrumb_list=t.data.FolderDtls});var t={parent_directorygid:y,customer_gid:h},a="api/IdasTrnDocumentUpload/CreditFolderDtls";r.getparams(a,t).then(function(t){unlockUI(),e.CreditDocumentDtls_list=t.data.DirectoryDtls});var t={customer_gid:h},a="api/customer/Getcustomerdetails";r.getparams(a,t).then(function(t){e.customerName=t.data.customerNameedit,e.Customerurn=t.data.customer_urnedit});var a="api/IdasTrnDocumentUpload/GetCreditTeamFlag";r.get(a).then(function(t){unlockUI(),e.creditteam_flag=t.data.creditteam_flag})}var v=this;v.title="idasTrnDocumentTaggingCreditChildController",f();var h,y,I;e.goCreditChild=function(t){localStorage.setItem("customer_gid",h),localStorage.setItem("creditfileupload_gid",t),f()},e.home=function(){d.url("app/idasTrnDocumentTaggingView?customer_gid="+h)},e.CreditpopFileShow=function(){function t(t,e){var a="api/IdasTrnDocumentUpload/GetDocumentLabellist";r.get(a).then(function(e){t.document_labellist=e.data.CreditUnderwritingDocumentLabelList}),t.uploadfile=function(){var a=document.getElementById("file");if(""==a.value)return void s.alert("Kindly select the file");if(a.files.length>0){var n=new FormData,o=$("#documentlabelname :selected").text();n.append("parent_directorygid",y),n.append("directory_type","File"),n.append("customer_gid",h),n.append("documentlabel_gid",t.documentlabel_gid.documentlabel_gid),n.append("documentlabel_name",o),n.append("remarks",t.remarks),n.append("project_flag","Default");for(var i=0;i<=a.files.length-1;i++){n.append(a.files[i].name,a.files[i]),t.uploadfrm=n;var c=a.files.item(i).name,d=(a.files.item(i).size,g.fnCheckValidDocType(c,""));if(0==d)return alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}lockUI();var l="api/IdasTrnDocumentUpload/CreditFileUpload";r.postFile(l,t.uploadfrm).then(function(t){unlockUI(),1==t.data.status?($("#file").val(""),f(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed")):(s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),e.close("closed")),unlockUI()})}else alert("Please select a file.")},t.close=function(){e.close("closed")}}o.open({templateUrl:"/Documentuploadcontent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.CreditFolder=function(){function t(t,e){t.createFolder=function(){var a={folder_name:t.folderName,directory_type:"Folder",parent_directorygid:y,customer_gid:h},n="api/IdasTrnDocumentUpload/CreateCreditFolder";r.post(n,a).then(function(t){1==t.data.status?(e.close("closed"),s.alert(t.data.message,"success"),f()):(e.close("closed"),s.alert("Error Occurred","warning"),f())})},t.close=function(){e.close("closed")}}o.open({templateUrl:"/myModalContent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.RenameCreditFolder=function(t,e,a){function n(n,o){n.close=function(){o.close("closed")},n.renameFolder=a,n.renameSave=function(){var a={creditfileupload_gid:t,folder_name:n.renameFolder,type:e},i="api/IdasTrnDocumentUpload/RenameCreditFile";r.post(i,a).then(function(t){1==t.data.status?(o.close("closed"),s.alert(t.data.message,"success"),f()):(o.close("closed"),s.alert(t.data.message,"warning"),f())})}}o.open({templateUrl:"/myModalContent1.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]},e.DeleteCreditDocument=function(t){var e={creditfileupload_gid:t};u.swal({title:"Are you sure?",text:"Do You Want To Delete this Folder/File ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnDocumentUpload/CreditFileDelete";r.getparams(a,e).then(function(t){1==t.data.status?(f(),u.swal("Deleted Successfully!"),unlockUI()):(u.swal(t.data.message),unlockUI())})}})},e.downloadcreditdocument=function(t,e){_.Downloaddocument(t,e)}}angular.module("angle").controller("idasTrnDocumentTaggingCreditChildController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g){function f(){I=localStorage.getItem("parent_directorygid"),h=localStorage.getItem("customer_gid"),y=localStorage.getItem("creditoperationsfileupload_gid");var t={creditoperationsfileupload_gid:y},a="api/IdasTrnDocumentUpload/CreditOperationsFilesBreadCrumb";r.getparams(a,t).then(function(t){e.BreadCrumb_list=t.data.FolderDtls});var t={parent_directorygid:y,customer_gid:h},a="api/IdasTrnDocumentUpload/CreditOperationsFolderDtls";r.getparams(a,t).then(function(t){unlockUI(),e.CreditOperationsDocumentDtls_list=t.data.DirectoryDtls});var t={customer_gid:h},a="api/customer/Getcustomerdetails";r.getparams(a,t).then(function(t){e.customerName=t.data.customerNameedit,e.Customerurn=t.data.customer_urnedit});var a="api/IdasTrnDocumentUpload/GetCreditOperationsTeamFlag";r.get(a).then(function(t){unlockUI(),e.creditoperationteam_flag=t.data.creditoperationteam_flag})}var v=this;v.title="idasTrnDocumentTaggingCreditOperationsChildController",f();var h,y,I;e.goCreditOperationsChild=function(t){localStorage.setItem("customer_gid",h),localStorage.setItem("creditoperationsfileupload_gid",t),f()},e.home=function(){d.url("app/idasTrnDocumentTaggingView?customer_gid="+h)},e.CreditOperationspopFileShow=function(){function t(t,e){var a="api/IdasTrnDocumentUpload/GetDocumentLabellist";r.get(a).then(function(e){t.document_labellist=e.data.CreditOperationsDocumentLabelList}),t.uploadfile=function(){var a=document.getElementById("file");if(""==a.value)return void s.alert("Kindly select the file","warning");if(a.files.length>0){var n=new FormData,o=$("#documentlabelname :selected").text();n.append("parent_directorygid",y),n.append("directory_type","File"),n.append("customer_gid",h),n.append("documentlabel_gid",t.documentlabel_gid.documentlabel_gid),n.append("documentlabel_name",o),n.append("remarks",t.remarks),n.append("project_flag","Default");for(var i=0;i<=a.files.length-1;i++){n.append(a.files[i].name,a.files[i]),t.uploadfrm=n;var c=a.files.item(i).name,d=(a.files.item(i).size,g.fnCheckValidDocType(c,""));if(0==d)return alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}var l="api/IdasTrnDocumentUpload/CreditOperationsFileUpload";lockUI(),r.postFile(l,t.uploadfrm).then(function(t){unlockUI(),1==t.data.status?($("#file").val(""),f(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed")):(s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),e.close("closed")),unlockUI()})}else alert("Please select a file.")},t.close=function(){e.close("closed")}}o.open({templateUrl:"/Documentuploadcontent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.CreditOperationsFolder=function(){function t(t,e){t.createFolder=function(){var a={folder_name:t.folderName,directory_type:"Folder",parent_directorygid:y,customer_gid:h},n="api/IdasTrnDocumentUpload/CreateCreditOperationsFolder";r.post(n,a).then(function(t){1==t.data.status?(e.close("closed"),s.alert(t.data.message,"success"),f()):(e.close("closed"),s.alert("Error Occurred","warning"),f())})},t.close=function(){e.close("closed")}}o.open({templateUrl:"/myModalContent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.RenameCreditOperationsFolder=function(t,e,a){function n(n,o){n.close=function(){o.close("closed")},n.renameFolder=a,n.renameSave=function(){var a={creditoperationsfileupload_gid:t,folder_name:n.renameFolder,type:e},i="api/IdasTrnDocumentUpload/RenameCreditOperationsFile";r.post(i,a).then(function(t){1==t.data.status?(o.close("closed"),s.alert(t.data.message,"success"),f()):(o.close("closed"),s.alert(t.data.message,"warning"),f())})}}o.open({templateUrl:"/myModalContent1.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]},e.DeleteCreditOperationsDocument=function(t){var e={creditoperationsfileupload_gid:t};u.swal({title:"Are you sure?",text:"Do You Want To Delete this Folder/File ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnDocumentUpload/CreditOperationsFileDelete";r.getparams(a,e).then(function(t){1==t.data.status?(f(),u.swal("Deleted Successfully!"),unlockUI()):(u.swal(t.data.message),unlockUI())})}})},e.downloadcreditoperationsdocument=function(t,e){_.Downloaddocument(t,e)}}angular.module("angle").controller("idasTrnDocumentTaggingCreditOperationsChildController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g){function f(){k=localStorage.getItem("parent_directorygid"),h=localStorage.getItem("customer2sanction_gid"),y=localStorage.getItem("customer_gid"),I=localStorage.getItem("customerfileupload_gid"),e.lspage=localStorage.getItem("lspage");var t={customerfileupload_gid:I},a="api/IdasTrnDocumentUpload/CustomerFilesBreadCrumb";r.getparams(a,t).then(function(t){e.BreadCrumb_list=t.data.FolderDtls});var t={parent_directorygid:I,customer2sanction_gid:h,customer_gid:y},a="api/IdasTrnDocumentUpload/CustomerFolderDtls";r.getparams(a,t).then(function(t){1==t.data.status?e.DocumentDtls_list=t.data.DirectoryDtls:e.DocumentDtls_list=null});var a="api/IdasTrnDocumentUpload/GetCadTeamFlag";r.get(a).then(function(t){unlockUI(),e.cadteam_flag=t.data.cadteam_flag});var t={customer_gid:y},a="api/customer/Getcustomerdetails";r.getparams(a,t).then(function(t){e.customerName=t.data.customerNameedit,e.Customerurn=t.data.customer_urnedit})}var v=this;v.title="idasTrnDocumentTaggingDocChildController",f();var h,y,I,k;e.goChild=function(t){localStorage.setItem("customer_gid",y),localStorage.setItem("customer2sanction_gid",h),localStorage.setItem("customerfileupload_gid",t),f()},e.back=function(){"Sanction"==e.lspage&&d.url("app/idasTrnDocumentTaggingDocView?customer_gid="+y+"&?&customer2sanction_gid="+h),"Customer"==e.lspage&&d.url("app/idasTrnDocumentTaggingView?customer_gid="+y+"&?&customer2sanction_gid=")},e.home=function(){"Sanction"==e.lspage&&d.url("app/idasTrnDocumentTaggingDocView?customer_gid="+y+"&?&customer2sanction_gid="+h),"Customer"==e.lspage&&d.url("app/idasTrnDocumentTaggingView?customer_gid="+y+"&?&customer2sanction_gid=")},e.RenameFolder=function(t,e,a){function n(n,o){n.folderrename=function(t){t.length>128?n.message1="Allowed only  128 Characters":n.message1=""},n.close=function(){o.close("closed")},n.renameFolder=a,n.renameSave=function(){var a={customerfileupload_gid:t,folder_name:n.renameFolder,type:e},i="api/IdasTrnDocumentUpload/RenameCustomerFile";r.post(i,a).then(function(t){1==t.data.status?(o.close("closed"),s.alert(t.data.message,"success"),f()):(o.close("closed"),s.alert(t.data.message,"warning"),f())})}}o.open({templateUrl:"/myModalContent1.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]},e.deleteDocument=function(t){var e={customerfileupload_gid:t};u.swal({title:"Are you sure?",text:"Do You Want To Delete this Folder/File ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnDocumentUpload/FileDelete";r.getparams(a,e).then(function(t){1==t.data.status?(f(),u.swal("Deleted Successfully!"),unlockUI()):(u.swal(t.data.message),unlockUI())})}})},e.PopupFolder=function(){function t(t,e){t.foldername=function(e){e.length>128?t.message="Allowed only  128 Characters":t.message=""},t.createFolder=function(){var a={folder_name:t.folderName,directory_type:"Folder",parent_directorygid:I,customer2sanction_gid:h,customer_gid:y,customerfileupload_gid:I},n="api/IdasTrnDocumentUpload/CreateCustomerFolder";r.post(n,a).then(function(t){1==t.data.status?(e.close("closed"),s.alert(t.data.message,"success"),f()):(e.close("closed"),s.alert("Error Occurred","warning"),f())})},t.close=function(){e.close("closed")}}o.open({templateUrl:"/myModalContent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.downloadsdocument=function(t,e){_.Downloaddocument(t,e)},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.popFileShow=function(){function t(t,e){t.close=function(){e.close("closed")};var a="api/IdasTrnDocumentUpload/GetDocumentLabellist";r.get(a).then(function(e){t.document_labellist=e.data.CreditAdminDocumentLabelList}),t.uploadfile=function(){var a=document.getElementById("file");if(a.files.length>0){var n=new FormData,o=$("#documentlabelname :selected").text();n.append("parent_directorygid",I),n.append("directory_type","File"),n.append("customer_gid",y),n.append("customer2sanction_gid",h),n.append("documentlabel_gid",t.documentlabel_gid.documentlabel_gid),n.append("documentlabel_name",o),n.append("remarks",t.remarks),n.append("project_flag","Default");for(var i=0;i<=a.files.length-1;i++){n.append(a.files[i].name,a.files[i]),t.uploadfrm=n;var c=a.files.item(i).name,d=(a.files.item(i).size,g.fnCheckValidDocType(c,""));if(0==d)return alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}var l="api/IdasTrnDocumentUpload/CustomerFileUpload";lockUI(),r.postFile(l,t.uploadfrm).then(function(t){unlockUI(),1==t.data.status?($("#file").val(""),f(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed")):(s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),f()),e.close("closed"),unlockUI()})}else alert("Please select a file.");e.close("closed")}}o.open({templateUrl:"/Documentuploadcontent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("idasTrnDocumentTaggingDocChildController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f,v,h,y,I,k){function b(){var t={customer2sanction_gid:S},a="api/IdasTrnDocumentUpload/GetDocumentsofSanction";s.getparams(a,t).then(function(t){unlockUI(),e.document_list=t.data.MOM_DocumentList});var t={customer_gid:x},a="api/customer/Getcustomerdetails";s.getparams(a,t).then(function(t){e.customerName=t.data.customerNameedit,e.Customerurn=t.data.customer_urnedit});var t={sanction_gid:S},a="api/IdasMstSanction/SanctionDtlsEdit";s.getparams(a,t).then(function(t){e.sanctionref_no=t.data.sanction_refno,e.sanction_date=t.data.sanction_date,e.sanction_amount=t.data.sanction_amount,e.entity=t.data.entity,e.buyerconfirmation_letter=t.data.status_ofBAL,e.colanding_status=t.data.colanding_status,e.sanction_type=t.data.sanction_type,e.ccapproved_by=t.data.ccapproved_by,e.ccapproved_date=t.data.ccapprovedDate,e.facility_type=t.data.facility_type,e.esdeclaration_status=t.data.esdeclaration_status});var t={sanction_gid:S},a="api/IdasMstSanction/GetBuyerinfoEdit";s.getparams(a,t).then(function(t){e.buyer_list=t.data.buyer_list});var t={parent_directorygid:"$",customer2sanction_gid:S,customer_gid:x},a="api/IdasTrnDocumentUpload/CustomerFolderDtls";s.getparams(a,t).then(function(t){unlockUI(),e.DocumentDtls_list=t.data.DirectoryDtls});var a="api/IdasTrnDocumentUpload/GetCadTeamFlag";s.get(a).then(function(t){unlockUI(),e.cadteam_flag=t.data.cadteam_flag});var t={customer_gid:x,customer2sanction_gid:S},a="api/IdasTrnDocumentUpload/WorkItemArchivalSpecificSummary";s.post(a,t).then(function(t){unlockUI(),e.Documentcustomer_list=t.data.MdlWorkItem})}var D=this;D.title="idasTrnDocumentTaggingDocViewController";var S=l.search().customer2sanction_gid,x=l.search().customer_gid;b(),e.goChild=function(t){localStorage.setItem("customer_gid",x),localStorage.setItem("customer2sanction_gid",S),localStorage.setItem("customerfileupload_gid",t),localStorage.setItem("parent_directorygid",t),localStorage.setItem("lspage","Sanction"),n.go("app.idasTrnDocumentTaggingDocChild")},e.back=function(){l.url("app/idasTrnDocumentTaggingView?customer_gid="+x)},e.RenameFolder=function(t,e,n){function o(a,o){a.folderrename=function(t){t.length>128?a.message1="Allowed only  128 Characters":a.message1=""},a.close=function(){o.close("closed")},a.renameFolder=n,a.renameSave=function(){var n={customerfileupload_gid:t,folder_name:a.renameFolder,type:e},i="api/IdasTrnDocumentUpload/RenameCustomerFile";s.post(i,n).then(function(t){1==t.data.status?(o.close("closed"),d.alert(t.data.message,"success"),b()):(o.close("closed"),d.alert(t.data.message,"warning"),b())})}}a.open({templateUrl:"/myModalContent1.html",controller:o,size:"md"});o.$inject=["$scope","$modalInstance"]},e.deleteDocument=function(t){var e={customerfileupload_gid:t};o.swal({title:"Are you sure?",text:"Do You Want To Delete this Folder/File ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnDocumentUpload/FileDelete";s.getparams(a,e).then(function(t){1==t.data.status?(b(),o.swal("Deleted Successfully!"),unlockUI()):(o.swal(t.data.message),unlockUI())})}})},e.PopupFolder=function(){function t(t,e){t.foldername=function(e){e.length>128?t.message="Allowed only  128 Characters":t.message=""},t.createFolder=function(){var a={folder_name:t.folderName,directory_type:"Folder",parent_directorygid:"$",customer2sanction_gid:S,customer_gid:x},n="api/IdasTrnDocumentUpload/CreateCustomerFolder";s.post(n,a).then(function(t){1==t.data.status?(e.close("closed"),d.alert(t.data.message,"success"),b()):(e.close("closed"),d.alert("Error Occurred","warning"),b())})},t.close=function(){e.close("closed")}}a.open({templateUrl:"/myModalContent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.downloadsdocument=function(t,e){I.Downloaddocument(t,e)},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.popFileShow=function(){function t(t,e){var a="api/IdasTrnDocumentUpload/GetDocumentLabellist";s.get(a).then(function(e){t.document_labellist=e.data.CreditAdminDocumentLabelList}),t.uploadfile=function(){var a=document.getElementById("file");if(a.files.length>0){var n=new FormData,o=$("#documentlabelname :selected").text();n.append("parent_directorygid","$"),n.append("directory_type","File"),n.append("customer_gid",x),n.append("customer2sanction_gid",S),n.append("documentlabel_gid",t.documentlabel_gid.documentlabel_gid),n.append("documentlabel_name",o),n.append("remarks",t.remarks),n.append("project_flag","Default");for(var i=0;i<=a.files.length-1;i++){n.append(a.files[i].name,a.files[i]),t.uploadfrm=n;var c=a.files.item(i).name,r=(a.files.item(i).size,k.fnCheckValidDocType(c,""));if(0==r)return alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}var l="api/IdasTrnDocumentUpload/CustomerFileUpload";lockUI(),s.postFile(l,t.uploadfrm).then(function(t){unlockUI(),1==t.data.status?($("#file").val(""),b(),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),e.close("closed"),b()):(e.close("closed"),d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),b()),unlockUI()})}else alert("Please select a file.");e.close("closed")},t.close=function(){e.close("closed")}}a.open({templateUrl:"/Documentuploadcontent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.trustAsHtml=function(t){return y.trustAsHtml(t)}}angular.module("angle").controller("idasTrnDocumentTaggingDocViewController",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f,v,h,y,I,k){function b(){var t={customer_gid:S},a="api/customer/Getcustomerupdatedetails";s.getparams(a,t).then(function(t){e.customerName=t.data.customerNameedit,e.Customerurn=t.data.customer_urnedit,e.mobileno=t.data.mobileNoedit,e.contactno=t.data.contactnoedit,e.clusterManager=t.data.cluster_manager_name,e.relationshipmgmt=t.data.relationshipmgmt_name,e.creditManager=t.data.creditmanager_name,e.zonalHeadName=t.data.zonal_name,e.businessHeadName=t.data.businesshead_name,e.ContactPerson=t.data.contactPersonedit,e.Address1=t.data.addressline1edit,e.Address2=t.data.addressline2edit,e.VerticalCode=t.data.vertical_code,e.Constitution=t.data.constitution_nameedit,e.emailaddress=t.data.emailedit,e.country=t.data.countryedit});var a="api/IdasTrnDocumentUpload/sanction2customer";s.getparams(a,t).then(function(t){e.sanction_list=t.data.sanction2customer_list});var a="api/IdasTrnDocumentUpload/GetCadTeamFlag";s.get(a).then(function(t){unlockUI(),e.cadteam_flag=t.data.cadteam_flag});var t={parent_directorygid:"$",customer2sanction_gid:"",customer_gid:S},a="api/IdasTrnDocumentUpload/CustomerFolderDtls";s.getparams(a,t).then(function(t){unlockUI(),e.DocumentDtls_list=t.data.DirectoryDtls});var t={customer_gid:S},a="api/IdasTrnDocumentUpload/WorkItemArchivalCustomerSummary";s.post(a,t).then(function(t){unlockUI(),e.Documentcustomer_list=t.data.MdlWorkItem});var t={parent_directorygid:"$",customer_gid:S},a="api/IdasTrnDocumentUpload/CreditFolderDtls";s.getparams(a,t).then(function(t){unlockUI(),e.CreditDocumentDtls_list=t.data.DirectoryDtls});var a="api/IdasTrnDocumentUpload/GetCreditTeamFlag";s.get(a).then(function(t){unlockUI(),e.creditteam_flag=t.data.creditteam_flag});var t={parent_directorygid:"$",customer_gid:S},a="api/IdasTrnDocumentUpload/CreditOperationsFolderDtls";s.getparams(a,t).then(function(t){unlockUI(),e.CreditOperationsDocumentDtls_list=t.data.DirectoryDtls});var a="api/IdasTrnDocumentUpload/GetCreditOperationsTeamFlag";s.get(a).then(function(t){unlockUI(),e.creditoperationteam_flag=t.data.creditoperationteam_flag})}var D=this;D.title="idasTrnDocumentTaggingViewController";var S=l.search().customer_gid;b(),e.goChild=function(t){localStorage.setItem("customer_gid",S),localStorage.setItem("customer2sanction_gid",""),localStorage.setItem("customerfileupload_gid",t),localStorage.setItem("parent_directorygid",t),localStorage.setItem("lspage","Customer"),n.go("app.idasTrnDocumentTaggingDocChild")},e.back=function(){n.go("app.idasTrnDocumentTagging")},e.viewcustomersancdocument=function(t){l.url("app/idasTrnDocumentTaggingDocView?customer2sanction_gid="+t+"&?&customer_gid="+S)},e.RenameFolder=function(t,e,n){function o(a,o){a.folderrename=function(t){t.length>128?a.message1="Allowed only  128 Characters":a.message1=""},a.close=function(){o.close("closed")},a.renameFolder=n,a.renameSave=function(){var n={customerfileupload_gid:t,folder_name:a.renameFolder,type:e},i="api/IdasTrnDocumentUpload/RenameCustomerFile";s.post(i,n).then(function(t){1==t.data.status?(o.close("closed"),d.alert(t.data.message,"success"),b()):(o.close("closed"),d.alert(t.data.message,"warning"),b())})}}a.open({templateUrl:"/myModalContent1.html",controller:o,size:"md"});o.$inject=["$scope","$modalInstance"]},e.deleteDocument=function(t){var e={customerfileupload_gid:t};o.swal({title:"Are you sure?",text:"Do You Want To Delete this Folder/File ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnDocumentUpload/FileDelete";s.getparams(a,e).then(function(t){1==t.data.status?(b(),o.swal("Deleted Successfully!"),unlockUI()):(o.swal(t.data.message),unlockUI())})}})},e.PopupFolder=function(){function t(t,e){t.foldername=function(e){e.length>128?t.message="Allowed only  128 Characters":t.message=""},t.createFolder=function(){var a={folder_name:t.folderName,directory_type:"Folder",parent_directorygid:"$",customer2sanction_gid:"",customer_gid:S},n="api/IdasTrnDocumentUpload/CreateCustomerFolder";s.post(n,a).then(function(t){1==t.data.status?(e.close("closed"),d.alert(t.data.message,"success"),b()):(e.close("closed"),d.alert("Error Occurred","warning"),b())})},t.close=function(){e.close("closed")}}a.open({templateUrl:"/myModalContent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.downloadsdocument=function(t,e){I.Downloaddocument(t,e)},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.popFileShow=function(){function t(t,e){var a="api/IdasTrnDocumentUpload/GetDocumentLabellist";s.get(a).then(function(e){t.document_labellist=e.data.CreditAdminDocumentLabelList}),t.uploadfile=function(){var a=document.getElementById("file");if(a.files.length>0){var n=new FormData,o=$("#documentlabelname :selected").text();n.append("parent_directorygid","$"),n.append("directory_type","File"),n.append("customer_gid",S),n.append("customer2sanction_gid",""),n.append("documentlabel_gid",t.documentlabel_gid.documentlabel_gid),n.append("documentlabel_name",o),n.append("remarks",t.remarks),n.append("project_flag","Default");for(var i=0;i<=a.files.length-1;i++){n.append(a.files[i].name,a.files[i]),t.uploadfrm=n;var c=a.files.item(i).name,r=(a.files.item(i).size,k.fnCheckValidDocType(c,""));if(0==r)return alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}var l="api/IdasTrnDocumentUpload/CustomerFileUpload";lockUI(),s.postFile(l,t.uploadfrm).then(function(t){unlockUI(),1==t.data.status?($("#file").val(""),b(),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),e.close("closed"),b()):(e.close("closed"),d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),b()),unlockUI()})}else alert("Please select a file.");e.close("closed")},t.close=function(){e.close("closed")}}a.open({templateUrl:"/Documentuploadcontent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.trustAsHtml=function(t){return y.trustAsHtml(t)},e.CreditpopFileShow=function(){function t(t,e){var a="api/IdasTrnDocumentUpload/GetDocumentLabellist";s.get(a).then(function(e){t.document_labellist=e.data.CreditUnderwritingDocumentLabelList}),t.uploadfile=function(){var a=document.getElementById("file");if(""==a.value)return void d.alert("Kindly select the file","warning");if(a.files.length>0){var n=new FormData,o=$("#documentlabelname :selected").text();n.append("parent_directorygid","$"),n.append("directory_type","File"),n.append("customer_gid",S),n.append("documentlabel_gid",t.documentlabel_gid.documentlabel_gid),n.append("documentlabel_name",o),n.append("remarks",t.remarks),n.append("project_flag","Default");for(var i=0;i<=a.files.length-1;i++){n.append(a.files[i].name,a.files[i]),t.uploadfrm=n;var c=a.files.item(i).name,r=(a.files.item(i).size,k.fnCheckValidDocType(c,""));if(0==r)return alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}var l="api/IdasTrnDocumentUpload/CreditFileUpload";lockUI(),s.postFile(l,t.uploadfrm).then(function(t){unlockUI(),1==t.data.status?($("#file").val(""),b(),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed")):(d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),e.close("closed")),unlockUI()})}else alert("Please select a file.")},t.close=function(){e.close("closed")}}a.open({templateUrl:"/Documentuploadcontent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.CreditFolder=function(){function t(t,e){t.createFolder=function(){var a={folder_name:t.folderName,directory_type:"Folder",parent_directorygid:"$",customer_gid:S},n="api/IdasTrnDocumentUpload/CreateCreditFolder";s.post(n,a).then(function(t){1==t.data.status?(e.close("closed"),d.alert(t.data.message,"success"),b()):(e.close("closed"),d.alert("Error Occurred","warning"),b())})},t.close=function(){e.close("closed")}}a.open({templateUrl:"/myModalContent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.RenameCreditFolder=function(t,e,n){function o(a,o){a.close=function(){o.close("closed")},a.renameFolder=n,a.renameSave=function(){var n={creditfileupload_gid:t,folder_name:a.renameFolder,type:e},i="api/IdasTrnDocumentUpload/RenameCreditFile";s.post(i,n).then(function(t){1==t.data.status?(o.close("closed"),d.alert(t.data.message,"success"),b()):(o.close("closed"),d.alert(t.data.message,"warning"),b())})}}a.open({templateUrl:"/myModalContent1.html",controller:o,size:"md"});o.$inject=["$scope","$modalInstance"]},e.DeleteCreditDocument=function(t){var e={creditfileupload_gid:t};o.swal({title:"Are you sure?",text:"Do You Want To Delete this Folder/File ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnDocumentUpload/CreditFileDelete";s.getparams(a,e).then(function(t){1==t.data.status?(b(),o.swal("Deleted Successfully!"),unlockUI()):(o.swal(t.data.message),unlockUI())})}})},e.downloadcreditdocument=function(t,e){I.Downloaddocument(t,e)},e.goCreditChild=function(t){localStorage.setItem("customer_gid",S),localStorage.setItem("creditfileupload_gid",t),localStorage.setItem("parent_directorygid",t),n.go("app.idasTrnDocumentTaggingCreditChild");
},e.CreditOperationspopFileShow=function(){function t(t,e){var a="api/IdasTrnDocumentUpload/GetDocumentLabellist";s.get(a).then(function(e){t.document_labellist=e.data.CreditOperationsDocumentLabelList}),t.uploadfile=function(){var a=document.getElementById("file");if(""==a.value)return void d.alert("Kindly select the file","warning");if(a.files.length>0){var n=new FormData,o=$("#documentlabelname :selected").text();n.append("parent_directorygid","$"),n.append("directory_type","File"),n.append("customer_gid",S),n.append("documentlabel_gid",t.documentlabel_gid.documentlabel_gid),n.append("documentlabel_name",o),n.append("remarks",t.remarks),n.append("project_flag","Default");for(var i=0;i<=a.files.length-1;i++){n.append(a.files[i].name,a.files[i]),t.uploadfrm=n;var c=a.files.item(i).name,r=(a.files.item(i).size,k.fnCheckValidDocType(c,""));if(0==r)return alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}var l="api/IdasTrnDocumentUpload/CreditOperationsFileUpload";lockUI(),s.postFile(l,t.uploadfrm).then(function(t){unlockUI(),1==t.data.status?($("#file").val(""),b(),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed")):(d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),e.close("closed")),unlockUI()})}else alert("Please select a file.")},t.close=function(){e.close("closed")}}a.open({templateUrl:"/Documentuploadcontent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.CreditOperationsFolder=function(){function t(t,e){t.createFolder=function(){var a={folder_name:t.folderName,directory_type:"Folder",parent_directorygid:"$",customer_gid:S},n="api/IdasTrnDocumentUpload/CreateCreditOperationsFolder";s.post(n,a).then(function(t){1==t.data.status?(e.close("closed"),d.alert(t.data.message,"success"),b()):(e.close("closed"),d.alert(t.data.message,"warning"),b())})},t.close=function(){e.close("closed")}}a.open({templateUrl:"/myModalContent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.RenameCreditOperationsFolder=function(t,e,n){function o(a,o){a.close=function(){o.close("closed")},a.renameFolder=n,a.renameSave=function(){var n={creditoperationsfileupload_gid:t,folder_name:a.renameFolder,type:e},i="api/IdasTrnDocumentUpload/RenameCreditOperationsFile";s.post(i,n).then(function(t){1==t.data.status?(o.close("closed"),d.alert(t.data.message,"success"),b()):(o.close("closed"),d.alert(t.data.message,"warning"),b())})}}a.open({templateUrl:"/myModalContent1.html",controller:o,size:"md"});o.$inject=["$scope","$modalInstance"]},e.DeleteCreditOperationsDocument=function(t){var e={creditoperationsfileupload_gid:t};o.swal({title:"Are you sure?",text:"Do You Want To Delete this Folder/File ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnDocumentUpload/CreditOperationsFileDelete";s.getparams(a,e).then(function(t){1==t.data.status?(b(),o.swal("Deleted Successfully!"),unlockUI()):(o.swal(t.data.message),unlockUI())})}})},e.downloadcreditoperationsdocument=function(t,e){I.Downloaddocument(t,e)},e.goCreditOperationsChild=function(t){localStorage.setItem("customer_gid",S),localStorage.setItem("creditoperationsfileupload_gid",t),localStorage.setItem("parent_directorygid",t),n.go("app.idasTrnDocumentTaggingCreditOperationsChild")}}angular.module("angle").controller("idasTrnDocumentTaggingViewController",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g){function f(){e.DivFile=!1,e.parent_directorygid=localStorage.getItem("parent_directorygid");var t={fileupload_gid:e.parent_directorygid},a="api/IdasTrnDocumentUpload/BreadCrumb";r.getparams(a,t).then(function(t){e.BreadCrumb_list=t.data.FolderDtls});var t={parent_directorygid:e.parent_directorygid},a="api/IdasTrnDocumentUpload/FolderDtls";r.getparams(a,t).then(function(t){1==t.data.status?e.DirectoryDtls_list=t.data.DirectoryDtls:e.DirectoryDtls_list=null})}var v=this;v.title="idasTrnDocumentUploadChild",f(),e.goChild=function(t){console.log(t),localStorage.setItem("parent_directorygid",t),f()},e.RenameFolder=function(t,e,a){function n(n,o){n.close=function(){o.close("closed")},n.renameFolder=a,n.renameSave=function(){var a={fileupload_gid:t,folder_name:n.renameFolder};if("File"==e)var i="api/IdasTrnDocumentUpload/RenameFile";else var i="api/IdasTrnDocumentUpload/RenameFolder";r.post(i,a).then(function(t){1==t.data.status?(o.close("closed"),s.alert(t.data.message,"success"),f()):(o.close("closed"),s.alert(t.data.message,"warning"),f())})}}o.open({templateUrl:"/myModalContent1.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]},e.deleteDocument=function(t){var e={fileupload_gid:t};u.swal({title:"Are you sure?",text:"Do You Want To Delete this Folder/File ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnDocumentUpload/Delete";r.getparams(a,e).then(function(t){1==t.data.status?(f(),u.swal("Deleted Successfully!"),unlockUI()):(u.swal(t.data.message),unlockUI())})}})},e.FileDetails=function(){var t=document.getElementById("file");if(""==t.value)return void s.alert("Kindly select the file");if(t.files.length>0){var a=new FormData;a.append("parent_directorygid",e.parent_directorygid),a.append("directory_type","File"),a.append("project_flag","Default");for(var n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),e.uploadfrm=a;var o=t.files.item(n).name,i=(t.files.item(n).size,g.fnCheckValidDocType(o,""));if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}var c="api/IdasTrnDocumentUpload/FileUpload";lockUI(),r.postFile(c,e.uploadfrm).then(function(t){unlockUI(),1==t.data.status?($("#file").val(""),f(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):s.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file.")},e.downloadsdocument=function(t,e){_.Downloaddocument(t,e)},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.PopupFolder=function(t){function e(e,a){e.close=function(){a.close("closed")},e.createFolder=function(){var n={folder_name:e.folderName,directory_type:"Folder",parent_directorygid:t},o="api/IdasTrnDocumentUpload/CreateFolder";r.post(o,n).then(function(t){1==t.data.status?(a.close("closed"),s.alert(t.data.message,"success"),f()):(s.alert("Error Occurred","warning"),f())})}}o.open({templateUrl:"/myModalContent.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("idasTrnDocumentUploadChild",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g){function f(){e.totalDisplayed=0,e.total=0,e.DivFile=!1;var t="api/IdasTrnDocumentUpload/FolderDtls",a={parent_directorygid:"$"};r.getparams(t,a).then(function(t){1==t.data.status?(e.DirectoryDtls_list=t.data.DirectoryDtls,null==e.DirectoryDtls_list?(e.total=0,e.totalDisplayed=0):(e.total=e.DirectoryDtls_list.length,e.DirectoryDtls_list.length<100&&(e.totalDisplayed=e.DirectoryDtls_list.length))):(e.total=0,e.totalDisplayed=0)})}var v=this;v.title="idasTrnDocumentUploadMain",f(),e.loadMore=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);if(null!=e.DirectoryDtls_list){if(!(t<e.DirectoryDtls_list.length))return unlockUI(),void s.alert(" Total Summary "+e.DirectoryDtls_list.length+" Records Only","warning");e.totalDisplayed+=a,e.DirectoryDtls_list.length<e.totalDisplayed&&(e.totalDisplayed=e.DirectoryDtls_list.length,s.alert(" Total Summary "+e.DirectoryDtls_list.length+" Records Only","warning")),unlockUI()}unlockUI()},document.getElementById("pagecount").onkeyup=function(){if(null==e.pagecount){var t=document.getElementById("loadmore");t.style.backgroundColor="#DCDCDC"}else{var t=document.getElementById("loadmore");t.style.backgroundColor="#ffa"}},e.deleteDocument=function(t){var e={fileupload_gid:t};u.swal({title:"Are you sure?",text:"Do You Want To Delete this Folder/File ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnDocumentUpload/Delete";r.getparams(a,e).then(function(t){1==t.data.status?(f(),u.swal("Deleted Successfully!"),unlockUI()):(u.swal(t.data.message),unlockUI())})}})},e.FileDetails=function(){var t=document.getElementById("file");if(""==t.value)return void s.alert("Kindly select the file");if(t.files.length>0){var a=new FormData;a.append("parent_directorygid","$"),a.append("directory_type","File"),a.append("project_flag","Default");for(var n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),e.uploadfrm=a;var o=t.files.item(n).name,i=(t.files.item(n).size,g.fnCheckValidDocType(o,""));if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}var c="api/IdasTrnDocumentUpload/FileUpload";lockUI(),r.postFile(c,e.uploadfrm).then(function(t){unlockUI(),1==t.data.status?($("#file").val(""),f(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):s.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file.")},e.downloadsdocument=function(t,e){_.Downloaddocument(t,e)},e.goChild=function(t){localStorage.setItem("parent_directorygid",t),a.go("app.idasTrnDocumentUploadChild")},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.PopupFolder=function(){function t(t,e){t.close=function(){e.close("closed")},t.createFolder=function(){var a={folder_name:t.folderName,directory_type:"Folder",parent_directorygid:"$"},n="api/IdasTrnDocumentUpload/CreateFolder";r.post(n,a).then(function(t){1==t.data.status?(e.close("closed"),s.alert(t.data.message,"success"),f()):(s.alert("Error Occurred","warning"),f())})}}o.open({templateUrl:"/myModalContent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.RenameFolder=function(t,e,a){function n(n,o){n.close=function(){o.close("closed")},n.renameFolder=a,n.renameSave=function(){var a={fileupload_gid:t,folder_name:n.renameFolder};if("File"==e)var i="api/IdasTrnDocumentUpload/RenameFile";else var i="api/IdasTrnDocumentUpload/RenameFolder";r.post(i,a).then(function(t){1==t.data.status?(o.close("closed"),s.alert(t.data.message,"success"),f()):(o.close("closed"),s.alert(t.data.message,"warning"),f())})}}o.open({templateUrl:"/myModalContent1.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("idasTrnDocumentUploadMain",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){var t={nocandndc_gid:e.nocandndc_gid},a="api/IdasNocAndNdc/GetNocDocumentEditList";s.getparams(a,t).then(function(t){e.UploadDocumentList=t.data.UploadNocDocumentList}),f.formats=["dd-MM-yyyy"],f.format=f.formats[0],f.calender1=function(t){t.preventDefault(),t.stopPropagation(),f.open1=!0},f.calender=function(t){t.preventDefault(),t.stopPropagation(),f.open2=!0},f.calender3=function(t){t.preventDefault(),t.stopPropagation(),f.open3=!0},f.dateOptions={formatYear:"yy",startingDay:1};var a="api/employee/employee";s.get(a).then(function(t){e.employee_list=t.data.employee_list});var a="api/IdasNocAndNdc/TempClear";s.get(a).then(function(t){});var a="api/IdasNocAndNdc/GetDropDown";s.get(a).then(function(t){e.vertical_list=t.data.vertical_list});var t={nocandndc_gid:e.nocandndc_gid},a="api/IdasNocAndNdc/EditNoc";s.getparams(a,t).then(function(t){e.cbomaker=t.data.maker_gid,e.cbochecker=t.data.checker_gid,e.txtnocrequestdate=t.data.nocandndc_date,e.txtcustomer_name=t.data.customer_name,e.cboVertical=t.data.vertical_gid,e.txtsanction_ref_no=t.data.sanction_ref_no,e.txtsanctiondate=t.data.sanction_date,e.txtloan_account_no=t.data.loan_account_no,e.txtnocissuancedate=t.data.noc_issuance_date})}var f=this;f.title="idasTrnEditNocAndNdcController",e.nocandndc_gid=l.search().lsnocandndc_gid;var v=e.nocandndc_gid;g(),e.Nocclose=function(){n.go("app.idasTrnNocAndNdc")},e.NocNDcDocumentUpload=function(){var t=document.getElementById("file");if(t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),a.append("project_flag","Default"),e.uploadfrm=a;var o=t.files.item(n).name,i=(t.files.item(n).size,_.fnCheckValidDocType(o,""));if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("file_name",e.txtdoc_name);var c="api/IdasNocAndNdc/NocDocumentUpload";lockUI(),s.postFile(c,e.uploadfrm).then(function(t){$("#file").val("");var a={nocandndc_gid:e.nocandndc_gid},n="api/IdasNocAndNdc/GetNocDocumentTempEditList";s.getparams(n,a).then(function(t){e.UploadDocumentList=t.data.UploadNocDocumentList}),unlockUI(),1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file."),unlockUI();e.txtdoc_name=""},e.downloads=function(t,e){var a=t,n=a.split("StoryboardAPI"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");s.download=e;var d=r;s.href=d,s.click()},e.uploaddocumentcancel=function(t){var a={nocandndcdocument_gid:t,nocandndc_gid:v},n="api/IdasNocAndNdc/GetNocDocumentDelete";s.getparams(n,a).then(function(t){if(1==t.data.status){var a={nocandndc_gid:v},n="api/IdasNocAndNdc/GetNocDocumentTempEditList";s.getparams(n,a).then(function(t){e.UploadDocumentList=t.data.UploadNocDocumentList}),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3});unlockUI()})},e.NocUpdate=function(){var t="",a="",o="",i="",c=$("#Vertical :selected").text();void 0==e.cbomaker&&null==e.cbomaker||(t=$("#maker_name :selected").text(),o=e.cbomaker),void 0==e.cbochecker&&null==e.cbochecker||(a=$("#checker_name :selected").text(),i=e.cbochecker);var r={nocandndc_gid:v,maker_gid:o,maker_name:t,checker_gid:i,checker_name:a,vertical_gid:e.cboVertical,vertical_name:c,customer_name:e.txtcustomer_name,sanction_ref_no:e.txtsanction_ref_no,sanction_date:e.txtsanctiondate,loan_account_no:e.txtloan_account_no,noc_issuance_date:e.txtnocissuancedate,nocandndc_date:e.txtnocrequestdate},l="api/IdasNocAndNdc/UpdateNoc";lockUI(),s.post(l,r).then(function(t){unlockUI(),1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),n.go("app.idasTrnNocAndNdc")})}}angular.module("angle").controller("idasTrnEditNocAndNdcController",t),t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f){function v(){e.DivFile=!1,e.IsCreate=!1,e.IsCreateBox=!1,e.user={},e.box={},e.tab={},e.totalDisplayedDespatch=100,e.totalDisplayedpendingbatch=100,h.calenderDespatch=function(t){t.preventDefault(),t.stopPropagation(),h.openDespatch=!0},h.calenderBox=function(t){t.preventDefault(),t.stopPropagation(),h.openBox=!0};var t=window.location.href,a=t.split("lstab="),n=a[1];void 0!=n?"batch"==n?e.tabbatch=!0:"box"==n?e.tabbox=!0:"despatch"==n?e.tabdespatch=!0:"pendingbatch"==n&&(e.tabpendingbatch=!0):void 0==e.tab.activeTabId?e.tabpendingbatch=!0:"batch"==e.tab.activeTabId?e.tabbatch=!0:"box"==e.tab.activeTabId?e.tabbox=!0:"despatch"==e.tab.activeTabId?e.tabdespatch=!0:"pendingbatch"==e.tab.activeTabId&&(e.tabpendingbatch=!0),h.dateOptions={formatYear:"yy",startingDay:1},h.formats=["dd-MM-yyyy"],h.format=h.formats[0];var t="api/IdasTrnFile2Despatch/GetFileCount";lockUI(),r.get(t).then(function(t){unlockUI(),e.totalfile_count=t.data.totalfile_count,e.taggedfile_count=t.data.taggedfile_count,e.untaggedfile_count=t.data.untaggedfile_count,e.totalbox_count=t.data.totalbox_count,e.taggedbox_count=t.data.taggedbox_count,e.untaggedbox_count=t.data.untaggedbox_count,e.despatch_count=t.data.despatch_count});var t="api/IdasTrnFile2Despatch/BatchSummary";lockUI(),r.get(t).then(function(t){unlockUI(),e.batch_list=t.data.MdlbatchSummary,null==e.batch_list?e.totalBatch=0:e.totalBatch=e.batch_list.length});var t="api/IdasTrnFile2Despatch/CartonBoxSummary";lockUI(),r.get(t).then(function(t){unlockUI(),e.box_list=t.data.MdlCartonBoxSummary,null!=e.box_list?e.totalBox=e.box_list.length:e.totalBox=0});var t="api/IdasTrnFile2Despatch/DespatchSummary";lockUI(),r.get(t).then(function(t){unlockUI(),null!=e.despatch_list?e.totalDespatch=0:(e.despatch_list=t.data.MdlDespatch,e.totalDespatch=e.despatch_list.length)});var t="api/IdasTrnFile2Despatch/BatchPendingSummary";lockUI(),r.get(t).then(function(t){unlockUI(),e.pendingbatch_list=t.data.MdlbatchSummary,null==e.pendingbatch_list?e.totalpendingbatch=0:e.totalpendingbatch=e.pendingbatch_list.length})}var h=this;e.tabbatch=!1,e.tabbox=!1,e.tabdespatch=!1,e.tabpendingbatch=!1,v(),e.loadMoreDespatch=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayedDespatch+=a,unlockUI()},e.loadMorependingbatch=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayedpendingbatch+=a,unlockUI()},e.checkallBatch=function(t){angular.forEach(e.batch_list,function(e){e.checked=t})},e.checkallBox=function(t){angular.forEach(e.box_list,function(e){e.checked=t})},e.UpdateStamp=function(t,a){var n="api/IdasTrnFile2Despatch/BatchStampNo",o={sanction_gid:t,stampref_no:a};r.post(n,o).then(function(t){1==t.data.status?s.alert(t.data.message,"success"):s.alert(t.data.message),e.tab.activeTabId="batch",v()})},e.boxclose=function(){e.IsCreateBox=!1},e.createBox=function(){var t;angular.forEach(e.batch_list,function(e){1==e.checked&&(t=e.batch_gid)}),void 0==t?s.alert("Select Atleast One Record!"):e.IsCreateBox=!0},e.BoxSubmit=function(){var t,a=[];angular.forEach(e.batch_list,function(e){1==e.checked&&(t=e.batch_gid,a.push(t))});var n={batch_gid:a,stampref_no:e.box.stampref_no,cartonbox_date:e.box.BoxedDate,remarks:e.box.boxRemarks,boxbarcoderef_no:e.box.barcoderef_no};if(void 0!=t){var o="api/IdasTrnFile2Despatch/CreateCartonBox";lockUI(),r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success")):(unlockUI(),s.alert(t.data.message)),e.tab.activeTabId="batch",v()})}else s.alert("Select Atleast One Record!")},e.gotodespatchdetails=function(){a.go("app.despatchdetails")},e.boxupdate=function(){a.go("app.boxStampupdate")},e.filedetails=function(){a.go("app.fileStamprefupdate")},e.despatchback=function(){a.go("app.idasTrnFile2Despatch")},e.backfiles=function(){a.go("app.idasTrnFile2Despatch")},e.createDespatch=function(){var t,a=[];if(angular.forEach(e.box_list,function(e){1==e.checked&&(t=e.cartonbox_gid,a.push(t))}),void 0!=t){var n={conversationdocument_gid:"undefine"},o="api/IdasTrnSanctionDoc/deleteconversedoc";lockUI(),r.getparams(o,n).then(function(t){}),unlockUI(),e.IsCreate=!0}else s.alert("Select Atleast One Record!")},e.close=function(){e.IsCreate=!1},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.despatchdocumentupload=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_title",e.user.txtdocument_title),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasTrnSanctionDoc/ConversationDocUpload";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if($("#commonupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.downloadsdocument=function(t,e){g.Downloaddocument(t,e)},e.deletedocument=function(t){var a={conversationdocument_gid:t},n="api/IdasTrnSanctionDoc/deleteconversedoc";lockUI(),r.getparams(n,a).then(function(t){if(1==t.data.status){unlockUI(),s.alert("Document deleted Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),s.alert("Error Occurred")})},e.gotoBatch360=function(t){localStorage.setItem("sanction_gid",t),localStorage.setItem("page","Batch"),a.go("app.IdasTrnBatchView")},e.gotoBox360=function(t){localStorage.setItem("cartonbox_gid",t),a.go("app.IdasTrnBoxDtlsView")},e.gotoDespatch360=function(t){localStorage.setItem("despatch_gid",t),a.go("app.IdasTrnDespatchDtlsView")},e.pendingBatch360=function(t){localStorage.setItem("sanction_gid",t),localStorage.setItem("page","pendingbatch"),a.go("app.IdasTrnBatchView")},e.DespatchSubmit=function(){var t,a=[];angular.forEach(e.box_list,function(e){1==e.checked&&(t=e.cartonbox_gid,a.push(t))});var n={cartonbox_gid:a,despatch_date:e.user.txtDespatchDate,vendor_name:"Crown",contact_person:e.user.contactPerson,mobile_no:e.user.mobileNo,stampref_no:e.user.stampref_no,desptached_by:e.user.DespatchedBy,remarks:e.user.despatchRemarks},o="api/IdasTrnFile2Despatch/CreateDespatch";lockUI(),r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),e.tab.activeTabId="despatch",v(),s.alert(t.data.message,"success")):(unlockUI(),s.alert(t.data.message))})},e.UpdateBarCode=function(t){function e(e,a){e.ok=function(){a.close("closed")};var n={sanction_gid:t},o="api/IdasTrnFile2Despatch/EditBarCode";r.getparams(o,n).then(function(t){e.customername=t.data.customer_name,e.customer_urn=t.data.customer_urn,e.barcoderef_no=t.data.barcoderef_no}),e.update=function(){var n={sanction_gid:t,barcoderef_no:e.barcoderef_no},o="api/IdasTrnFile2Despatch/UpdateBarCode";r.post(o,n).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed"),v()):(s.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),a.close("closed"))})}}o.open({templateUrl:"/updatebarcodenumberpopup.html",controller:e,size:"md",backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},e.importbatch=function(){function t(t,e){t.ok=function(){e.close("closed")},t.exportbatchreport=function(){lockUI();var t="api/IdasTrnFile2Despatch/BatchExportExcel";r.get(t).then(function(t){1==t.data.status?(unlockUI(),g.Downloaddocument(t.data.lscloudpath,t.data.lsname)):(unlockUI(),s.alert("Error Occurred While Export !","warning"))})},t.uploadbatch=function(a,n,o){var i=document.getElementById("fileimport"),c=i.value;t.fileinputvalue=c;var r=/(\.xls|\.xlsx|\.csv)$/i;if(r.exec(c)){var d={name:a[0].name,file:a[0]},l=new FormData;l.append("fileupload",d.file),l.append("file_name",d.name),l.append("project_flag","Default"),t.uploadfrm=l}else s.alert("File Format Not Supported!","warning"),e.close("closed")},t.uploadExcelBatch=function(){if(""==t.fileinputvalue||void 0==t.fileinputvalue||null==t.fileinputvalue)s.alert("Kindly Select the Excel file","warning");else{var n="api/IdasTrnFile2Despatch/BatchImportExcel";lockUI(),r.postFile(n,t.uploadfrm).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed"),v(),a.go("app.idasTrnFile2Despatch")):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),e.close("closed")),$("#fileimport").val("")})}},t.uploadExcelCancel=function(){$("#fileimport").val("")}}o.open({templateUrl:"/importBatch.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("idasTrnFile2Despatch",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f){function v(){e.lsacreate_gid=localStorage.getItem("lsacreate_gid"),e.document_panel=!0,e.panel=!0,e.panel1=!0,e.facility=!1,e.amount_validation=!1,y.calender1=function(t){t.preventDefault(),t.stopPropagation(),y.open1=!0},y.calender2=function(t){t.preventDefault(),t.stopPropagation(),y.open2=!0},y.calender3=function(t){t.preventDefault(),t.stopPropagation(),y.open3=!0},e.interchangeabilityno=!0,e.interchangeabilityyes=!1,e.onchangefacility=!1;var t=new Date,a=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2);e.txtdate=[n,a,t.getFullYear()].join("-"),y.formats=["dd-MM-yyyy"],y.format=y.formats[0],y.dateOptions={formatYear:"yy",startingDay:1};var o={lsacreate_gid:e.lsacreate_gid},i="api/IdasTrnLsaManagement/Getsanction2loanfacility";r.getparams(i,o).then(function(t){e.loanfacility_list=t.data.loanfacility_list});var i="api/IdasTrnLsaManagement/limitref_no";r.getparams(i,o).then(function(t){e.limitinfo_limit=t.data.limitinfo_limit});var i="api/IdasTrnLsaManagement/ODLIM";r.getparams(i,o).then(function(t){e.txtodlim=t.data.odlim,null==t.data.total_document_limit?e.limit="0,0":e.limit=t.data.total_document_limit});var i="api/IdasTrnLsaManagement/limitinfodtl";r.getparams(i,o).then(function(t){e.limitinfo_limit=t.data.limitinfo_limit,e.total_document_limit=t.data.total_document_limit,e.totol_limit_released=t.data.totol_limit_released})}function h(t){var e=["","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ","Eleven ","Twelve ","Thirteen ","Fourteen ","Fifteen ","Sixteen ","Seventeen ","Eighteen ","Nineteen "],a=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],n=t.toString();if(n=n.replace(/[\, ]/g,""),n!=parseFloat(n))return"";if((t=t.toString()).length>9)return"Overflow";var o=("000000000"+t).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(o){var i="";return i+=0!=o[1]?(e[Number(o[1])]||a[o[1][0]]+" "+e[o[1][1]])+"Crore ":"",i+=0!=o[2]?(e[Number(o[2])]||a[o[2][0]]+" "+e[o[2][1]])+"Lakh ":"",i+=0!=o[3]?(e[Number(o[3])]||a[o[3][0]]+" "+e[o[3][1]])+"Thousand ":"",i+=0!=o[4]?(e[Number(o[4])]||a[o[4][0]]+" "+e[o[4][1]])+"Hundred ":"",i+=0!=o[5]?(""!=i?"and ":"")+(e[Number(o[5])]||a[o[5][0]]+" "+e[o[5][1]])+"only ":""}}var y=this;y.title="limitInfoaddController",v(),e.lsaback=function(){a.go("app.lsaManagementadd")},e.loanfacility_amount=function(){var t,a=document.getElementById("txtInputloanfacility_type").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=Number(o).toLocaleString("en-IN"),c=h(o);"NaN"==i?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtloanfacility_amount=""):(document.getElementById("loanfacilityamount_words").innerHTML=c,e.txtloanfacility_amount=i),e.warningfacility_amount=!0},e.lsalimitinfo_submit=function(t){if(e.text==e.txtrate_interest){lockUI();var n={lsacreate_gid:e.lsacreate_gid,facility_type:e.loanmaster_gid.loan_title,facility_type_gid:e.loanmaster_gid.loanmaster_gid,margin:e.txtmargin,existing_limit:e.txtexistinglimit,document_limit:e.txtdocument_limit,limit_released:e.txtlimit_released,tenure:e.txttenure,revolving_type:e.rdbrevolving,sub_limit:e.txtsub_limit,rate_interest:e.txtrate_interest,expirydate:e.txtexpiry_date,limitinfo_remarks:e.txtremarks,limit_validation:e.limit,interchangeability:e.rdbinterchangeability,report_structure:e.cboreport_structure,odlim:e.txtodlim,loanfacility_amount:e.txtloanfacility_amount,change_request:e.rdbchangerequest},o="api/IdasTrnLsaManagement/postlimitinfo";r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),v(),a.go("app.lsaManagementadd"),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})}else if(e.document_panel=!1,void 0!=e.uploadfrm){lockUI();var o="api/IdasTrnLsaManagement/PostROIDocumentUpload";r.postFile(o,e.uploadfrm).then(function(t){var n={lsacreate_gid:e.lsacreate_gid,facility_type:e.loanmaster_gid.loan_title,facility_type_gid:e.loanmaster_gid.loanmaster_gid,margin:e.txtmargin,existing_limit:e.txtexistinglimit,document_limit:e.txtdocument_limit,limit_released:e.txtlimit_released,tenure:e.txttenure,revolving_type:e.rdbrevolving,sub_limit:e.txtsub_limit,rate_interest:e.txtrate_interest,expirydate:e.txtexpiry_date,limitinfo_remarks:e.txtremarks,limit_validation:e.limit,interchangeability:e.rdbinterchangeability,report_structure:e.cboreport_structure,odlim:e.txtodlim,loanfacility_amount:e.txtloanfacility_amount,change_request:e.rdbchangerequest},o="api/IdasTrnLsaManagement/postlimitinfo";r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),v(),a.go("app.lsaManagementadd"),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})})}else s.alert("ROI amount is changed. Kindly upload the reference document")},e.upload=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("project_flag","Default"),e.uploadfrm=c},e.bankdetails=function(t){var a={lsacreate_gid:e.lsacreate_gid,bank_name:e.txtbank_name,account_no:e.txtaccount_no,ifsc_code:e.txtifsc_code},n="api/IdasTrnLsaManagement/postbankinfo";lockUI(),r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),v(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})),v()}),e.txtbank_name="",e.txtaccount_no="",e.txtifsc_code=""},e.amountschange=function(){var t,a=document.getElementById("txtInput").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==c?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtexistinglimit=""):(document.getElementById("existinglimit_words").innerHTML=i,e.txtexistinglimit=c)},e.amountschange1=function(){var t,a=document.getElementById("txtInput1").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==c?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtdocument_limit=""):(document.getElementById("documentlimit_words").innerHTML=i,e.txtdocument_limit=c,e.txtodlim.replace(/[\s,]+/g,"").trim()-e.limit.replace(/[\s,]+/g,"").trim()<e.txtdocument_limit.replace(/[\s,]+/g,"").trim()?e.panel1=!1:e.panel1=!0);
},e.amountschange2=function(){var t,a=document.getElementById("txtInput2").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==c?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtlimit_released=""):(document.getElementById("limitreleased_words").innerHTML=i,e.txtlimit_released=c,e.txtlimit_released.replace(/[\s,]+/g,"").trim()>e.txtdocument_limit.replace(/[\s,]+/g,"").trim()-e.txtexistinglimit.replace(/[\s,]+/g,"").trim()?e.panel=!1:e.panel=!0)},e.amountschange3=function(){var t,a=document.getElementById("txtInput3").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=Number(o).toLocaleString("en-IN"),c=h(o);"NaN"==i?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtodlim=""):(document.getElementById("odlim_words").innerHTML=c,e.txtodlim=i)},e.interchangeability_yes=function(){e.interchangeabilityno=!1,e.interchangeabilityyes=!0},e.interchangeability_no=function(){e.interchangeabilityno=!0,e.interchangeabilityyes=!1},e.facilityamount=function(){var t={lsacreate_gid:e.lsacreate_gid,loanfacility_gid:e.loanmaster_gid.loanmaster_gid},a="api/IdasTrnLsaManagement/Getloanfacilityamount";r.post(a,t).then(function(t){e.txtloanfacility_amount=t.data.loanfacility_amount,e.txtdocument_limit=t.data.document_limit,e.txtmargin=t.data.margin,e.txttenure=t.data.tenure,e.rdbinterchangeability=t.data.interchangeability,e.txtexpiry_date=new Date(t.data.expiry_date),e.rdbrevolving=t.data.revolving_type,e.cboreport_structure=t.data.report_structure,"Yes"==t.data.interchangeability?e.interchangeabilityyes=!0:e.interchangeabilityyes=!1,e.onchangefacility=!0,e.amount_validation=!0,e.loanfacilityref_list=t.data.loanfacilitytype_list,null==t.data.existing_limit?e.txtexistinglimit="0,0":e.txtexistinglimit=t.data.existing_limit,e.txtrate_interest=t.data.proposed_roi,e.text=t.data.proposed_roi})}}angular.module("angle").controller("limitInfoaddController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$parse","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f){function v(){e.limitinfodtl_gid=localStorage.getItem("limitinfodtl_gid"),e.document=!1,e.panel=!0,e.panel1=!0,e.panel2=!0,y.calender1=function(t){t.preventDefault(),t.stopPropagation(),y.open1=!0},y.calender2=function(t){t.preventDefault(),t.stopPropagation(),y.open2=!0},y.calender3=function(t){t.preventDefault(),t.stopPropagation(),y.open3=!0},e.interchangeabilityno=!0,e.interchangeabilityyes=!1;var t={limitinfodtl_gid:e.limitinfodtl_gid},a="api/IdasTrnLsaManagement/editsanction2loanfacility";r.getparams(a,t).then(function(t){e.loanfacility_list=t.data.loanfacility_list});var a="api/IdasTrnLsaManagement/GetditLimitInfo";lockUI(),r.getparams(a,t).then(function(t){e.cbonode_type=t.data.node_edit,e.txtmargin_edit=t.data.margin_edit,e.txtexpiry_date_edit=new Date(t.data.expirydate_edit),e.txtdocument_limit_edit=t.data.document_limit_edit,e.txtlimit_released_edit=t.data.limit_released_edit,e.txttenure_edit=t.data.tenure_edit,e.rdbrevolving_edit=t.data.revolving_type_edit,e.txtrate_interest_edit=t.data.rate_interest_edit,e.txtsub_limit_edit=t.data.sub_limit_edit,e.txtremarks_edit=t.data.limitinfo_remarks_edit,e.txtexistinglimit_edit=t.data.existing_limit_edit,e.cboloanmaster_gid=t.data.facility_type_gid,"Yes"==t.data.interchangeability?(e.interchangeabilityno=!1,e.interchangeabilityyes=!0):(e.interchangeabilityno=!0,e.interchangeabilityyes=!1),e.rdbinterchangeability=t.data.interchangeability,e.limitref_no=t.data.limitref_no,e.txtodlim=t.data.odlim,e.txtloanfacility_amount=t.data.facility_amount,null==t.data.total_document_limit||""==t.data.total_document_limit?e.limit="0,0":e.limit=t.data.total_document_limit,e.loanfacilityref_list=t.data.loanfacilitytype_list,e.cboreport_structureedit=t.data.report_structure,e.rdbchangerequest=t.data.change_request,e.text=t.data.rate_interest_edit,e.document_name=t.data.document_name,e.document_path=t.data.document_path,console.log(t.data.total_document_limit),unlockUI()})}function h(t){var e=["","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ","Eleven ","Twelve ","Thirteen ","Fourteen ","Fifteen ","Sixteen ","Seventeen ","Eighteen ","Nineteen "],a=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],n=t.toString();if(n=n.replace(/[\, ]/g,""),n!=parseFloat(n))return"";if((t=t.toString()).length>9)return"Overflow";var o=("000000000"+t).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(o){var i="";return i+=0!=o[1]?(e[Number(o[1])]||a[o[1][0]]+" "+e[o[1][1]])+"Crore ":"",i+=0!=o[2]?(e[Number(o[2])]||a[o[2][0]]+" "+e[o[2][1]])+"Lakh ":"",i+=0!=o[3]?(e[Number(o[3])]||a[o[3][0]]+" "+e[o[3][1]])+"Thousand ":"",i+=0!=o[4]?(e[Number(o[4])]||a[o[4][0]]+" "+e[o[4][1]])+"Hundred ":"",i+=0!=o[5]?(""!=i?"and ":"")+(e[Number(o[5])]||a[o[5][0]]+" "+e[o[5][1]])+"only ":""}}var y=this;y.title="limitInfoEditController",v(),e.lsaback=function(){a.go("app.lsaManagementadd")},e.facilitytype_amount=function(){var t,a=document.getElementById("txtInputloanfacility_type").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=Number(o).toLocaleString("en-IN"),c=h(o);"NaN"==i?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtloanfacility_amount=""):(document.getElementById("loanfacilityamount_words").innerHTML=c,e.txtloanfacility_amount=i,e.warningfacility_amount=!0)},e.limitinfo_update=function(t){if(e.text==e.txtrate_interest_edit){var n=$("#loan_title :selected").text(),o={limitinfodtl_gid:e.limitinfodtl_gid,facility_type_edit:n,facility_type_gid:e.cboloanmaster_gid,margin_edit:e.txtmargin_edit,existing_limit_edit:e.txtexistinglimit_edit,document_limit_edit:e.txtdocument_limit_edit,limit_released_edit:e.txtlimit_released_edit,tenure_edit:e.txttenure_edit,revolving_type_edit:e.rdbrevolving_edit,sub_limit_edit:e.txtsub_limit_edit,rate_interest_edit:e.txtrate_interest_edit,limitinfo_remarks_edit:e.txtremarks_edit,node_edit:e.cbonode_type,interchangeability:e.rdbinterchangeability,expiry_date_edit:e.txtexpiry_date_edit,odlim:e.txtodlim,report_structure:e.cboreport_structureedit,limit_validation:e.limit,facility_amount:e.txtloanfacility_amount,change_request:e.rdbchangerequest},i="api/IdasTrnLsaManagement/updatelimitinfo";lockUI(),r.post(i,o).then(function(t){1==t.data.status?(unlockUI(),a.go("app.lsaManagementadd"),v(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})}else if(""==e.document_name||null==e.document_name)if(e.document=!0,void 0!=e.uploadfrm){var i="api/IdasTrnLsaManagement/PostROIDocumentUpload";r.postFile(i,e.uploadfrm).then(function(t){var n=$("#loan_title :selected").text(),o={limitinfodtl_gid:e.limitinfodtl_gid,facility_type_edit:n,facility_type_gid:e.cboloanmaster_gid,margin_edit:e.txtmargin_edit,existing_limit_edit:e.txtexistinglimit_edit,document_limit_edit:e.txtdocument_limit_edit,limit_released_edit:e.txtlimit_released_edit,tenure_edit:e.txttenure_edit,revolving_type_edit:e.rdbrevolving_edit,sub_limit_edit:e.txtsub_limit_edit,rate_interest_edit:e.txtrate_interest_edit,limitinfo_remarks_edit:e.txtremarks_edit,node_edit:e.cbonode_type,interchangeability:e.rdbinterchangeability,expiry_date_edit:e.txtexpiry_date_edit,odlim:e.txtodlim,report_structure:e.cboreport_structureedit,limit_validation:e.limit,facility_amount:e.txtloanfacility_amount,change_request:e.rdbchangerequest};console.log(o);var i="api/IdasTrnLsaManagement/updatelimitinfo";lockUI(),r.post(i,o).then(function(t){1==t.data.status?(unlockUI(),a.go("app.lsaManagementadd"),v(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})})}else s.alert("ROI amount is changed. Kindly upload the reference document");else{var n=$("#loan_title :selected").text(),o={limitinfodtl_gid:e.limitinfodtl_gid,facility_type_edit:n,facility_type_gid:e.cboloanmaster_gid,margin_edit:e.txtmargin_edit,existing_limit_edit:e.txtexistinglimit_edit,document_limit_edit:e.txtdocument_limit_edit,limit_released_edit:e.txtlimit_released_edit,tenure_edit:e.txttenure_edit,revolving_type_edit:e.rdbrevolving_edit,sub_limit_edit:e.txtsub_limit_edit,rate_interest_edit:e.txtrate_interest_edit,limitinfo_remarks_edit:e.txtremarks_edit,node_edit:e.cbonode_type,interchangeability:e.rdbinterchangeability,expiry_date_edit:e.txtexpiry_date_edit,odlim:e.txtodlim,report_structure:e.cboreport_structureedit,limit_validation:e.limit,facility_amount:e.txtloanfacility_amount,change_request:e.rdbchangerequest},i="api/IdasTrnLsaManagement/updatelimitinfo";lockUI(),r.post(i,o).then(function(t){1==t.data.status?(unlockUI(),a.go("app.lsaManagementadd"),v(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})}},e.downloads=function(t,e){g.Downloaddocument(t,e)},e.upload=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("project_flag","Default"),e.uploadfrm=c},e.amountschange=function(){var t,a=document.getElementById("txtInput").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==c?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtexistinglimit_edit=""):(document.getElementById("existinglimit_words").innerHTML=i,e.txtexistinglimit_edit=c)},e.amountschange1=function(){var t,a=document.getElementById("txtInput1").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==c?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtdocument_limit_edit=""):(document.getElementById("documentlimit_words").innerHTML=i,e.txtdocument_limit_edit=c,e.txtodlim.replace(/[\s,]+/g,"").trim()-e.limit.replace(/[\s,]+/g,"").trim()<e.txtdocument_limit_edit.replace(/[\s,]+/g,"").trim()?e.panel2=!1:e.panel2=!0)},e.amountschange2=function(){var t,a=document.getElementById("txtInput2").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==c?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtlimit_released_edit=""):(document.getElementById("limitreleased_words").innerHTML=i,e.txtlimit_released_edit=c,e.txtlimit_released_edit.replace(/[\s,]+/g,"").trim()>e.txtdocument_limit_edit.replace(/[\s,]+/g,"").trim()-e.txtexistinglimit_edit.replace(/[\s,]+/g,"").trim()?e.panel=!1:e.panel=!0)},e.amountschange3=function(){var t,a=document.getElementById("txtInput3").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=Number(o).toLocaleString("en-IN"),c=h(o);"NaN"==i?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtodlim=""):(document.getElementById("odlim_words").innerHTML=c,e.txtodlim=i)},e.interchangeability_yes=function(){e.interchangeabilityno=!1,e.interchangeabilityyes=!0},e.interchangeability_no=function(){e.interchangeabilityno=!0,e.interchangeabilityyes=!1},e.facilityamount=function(){var t={limitinfodtl_gid:e.limitinfodtl_gid,loanfacility_gid:e.cboloanmaster_gid},a="api/IdasTrnLsaManagement/GetEditloanfacilityamount";r.post(a,t).then(function(t){e.txtloanfacility_amount=t.data.loanfacility_amount,e.txtdocument_limit_edit=t.data.document_limit,e.txtmargin_edit=t.data.margin,e.txttenure_edit=t.data.tenure,e.rdbinterchangeability=t.data.interchangeability,e.txtexpiry_date_edit=new Date(t.data.expiry_date),e.rdbrevolving_edit=t.data.revolving_type,e.cboreport_structureedit=t.data.report_structure,"Yes"==t.data.interchangeability?e.interchangeabilityyes=!0:e.interchangeabilityyes=!1,e.onchangefacility=!0,e.amount_validation=!0,e.loanfacilityref_list=t.data.loanfacilitytype_list,e.text=t.data.proposed_roi})},e.cancel=function(t){var a={limitinfodtl_gid:t},n="api/IdasTrnLsaManagement/CancelDocument";r.getparams(n,a).then(function(t){1==t.data.status&&(v(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})),e.document=!0})}}angular.module("angle").controller("limitInfoEditController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$parse","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){e.tab={},e.totalDisplayedpending=100,e.totalDisplayedapproved=100;var t="api/IdasTrnLsaManagement/LSAapprovalpendinginfo";lockUI(),r.get(t).then(function(t){unlockUI(),e.pendinglist=t.data.lsa_list,e.approvedlist=t.data.approvedlsa_list,null==e.pendinglist?e.pendingCount=0:e.pendingCount=e.pendinglist.length,null==e.approvedlist?e.approvedCount=0:e.approvedCount=e.approvedlist.length,e.pendinglsa_count=t.data.pendinglsa_count,e.approvedlsa_count=t.data.approvedlsa_count});var t=window.location.href,a=t.split("lstab="),n=a[1];void 0!=n?"Pending"==n?e.tabpending=!0:"Approved"==n&&(e.tabapproved=!0):void 0==e.tab.activeTabId?e.tabpending=!0:"Pending"==e.tab.activeTabId?e.tabpending=!0:"Approved"==e.tab.activeTabId&&(e.tabapproved=!0)}e.title="lsaapprovalController",g(),e.loadMorepending=function(t){lockUI();var a=parseInt(t);e.totalDisplayedpending+=a,unlockUI()},e.loadMoreapproved=function(t){lockUI();var a=parseInt(t);e.totalDisplayedapproved+=a,unlockUI()},e.LSApdf=function(t){var e={lsacreate_gid:t};console.log(e);var a="api/IdasTrnLsaManagement/GetLSApdf";lockUI(),r.getparams(a,e).then(function(t){1==t.data.status?(_.Downloaddocument(t.data.file_path,"LSA Report.pdf"),s.alert("LSA Report Downloaded Successfully","success"),unlockUI()):(unlockUI(),s.alert("Error Occurred While Export PDF !","warning"))})},e.loadMore=function(t){lockUI();var a=parseInt(t);e.totalDisplayed+=a,unlockUI()},e.View=function(t){e.lsacreate_gid=localStorage.setItem("lsacreate_gid",t),d.url("app/IdasTrnLSAapprovalview?lstab=Approved")},e.lsaapproval=function(t){e.lsacreate_gid=localStorage.setItem("lsacreate_gid",t),d.url("app/IdasTrnLSAapprovalview?lstab=Pending")}}angular.module("angle").controller("lsaapprovalController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){e.lsacreate_gid=localStorage.getItem("lsacreate_gid");var t=window.location.href,a=t.split("lstab=");e.relpath1=a[1],e.stepone=!1,e.steptwo=!0,e.stepthree=!0,e.stepfour=!0,e.stepfive=!0,e.stepsix=!0,e.tobe_recovered=!1,e.already_recovered=!1,e.customer_pnl=!0,e.sanction_pnl=!0,e.signmatching=!1,e.nach_no=!1,e.signmatch_kycprovide=!1,e.escrow_no=!1,e.stamp=!1,e.roc_no=!1;var n={lsacreate_gid:e.lsacreate_gid},t="api/IdasTrnLsaManagement/Getlsainfo";r.getparams(t,n).then(function(t){e.document_charge_flag=t.data.document_charge_flag,e.recover_flag=t.data.recover_flag,e.approval_status=t.data.approval_status,e.customername=t.data.customer_name,e.clarify_flag=t.data.clarify_flag,e.compliance_flag=t.data.compliance_flag,e.proceed_flag=t.data.proceed_flag});var t="api/IdasTrnLsaManagement/Getcustomer2sanctioninfo";r.getparams(t,n).then(function(t){e.txtmargin=t.data.margin,e.txttenure=t.data.tenure,e.txtexpiry_date=t.data.expiry_date,e.txtrate_interest=t.data.rate_interest});var t="api/IdasTrnLsaManagement/limitinfodtl";r.getparams(t,n).then(function(t){e.limitinfo_limit=t.data.limitinfo_limit,e.total_document_limit=t.data.total_document_limit,e.totol_limit_released=t.data.totol_limit_released});var t="api/IdasTrnLsaManagement/bankinfodtl";r.getparams(t,n).then(function(t){e.bankinfo_list=t.data.bankinfo_list});var t="api/IdasTrnLsaManagement/GetPenalInterest";r.getparams(t,n).then(function(t){e.penalinterest_list=t.data.loanfacilitytype_list});var t="api/IdasTrnLsaManagement/loanfacility";r.get(t).then(function(t){e.loanfacility_list=t.data.loanfacility_list});var t="api/IdasTrnLsaManagement/Getprocessingfeeinfo";r.getparams(t,n).then(function(t){e.recovered_type=t.data.recovered_type,e.recovered_amount=t.data.recovered_amount,e.chequeno_details=t.data.chequeno_details,e.chequedate_details=t.data.chequedate_details,e.processingfeebank_name=t.data.processingfeebank_name,e.processingfeaccount_name=t.data.processingfeaccount_name,e.recover_remarks=t.data.recover_remarks});var t="api/IdasTrnLsaManagement/Getdocumentchargeinfo";r.getparams(t,n).then(function(t){e.doc_recovered_amount=t.data.doc_recovered_amount,e.doc_chequeno_details=t.data.doc_chequeno_details,e.doc_chequedate_details=t.data.doc_chequedate_details,e.doc_feebank_name=t.data.doc_feebank_name,e.doc_feaccount_name=t.data.doc_feaccount_name,e.document_name=t.data.document_name,e.document_path=t.data.document_path,e.document_charge=new Intl.NumberFormat("en-IN").format(Number(t.data.document_charge))+".00",e.document_charge_gst=t.data.document_charge_gst+"%",null==t.data.document_name?e.document=!1:e.document=!0,e.lbldocumentcharge_applicable=t.data.documentcharge_applicable,e.lbldocumentcharge_remarks=t.data.documentcharge_remarks});var t="api/IdasTrnLsaManagement/Getmakerinfo";r.getparams(t,n).then(function(t){e.maker_signature=t.data.maker_signature,e.terms_conditions=t.data.terms_conditions,e.deferral_captured=t.data.deferral_captured,e.head=t.data.head});var t="api/IdasTrnLsaManagement/Getcompliancecheckinfo";r.getparams(t,n).then(function(t){e.nach_mandate=t.data.nach_mandate,e.sign_match=t.data.sign_match,e.sign_match_kyc=t.data.sign_match_kyc,e.escrow_opened=t.data.escrow_opened,e.appropriate_stamp=t.data.nach_mandate,e.roc_filling=t.data.roc_filling,e.nach_mandate_remarks=t.data.nach_mandate_remarks,e.sign_match_remarks=t.data.sign_match_remarks,e.sign_match_kyc_remarks=t.data.sign_match_kyc_remarks,e.escrow_opened_remarks=t.data.escrow_opened_remarks,e.appropriate_stamp_remarks=t.data.appropriate_stamp_remarks,e.roc_filling_remarks=t.data.roc_filling_remarks,e.cersai=t.data.cersai,e.cersai_remarks=t.data.cersai_remarks});var t="api/IdasTrnLsaManagement/Getdocument";r.getparams(t,n).then(function(t){e.filename_list=t.data.UploadDocumentList});var t="api/IdasTrnLsaManagement/GetdetailsLSA";r.getparams(t,n).then(function(t){e.lblcustomer_name=t.data.customer_name,e.lblbranch_name=t.data.branch_name,e.lblstate=t.data.state,e.lblcustomer_urn=t.data.customer_urn,e.lblcustomer_location=t.data.customer_location,e.lbladdress=t.data.address1,e.lblrm_name=t.data.rm_name,e.lblcluster_head=t.data.cluster_head,e.lblzonal_head=t.data.zonal_head,e.lblbusiness_head=t.data.business_head,e.lblcredit_manager=t.data.credit_manager,e.lblvertical=t.data.vertical,e.lblgst_no=t.data.gst_no,e.lblpan_no=t.data.pan_no,e.lblsa_code=t.data.sa_code,e.lblsanctionref_no=t.data.sanctionref_no,e.lblsanction_date=t.data.sanction_date,e.lblapproved_by=t.data.approved_by,e.lblapproved_date=t.data.approved_date,e.lblconstitution=t.data.constitution,e.lblpurpose_lending=t.data.purpose_lending,e.lblfacility=t.data.facility,e.lblmajor_corporate=t.data.major_corporate,e.lblhypothecation_date=t.data.hypothecation_date,e.lblmortgage_date=t.data.mortgage_date,e.lblproduct_solution=t.data.product_solution,e.lblmajot_intervention=t.data.majot_intervention,e.lblsector=t.data.sector,e.lblprimaryvalue_chain=t.data.primaryvalue_chain,e.lblsecondaryvalue_chain=t.data.secondaryvalue_chain,e.lblremarks=t.data.remarks,e.lbllsacreated_date=t.data.lsacreated_date,e.lblsanction_type=t.data.sanction_type,e.address1=t.data.address,e.lbllsaref_no=t.data.lsaref_no,e.MOMfilename_list=t.data.MOMDocumentList,e.CAMfilename_list=t.data.COMDocumentList,e.sanctionfilename_list=t.data.SANDocumentList,e.generalfilename_list=t.data.GeneralDocumentList,e.lsaapproved_by=t.data.lsaapproved_by,e.lsaapproved_date=t.data.lsaapproved_date});var t="api/IdasTrnLsaManagement/Getsanction2Colletarl";r.getparams(t,n).then(function(t){e.customer2security_list=t.data.customersecurity_list})}var f=this;f.title="lsaapprovalviewController",g(),e.downloadsCAM=function(t,e){_.Downloaddocument(t,e)},e.downloadsMOM=function(t,e){_.Downloaddocument(t,e)},e.downloadsanctionletter=function(t,e){_.Downloaddocument(t,e)},e.downloadsgeneral=function(t,e){_.Downloaddocument(t,e)},e.lsaback=function(t){d.url("app/idasTrnLSAapproval?lstab="+t)},e.lsaapprove=function(t){var a={lsacreate_gid:e.lsacreate_gid},n="api/IdasTrnLsaManagement/postLSAstatusapprove";lockUI(),r.post(n,a).then(function(e){1==e.data.status?(unlockUI(),g(),d.url("app/idasTrnLSAapproval?lstab="+t),s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})},e.lsaback=function(){a.go("app.idasTrnLSAapproval")},e.LSApendingpdf=function(){var t={lsacreate_gid:e.lsacreate_gid},a="api/IdasTrnLsaManagement/GetLSApdf";lockUI(),r.getparams(a,t).then(function(t){1==t.data.status?(_.Downloaddocument(t.data.file_path,"LSA Report.pdf"),s.alert("LSA Report Downloaded Successfully","success"),unlockUI()):(unlockUI(),s.alert("Error Occurred While Export PDF !","warning"))})}}angular.module("angle").controller("lsaapprovalviewController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","SweetAlert","$route","ngTableParams","$parse","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){var t="api/idasTrnLsaReport/GetidasLsaSummary";lockUI(),s.get(t).then(function(t){e.idasTrnLsaReport=t.data.idasTrnLsaReportSummaryList,unlockUI()})}var f=this;f.title="idasTrnLsaReportController",g(),e.exportlsareport=function(){var t;t=null==e.cbocustomer2sanction_gid||""==e.cbocustomer2sanction_gid||void 0==e.cbocustomer2sanction_gid?"":e.cbocustomer2sanction_gid.customer2sanction_gid;var a={customer_gid:e.customer_gid,customer2sanction_gid:t};lockUI();var n="api/idasTrnLsaReport/IdasExportExcel";s.post(n,a).then(function(t){1==t.data.status?(unlockUI(),_.Downloaddocument(t.data.lscloudpath,t.data.lsname)):(unlockUI(),d.alert("Error Occurred While Export !"))})},e.complete=function(t){if(t.length>=3){e.message="";var a="api/customer/ExploreCustomer",n={customername:t};s.getparams(a,n).then(function(t){1==t.data.status?(e.message="",e.customer_list=t.data.Customers):e.message="No Records"})}else e.customer_list=null,e.message="Type atleast three character"},e.fillTextbox=function(t,a){e.customer=a,e.customer_gid=t,e.customer_list=null;var n={customer_gid:t},o="api/idasTrnLsaReport/Getcustomer2sanction";s.getparams(o,n).then(function(t){e.customer2sanction_list=t.data.customersanction_list})},e.all=function(){e.cbocustomer2sanction_gid.customer2sanction_gid="",e.customer_gid="",e.cbocustomer2sanction_gid="",e.customer="",e.customer2sanction_gid="",g()},e.search=function(){var t={customer_gid:e.customer_gid,customer2sanction_gid:e.cbocustomer2sanction_gid.customer2sanction_gid},a="api/idasTrnLsaReport/lsafilter";lockUI(),s.post(a,t).then(function(t){e.idasTrnLsaReport=t.data.idasTrnLsaReportSummaryList,unlockUI()})}}angular.module("angle").controller("idasTrnLsaReportController",t),t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){lockUI(),e.totalDisplayed=100;var t="api/IdasTrnSanctionDoc/MakerCheckerSummary";r.get(t).then(function(t){unlockUI(),e.sanctionlist=t.data.MdlMakercheckerSummary,e.total=e.sanctionlist.length})}e.title="idasTrnMakerCheckerSummary",_(),document.getElementById("pagecount").onkeyup=function(){if(null==e.pagecount){var t=document.getElementById("loadmore");t.style.backgroundColor="#DCDCDC"}else{var t=document.getElementById("loadmore");t.style.backgroundColor="#ffa"}},e.docVerifyMaker=function(t){localStorage.setItem("sanction_gid",t),a.go("app.idasTrnDocVerifyMkr")},e.docVerifyChecker=function(t){localStorage.setItem("sanction_gid",t),a.go("app.idasTrnDocVerifyChkr")},e.loadMore=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayed+=a,unlockUI()}}angular.module("angle").controller("idasTrnMakerCheckerSummary",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f){function v(){e.DivFile=!1,e.show=!0,e.options=!1,h=localStorage.getItem("sanction_gid");var t="api/IdasTrnSanctionDoc/SanctionDtlsView",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.sanctionrefno=t.data.sanctionrefno,e.SanctionDate=t.data.SanctionDate,e.SanctionAmount=t.data.SanctionAmount,e.FacilityType=t.data.FacilityType,e.customerName=t.data.customerName,e.Customerurn=t.data.Customerurn,e.collateral_security=t.data.collateral_security,e.zonalHeadName=t.data.zonalHeadName,e.businessHeadName=t.data.businessHeadName,e.clusterManager=t.data.clusterManager,e.creditManager=t.data.creditManager,e.relationshipmgmt=t.data.relationshipmgmt,e.customercode=t.data.customercode,e.verticalCode=t.data.verticalCode,e.contactperson=t.data.contactperson,e.mobileno=t.data.mobileno,e.addressline1=t.data.addressline1,e.addressline2=t.data.addressline2,y=t.data.customer_gid,e.rdb_lsastatus=t.data.lsa_status,e.maker_status=t.data.maker_status,e.checker_status=t.data.checker_status});var t="api/IdasTrnSanctionDoc/ScanDocSummary",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.documentation_list=t.data.MdlScannDocSummary});var t="api/IdasTrnSentMail/GetSentMailSummary",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.senddata=t.data.sendmail});var t="api/IdasTrnSanctionDoc/GetCommonDoc",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.commondocument=t.data.uploaddocument})}var h,y;v();var I=this;I.title="idasTrnMkrChkrDocVerify",e.cancel=function(){e.show=!0},e.deletedocument=function(t){var e={commondocument_gid:t};u.swal({title:"Are you sure?",text:"Do you want to delete this Document ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnSanctionDoc/CommonDocDelete";r.getparams(a,e).then(function(t){1==t.data.status?(u.swal("Document Deleted Successfully!"),unlockUI(),v()):(s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())})}})},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.commondocumentupload=function(t,a,n){var o=new FormData,i={name:t[0].name,file:t[0]},c=f.fnCheckValidDocType(t[0].name,"");if(0==c)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;if(o.append("fileupload",i.file),o.append("file_name",i.name),o.append("document_name",e.documentname),o.append("document_title",e.txtdocument_title),o.append("sanction_gid",h),o.append("project_flag","Default"),e.uploadfrm=o,void 0==e.uploadfrm)return void alert("Document is not Available..!");lockUI();var d="api/IdasTrnSanctionDoc/CommonDocUpload";r.postFile(d,e.uploadfrm).then(function(t){var a="api/IdasTrnSanctionDoc/GetCommonDoc",n={sanction_gid:h};r.getparams(a,n).then(function(t){e.commondocument=t.data.uploaddocument}),unlockUI(),e.txtdocument_title="",$("#commonupload").val(""),e.uploadfrm=void 0,1==t.data.status?s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})},e.mailconversation=function(){function t(t,e){t.ok=function(){e.close("closed")};var a="api/idasMstTemplate/MailContent";r.get(a).then(function(e){t.mailcontent=e.data.template_content});var a="api/idasTrnMakerCheckerDtls/GetMailId",n={customer_gid:y};r.getparams(a,n).then(function(e){t.rmmail_id=e.data.rmmail_id});var n={sanction_gid:h,type_of_copy:"Scan Copy"},a="api/IdasTrnSanctionDoc/ScanDocConExport";r.post(a,n).then(function(e){1==e.data.status?t.phyPath=e.data.attachment_path:(s.alert("Error in attachment...!","success"),v())}),t.sendMail=function(){var a={sanction_gid:h,document_path:t.phyPath,to_mail:t.rmmail_id,cc_mail:t.cc_mail,bcc_mail:t.bcc_mail,body_content:t.mailcontent,subject:t.subject_mail},n="api/IdasTrnSentMail/PostSendMail";lockUI(),r.post(n,a).then(function(a){1==a.data.status?(unlockUI(),e.close("closed"),s.alert(a.data.message,"success"),t.subject_mail="",t.bcc_mail="",t.cc_mail="",v()):(unlockUI(),e.close("closed"),s.alert(a.data.message,"warning"))})},t["export"]=function(){var t={sanction_gid:h,type_of_copy:"Scan Copy"},e="api/IdasTrnSanctionDoc/ScanDocConExport";r.post(e,t).then(function(t){1==t.data.status?g.Downloaddocument(t.data.attachment_cloudpath,t.data.attachment_name):s.alert(t.data.message,"success")})}}o.open({templateUrl:"/mailconversation.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.MkrVerify=function(t){var a="api/IdasTrnSanctionDoc/DocVerifyMkr",n={sanctiondocument_gid:t};r.getparams(a,n).then(function(t){1==t.data.status?(unlockUI(),e.ShowMkrDocumentConfirmation=!1,d.hash("DocumentVerifiedBy"),_(),v()):(unlockUI(),s.alert(t.data.message)),v()})},e.ChkrVerify=function(t){var a="api/IdasTrnSanctionDoc/DocVerifyChkr",n={sanctiondocument_gid:t};r.getparams(a,n).then(function(t){1==t.data.status?(unlockUI(),e.ShowChrDocumentConfirmation=!1,d.hash("DocumentVerifiedBy"),_(),v()):(unlockUI(),s.alert(t.data.message)),v()})},e["export"]=function(){var t={sanction_gid:h,type_of_copy:"Scan Copy"},e="api/IdasTrnSanctionDoc/ScanDocConExport";r.post(e,t).then(function(t){1==t.data.status?g.Downloaddocument(t.data.attachment_cloudpath,t.data.attachment_name):(s.alert(t.data.message,"success"),v())})},e.exportattach=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a"),d=e.split(".");s.download=d[0];var l=r;s.href=l,s.click()},e.downloadsdocument=function(t,e){g.Downloaddocument(t,e)},e.openpanel=function(){e.show=!1,e.options=!0},e.uploadallocation1=function(t,a,n){var o={name:t[0].name,file:t[0]},i=new FormData;i.append("fileupload",o.file),i.append("file_name",o.name),i.append("document_name",e.documentname),i.append("sanction_gid",h),i.append("types_of_doc","Scan Copy"),i.append("project_flag","Default"),e.uploadfrm=i;var c="api/IdasTrnSanctionDoc/ConversationUpload";lockUI(),r.postFile(c,e.uploadfrm).then(function(t){if($("#addupload").val(""),$("#editupload").val(""),1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.gotoback=function(){a.go("app.idasTrnMakerSummary");
},e.gotobackChkr=function(){a.go("app.idasTrnCheckerSummary")},e.docConMkr=function(t,a){var n="api/idasTrnMakerCheckerDtls/RmResponseCadViwed",i={sanctiondocument_gid:t,types_of_conversation:"Internal"};r.post(n,i).then(function(t){});var n="api/idasTrnMakerCheckerDtls/RmResponseCadViwed",i={sanctiondocument_gid:t,types_of_conversation:"External"};r.post(n,i).then(function(t){}),e.docconClose=function(){e.ShowMkrDocumentConfirmation=!1,d.hash("DocumentVerifiedBy"),_()},e.ShowMkrDocumentConfirmation=!0,d.hash("DocumentConfirmationTab"),_(),I.calender1=function(t){t.preventDefault(),t.stopPropagation(),I.open1=!0},I.formats=["dd-MM-yyyy"],I.format=I.formats[0],I.dateOptions={formatYear:"yy",startingDay:1},e.DivFile=!1,e.IsVisible=!1,e.Visible=!0,e.valueExternal=!1,e.valueInternal=!1,"0"==a?(e.showraisequery=!1,e.shownoquery=!0):(e.showraisequery=!0,e.shownoquery=!1);var n="api/IdasTrnSanctionDoc/ScanDocConversationInternal",i={sanctiondocument_gid:t};lockUI(),r.getparams(n,i).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0):e.valueInternal=!1});var n="api/IdasTrnSanctionDoc/ScanDocConversationExternal",i={sanctiondocument_gid:t};lockUI(),r.getparams(n,i).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistExternal=t.data.MdlDocConversation,e.valueExternal=!0):e.valueExternal=!1}),e.typeofcopy="Scan Copy";var n="api/IdasTrnSanctionDoc/GetDocDetailsView",i={sanctiondocument_gid:t};lockUI(),r.getparams(n,i).then(function(t){unlockUI(),e.sanction_gid=t.data.sanction_gid,e.document_gid=t.data.document_gid,e.document_code=t.data.document_code,e.document_name=t.data.document_name,e.document_date=t.data.scandocument_date,e.documentrecord_id=t.data.documentrecord_id,e.scanfinal_remarks=t.data.scanfinal_remarks,e.maker_status=t.data.maker_status,e.checker_status=t.data.checker_status,e.types_of_copy=t.data.types_of_copy,e.txtfinalremarks=t.data.finalremarks,"Others"==t.data.finalremarks?e.other_remarks=!0:e.other_remarks=!1});var n="api/IdasTrnSanctionDoc/GetDocComments";r.getparams(n,i).then(function(t){e.doc_comments=t.data.doc_comments}),e.onchangeremarks=function(t){"Others"==t?(e.other_remarks=!0,e.scanfinal_remarks=""):(e.other_remarks=!1,e.scanfinal_remarks="")},e.ShowRaiseQuery=function(){0==e.showraisequery?e.showraisequery=!0:e.showraisequery=!1},e.raiseNoQuery=function(){var n={sanctiondocument_gid:t,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:"No Query",document_name:e.document_name,type_of_conversation:"Internal",noquery_flag:"Y"};u.swal({title:"Are you sure?",text:'Do you want to send "No Query"?',showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Send it!",closeOnConfirm:!1},function(o){if(o){lockUI();var i="api/IdasTrnSanctionDoc/RaiseConversation";r.post(i,n).then(function(n){if(1==n.data.status){u.swal("Query Sent Successfully!"),unlockUI(),a="1",e.shownoquery=!1,e.showraisequery=!0;var o="api/IdasTrnSanctionDoc/ScanDocConversationInternal",i={sanctiondocument_gid:t};lockUI(),r.getparams(o,i).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0):e.valueInternal=!1})}else s.alert(n.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})}})},e.onchangecopy=function(a){var n={sanctiondocument_gid:t,type_copy:e.types_of_copy},o="api/IdasTrnDocConversation/PostTypeOfCopy";r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message))})},e.MkrVerify=function(){var a="api/IdasTrnSanctionDoc/DocumentConfirmation",n={sanctiondocument_gid:t,confirmation_type:"Maker"};r.getparams(a,n).then(function(t){1==t.data.status?(unlockUI(),e.ShowMkrDocumentConfirmation=!1,d.hash("DocumentVerifiedBy"),_(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),v()):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})},e.btnShow=function(t,a){e.IsVisible=!0,e.Visible=!1},e.btnHide=function(){e.IsVisible=!1,e.Visible=!0},e.PopupDownload=function(t){function e(e,a){e.ok=function(){a.close("closed")},e.downloads=function(t,e){g.Downloaddocument(t,e)};var n="api/IdasTrnDocConversation/GetUploadDoc",o={docconversation_gid:t};r.getparams(n,o).then(function(t){e.viewDocumentList=t.data.uploaddocument})}o.open({templateUrl:"/mailconversationdownload.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.raiseQueryRM=function(){var a={sanctiondocument_gid:t,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:e.content,document_name:e.document_name,document_title:e.txtdocument_title,type_of_conversation:"External"},n="api/IdasTrnSanctionDoc/RaiseConversation";lockUI(),r.post(n,a).then(function(a){if(1==a.data.status){unlockUI(),s.alert("Conversation Added Successfully..!!","success"),e.content="";var n="api/IdasTrnSanctionDoc/ScanDocConversationExternal",o={sanctiondocument_gid:t};lockUI(),r.getparams(n,o).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistExternal=t.data.MdlDocConversation,e.valueExternal=!0):e.valueExternal=!1})}else unlockUI(),s.alert(a.data.message)})},e.raiseQueryChecker=function(){var a={sanctiondocument_gid:t,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:e.content,document_name:e.document_name,document_title:e.txtdocument_title,type_of_conversation:"Internal"},n="api/IdasTrnSanctionDoc/RaiseConversation";lockUI(),r.post(n,a).then(function(a){if(1==a.data.status){unlockUI(),s.alert("Conversation Added Successfully..!!","success"),e.content="";var n="api/IdasTrnSanctionDoc/ScanDocConversationInternal",o={sanctiondocument_gid:t};lockUI(),r.getparams(n,o).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0,e.shownoquery=!1):e.valueInternal=!1})}else unlockUI(),s.alert(a.data.message)})},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.uploadallocation=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_title",e.txtdocument_title),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasTrnSanctionDoc/ConversationDocUpload";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if($("#addupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.update=function(){var a={sanctiondocument_gid:t,document_date:e.document_date},n="api/IdasTrnSanctionDoc/PostScanDocDate";lockUI(),r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success")):(unlockUI(),s.alert(t.data.message,"warning"))})},e.forwardedRaiseQuery=function(a,n,o){var i;i="Query Confirmed."==o?a:o;var c={sanctiondocument_gid:t,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:i,document_name:e.document_name,type_of_conversation:"External",reference_query:n};u.swal({title:"Are you sure?",text:"Do you want to send this query to RM ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Send it!",closeOnConfirm:!1},function(a){if(a){lockUI();var n="api/IdasTrnSanctionDoc/RaiseConversation";r.post(n,c).then(function(a){if(1==a.data.status){u.swal("Query Sent Successfully!"),unlockUI();var n="api/IdasTrnSanctionDoc/ScanDocConversationInternal",o={sanctiondocument_gid:t};lockUI(),r.getparams(n,o).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0):e.valueInternal=!1})}else s.alert(a.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})}})},e.btncopy=function(t,a){"Query Confirmed."==a?e.content=t:e.content=a,d.hash("down"),_()},e.updateFinalRemarks=function(){if("Others"!=e.txtfinalremarks||""!=e.scanfinal_remarks&&void 0!=e.scanfinal_remarks&&null!=e.scanfinal_remarks){var a={sanctiondocument_gid:t,scanfinal_remarks:e.scanfinal_remarks,finalremarks:e.txtfinalremarks},n="api/IdasTrnSanctionDoc/DocScanFinalRemarks";lockUI(),r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success")):(unlockUI(),s.alert(t.data.message,"warning"),e.txtfinalremarks="",e.scanfinal_remarks="")})}else s.alert("Kindly Enter Remarks","warning")},e.UploadDocCancel=function(t){var a={conversationdocument_gid:t},n="api/IdasTrnSanctionDoc/deleteconversedoc";lockUI(),r.getparams(n,a).then(function(t){if(1==t.data.status){unlockUI(),s.alert("Document deleted Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),s.alert("Error Occurred")})},e.raiseResponse=function(a,n,o){var i={docconversation_gid:a,rm_response:o},c="api/IdasTrnSanctionDoc/DocRmResponse";lockUI(),r.post(c,i).then(function(a){if(1==a.data.status){unlockUI(),s.alert("Conversation Added Successfully..!!","success"),e.content=" ";var n="api/IdasTrnSanctionDoc/ScanDocConversationExternal",o={sanctiondocument_gid:t};lockUI(),r.getparams(n,o).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistExternal=t.data.MdlDocConversation,e.valueExternal=!0):e.valueExternal=!1})}else unlockUI(),s.alert("Error Occurred!");v()})}},e.docConChkr=function(t,a){var n="api/idasTrnMakerCheckerDtls/CadQuieryRMViwed",i={sanctiondocument_gid:t,types_of_conversation:"Internal"};r.post(n,i).then(function(t){});var n="api/idasTrnMakerCheckerDtls/RmResponseCadViwed",i={sanctiondocument_gid:t,types_of_conversation:"External"};r.post(n,i).then(function(t){}),e.docconChrClose=function(){e.ShowChrDocumentConfirmation=!1,d.hash("DocumentVerifiedBy"),_()},e.ShowChrDocumentConfirmation=!0,d.hash("ChrDocumentConfirmationTab"),_(),e.DivFile=!1,e.IsVisible=!1,e.Visible=!0,e.valueExternal=!1,e.valueInternal=!1,I.calender1=function(t){t.preventDefault(),t.stopPropagation(),I.open1=!0},I.dateOptions={formatYear:"yy",startingDay:1},I.formats=["dd-MM-yyyy"],I.format=I.formats[0];var n="api/IdasTrnSanctionDoc/ScanDocConversationInternal",i={sanctiondocument_gid:t};lockUI(),r.getparams(n,i).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0):e.valueInternal=!1});var n="api/IdasTrnSanctionDoc/ScanDocConversationExternal",i={sanctiondocument_gid:t};lockUI(),r.getparams(n,i).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistExternal=t.data.MdlDocConversation,e.valueExternal=!0):e.valueExternal=!1}),e.typeofcopy="Scan Copy";var n="api/IdasTrnSanctionDoc/GetDocDetailsView",i={sanctiondocument_gid:t};lockUI(),r.getparams(n,i).then(function(t){unlockUI(),e.sanction_gid=t.data.sanction_gid,e.document_gid=t.data.document_gid,e.document_code=t.data.document_code,e.document_name=t.data.document_name,e.document_date=t.data.scandocument_date,e.documentrecord_id=t.data.documentrecord_id,e.scanfinal_remarks=t.data.scanfinal_remarks,e.maker_status=t.data.maker_status,e.types_of_copy=t.data.types_of_copy,e.checker_status=t.data.checker_status,e.txtfinalremarks=t.data.finalremarks,"Others"==t.data.finalremarks?e.other_remarks=!0:e.other_remarks=!1});var n="api/IdasTrnSanctionDoc/GetDocComments";r.getparams(n,i).then(function(t){e.doc_comments=t.data.doc_comments}),e.update=function(){var a={sanctiondocument_gid:t,document_date:e.document_date},n="api/IdasTrnSanctionDoc/PostScanDocDate";lockUI(),r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success")):(unlockUI(),s.alert(t.data.message,"warning"))})},e.onchangecopy=function(a){var n={sanctiondocument_gid:t,type_copy:e.types_of_copy},o="api/IdasTrnDocConversation/PostTypeOfCopy";r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})},e.raiseResponse=function(a,n){var o={docconversation_gid:a,rm_response:n},i="api/IdasTrnSanctionDoc/DocRmResponse";lockUI(),r.post(i,o).then(function(a){if(1==a.data.status){unlockUI(),s.alert("Conversation Added Successfully..!!","success"),e.content=" ";var n="api/IdasTrnSanctionDoc/ScanDocConversationExternal",o={sanctiondocument_gid:t};lockUI(),r.getparams(n,o).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistExternal=t.data.MdlDocConversation,e.valueExternal=!0):e.valueExternal=!1});var n="api/IdasTrnSanctionDoc/ScanDocConversationInternal",o={sanctiondocument_gid:t};lockUI(),r.getparams(n,o).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0):e.valueInternal=!1})}else unlockUI(),s.alert("Error Occurred!")})},e.btncopy=function(t){e.content=t,d.hash("down"),_()},e.confirmQuery=function(a,n){u.swal({title:"Are you sure?",text:"Do you want to confirm this query to checker ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Confirmed it!",closeOnConfirm:!1},function(o){if(o){lockUI();var i={docconversation_gid:a,rm_response:"Query Confirmed."};if("Y"==n){var c="api/IdasTrnSanctionDoc/DocNoQueryRmResponse";r.getparams(c,i).then(function(a){if(1==a.data.status){u.swal("Document Confirmed Successfully!"),unlockUI();var n="api/IdasTrnSanctionDoc/ScanDocConversationInternal",o={sanctiondocument_gid:t};lockUI(),r.getparams(n,o).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0):e.valueInternal=!1}),v()}else s.alert(a.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})}else{var c="api/IdasTrnSanctionDoc/DocRmResponse";r.post(c,i).then(function(a){if(1==a.data.status){u.swal("Query Confirmed Successfully!"),unlockUI();var n="api/IdasTrnSanctionDoc/ScanDocConversationInternal",o={sanctiondocument_gid:t};lockUI(),r.getparams(n,o).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0):e.valueInternal=!1})}else s.alert(a.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})}}})},e.forwardQuery=function(a){var n={docconversation_gid:a};u.swal({title:"Are you sure?",text:"Do you want to forward this query to RM ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Forward it!",closeOnConfirm:!1},function(a){if(a){lockUI();var o="api/idasTrnMakerCheckerDtls/PostForwardedQuery";r.getparams(o,n).then(function(a){if(1==a.data.status){u.swal("Forwarded Successfully!"),unlockUI();var n="api/IdasTrnSanctionDoc/ScanDocConversationInternal",o={sanctiondocument_gid:t};lockUI(),r.getparams(n,o).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistInternal=t.data.MdlDocConversation,e.valueInternal=!0):e.valueInternal=!1});var n="api/IdasTrnSanctionDoc/ScanDocConversationExternal";lockUI(),r.getparams(n,o).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistExternal=t.data.MdlDocConversation,e.valueExternal=!0):e.valueExternal=!1})}else s.alert(a.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})}})},e.UploadDocCancel=function(t){var a={conversationdocument_gid:t},n="api/IdasTrnSanctionDoc/deleteconversedoc";lockUI(),r.getparams(n,a).then(function(t){if(1==t.data.status){unlockUI(),s.alert("Document deleted Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),s.alert("Error Occurred")})},e.ChkrVerify=function(){var a="api/IdasTrnSanctionDoc/DocumentConfirmation",n={sanctiondocument_gid:t,confirmation_type:"Checker"};r.getparams(a,n).then(function(t){1==t.data.status?(unlockUI(),localStorage.setItem("conversation_count","1"),e.ShowChrDocumentConfirmation=!1,d.hash("DocumentVerifiedBy"),_(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),v()):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))}),v()},e.raiseQuery=function(){var a={sanctiondocument_gid:t,sanction_gid:e.sanction_gid,document_gid:e.document_gid,cad_query:e.content,document_name:e.document_name,document_title:e.txtdocument_title,type_of_conversation:"External"},n="api/IdasTrnSanctionDoc/RaiseConversation";lockUI(),r.post(n,a).then(function(a){if(1==a.data.status){unlockUI(),s.alert("Conversation Added Successfully..!!","success"),e.content="";var n="api/IdasTrnSanctionDoc/ScanDocConversationExternal",o={sanctiondocument_gid:t};lockUI(),r.getparams(n,o).then(function(t){unlockUI(),1==t.data.status?(e.docconversationlistExternal=t.data.MdlDocConversation,e.valueExternal=!0):e.valueExternal=!1})}else unlockUI(),s.alert(a.data.message)})},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.uploadallocation=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_title",e.txtdocument_title),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasTrnSanctionDoc/ConversationDocUpload";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if($("#addupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.onchangeremarks=function(t){"Others"==t?e.other_remarks=!0:e.other_remarks=!1},e.btncopyinternal=function(t,a){e.docconversationlistInternal[t].reply=a},e.btnShow=function(t,a){e.IsVisible=!0,e.Visible=!1},e.btnHide=function(){e.IsVisible=!1,e.Visible=!0},e.PopupDownload=function(t){function e(e,a){e.ok=function(){a.close("closed")},e.downloads=function(t,e){g.Downloaddocument(t,e)};var n="api/IdasTrnDocConversation/GetUploadDoc",o={docconversation_gid:t};r.getparams(n,o).then(function(t){e.viewDocumentList=t.data.uploaddocument});var n="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(n).then(function(t){e.uploaddocument=t.data.uploaddocument})}o.open({templateUrl:"/mailconversation.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.updateFinalRemarks=function(){if("Others"!=e.txtfinalremarks||""!=e.scanfinal_remarks&&void 0!=e.scanfinal_remarks&&null!=e.scanfinal_remarks){var a={sanctiondocument_gid:t,scanfinal_remarks:e.scanfinal_remarks,finalremarks:e.txtfinalremarks},n="api/IdasTrnSanctionDoc/DocScanFinalRemarks";lockUI(),r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success")):(unlockUI(),s.alert(t.data.message,"warning"),e.txtfinalremarks="",e.scanfinal_remarks="")})}else s.alert("Kindly Enter Remarks","warning")}},e.onselectedlsastatus=function(t){var a={sanction_gid:h,lsa_status:e.rdb_lsastatus},n="api/IdasTrnPhyDoc/PostLSAStatus";r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),v(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),v(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})},e.checkallDocument=function(t){angular.forEach(e.documentation_list,function(e){e.checked=t})},e.DocumentConfirm=function(){function t(t,e){t.futuredatecheck=function(a){var n={date:a.toDateString()},o="api/IdasTrnPhyDoc/FutureDateCheck";r.getparams(o,n).then(function(a){0==a.data.status&&(t.scandocument_date="",e.close("closed"),s.alert(a.data.message,"warning"))})},t.onchangeremarks=function(e){"Others"==e?(t.other_remarks=!0,t.scanfinal_remarks=""):(t.other_remarks=!1,t.scanfinal_remarks="")},t.documentconfirmationSubmitMkr=function(){if("Others"!=t.txtfinalremarks||""!=t.scanfinal_remarks&&void 0!=t.scanfinal_remarks&&null!=t.scanfinal_remarks){var o={sanctiondocument_gid:n,type_copy:t.types_of_copy,document_date:t.scandocument_date,finalremarks:t.txtfinalremarks,scanfinal_remarks:t.scanfinal_remarks,confirmation_type:"Maker"};if(void 0!=a){var i="api/IdasTrnSanctionDoc/MkrChrBulkDocVerification";lockUI(),r.post(i,o).then(function(a){1==a.data.status?(s.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed"),unlockUI(),v(),t.checkallDocument=""):(unlockUI(),s.alert(a.data.message,{status:"warning",pos:"top-center",timeout:3e3}),e.close("closed"),unlockUI())})}else e.close("closed"),s.alert("Select Atleast One Record!","warning")}else e.close("closed"),s.alert("Kindly Enter Remarks","warning")},t.documentconfirmationSubmitChkr=function(){if("Others"!=t.txtfinalremarks||""!=t.scanfinal_remarks&&void 0!=t.scanfinal_remarks&&null!=t.scanfinal_remarks){var o={sanctiondocument_gid:n,type_copy:t.types_of_copy,document_date:t.scandocument_date,finalremarks:t.txtfinalremarks,scanfinal_remarks:t.scanfinal_remarks,confirmation_type:"Checker"};if(void 0!=a){var i="api/IdasTrnSanctionDoc/MkrChrBulkDocVerification";lockUI(),r.post(i,o).then(function(a){1==a.data.status?(s.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed"),unlockUI(),v(),t.checkallDocument=""):(unlockUI(),s.alert(a.data.message,{status:"warning",pos:"top-center",timeout:3e3}),e.close("closed"),unlockUI())})}else e.close("closed"),s.alert("Select Atleast One Record!","warning")}else e.close("closed"),s.alert("Kindly Enter Remarks","warning")},t.ok=function(){e.close("closed")}}var a,n=[];if(angular.forEach(e.documentation_list,function(t){1==t.checked&&(a=t.sanctiondocument_gid,n.push(a))}),void 0==a)s.alert("Select Atleast One Record!","warning");else{o.open({templateUrl:"/DocumentConfirmationModalContent.html",controller:t,size:"md",backdrop:"static",keyboard:!1});t.$inject=["$scope","$modalInstance"]}}}angular.module("angle").controller("idasTrnMkrChkrDocVerify",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$anchorScroll","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g){function f(){v.formats=["dd-MM-yyyy"],v.format=v.formats[0],v.calender1=function(t){t.preventDefault(),t.stopPropagation(),v.open1=!0},v.calender=function(t){t.preventDefault(),t.stopPropagation(),v.open2=!0},v.calender3=function(t){t.preventDefault(),t.stopPropagation(),v.open3=!0},v.calender4=function(t){t.preventDefault(),t.stopPropagation(),v.open4=!0},v.dateOptions={formatYear:"yy",startingDay:1};var t="api/employee/employee";s.get(t).then(function(t){e.employee_list=t.data.employee_list});var t="api/IdasNocAndNdc/TempClear";s.get(t).then(function(t){});var t="api/IdasNocAndNdc/GetDropDown";s.get(t).then(function(t){e.vertical_list=t.data.vertical_list})}var v=this;v.title="idasTrnNocAndNdcAddController",f(),e.Back=function(){n.go("app.idasTrnNocAndNdc")},e.submit=function(){var t="",a="";void 0==e.cbovertical&&null==e.cbovertical||(t=e.cbovertical.vertical_gid,a=e.cbovertical.vertical_name);var o={maker_gid:e.cbomaker.employee_gid,maker_name:e.cbomaker.employee_name,checker_gid:e.cbochecker.employee_gid,checker_name:e.cbochecker.employee_name,vertical_gid:t,vertical_name:a,customer_name:e.lblcustomer_name,sanction_ref_no:e.lblsanction_ref_no,sanction_date:e.lblsanctiondate,loan_account_no:e.lblloan_account_no,noc_issuance_date:e.lblnocissuancedate,noc_closure_date:e.lblnocclosuredate,loan_closure_date:e.lblloanclosuredate,nocandndc_date:e.lblnocrequestdate},i="api/IdasNocAndNdc/CreateIdasNocAndNdc";lockUI(),s.post(i,o).then(function(t){1==t.data.status?(unlockUI(),n.go("app.idasTrnNocAndNdc"),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})},e.NocNDcDocumentUpload=function(){var t=document.getElementById("file");if(t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),a.append("project_flag","Default"),e.uploadfrm=a;var o=t.files.item(n).name,i=(t.files.item(n).size,g.fnCheckValidDocType(o,""));if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("file_name",e.txtdoc_name);var c="api/IdasNocAndNdc/NocDocumentUpload";lockUI(),s.postFile(c,e.uploadfrm).then(function(t){if($("#file").val(""),unlockUI(),1==t.data.status){var a="api/IdasNocAndNdc/GetNocDocumentList";s.get(a).then(function(t){e.UploadDocumentList=t.data.UploadNocDocumentList}),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3});unlockUI()})}else alert("Please select a file."),unlockUI();e.txtdoc_name=""},e.downloads=function(t,e){_.Downloaddocument(t,e)},e.uploaddocumentcancel=function(t){var a={nocandndcdocument_gid:t},n="api/IdasNocAndNdc/GetNocDocumentAddDelete";s.getparams(n,a).then(function(t){if(1==t.data.status){var a="api/IdasNocAndNdc/GetNocDocumentList";s.get(a).then(function(t){e.UploadDocumentList=t.data.UploadNocDocumentList}),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3});unlockUI()})}}angular.module("angle").controller("idasTrnNocAndNdcAddController",t),t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){lockUI();var t="api/IdasNocAndNdc/GetIdasNocAndNdc";r.get(t).then(function(t){e.nocandndc_list=t.data.nocandndc_list,unlockUI()})}var g=this;g.title="idasTrnNocAndNdcController",_(),e.addnocndc=function(){d.url("app/idasTrnNocAndNdcAdd")},e.editnocndc=function(t){d.url("app/idasTrnNocAndNdcEdit?lsnocandndc_gid="+t)},e.viewnocndc=function(t){d.url("app/idasTrnNocAndNdcView?lsnocandndc_gid="+t)},e["delete"]=function(t){var e={nocandndc_gid:t};u.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(t){if(t){var a="api/IdasNocAndNdc/NocandNdcDelete";r.getparams(a,e).then(function(t){1==t.data.status?_():(s.alert("Error Occurred While Deleting NOC & NDC!",{status:"warning",pos:"top-center",timeout:3e3}),_())}),u.swal("Deleted Successfully!")}})}}angular.module("angle").controller("idasTrnNocAndNdcController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g){function f(){var t={nocandndc_gid:e.nocandndc_gid},a="api/IdasNocAndNdc/GetNocDocumentEditList";s.getparams(a,t).then(function(t){e.UploadDocumentList=t.data.UploadNocDocumentList}),v.formats=["dd-MM-yyyy"],v.format=v.formats[0],v.calender1=function(t){t.preventDefault(),t.stopPropagation(),v.open1=!0},v.calender=function(t){t.preventDefault(),t.stopPropagation(),v.open2=!0},v.calender3=function(t){t.preventDefault(),t.stopPropagation(),v.open3=!0},v.calender4=function(t){t.preventDefault(),t.stopPropagation(),v.open4=!0},v.dateOptions={formatYear:"yy",startingDay:1};var a="api/employee/employee";s.get(a).then(function(t){e.employee_list=t.data.employee_list});var a="api/IdasNocAndNdc/TempClear";s.get(a).then(function(t){});var a="api/IdasNocAndNdc/GetDropDown";s.get(a).then(function(t){e.vertical_list=t.data.vertical_list});var t={nocandndc_gid:e.nocandndc_gid};lockUI();var a="api/IdasNocAndNdc/EditNoc";s.getparams(a,t).then(function(t){e.cbomaker=t.data.maker_gid,e.cbochecker=t.data.checker_gid,e.lblnocrequestdate=t.data.nocandndc_date,e.lblcustomer_name=t.data.customer_name,e.cboVertical=t.data.vertical_gid,e.lblnocclosuredate=t.data.noc_closure_date,e.lblsanction_ref_no=t.data.sanction_ref_no,e.lblsanctiondate=t.data.sanction_date,e.lblloan_account_no=t.data.loan_account_no,e.lblnocissuancedate=t.data.noc_issuance_date,e.lblloanclosuredate=t.data.loan_closure_date,unlockUI()})}var v=this;v.title="idasTrnNocAndNdcEditController",e.nocandndc_gid=l.search().lsnocandndc_gid;var h=e.nocandndc_gid;f(),e.Nocclose=function(){n.go("app.idasTrnNocAndNdc")},e.NocNDcDocumentUpload=function(){var t=document.getElementById("file");if(t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),a.append("project_flag","Default"),e.uploadfrm=a;var o=t.files.item(n).name,i=(t.files.item(n).size,g.fnCheckValidDocType(o,""));if(0==i)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("file_name",e.txtdoc_name);var c="api/IdasNocAndNdc/NocDocumentUpload";lockUI(),s.postFile(c,e.uploadfrm).then(function(t){$("#file").val("");var a={nocandndc_gid:e.nocandndc_gid},n="api/IdasNocAndNdc/GetNocDocumentTempEditList";s.getparams(n,a).then(function(t){e.UploadDocumentList=t.data.UploadNocDocumentList}),unlockUI(),1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file."),unlockUI();e.txtdoc_name=""},e.downloads=function(t,e){_.Downloaddocument(t,e)},e.uploaddocumentcancel=function(t){var a={nocandndcdocument_gid:t,nocandndc_gid:h},n="api/IdasNocAndNdc/GetNocDocumentDelete";s.getparams(n,a).then(function(t){if(1==t.data.status){var a={nocandndc_gid:h},n="api/IdasNocAndNdc/GetNocDocumentTempEditList";s.getparams(n,a).then(function(t){e.UploadDocumentList=t.data.UploadNocDocumentList}),d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3});unlockUI()})},e.NocUpdate=function(){var t="",a="",o="",i="",c=$("#Vertical :selected").text();void 0==e.cbomaker&&null==e.cbomaker||(t=$("#maker_name :selected").text(),o=e.cbomaker),void 0==e.cbochecker&&null==e.cbochecker||(a=$("#checker_name :selected").text(),i=e.cbochecker);var r={nocandndc_gid:h,maker_gid:o,maker_name:t,checker_gid:i,checker_name:a,vertical_gid:e.cboVertical,vertical_name:c,customer_name:e.lblcustomer_name,sanction_ref_no:e.lblsanction_ref_no,sanction_date:e.lblsanctiondate,loan_account_no:e.lblloan_account_no,noc_issuance_date:e.lblnocissuancedate,loan_closure_date:e.lblloanclosuredate,nocandndc_date:e.lblnocrequestdate},l="api/IdasNocAndNdc/UpdateNoc";lockUI(),s.post(l,r).then(function(t){unlockUI(),1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),n.go("app.idasTrnNocAndNdc")})}}angular.module("angle").controller("idasTrnNocAndNdcEditController",t),t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){lockUI();var t="api/IdasNocAndNdc/GetIdasNocReportSummary";r.get(t).then(function(t){e.nocandndc_list=t.data.nocandndc_list,unlockUI()})}var f=this;f.title="idasTrnNocAndNdcReportController",g(),e.excelnocandndc=function(){
lockUI();var t="api/IdasNocAndNdc/ExportExcelNoc";r.get(t).then(function(t){1==t.data.status?(unlockUI(),_.Downloaddocument(t.data.lspath,t.data.lsname)):(unlockUI(),s.alert("Error Occurred While Export !","warning"))})}}angular.module("angle").controller("idasTrnNocAndNdcReportController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){var t={nocandndc_gid:e.nocandndc_gid};lockUI();var a="api/IdasNocAndNdc/EditNoc";s.getparams(a,t).then(function(t){e.cbomaker=t.data.maker_name,e.cbochecker=t.data.checker_name,e.lblnocrequestdate=t.data.nocandndc_date,e.lblcustomer_name=t.data.customer_name,e.cboVertical=t.data.vertical_name,e.lblnocclosuredate=t.data.noc_closure_date,e.lblsanction_ref_no=t.data.sanction_ref_no,e.lblsanctiondate=t.data.sanction_date,e.lblloan_account_no=t.data.loan_account_no,e.lblnocissuancedate=t.data.noc_issuance_date,e.lblloanclosuredate=t.data.loan_closure_date,unlockUI()});var a="api/IdasNocAndNdc/GetNocDocumentEditList";s.getparams(a,t).then(function(t){e.UploadDocumentList=t.data.UploadNocDocumentList})}var f=this;f.title="idasTrnNocAndNdcViewController",e.nocandndc_gid=l.search().lsnocandndc_gid;e.nocandndc_gid;g(),e.downloads=function(t,e){_.Downloaddocument(t,e)},e.back=function(){n.go("app.idasTrnNocAndNdc")}}angular.module("angle").controller("idasTrnNocAndNdcViewController",t),t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f){function v(){e.DivFile=!1,e.show=!0,e.options=!1,d.hash("down"),_(),h=localStorage.getItem("sanction_gid");var t="api/IdasTrnSanctionDoc/SanctionDtlsView",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.sanctionrefno=t.data.sanctionrefno,e.SanctionDate=t.data.SanctionDate,e.SanctionAmount=t.data.SanctionAmount,e.FacilityType=t.data.FacilityType,e.customerName=t.data.customerName,e.Customerurn=t.data.Customerurn,e.collateral_security=t.data.collateral_security,e.zonalHeadName=t.data.zonalHeadName,e.businessHeadName=t.data.businessHeadName,e.clusterManager=t.data.clusterManager,e.creditManager=t.data.creditManager,e.relationshipmgmt=t.data.relationshipmgmt,e.customercode=t.data.customercode,e.verticalCode=t.data.verticalCode,e.contactperson=t.data.contactperson,e.mobileno=t.data.mobileno,e.addressline1=t.data.addressline1,e.addressline2=t.data.addressline2,y=t.data.customer_gid,e.batch_status=t.data.batch_status,e.status_ofBAL=t.data.status_ofBAL,e.lsa_status=t.data.lsa_status});var t="api/IdasTrnSanctionDoc/ScanDocSummary",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.documentation_list=t.data.MdlScannDocSummary});var t="api/IdasTrnSentMail/GetSentMailSummary",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.senddata=t.data.sendmail});var t="api/IdasTrnPhyDoc/GetPhyUnVerifiedCount",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.phydocunverified_count=t.data.phydocunverified_count});var t="api/IdasTrnSanctionDoc/GetCommonDoc",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.commondocument=t.data.uploaddocument})}e.title="IdasTrnPhyDocVerify";var h,y;v(),e.checkallDocument=function(t){angular.forEach(e.documentation_list,function(e){e.checked=t})},e.DocumentVerify=function(){function t(t,e){t.futuredatecheck=function(a){var n={date:a.toDateString()},o="api/IdasTrnPhyDoc/FutureDateCheck";r.getparams(o,n).then(function(a){0==a.data.status&&(t.phydocument_date="",e.close("closed"),s.alert(a.data.message,"warning"))})},t.documentverificationSubmit=function(){var o={sanctiondocument_gid:n,type_copy:t.types_of_copy,document_date:t.phydocument_date,phyfinal_remarks:t.remarks};if(void 0!=a){var i="api/IdasTrnPhyDoc/PostBulkDocVerification";lockUI(),r.post(i,o).then(function(a){1==a.data.status?(s.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed"),unlockUI(),v(),t.checkallDocument=""):(unlockUI(),s.alert(a.data.message,{status:"warning",pos:"top-center",timeout:3e3}),e.close("closed"),unlockUI())})}else e.close("closed"),s.alert("Select Atleast One Record!","warning")},t.ok=function(){e.close("closed")}}var a,n=[];if(angular.forEach(e.documentation_list,function(t){1==t.checked&&(a=t.sanctiondocument_gid,n.push(a))}),void 0==a)s.alert("Select Atleast One Record!","warning");else{o.open({templateUrl:"/DocumentVerificationModalContent.html",controller:t,size:"md",backdrop:"static",keyboard:!1});t.$inject=["$scope","$modalInstance"]}},e.exportattach=function(t,e){var a=t,n=a.split("EMS/"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a"),d=e.split(".");s.download=d[0];var l=r;s.href=l,s.click()},e.BatchConfirm=function(){function t(t,e){t.batch_close=function(){e.close("closed")},t.batch_ok=function(){var a="api/IdasTrnPhyDoc/DocBatch",n={sanction_gid:h,sanctionref_no:t.sanctionrefno,customer_gid:y,customer_urn:t.Customerurn,customer_name:t.customerName};lockUI(),r.post(a,n).then(function(t){unlockUI(),1==t.data.status?(e.close("closed"),s.alert(t.data.message,"success")):s.alert(t.data.message),v()})};var a="api/IdasMstSanction/GetBuyerinfoEdit",n={sanction_gid:h};r.getparams(a,n).then(function(e){t.buyer_list=e.data.buyer_list})}if("Yes"==e.status_ofBAL){o.open({templateUrl:"/buyerlist.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]}else u.swal({title:"Are you sure?",text:"Do You Want To Create the Batch ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Batch It!",closeOnConfirm:!1},function(t){if(t){lockUI();var a={sanction_gid:h,sanctionref_no:e.sanctionrefno,customer_gid:y,customer_urn:e.Customerurn,customer_name:e.customerName},n="api/IdasTrnPhyDoc/DocBatch";r.post(n,a).then(function(t){1==t.data.status?(v(),u.swal("Batch Created Successfully!"),unlockUI()):(s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())})}})},e.mailconversation=function(){function t(t,e){t.ok=function(){e.close("closed")};var a="api/idasMstTemplate/MailContent";r.get(a).then(function(e){t.mailcontent=e.data.template_content});var a="api/idasTrnMakerCheckerDtls/GetMailId",n={customer_gid:y};r.getparams(a,n).then(function(e){t.rmmail_id=e.data.rmmail_id});var n={sanction_gid:h,type_of_copy:"Physical Copy"},a="api/IdasTrnSanctionDoc/ScanDocConExport";r.post(a,n).then(function(e){1==e.data.status?t.phyPath=e.data.attachment_path:(s.alert("Error in attachment...!","success"),v())}),t.sendMail=function(){var a={sanction_gid:h,document_path:t.phyPath,to_mail:t.rmmail_id,cc_mail:t.cc_mail,bcc_mail:t.bcc_mail,body_content:t.mailcontent,subject:t.subject_mail},n="api/IdasTrnSentMail/PostSendMail";lockUI(),r.post(n,a).then(function(a){1==a.data.status?(unlockUI(),e.close("closed"),s.alert(a.data.message,"success"),t.subject_mail="",t.bcc_mail="",t.cc_mail="",v()):(unlockUI(),e.close("closed"),s.alert(a.data.message,"warning"))})},t["export"]=function(){var t={sanction_gid:h,type_of_copy:"Physical Copy"},e="api/IdasTrnSanctionDoc/ScanDocConExport";r.post(e,t).then(function(t){1==t.data.status?g.Downloaddocument(t.data.attachment_cloudpath,t.data.attachment_name):s.alert(t.data.message,"success")})}}o.open({templateUrl:"/mailconversation.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e["export"]=function(){var t={sanction_gid:h,type_of_copy:"Physical Copy"},e="api/IdasTrnSanctionDoc/ScanDocConExport";r.post(e,t).then(function(t){1==t.data.status?g.Downloaddocument(t.data.attachment_cloudpath,t.data.attachment_name):(s.alert(t.data.message,"success"),v())})},e.openpanel=function(){e.show=!1,e.options=!0},e.cancel=function(){e.show=!0},e.downloadsdocument=function(t,e){g.Downloaddocument(t,e)},e.deletedocument=function(t){var e={commondocument_gid:t};u.swal({title:"Are you sure?",text:"Do you want to delete this Document ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnSanctionDoc/CommonDocDelete";r.getparams(a,e).then(function(t){1==t.data.status?(u.swal("Document Deleted Successfully!"),unlockUI(),v()):(s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())})}})},e.Verify=function(t){var e="api/IdasTrnPhyDoc/PhyDocVerify",a={sanctiondocument_gid:t};r.getparams(e,a).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success"),v()):(unlockUI(),s.alert(t.data.message)),v()})},e.docConMkr=function(t,e,n){localStorage.setItem("sanctiondocument_gid",t),localStorage.setItem("conversation_count",e),localStorage.setItem("phydoc_status",n),a.go("app.idasTrnPhyDocConversation")},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.commondocumentupload=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_title",e.txtdocument_title),c.append("sanction_gid",h),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasTrnSanctionDoc/CommonDocUpload";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if($("#commonupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetCommonDoc",n={sanction_gid:h};r.getparams(a,n).then(function(t){e.commondocument=t.data.uploaddocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.uploadallocation=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("sanction_gid",h),c.append("types_of_doc","Physical Copy"),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasTrnSanctionDoc/ConversationUpload";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if($("#addupload").val(""),$("#editupload").val(""),1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.phydocback=function(){"Pending"==e.batch_status?d.url("app/idasTrnPhyDocSummary?lstab=pending"):d.url("app/idasTrnPhyDocSummary?lstab=created")}}angular.module("angle").controller("IdasTrnPhyDocVerify",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$anchorScroll","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){e.tab={};var t=window.location.href,a=t.split("lstab="),n=a[1];void 0!=n?"pending"==n?e.tabpending=!0:"created"==n&&(e.tabcreated=!0):e.tabpending=!0,e.totalDisplayedPending=100,e.totalDisplayedCreated=100,lockUI();var t="api/IdasTrnPhyDoc/PhysicalDocumentPendingSummary";r.get(t).then(function(t){e.batch_pending=t.data.MdlPhyDocSummary,null==e.batch_pending?e.total_pending=0:e.total_pending=e.batch_pending.length}),unlockUI();var t="api/IdasTrnPhyDoc/PhysicalDocumentCreatedSummary";lockUI(),r.get(t).then(function(t){e.batch_created=t.data.MdlPhyDocSummary,console.log(t.data),null==e.batch_created?e.total_created=0:e.total_created=e.batch_created.length}),unlockUI();var t=window.location.href,a=t.split("lstab="),n=a[1];void 0!=n?"pending"==n?e.tabpending=!0:"completed"==n&&(e.tabcreated=!0):void 0==e.tab.activeTabId?e.tabpending=!0:"pending"==e.tab.activeTabId?e.tabpending=!0:"completed"==e.tab.activeTabId&&(e.tabcreated=!0)}e.title="idasTrnPhyDocVerifySummary",g(),e.loadMorePending=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayedPending+=a,unlockUI()},e.loadMoreCreated=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayedCreated+=a,unlockUI()},e.GetPdf=function(t){var e={sanction_gid:t},a="api/idasTrnMakerCheckerDtls/GetComplaintCertificatePdf";lockUI(),r.getparams(a,e).then(function(t){1==t.data.status?(unlockUI(),_.Downloaddocument(t.data.file_path,"Compliance Certificate Report.pdf"),s.alert("Compliance Certificate Report Downloaded Successfully","success")):(unlockUI(),s.alert("Error Occurred While Export PDF !","warning"))})},e.docVerifyPending=function(t){localStorage.setItem("sanction_gid",t),d.url("app/idasTrnPhyDocVerification?lstab=pending")},e.docVerifyCreated=function(t){localStorage.setItem("sanction_gid",t),d.url("app/idasTrnPhyDocVerification?lstab=created")},e["export"]=function(t){lockUI();var e={sanction_gid:t,type_of_copy:"Scan Copy"},a="api/IdasTrnLsaManagement/ExportDocumentCoversation";r.post(a,e).then(function(t){unlockUI(),1==t.data.status?_.Downloaddocument(t.data.attachment_path,t.data.attachment_name):s.alert(t.data.message,"success")})}}angular.module("angle").controller("idasTrnPhyDocVerifySummary",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m){function p(){lockUI();var t={sanction_gid:e.sanction_gid},a="api/IdasMstDocList/GetDocument2SanctionList";r.getparams(a,t).then(function(t){unlockUI(),e.document2sanction_list=t.data.IDASDocument});var a="api/IdasTrnSanctionDoc/SanctionDtlsView";r.getparams(a,t).then(function(t){e.sanctionrefno=t.data.sanctionrefno,e.customerName=t.data.customerName,e.Customerurn=t.data.Customerurn})}e.title="idasTrnPreFilGenerationController",e.sanction_gid=d.search().sanction_gid;var _=d.search().lspage;p(),e.generate=function(t,e,a,n){d.url("app/idasTrnDocumentGeneration?documentlist_gid="+t+"&sanction_gid="+e+"&document_code="+a+"&doctemplate_flag="+n+"&lspage="+_)},e.WordGenerate=function(t,e){var a={documentlist_gid:t,sanction_gid:e},n="api/IdasMstDocList/GetDocWordGenerate";lockUI(),r.getparams(n,a).then(function(t){if(1==t.data.status){var e=t.data.lspath,a=t.data.lsname,e=e.replace("\\","/"),e=e.replace("//","/"),n=e.split("EMS/"),o=n[1].replace("\\","/"),i=a,c=(i.substring(i.lastIndexOf("/")+1),"api/azurestorage/FileUploadDocument"),d={file_path:o};r.post(c,d).then(function(t){1==t.data.status?m.Downloaddocument(o,a):(unlockUI(),s.alert("Error Occurred While Export PDF !","warning"))}),unlockUI()}else unlockUI(),s.alert("Error Occurred While Downloading !","warning"),p()})},e.gotoback=function(){"generatedprefil"==_?a.go("app.idasTrnPreFilManagement"):a.go("app.idasTrnSanctionMgmt")}}angular.module("angle").controller("idasTrnPreFilGenerationController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m){function p(){e.PrefilGenerateDocument=!1,e.GeneratedPrefilDoc=!0;var t="api/IdasMstDocList/GetGeneratedDocList";r.get(t).then(function(t){e.generateddoc_list=t.data.IDASDocument})}e.title="idasTrnPreFilManagementController",p(),e.generate=function(t){d.url("app/idasTrnPreFilGeneration?sanction_gid="+t+"&lspage=generatedprefil")},e.generatedocument=function(){e.PrefilGenerateDocument=!0,e.GeneratedPrefilDoc=!1,e.back=function(){e.PrefilGenerateDocument=!1,e.GeneratedPrefilDoc=!0,e.customer="",e.cbocustomer2sanction_gid="",e.document2sanction_list=""},e.complete=function(t){if(t.length>=3){e.message="";var a="api/customer/ExploreCustomer",n={customername:t};r.getparams(a,n).then(function(t){1==t.data.status?(e.message="",e.customer_list=t.data.Customers):e.message="No Records"})}else e.customer_list=null,e.message="Enter atleast three character"},e.fillTextbox=function(t,a){e.customer=a,e.customer_gid=t,e.customer_list=null;var n={customer_gid:t},o="api/IdasTrnLsaManagement/customer2sanction";r.getparams(o,n).then(function(t){e.customer2sanction_list=t.data.customer2sanction_list})},e.onselectedchangesanction=function(t){lockUI();var a={sanction_gid:e.cbocustomer2sanction_gid.customer2sanction_gid},n="api/IdasMstDocList/GetDocument2SanctionList";r.getparams(n,a).then(function(t){unlockUI(),e.document2sanction_list=t.data.IDASDocument})},e.generate=function(t,e,a,n){d.url("app/idasTrnDocumentGeneration?documentlist_gid="+t+"&sanction_gid="+e+"&document_code="+a+"&doctemplate_flag="+n+"&lspage=createprefil")},e.WordGenerate=function(t,e){var a={documentlist_gid:t,sanction_gid:e},n="api/IdasMstDocList/GetDocWordGenerate";lockUI(),r.getparams(n,a).then(function(t){if(1==t.data.status){var e=t.data.lspath,a=t.data.lsname,e=e.replace("\\","/"),e=e.replace("//","/"),n=e.split("EMS/"),o=n[1].replace("\\","/"),i=a,c=(i.substring(i.lastIndexOf("/")+1),"api/azurestorage/FileUploadDocument"),d={file_path:o};r.post(c,d).then(function(t){1==t.data.status?m.Downloaddocument(o,a):(unlockUI(),s.alert("Error Occurred While Export PDF !","warning"))}),unlockUI()}else unlockUI(),s.alert("Error Occurred While Downloading !","warning"),p()})}}}angular.module("angle").controller("idasTrnPreFilManagementController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){f=localStorage.getItem("redespatch_gid"),e.received_type="Direct";var t={redespatch_gid:f},a="api/IdasTrnRecordRetrieval/ReDespatchView360";s.getparams(a,t).then(function(t){e.retrievalrequest_gid=t.data.retrievalrequest_gid,v=e.retrievalrequest_gid,e.requested_date=t.data.requested_date,e.requestedby_name=t.data.requestedby_name,e.retrieval_type=t.data.retrieval_type,e.approved_date=t.data.approved_date,e.approvalby_name=t.data.approvalby_name,e.req_remarks=t.data.req_remarks,e.requested_for=t.data.requested_for,e.documentretrieved_status=t.data.documentretrieved_status,e.documentretrieved_mode=t.data.documentretrieved_mode,e.redespatch_gid=t.data.redespatch_gid,e.redespatched_date=t.data.redespatched_date,e.redespatchedby_name=t.data.redespatchedby_name,e.contact_person=t.data.contact_person,e.remarks=t.data.remarks,e.uploaddocument=t.data.MdlIdasUploadDocument,e.RetrivedDtls_list=t.data.MdlTrnRequired,e.totalDisplayed=100,e.total=e.RetrivedDtls_list.length;var a="api/IdasTrnRecordRetrieval/GetDocReceived",n={retrievalrequest_gid:e.retrievalrequest_gid};s.getparams(a,n).then(function(t){e.documentretrieved_type=t.data.documentretrieved_mode,e.documentretrieved_date=t.data.documentretrieved_date,e.documentreceivedto_gid=t.data.documentreceivedto_gid,e.documentreceivedto_name=t.data.documentreceivedto_name,e.contactperson_name=t.data.contactperson_name,e.mobile_no=t.data.mobile_no})})}var g=this;g.title="idasTrnReDespatch360View";var f,v;_(),e.loadMore=function(t){if(void 0==t)return void d.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);if(null!=e.RetrivedDtls_list){if(!(e.totalDisplayed<e.RetrivedDtls_list.length))return unlockUI(),void d.alert(" Total Summary has"+e.RetrivedDtls_list.length+" Records Only","warning");e.totalDisplayed+=a,unlockUI()}unlockUI()},e.downloadsdocument=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a");e.split(".");s.download=e;var d=r;s.href=d,s.click()},e.back=function(){n.go("app.idasTrnRetrievalReqSummary")}}angular.module("angle").controller("idasTrnReDespatch360View",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f){function v(){e.DivFile=!1,e.show=!0,e.options=!1,d.hash("down"),_(),h=localStorage.getItem("sanction_gid");var t="api/IdasTrnSanctionDoc/SanctionDtlsView",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.sanctionrefno=t.data.sanctionrefno,e.SanctionDate=t.data.SanctionDate,e.SanctionAmount=t.data.SanctionAmount,e.FacilityType=t.data.FacilityType,e.customerName=t.data.customerName,e.Customerurn=t.data.Customerurn,e.collateral_security=t.data.collateral_security,e.zonalHeadName=t.data.zonalHeadName,e.businessHeadName=t.data.businessHeadName,e.clusterManager=t.data.clusterManager,e.creditManager=t.data.creditManager,e.relationshipmgmt=t.data.relationshipmgmt,e.customercode=t.data.customercode,e.verticalCode=t.data.verticalCode,e.contactperson=t.data.contactperson,e.mobileno=t.data.mobileno,e.addressline1=t.data.addressline1,e.addressline2=t.data.addressline2,y=t.data.customer_gid});var t="api/IdasTrnSanctionDoc/ScanDocSummary",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.documentation_list=t.data.MdlScannDocSummary,console.log(t.data)});var t="api/IdasTrnSentMail/GetSentMailSummary",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.senddata=t.data.sendmail});var t="api/IdasTrnSanctionDoc/GetCommonDoc",a={sanction_gid:h};r.getparams(t,a).then(function(t){e.commondocument=t.data.uploaddocument})}e.title="idasTrnResponseDoc";var h,y;v(),e.deletedocument=function(t){var e={commondocument_gid:t};u.swal({title:"Are you sure?",text:"Do you want to delete this query to Document ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Delete it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnSanctionDoc/CommonDocDelete";r.getparams(a,e).then(function(t){1==t.data.status?(u.swal("Document Deleted Successfully!"),unlockUI(),v()):(s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.commondocumentupload=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_title",e.txtdocument_title),c.append("sanction_gid",h),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasTrnSanctionDoc/CommonDocUpload";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if($("#commonupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetCommonDoc",n={sanction_gid:h};r.getparams(a,n).then(function(t){e.commondocument=t.data.uploaddocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.downloadsdocument=function(t,e){g.Downloaddocument(t,e)},e.gotoback=function(){a.go("app.idasTrnRmResponseSummary")},e.cancel=function(){e.show=!0},e.uploadallocation=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("sanction_gid",h),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasTrnSanctionDoc/ConversationUpload";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if($("#addupload").val(""),$("#editupload").val(""),1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.mailconversation=function(){function t(t,e){t.ok=function(){e.close("closed")};var a="api/idasMstTemplate/MailContent";r.get(a).then(function(e){t.mailcontent=e.data.template_content});var a="api/idasTrnMakerCheckerDtls/GetMailId",n={customer_gid:y};r.getparams(a,n).then(function(e){t.rmmail_id=e.data.rmmail_id});var a="api/idasTrnMakerCheckerDtls/GetCreditMailId";r.get(a).then(function(e){t.creditmail_id=e.data.creditmail_id});var n={sanction_gid:h},a="api/IdasTrnSanctionDoc/ScanDocConExport";r.post(a,n).then(function(e){1==e.data.status?t.phyPath=e.data.attachment_path:(s.alert("Error in attachment...!","success"),v())}),t.sendMail=function(){var a={sanction_gid:h,document_path:t.phyPath,to_mail:t.rmmail_id,cc_mail:t.cc_mail,bcc_mail:t.bcc_mail,body_content:t.mailcontent,subject:t.subject_mail},n="api/IdasTrnSentMail/PostSendMail";lockUI(),r.post(n,a).then(function(a){1==a.data.status?(unlockUI(),e.close("closed"),s.alert(a.data.message,"success"),t.subject_mail="",t.bcc_mail="",t.cc_mail="",v()):(unlockUI(),e.close("closed"),s.alert(a.data.message,"warning"))})},t["export"]=function(){var t={sanction_gid:h},e="api/IdasTrnSanctionDoc/ScanDocConExport";r.post(e,t).then(function(t){1==t.data.status?g.Downloaddocument(t.data.attachment_cloudpath,t.data.attachment_name):(s.alert(t.data.message,"success"),v())})}}o.open({templateUrl:"/mailconversation.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e["export"]=function(){var t={sanction_gid:h},e="api/IdasTrnSanctionDoc/ScanDocConExport";r.post(e,t).then(function(t){1==t.data.status?g.Downloaddocument(t.data.attachment_cloudpath,t.data.attachment_name):(s.alert(t.data.message,"success"),v())})},e.exportattach=function(t,e){var a=t,n=a.split("EMS"),o=n[1].replace("\\","/"),i=window.location.host,c=location.protocol+"//",r=c.concat(i,o),s=document.createElement("a"),d=e.split(".");s.download=d[0];var l=r;s.href=l,s.click()},e.openpanel=function(){e.show=!1,e.options=!0},e.rmresponse=function(t){var n="api/idasTrnMakerCheckerDtls/CadQuieryRMViwed",o={sanctiondocument_gid:t,types_of_conversation:"External"};r.post(n,o).then(function(t){e.senddata=t.data.sendmail}),localStorage.setItem("sanctiondocument_gid",t),a.go("app.idasTrnRmResponse")},e.cancel=function(){e.show=!0}}angular.module("angle").controller("idasTrnResponseDoc",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$anchorScroll","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f){function v(){e.batch_mode=!1,e.box_mode=!1,e.customer_mode=!1,e.reconciliationmode=!1,e.DivFile=!1,h.calenderreq=function(t){t.preventDefault(),t.stopPropagation(),h.openreq=!0},h.calenderapp=function(t){t.preventDefault(),t.stopPropagation(),h.openapp=!0},h.dateOptions={formatYear:"yy",startingDay:1},h.formats=["dd-MM-yyyy"],h.format=h.formats[0];var t="api/employee/employee";r.get(t).then(function(t){e.employee_list=t.data.employee_list});var t="api/IdasTrnRecordRetrieval/DespatchCustomer";r.get(t).then(function(t){e.customer_list=t.data.MdlCustomer});var t="api/IdasTrnRecordRetrieval/DespatchBox";r.get(t).then(function(t){e.box_list=t.data.MdlGetBox});var a={uploaddocument_gid:void 0},t="api/IdasTrnRecordRetrieval/TmpDocumentDelete";r.getparams(t,a).then(function(t){})}var h=this;v(),e.checkallBatch=function(t){angular.forEach(e.batch_list,function(e){e.checked=t})},e.onchangemodecustomer=function(){e.customer_mode=!0,e.box_mode=!1,e.file_mode=!1,e.reconciliationmode=!1,e.customer=""},e.onchangemodebox=function(){e.customer_mode=!1,e.box_mode=!0,e.file_mode=!1,e.reconciliationmode=!1,e.box=""},e.onchangemodefile=function(){e.customer_mode=!1,e.box_mode=!1,e.file_mode=!0,e.reconciliationmode=!0;var t={reference_type:e.retrieval_mode},a="api/IdasTrnRecordRetrieval/BatchList";r.post(a,t).then(function(t){1==t.data.status?(e.file_mode=!0,e.batch_list=t.data.MdlGetBatch,e.total=e.batch_list.length):(e.file_mode=!1,s.alert("No Data to Display","warning"))});var t={reference_type:e.retrieval_mode},a="api/IdasTrnRecordRetrieval/ReconciliationCount";r.post(a,t).then(function(t){e.file_count=t.data.file_count,e.despatched_count=t.data.despatched_count,e.permanet_count=t.data.permanet_count,e.temporary_count=t.data.temporary_count})},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.onSelectChangeCustomer=function(t){console.log(t),e.reconciliationmode=!0;var a={reference_type:e.retrieval_mode,MdlCustomer:t};if(void 0!=t){var n="api/IdasTrnRecordRetrieval/BatchList";r.post(n,a).then(function(t){1==t.data.status?(e.file_mode=!0,e.batch_list=t.data.MdlGetBatch,e.total=e.batch_list.length):(e.file_mode=!1,s.alert("No Data to Display","warning"))});var a={reference_type:e.retrieval_mode,MdlCustomer:t},n="api/IdasTrnRecordRetrieval/ReconciliationCount";r.post(n,a).then(function(t){e.file_count=t.data.file_count,e.despatched_count=t.data.despatched_count,e.permanet_count=t.data.permanet_count,e.temporary_count=t.data.temporary_count,e.insamunnati_count=e.permanet_count+e.temporary_count})}else e.customer_mode=!0,e.box_mode=!1,e.file_mode=!1,e.reconciliationmode=!1,e.customer=""},e.onSelectChangeBox=function(t){e.reconciliationmode=!0;var a={reference_type:e.retrieval_mode,MdlGetBox:t};if(void 0!=t){var n="api/IdasTrnRecordRetrieval/BatchList";r.post(n,a).then(function(t){1==t.data.status?(e.file_mode=!0,e.batch_list=t.data.MdlGetBatch,e.total=e.batch_list.length):(e.file_mode=!1,s.alert("No Data to Display","warning"))});var a={reference_type:e.retrieval_mode,MdlGetBox:t},n="api/IdasTrnRecordRetrieval/ReconciliationCount";r.post(n,a).then(function(t){e.file_count=t.data.file_count,e.despatched_count=t.data.despatched_count,e.permanet_count=t.data.permanet_count,e.temporary_count=t.data.temporary_count})}else e.customer_mode=!1,e.box_mode=!0,e.file_mode=!1,e.reconciliationmode=!1,e.box=""},e.deletedocument=function(t){var a={uploaddocument_gid:t},n="api/IdasTrnRecordRetrieval/TmpDocumentDelete";lockUI(),r.getparams(n,a).then(function(t){if(1==t.data.status){unlockUI(),s.alert("Document deleted Successfully!","success");var a="api/IdasTrnRecordRetrieval/GetTmpUploadDocument";r.get(a).then(function(t){e.uploaddocument=t.data.MdlIdasUploadDocument})}else unlockUI(),s.alert("Error Occurred")})},e.downloadsdocument=function(t,e){g.Downloaddocument(t,e)},e.commonupload=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_title",e.txtdocument_title),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasTrnRecordRetrieval/UploadDocument";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if($("#commonupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnRecordRetrieval/GetTmpUploadDocument";r.get(a).then(function(t){e.uploaddocument=t.data.MdlIdasUploadDocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.requestSubmit=function(){var t=[];if(angular.forEach(e.batch_list,function(e){1==e.checked&&t.push([e.customer_gid,e.customername,e.despatch_gid,e.despatchref_no,e.cartonbox_gid,e.boxstampref_no,e.batch_gid,e.filestampref_no,e.fileref_no]);
}),void 0==t)return void s.alert("Kindly Select Atleast One Record","warning");var n={requested_date:e.requestDate,requestedby_name:e.requested_by,approvalby_name:e.approved_by,approved_date:e.approvalDate,retrieval_type:e.retrieval_type,req_remarks:e.remarks,requested_for:e.reason,reteival_record:t,documentretrieved_mode:e.retrieval_mode},o="api/IdasTrnRecordRetrieval/CreateRetrievalReq";lockUI(),r.post(o,n).then(function(t){unlockUI(),1==t.data.status?(a.go("app.idasTrnRetrievalReqSummary"),s.alert(t.data.message,"success")):s.alert(t.data.message,"warning")})},e.back=function(){a.go("app.idasTrnRetrievalReqSummary")}}angular.module("angle").controller("idasTrnRetrievalReqCreate",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m){function p(){e.user={},e.IsCreate=!1,e.totalDisplayedReq=100,e.totalDisplayedTemp=100,e.totalDisplayedPermanent=100,e.totalDisplayedDespath=100,_.calenderDespatch=function(t){t.preventDefault(),t.stopPropagation(),_.openDespatch=!0},_.dateOptions={formatYear:"yy",startingDay:1},_.formats=["dd-MM-yyyy"],_.format=_.formats[0];var t="api/IdasTrnRecordRetrieval/GetRetrievalReqSummary";r.get(t).then(function(t){e.reqsummary_list=t.data.MdlIdasRecordReqSummary,e.ReqCount=e.reqsummary_list.length});var t="api/IdasTrnRecordRetrieval/GetRetrievalTempSummary";r.get(t).then(function(t){e.temp_list=t.data.MdlIdasRecordReceivedSummary,null==e.temp_list?e.TempCount=0:e.TempCount=e.temp_list.length});var t="api/IdasTrnRecordRetrieval/GetRetrievalPermanentSummary";r.get(t).then(function(t){e.permanent_list=t.data.MdlIdasRecordReceivedSummary,null==e.TempCount?e.PermanentCount=0:e.PermanentCount=e.permanent_list.length});var t="api/IdasTrnRecordRetrieval/GetReDespatchedSummary";r.get(t).then(function(t){e.redespatch_list=t.data.MdlReDespatchSummary,console.log(e.redespatch_list),null==e.redespatch_list?e.DespatchCount=0:e.DespatchCount=e.redespatch_list.length})}var _=this;_.title="idasTrnRetrievalReqSummary",p(),e.checkallRedespatch=function(t){angular.forEach(e.temp_list,function(e){"Y"==e.ensure_flag&&(e.checked=t)})},e.createDespatch=function(){var t,a=[];if(angular.forEach(e.temp_list,function(e){1==e.checked&&(t=e.retrievalrequestdtls_gid,a.push(t))}),void 0!=t){var n="api/employee/employee";r.get(n).then(function(t){e.employee_data=t.data.employee_list}),e.IsCreate=!0}else s.alert("Select Atleast One Record!")},e.close=function(){e.IsCreate=!1},e.DespatchSubmit=function(){var t,a=[];if(angular.forEach(e.temp_list,function(e){1==e.checked&&(t=e.retrievalrequestdtls_gid,a.push(t))}),void 0==t)return void s.alert("Select Atleast One Record!");var n={retrievalrequestdtls_gid:a,redespatched_date:e.user.txtDespatchDate,contact_person:e.user.contactPerson,redespatchedby_name:e.user.DespatchedBy,remarks:e.user.despatchRemarks},o="api/IdasTrnRecordRetrieval/ReDespatch";lockUI(),r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,"success")):(unlockUI(),s.alert(t.data.message)),p()})},e.ensure=function(t){var e={retrievalrequestdtls_gid:t};l.swal({title:"Are you Sure?",text:"The Retrieval Purpose is Completed",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Ensured it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a="api/IdasTrnRecordRetrieval/Ensure";r.getparams(a,e).then(function(t){1==t.data.status?(p(),l.swal("Ensured Successfully!"),unlockUI()):(s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},e.loadMoreReq=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayedReq+=a,unlockUI()},e.loadMoredespatch=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayedDespath+=a,unlockUI()},e.loadMoreTemp=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayedTemp+=a,unlockUI()},e.loadMorePermanent=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayedPermanent+=a,unlockUI()},e.createRetrievalReq=function(){a.go("app.idasTrnRetrievalReqCreate")},e.back=function(){a.go("app.idasTrnRetrievalReqSummary")},e.Docdtlsview=function(t){localStorage.setItem("retrievalrequest_gid",t),a.go("app.idasTrnRetrievalReqView")},e.ReDespatchdtlsview=function(t){localStorage.setItem("redespatch_gid",t),a.go("app.idasTrnReDespatch360View")}}angular.module("angle").controller("idasTrnRetrievalReqSummary",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){f.calenderrec=function(t){t.preventDefault(),t.stopPropagation(),f.openrec=!0},f.dateOptions={formatYear:"yy",startingDay:1},f.formats=["dd-MM-yyyy"],f.format=f.formats[0],v=localStorage.getItem("retrievalrequest_gid"),e.received_type="Direct";var t={retrievalrequest_gid:v},a="api/IdasTrnRecordRetrieval/RetrievalReqView";s.getparams(a,t).then(function(t){if(e.requested_date=t.data.requested_date,e.requestedby_name=t.data.requestedby_name,e.retrieval_type=t.data.retrieval_type,e.approved_date=t.data.approved_date,e.approvalby_name=t.data.approvalby_name,e.req_remarks=t.data.req_remarks,e.requested_for=t.data.requested_for,e.documentretrieved_status=t.data.documentretrieved_status,e.documentretrieved_mode=t.data.documentretrieved_mode,e.uploaddocument=t.data.MdlIdasUploadDocument,"Customer"==e.documentretrieved_mode&&(e.RetrivedDtls_list=t.data.MdlCustomerDtlsList),"Box"==e.documentretrieved_mode&&(e.RetrivedDtls_list=t.data.MdlBoxDtlsList,console.log(e.RetrivedDtls_list)),"File"==e.documentretrieved_mode){e.totalDisplayed=100;var a={retrievalrequest_gid:v,documentretrieved_mode:e.documentretrieved_mode},n="api/IdasTrnRecordRetrieval/RetrievalRequestDocDtls";s.post(n,a).then(function(t){e.RetrivedDtls_list=t.data.MdlTrnRequired,e.total=e.RetrivedDtls_list.length})}});var a="api/employee/employee";if(s.get(a).then(function(t){e.employee_list=t.data.employee_list}),"Pending"!=e.documentretrieved_status){var a="api/IdasTrnRecordRetrieval/GetDocReceived",t={retrievalrequest_gid:v};s.getparams(a,t).then(function(t){e.documentretrieved_type=t.data.documentretrieved_mode,e.documentretrieved_date=t.data.documentretrieved_date,e.documentreceivedto_gid=t.data.documentreceivedto_gid,e.documentreceivedto_name=t.data.documentreceivedto_name,e.contactperson_name=t.data.contactperson_name,e.mobile_no=t.data.mobile_no})}}var f=this;f.title="idasTrnRetrievalReqView";var v;g(),e.loadMore=function(t){if(void 0==t)return void d.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);if(null!=e.RetrivedDtls_list){if(!(e.totalDisplayed<e.RetrivedDtls_list.length))return unlockUI(),void d.alert(" Total Summary has"+e.RetrivedDtls_list.length+" Records Only","warning");e.totalDisplayed+=a,unlockUI()}unlockUI()},e.customerdetails=function(t,a){var n={customer_gid:t,retrievalrequest_gid:v,documentretrieved_mode:e.documentretrieved_mode,box_gid:""},o="api/IdasTrnRecordRetrieval/RetrievalRequestDocDtls";s.post(o,n).then(function(n){console.log(n.data),e.RetrivedDtls_list[a][t]=n.data.MdlTrnRequired})},e.boxdetails=function(t,a){var n={customer_gid:"",retrievalrequest_gid:v,documentretrieved_mode:e.documentretrieved_mode,box_gid:t},o="api/IdasTrnRecordRetrieval/RetrievalRequestDocDtls";s.post(o,n).then(function(n){console.log(n.data),e.RetrivedDtls_list[a][t]=n.data.MdlTrnRequired})},e.downloadsdocument=function(t,e){_.Downloaddocument(t,e)},e.back=function(){n.go("app.idasTrnRetrievalReqSummary")},e.Docreceived=function(t){var a={retrievalrequestdtls_gid:t,received_type:e.retrieval_type},n="api/IdasTrnRecordRetrieval/DocReceivedDtls";lockUI(),s.post(n,a).then(function(t){unlockUI(),1==t.data.status?(d.alert(t.data.message,"success"),g()):d.alert(t.data.message,"warning")})},e.receivedSubmit=function(){if(void 0==e.cboemployeegid)return void d.alert("Select the Document Received To","warning");if(void 0==e.contact_person)return void d.alert("Enter the Vendor Contact Person","warning");if(void 0==e.receivedDate)return void d.alert("Pick the Document Retrieved Date","warning");if(null==e.mobile_no)return void d.alert("Enter the Valid Mobile No.","warning");var t=$("#employee :selected").text(),a={retrievalrequest_gid:v,documentretrieved_mode:e.received_type,documentretrieved_date:e.receivedDate,documentreceivedto_gid:e.cboemployeegid.employee_gid,documentreceivedto_name:t,contactperson_name:e.contact_person,mobile_no:e.mobile_no,received_mode:e.retrieval_type},o="api/IdasTrnRecordRetrieval/DocReceived";lockUI(),s.post(o,a).then(function(t){unlockUI(),console.log(t.data),1==t.data.status?d.alert(t.data.message,"success"):d.alert(t.data.message,"warning"),localStorage.setItem("retrievalrequest_gid",v),n.go("app.idasTrnRetrievalReqView")})}}angular.module("angle").controller("idasTrnRetrievalReqView",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g){function f(){e.DivFile=!1,v=localStorage.getItem("sanctiondocument_gid");var t="api/IdasTrnSanctionDoc/ScanDocConversationExternal",a={sanctiondocument_gid:v};lockUI(),r.getparams(t,a).then(function(t){unlockUI(),e.scandocconversation=t.data.MdlDocConversation});var t="api/IdasTrnPhyDoc/PhyDocConversationExternal",a={sanctiondocument_gid:v};lockUI(),r.getparams(t,a).then(function(t){unlockUI(),1==t.data.status&&(e.phydocconversation=t.data.MdlDocConversation)}),e.typeofcopy="Scan Copy";var t="api/IdasTrnSanctionDoc/GetDocDetailsView",a={sanctiondocument_gid:v};lockUI(),r.getparams(t,a).then(function(t){unlockUI(),e.sanction_gid=t.data.sanction_gid,e.document_gid=t.data.document_gid,e.document_code=t.data.document_code,e.document_name=t.data.document_name,e.scandocument_date=t.data.scandocument_date,e.phydocument_date=t.data.phydocument_date,e.types_of_copy=t.data.types_of_copy,e.phydocument_type=t.data.phydocument_type,e.documentrecord_id=t.data.documentrecord_id,e.scanfinal_remarks=t.data.scanfinal_remarks,e.phyfinal_remarks=t.data.phyfinal_remarks})}e.title="idasTrnRmResponse";var v;f(),e.PopupDownload=function(t){function e(e,a){e.ok=function(){a.close("closed")},e.downloads=function(t,e){_.Downloaddocument(t,e)};var n="api/IdasTrnDocConversation/GetUploadDoc",o={docconversation_gid:t};r.getparams(n,o).then(function(t){e.viewDocumentList=t.data.uploaddocument})}o.open({templateUrl:"/mailconversation.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.rmresponseback=function(){a.go("app.idasTrnRmResponseDoc")},e.raiseResponse=function(t,a,n){var o={docconversation_gid:t,rm_response:n},i="api/IdasTrnSanctionDoc/DocRmResponse";lockUI(),r.post(i,o).then(function(t){1==t.data.status?(unlockUI(),s.alert("Conversation Added Successfully..!!","success"),e.content=" ",f()):(unlockUI(),s.alert("Error Occurred!")),f()})},e.FileShow=function(){1==e.DivFile?e.DivFile=!1:e.DivFile=!0},e.uploadallocation=function(t,a,n){var o={name:t[0].name,file:t[0]},i=g.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_title",e.txtdocument_title),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasTrnSanctionDoc/ConversationDocUpload";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if($("#addupload").val(""),e.txtdocument_title="",1==t.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),s.alert("File Format Not Supported!")})},e.UploadDocCancel=function(t){var a={conversationdocument_gid:t},n="api/IdasTrnSanctionDoc/deleteconversedoc";lockUI(),r.getparams(n,a).then(function(t){if(1==t.data.status){unlockUI(),s.alert("Document deleted Successfully..!!","success");var a="api/IdasTrnSanctionDoc/GetConverseDoc";r.get(a).then(function(t){e.uploaddocument=t.data.uploaddocument})}else unlockUI(),s.alert("Error Occurred")})}}angular.module("angle").controller("idasTrnRmResponse",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){lockUI();var t="api/IdasTrnSanctionDoc/RmSummary";r.get(t).then(function(t){unlockUI(),e.sanctionlist=t.data.MdlMakercheckerSummary})}e.title="idasTrnRmResponseSummary",_(),e.doc=function(t){localStorage.setItem("sanction_gid",t),a.go("app.idasTrnRmResponseDoc")}}angular.module("angle").controller("idasTrnRmResponseSummary",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u){function m(){p.calenderEdit=function(t){t.preventDefault(),t.stopPropagation(),p.openEdit=!0},p.dateOptionsEdit={formatYear:"yy",startingDay:1},p.formats=["dd-MM-yyyy"],p.format=p.formats[0],p.calender1=function(t){t.preventDefault(),t.stopPropagation(),p.open1=!0},p.calender2=function(t){t.preventDefault(),t.stopPropagation(),p.open2=!0},p.calender3=function(t){t.preventDefault(),t.stopPropagation(),p.open3=!0},p.calender4=function(t){t.preventDefault(),t.stopPropagation(),p.open4=!0},p.calender5=function(t){t.preventDefault(),t.stopPropagation(),p.open5=!0},p.calender6=function(t){t.preventDefault(),t.stopPropagation(),p.open6=!0},p.calender7=function(t){t.preventDefault(),t.stopPropagation(),p.open7=!0};var t="api/loan/loan_list";r.get(t).then(function(t){e.loan_list=t.data.loanmasterdtls});var t="api/newServiceTicket/employee";r.get(t).then(function(t){e.employee_list=t.data.employee_list});var a={sanction_gid:localStorage.getItem("sanction_gid")};lockUI();var t="api/IdasMstSanction/SanctionDtlsEdit";r.getparams(t,a).then(function(t){console.log(t),e.txtsanctionrefnoEdit=t.data.sanction_refno,e.SanctionDateEdit=t.data.sanction_date,e.txtSanctionAmountEdit=t.data.sanction_amount,e.txtSanctionLimitEdit=t.data.sanction_limit,e.entityedit=t.data.entity,e.cboFacilityTypeEdit=t.data.facility_type,e.customerNameEdit=t.data.customername,e.CustomerurnEdit=t.data.customer_urn,e.txtcollateralEdit=t.data.collateral_security,e.zonalHeadNameEdit=t.data.zonal_name,e.businessHeadNameEdit=t.data.businesshead_name,e.clusterManagerEdit=t.data.cluster_manager_name,e.creditManagerEdit=t.data.creditmanager_name,e.relationshipmgmtEdit=t.data.relationshipmgmt_name,e.txtapprovalauthority=t.data.approval_authority,e.verticalCodeEdit=t.data.vertical,e.txtstate=t.data.state,e.loan_type=t.data.loan_type,e.txtccapproval_date=t.data.ccapproval_date,e.txtnatureofproposal=t.data.nature_ofproposal,e.txtEditclassificationofMSME=t.data.classification_MSME,e.txtEditValidity=t.data.sanction_validity,e.txtEditExpiryDate=t.data.sanctionexpiry_Date,e.txtEditReviewDate=t.data.sanctionreview_Date,e.earliersancrefnoEdit=t.data.earlier_sanctionrefno,e.txtEditconstitution=t.data.constitution,e.pincode=t.data.pincode,e.contact_number=t.data.contact_number,e.email_id=t.data.email_id,e.contact_person=t.data.contact_person,e.txtrm_phoneno=t.data.rm_phoneno,e.txtrm_emailid=t.data.rm_emailid,e.cboEditauthorizedsignatory=t.data.authorized_signatory,e.credit_manager=t.data.credit_manager,e.txtEditexistingLimit=t.data.existing_limit,e.txtEditAdditProposedLimit=t.data.additional_proposedlimit,e.txtEditOverallLimit=t.data.overall_limit,e.revisied_limit=t.data.revisied_limit,e.txtEditpurpose=t.data.purpose,e.txtEdittenureMonths=t.data.tenure_months,e.txtEditRepaymentPrinicipal=t.data.repayment_principal,e.txtEditRepInterest=t.data.repayment_interest,e.txtEditPrimarySecurity=t.data.primary_security,e.txtEditCollateralSecurity=t.data.collateral_security,e.personal_guarantee=t.data.personal_guarantee,e.txtEditSecurityBank=t.data.securitycheque_bankname,e.txtEditSecurityAccount=t.data.securitycheque_accountnumber,e.txtEditMargin=t.data.margin,e.txtEditRateofInterest=t.data.rateof_interest,e.txtEditPenalInterest=t.data.penal_interest,e.txtEditProcessingFee=t.data.processing_fee,e.txtEditBankCheque=t.data.bankand_chequeno,e.txtEditChequeRealization=t.data.chequerealizationDate,e.txtEditDocumentationCharge=t.data.documentation_clientvisitcharge,e.txtEditGSTNumber=t.data.GST_number,e.txtEditModeOperation=t.data.modeof_operations,e.txtEditspecificcondition=t.data.specific_condition,e.receiptdocsDateEdit=t.data.dateof_receiptDocsVetting,e.txtEditNACHForm=t.data.NACH_form,e.cboEditEscrowAccount=t.data.escrow_account,e.txtEditVirtualAccountNo=t.data.virtual_accountno,e.txtEditBuyersName=t.data.nameofthe_buyers,e.txtEditStatusBAL=t.data.status_ofBAL,e.txtEditROCApplicable=t.data.roc_applicable,e.txtEditROCStatus=t.data.roc_status,e.txtEditcersai=t.data.cersai_status,e.txtEditNesl=t.data.nesl_status,e.txtEditPreDisburse=t.data.predisbursement_deferal,e.dateofdeviation=t.data.deviation_Date,e.txtEditPreDisburseStatus=t.data.statuspre_disbursementdeferal,e.txtEditPostDisb=t.data.postdisbursement_covanent,e.txtEditPostDisbStatus=t.data.statuspost_disbursementcovanent,e.dateofReleaseOrder=t.data.releaseorder_Date,e.txtroissuing_totalamount=t.data.roissuing_totalamount,e.txtcasesvetted_bycad=t.data.casesvetted_bycad,e.txtEditoriginaldocs_receivedHO=t.data.originaldocs_receivedHO,e.txtscanneduploaded_Drive=t.data.scanneduploaded_Drive,e.txtmonitoring_visit=t.data.monitoring_visit,e.txtbank_statement=t.data.bank_statement,e.txtaudited_financials=t.data.audited_financials,e.txtstock_statement=t.data.stock_statement,e.txtpurchase_statement=t.data.purchase_statement,e.txtsales_statement=t.data.sales_statement,e.txtdebtors_statement=t.data.debtors_statement,e.txtprovisionalfinancial_gst=t.data.provisionalfinancial_gst,e.txtroc_30daysfromSLonetime=t.data.roc_30daysfromSLonetime,e.txtnoliability_certificate=t.data.noliability_certificate,e.txtbuyerconfirmation_letter=t.data.buyerconfirmation_letter,e.txtcopyof_warehousereceipt=t.data.copyof_warehousereceipt,e.txtinsurance_30daysfromSLonetime=t.data.insurance_30daysfromSLonetime,e.txtloandisbursement_dtlfarmermember=t.data.loandisbursement_dtlfarmermember,e.txtothers=t.data.others,e.contactperson=t.data.contactperson,e.mobileno=t.data.mobileno,e.addressline1=t.data.addressline1,e.addressline2=t.data.addressline2,unlockUI()})}var p=this;p.title="idasTrnSanctionDashboard",m(),e.sanctiondetails1Update=function(){lockUI();var t={approval_authority:e.txtapprovalauthority,CCapproval_date:e.txtccapproval_date,earlier_sanctionrefno:e.earliersancrefnoEdit,nature_ofproposal:e.txtnatureofproposal,classification_MSME:e.txtEditclassificationofMSME,sanction_validity:e.txtEditValidity,sanction_expirydate:e.txtEditExpiryDate,sanction_reviewdate:e.txtEditReviewDate,constitution:e.txtEditconstitution,authorized_signatory:e.cboEditauthorizedsignatory,existing_limit:e.txtEditexistingLimit,additional_proposedlimit:e.txtEditAdditProposedLimit,overall_limit:e.txtEditOverallLimit,purpose:e.txtEditpurpose,tenure_months:e.txtEdittenureMonths,repayment_principal:e.txtEditRepaymentPrinicipal,repayment_interest:e.txtEditRepInterest,primary_security:e.txtEditPrimarySecurity,collateral_security:e.txtEditCollateralSecurity,customer2sanction_gid:localStorage.getItem("sanction_gid")},a="api/IdasMstSanction/PostSanctionDetails1";r.post(a,t).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.sanctiondetails2Update=function(){lockUI();var t={securitycheque_bankname:e.txtEditSecurityBank,securitycheque_accountnumber:e.txtEditSecurityAccount,margin:e.txtEditMargin,rateof_interest:e.txtEditRateofInterest,penal_interest:e.txtEditPenalInterest,processing_fee:e.txtEditProcessingFee,bankand_chequeno:e.txtEditBankCheque,cheque_realizationdate:e.txtEditChequeRealization,documentation_clientvisitcharge:e.txtEditDocumentationCharge,GST_number:e.txtEditGSTNumber,modeof_operations:e.txtEditModeOperation,specific_condition:e.txtEditspecificcondition,dateof_receiptDocsVetting:e.receiptdocsDateEdit,NACH_form:e.txtEditNACHForm,escrow_account:e.cboEditEscrowAccount,virtual_accountno:e.txtEditVirtualAccountNo,nameofthe_buyers:e.txtEditBuyersName,status_ofBAL:e.txtEditStatusBAL,roc_applicable:e.txtEditROCApplicable,roc_status:e.txtEditROCStatus,cersai_status:e.txtEditcersai,nesl_status:e.txtEditNesl,customer2sanction_gid:localStorage.getItem("sanction_gid")},a="api/IdasMstSanction/PostSanctionDetails2";r.post(a,t).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.sanctiondetails3Update=function(){lockUI();var t={predisbursement_deferal:e.txtEditPreDisburse,dateof_deviation:e.dateofdeviation,statuspre_disbursementdeferal:e.txtEditPreDisburseStatus,postdisbursement_covanent:e.txtEditPostDisb,statuspost_disbursementcovanent:e.txtEditPostDisbStatus,dateof_releaseorder:e.dateofReleaseOrder,roissuing_totalamount:e.txtroissuing_totalamount,casesvetted_bycad:e.txtcasesvetted_bycad,originaldocs_receivedHO:e.txtEditoriginaldocs_receivedHO,scanneduploaded_Drive:e.txtscanneduploaded_Drive,monitoring_visit:e.txtmonitoring_visit,bank_statement:e.txtbank_statement,audited_financials:e.txtaudited_financials,stock_statement:e.txtstock_statement,purchase_statement:e.txtpurchase_statement,sales_statement:e.txtsales_statement,debtors_statement:e.txtdebtors_statement,provisionalfinancial_gst:e.txtprovisionalfinancial_gst,roc_30daysfromSLonetime:e.txtroc_30daysfromSLonetime,noliability_certificate:e.txtnoliability_certificate,buyerconfirmation_letter:e.txtbuyerconfirmation_letter,copyof_warehousereceipt:e.txtcopyof_warehousereceipt,insurance_30daysfromSLonetime:e.txtinsurance_30daysfromSLonetime,loandisbursement_dtlfarmermember:e.txtloandisbursement_dtlfarmermember,others:e.txtothers,customer2sanction_gid:localStorage.getItem("sanction_gid")},a="api/IdasMstSanction/PostSanctionDetails3";r.post(a,t).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.sanctionback=function(){a.go("app.idasTrnSanctionMIS")}}angular.module("angle").controller("idasTrnSanctionDashboard",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","SweetAlert","$route"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u){function m(){var t="api/IdasTrnSanctionDoc/SanctionDtlsView",a={sanction_gid:p};r.getparams(t,a).then(function(t){e.sanctionrefno=t.data.sanctionrefno,e.SanctionDate=t.data.SanctionDate,e.SanctionAmount=t.data.SanctionAmount,e.FacilityType=t.data.FacilityType,e.customerName=t.data.customerName,e.Customerurn=t.data.Customerurn,e.collateral_security=t.data.collateral_security,e.zonalHeadName=t.data.zonalHeadName,e.businessHeadName=t.data.businessHeadName,e.clusterManager=t.data.clusterManager,e.creditManager=t.data.creditManager,e.relationshipmgmt=t.data.relationshipmgmt,e.customercode=t.data.customercode,e.verticalCode=t.data.verticalCode,e.contactperson=t.data.contactperson,e.mobileno=t.data.mobileno,e.addressline1=t.data.addressline1,e.addressline2=t.data.addressline2,e.customer_gid=t.data.customer_gid});var t="api/IdasMstDocList/GetDocumentList",a={sanction_gid:p};r.getparams(t,a).then(function(t){e.documentlist_gid=t.data.IDASDocument});var t="api/IdasTrnSanctionDoc/GetTaggedDocList",a={sanction_gid:p};r.getparams(t,a).then(function(t){e.taggeddoc_list=t.data.MdlTaggedDocument})}e.title="idasTrnSanctionDoc";var p=d.search().sanction_gid;e.documentation_list=[],m(),e.checkall=function(t){angular.forEach(e.documentlist_gid,function(e){e.checked=t})},e.addDoc=function(){var t,a=[];angular.forEach(e.documentlist_gid,function(e){if(1==e.checked){var n=e.documentlist_gid;t=e.documentlist_gid,a.push(n)}});var n={documentlist_gid:a,sanction_gid:p,customer_gid:e.customer_gid};if(void 0!=t){var o="api/IdasTrnSanctionDoc/SanctionDocCreate";lockUI(),r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),m(),s.alert("Document Tagged Successfully!","success")):(unlockUI(),s.alert("Oops something went wrong!"))})}else s.alert("Select Atleast One Document!")},e.untag=function(t){var e="api/IdasTrnSanctionDoc/SanctionDocDelete",a={sanctiondocument_gid:t};r.getparams(e,a).then(function(t){1==t.data.status?(unlockUI(),m(),s.alert("Document Un-Tagged Successfully!","success")):(unlockUI(),s.alert(t.data.message,"warning"))})},e.gotoback=function(){a.go("app.idasTrnSanctionMgmt")}}angular.module("angle").controller("idasTrnSanctionDoc",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){e.totalDisplayed=100,lockUI();var t="api/IdasTrnSanctionDoc/SanctionSummary";r.get(t).then(function(t){unlockUI(),1==t.data.status?(e.sanctionlist=t.data.MdlSanctionDocSummary,e.total=e.sanctionlist.length):console.log(t.data.message)})}e.title="idasTrnSanctionDocSummary",_(),document.getElementById("pagecount").onkeyup=function(){if(null==e.pagecount){var t=document.getElementById("loadmore");t.style.backgroundColor="#DCDCDC"}else{var t=document.getElementById("loadmore");t.style.backgroundColor="#ffa"}},e.loadMore=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayed+=a,unlockUI()},e.DocSanction=function(t){d.url("app/idasTrnSanctionDoc?sanction_gid="+t)},e.generate=function(t){d.url("app/idasTrnPreFilGeneration?sanction_gid="+t+"&lspage=sanctiondocprefil")}}angular.module("angle").controller("idasTrnSanctionDocSummary",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){lockUI(),e.totalDisplayed=100;var t="api/IdasSanctionMIS/GetSanctionMISSummary";r.get(t).then(function(t){e.sanctionlist=t.data.sanctionMISdtl,null==e.sanctionlist?(e.total=0,e.totalDisplayed=0):(e.total=e.sanctionlist.length,e.sanctionlist.length<100&&(e.totalDisplayed=e.sanctionlist.length)),unlockUI()})}var f=this;f.title="idasTrnSanctionMIS",g(),document.getElementById("pagecount").onkeyup=function(){if(null==e.pagecount){var t=document.getElementById("loadmore");t.style.backgroundColor="#DCDCDC"}else{var t=document.getElementById("loadmore");t.style.backgroundColor="#ffa"}},e.loadMore=function(t){if(void 0==t)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(t);e.totalDisplayed+=a,unlockUI()},e["export"]=function(){lockUI();var t="api/IdasSanctionMIS/GetSanctionMISExport";r.get(t).then(function(t){if(1==t.data.status){unlockUI(),p.Downloaddocument(t.data.excel_cloudpath,t.data.excel_name);var e=t.data.excel_path,a=e.split("EMS"),n=a[1].replace("\\","/"),o=window.location.host,i=location.protocol+"//",c=i.concat(o,n),r=document.createElement("a"),d=t.data.excel_name.split(".");r.download=d[0];var l=c;r.href=l,r.click()}else unlockUI(),s.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3})})},e.importExcel=function(){function t(t,e){t.ok=function(){e.close("closed"),$("#excelImport").val("")},t.upload=function(e,a,n){var o={name:e[0].name,file:e[0]},i=_.fnCheckValidDocType(e[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",t.documentname),c.append("uploadtype",t.cboexcel_type),c.append("project_flag","Default"),t.uploadfrm=c},t.uploadexcelclick=function(){lockUI();var a="api/IdasMstSanction/postexcelupload";r.postFile(a,t.uploadfrm).then(function(t){$("#excelImport").val(""),1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),e.close("closed"),g()):s.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}}o.open({templateUrl:"/excelImport.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},e.sanctionMIS360=function(t){d.url("app/idasSanctionMIS360?sanction_gid="+t)},e.EditSanction=function(t){localStorage.setItem("sanction_gid",t),a.go("app.idasTrnSanctionDashboard")}}angular.module("angle").controller("idasTrnSanctionMIS",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","SweetAlert","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){e.collateral_gid=localStorage.getItem("collateral_gid"),g.calenderEdit=function(t){t.preventDefault(),t.stopPropagation(),g.openEdit=!0},g.dateOptionsEdit={formatYear:"yy",startingDay:1},g.formats=["dd-MM-yyyy"],g.format=g.formats[0];var t="api/security/getSecuritytype";r.get(t).then(function(t){e.security_data=t.data.securitytype_list,console.log(t.data.securitytype_list)});var a={collateral_gid:e.collateral_gid},t="api/IdasTrnLsaManagement/GetColletarl";r.getparams(t,a).then(function(t){e.security_type=t.data.security_type,e.cbosecurity_type=t.data.securitytype_gid,e.txtsecurity_description=t.data.security_description,e.cboaccount_status=t.data.account_status,e.collateralref_no=t.data.collateralref_no,e.security_code=t.data.security_code,e.collateral_gid=t.data.collateral_gid,e.txtborrowercheque_no=t.data.borrowercheque_no,e.txtborroweraccount_no=t.data.borroweraccount_no,e.txtborrowertbank_name=t.data.borrowertbank_name,e.txtborrowerdeviation=t.data.borrowerdeviation,e.txtborrowerother_remarks=t.data.borrowerother_remarks,e.txtguarantor_cheque=t.data.guarantor_cheque,e.txtguarantor_acno=t.data.guarantor_acno,e.txtguarantor_bankname=t.data.guarantor_bankname,e.txtguarantor_deviation=t.data.guarantor_deviation,e.txtpersonalguarantor_name=t.data.personalguarantor_name,e.txtguarantor_panno=t.data.guarantor_panno,e.txtcorporate_guarantee=t.data.corporate_guarantee,e.txtpersonal_guarantee=t.data.personal_guarantee,e.txtfd_bank_name=t.data.fd_bank_name,e.txtfd_no=t.data.fd_no,e.txtfd_expiry_date=new Date(t.data.fdexpiry_date),e.txtauto_renewal=t.data.auto_renewal,e.txtbankguarantee_bankname=t.data.bankguarantee_bankname,e.txtbankguarantee_expirydate=new Date(t.data.bankguarantee_expiry_date),e.txtinsurancecompany_name=t.data.insurancecompany_name,e.txtpolicy_no=t.data.policy_no,e.txtpolicy_expiry_date=new Date(t.data.policyexpiry_date),console.log(t.data.securitytype_gid),console.log(t.data.security_type),"UDC From Borrower"==t.data.security_type?(e.borrower=!1,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,
e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"UDC From Guarantor"==t.data.security_type?(e.guarantor=!1,e.borrower=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Personal Guarantee"==t.data.security_type?(e.personal_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.corporate_guarantee=!0):"Corporate Guarantee"==t.data.security_type?(e.corporate_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0):"Bank Guarantee"==t.data.security_type?(e.bank_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Fixed Deposits"==t.data.security_type?(e.fixed_deposits=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Assignment of Insurance Policy"==t.data.security_type?(e.insurance=!1,e.borrower=!0,e.guarantor=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):(e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0)})}var g=this;g.title="idasMstsecurityAdd";_(),e.securityback=function(){a.go("app.lsaManagementadd")},e.show_additional=function(){var t=$("#security_type :selected").text();"UDC From Borrower"==t.match(/UDC From Borrower/g)?(e.borrower=!1,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"UDC From Guarantor"==t.match(/UDC From Guarantor/g)?(e.guarantor=!1,e.borrower=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Personal Guarantee"==t.match(/Personal Guarantee/g)?(e.personal_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.corporate_guarantee=!0):"Corporate Guarantee"==t.match(/Corporate Guarantee/g)?(e.corporate_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0):"Bank Guarantee"==t.match(/Bank Guarantee/g)?(e.bank_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Fixed Deposits"==t.match(/Fixed Deposits/g)?(e.fixed_deposits=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Assignment of Insurance Policy"==t.match(/Assignment of Insurance Policy/g)?(e.insurance=!1,e.borrower=!0,e.guarantor=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):(e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0)},e.security_submit=function(t){var n=$("#security_type :selected").text();if("Fixed Deposits"==n.match(/Fixed Deposits/g))var o=e.txtfd_expiry_date;else var o=null;if("Bank Guarantee"==n.match(/Bank Guarantee/g))var i=e.txtbankguarantee_expirydate;else var i=null;if("Assignment of Insurance Policy"==n.match(/Assignment of Insurance Policy/g))var c=e.txtpolicy_expiry_date;else var c=null;var d={security_type:n,securitytype_gid:e.cbosecurity_type,account_status:e.cboaccount_status,borrowercheque_no:e.txtborrowercheque_no,borrowertbank_name:e.txtborrowertbank_name,borroweraccount_no:e.txtborroweraccount_no,borrowerdeviation:e.txtborrowerdeviation,borrowerother_remarks:e.txtborrowerother_remarks,guarantor_cheque:e.txtguarantor_cheque,guarantor_bankname:e.txtguarantor_bankname,guarantor_acno:e.txtguarantor_acno,guarantor_deviation:e.txtguarantor_deviation,personalguarantor_name:e.txtpersonalguarantor_name,guarantor_panno:e.txtguarantor_panno,corporate_guarantee:e.txtcorporate_guarantee,personal_guarantee:e.txtpersonal_guarantee,fd_bank_name:e.txtfd_bank_name,fd_no:e.txtguarantor_bankname,fd_expiry_date:o,auto_renewal:e.txtguarantor_deviation,bankguarantee_bankname:e.txtbankguarantee_bankname,bankguarantee_expirydate:i,insurancecompany_name:e.txtinsurancecompany_name,policy_no:e.txtpolicy_no,policy_expiry_date:c,security_description:e.txtsecurity_description,collateral_gid:e.collateral_gid};console.log(d);var l="api/IdasTrnLsaManagement/updatesecurityinfo";r.post(l,d).then(function(t){1==t.data.status?(a.go("app.lsaManagementadd"),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):s.alert(t.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})}}angular.module("angle").controller("idasMstsecurityEdit",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){e.totalDisplayed=100,lockUI();var t="api/IdasTrnLsaManagement/lsadetails";r.get(t).then(function(t){unlockUI(),e.list=t.data.lsa_list,e.total=e.list.length})}e.title="lsaManagementController",g(),document.getElementById("pagecount").onkeyup=function(){if(null==e.pagecount){var t=document.getElementById("loadmore");t.style.backgroundColor="#DCDCDC"}else{var t=document.getElementById("loadmore");t.style.backgroundColor="#ffa"}},e.loadMore=function(t){lockUI();var a=parseInt(t);e.totalDisplayed+=a,unlockUI()},e.clickadd=function(t){e.lsacreate_gid=localStorage.setItem("lsacreate_gid",t),e.lsastatus=localStorage.setItem("lsacreate_gid",t),a.go("app.lsaManagementadd")},e.lsaadd=function(t){e.lsacreate_gid=localStorage.setItem("lsacreate_gid",t),d.url("app/lsaManagementadd?lstab=approved")},e.createlsa=function(){a.go("app.createLSA")},e.clickView=function(t){e.lsacreate_gid=localStorage.setItem("lsacreate_gid",t),a.go("app.viewLSA")},e.LSApdf=function(t){var e={lsacreate_gid:t},a="api/IdasTrnLsaManagement/GetLSApdf";lockUI(),r.getparams(a,e).then(function(t){unlockUI(),1==t.data.status?(_.Downloaddocument(t.data.file_path,"LSA Report.pdf"),s.alert("LSA Report Downloaded Successfully","success")):s.alert("Error Occurred While Export PDF !","warning"),unlockUI()})}}angular.module("angle").controller("lsaManagementController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f){function v(){e.lsacreate_gid=localStorage.getItem("lsacreate_gid"),e.stepone=!1,e.steptwo=!0,e.stepthree=!0,e.stepfour=!0,e.stepfive=!0,e.stepsix=!0,e.tobe_recovered=!1,e.already_recovered=!1,e.yes=!1,e.no=!1,e.customer_pnl=!0,e.sanction_pnl=!0,e.signmatching=!1,e.nach_no=!1,e.signmatch_kycprovide=!1,e.escrow_no=!1,e.stamp=!1,e.roc_no=!1,e.cersai_no=!1,e.panel1=!1,e.panel2=!1,e.panel3=!1,e.hidephotodiv=!0,e.showphotodiv=!1,w.calender1=function(t){t.preventDefault(),t.stopPropagation(),w.open1=!0},w.calender2=function(t){t.preventDefault(),t.stopPropagation(),w.open2=!0},w.calender3=function(t){t.preventDefault(),t.stopPropagation(),w.open3=!0};var t=new Date,a=("0"+(t.getMonth()+1)).slice(-2),n=("0"+t.getDate()).slice(-2);e.txtdate=[n,a,t.getFullYear()].join("-"),w.formats=["dd-MM-yyyy"],w.format=w.formats[0],w.dateOptions={formatYear:"yy",startingDay:1};var o={lsacreate_gid:e.lsacreate_gid},i="api/IdasTrnLsaManagement/Getlsainfo";r.getparams(i,o).then(function(t){e.document_charge_flag=t.data.document_charge_flag,e.recover_flag=t.data.recover_flag,e.customername=t.data.customer_name,e.clarify_flag=t.data.clarify_flag,e.compliance_flag=t.data.compliance_flag,e.proceed_flag=t.data.proceed_flag,e.approval_status=t.data.approval_status});var i="api/employee/employee";r.get(i).then(function(t){e.employee_dropdown=t.data.employee_list});var i="api/IdasTrnLsaManagement/tempdelete";r.get(i).then(function(t){});var i="api/IdasTrnLsaManagement/GetPenalInterest";r.getparams(i,o).then(function(t){e.penalinterest_list=t.data.loanfacilitytype_list,console.log(t.data.loanfacilitytype_list)});var i="api/IdasTrnLsaManagement/limitinfodtl";r.getparams(i,o).then(function(t){e.limitinfo_limit=t.data.limitinfo_limit,e.total_document_limit=t.data.total_document_limit,e.totol_limit_released=t.data.totol_limit_released,e.final_flag=t.data.final_flag});var i="api/IdasTrnLsaManagement/bankinfodtl";r.getparams(i,o).then(function(t){e.bankinfo_list=t.data.bankinfo_list});var i="api/IdasTrnLsaManagement/loanfacility";r.get(i).then(function(t){e.loanfacility_list=t.data.loanfacility_list});var i="api/IdasTrnLsaManagement/Getprocessingfeeinfo";r.getparams(i,o).then(function(t){e.recovered_type=t.data.recovered_type,e.recovered_amount=t.data.recovered_amount,e.chequeno_details=t.data.chequeno_details,e.chequedate_details=t.data.chequedate_details,e.processingfeebank_name=t.data.processingfeebank_name,e.processingfeaccount_name=t.data.processingfeaccount_name,e.recover_remarks=t.data.recover_remarks,e.to_be_recoveredamount=t.data.to_be_recoveredamount});var i="api/IdasTrnLsaManagement/Getdocumentchargeinfo";r.getparams(i,o).then(function(t){e.doc_recovered_amount=t.data.doc_recovered_amount,e.doc_chequeno_details=t.data.doc_chequeno_details,e.doc_chequedate_details=t.data.doc_chequedate_details,e.doc_feebank_name=t.data.doc_feebank_name,e.doc_feaccount_name=t.data.doc_feaccount_name,e.document_name=t.data.document_name,e.document_path=t.data.document_path,e.document_charge=new Intl.NumberFormat("en-IN").format(Number(t.data.document_charge))+".00",e.document_charge_gst=t.data.document_charge_gst+"%",null==t.data.document_name?e.document=!1:e.document=!0,e.lbldocumentcharge_applicable=t.data.documentcharge_applicable,e.lbldocumentcharge_remarks=t.data.documentcharge_remarks});var i="api/IdasTrnLsaManagement/Getmakerinfo";r.getparams(i,o).then(function(t){e.maker_signature=t.data.maker_signature,console.log(t.data.maker_signature),e.terms_conditions=t.data.terms_conditions,e.deferral_captured=t.data.deferral_captured,e.head=t.data.head});var i="api/IdasTrnLsaManagement/Getcompliancecheckinfo";r.getparams(i,o).then(function(t){e.nach_mandate=t.data.nach_mandate,e.sign_match=t.data.sign_match,e.sign_match_kyc=t.data.sign_match_kyc,e.escrow_opened=t.data.escrow_opened,e.appropriate_stamp=t.data.nach_mandate,e.roc_filling=t.data.roc_filling,e.nach_mandate_remarks=t.data.nach_mandate_remarks,e.sign_match_remarks=t.data.sign_match_remarks,e.sign_match_kyc_remarks=t.data.sign_match_kyc_remarks,e.escrow_opened_remarks=t.data.escrow_opened_remarks,e.appropriate_stamp_remarks=t.data.appropriate_stamp_remarks,e.roc_filling_remarks=t.data.roc_filling_remarks,e.cersai=t.data.cersai,e.cersai_remarks=t.data.cersai_remarks});var i="api/IdasTrnLsaManagement/Getdocument";r.getparams(i,o).then(function(t){e.filename_list=t.data.UploadDocumentList});var i="api/IdasTrnLsaManagement/Getsanction2Colletarl";r.getparams(i,o).then(function(t){e.customer2security_list=t.data.customersecurity_list})}function h(t){var e=["","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ","Eleven ","Twelve ","Thirteen ","Fourteen ","Fifteen ","Sixteen ","Seventeen ","Eighteen ","Nineteen "],a=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"],n=t.toString();if(n=n.replace(/[\, ]/g,""),n!=parseFloat(n))return"";if((t=t.toString()).length>9)return"Overflow";var o=("000000000"+t).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);if(o){var i="";return i+=0!=o[1]?(e[Number(o[1])]||a[o[1][0]]+" "+e[o[1][1]])+"Crore ":"",i+=0!=o[2]?(e[Number(o[2])]||a[o[2][0]]+" "+e[o[2][1]])+"Lakh ":"",i+=0!=o[3]?(e[Number(o[3])]||a[o[3][0]]+" "+e[o[3][1]])+"Thousand ":"",i+=0!=o[4]?(e[Number(o[4])]||a[o[4][0]]+" "+e[o[4][1]])+"Hundred ":"",i+=0!=o[5]?(""!=i?"and ":"")+(e[Number(o[5])]||a[o[5][0]]+" "+e[o[5][1]])+"only ":""}}function y(){var t={lsacreate_gid:e.lsacreate_gid},a="api/IdasTrnLsaManagement/bankinfodtl";r.getparams(a,t).then(function(t){e.bankinfo_list=t.data.bankinfo_list});var a="api/IdasTrnLsaManagement/limitinfodtl";r.getparams(a,t).then(function(t){e.final_flag=t.data.final_flag})}function I(){e.panel1=!0,e.panel2=!0,e.panel3=!0}function k(){var t={lsacreate_gid:e.lsacreate_gid};console.log(t);var a="api/IdasTrnLsaManagement/limitinfodtl";r.getparams(a,t).then(function(t){e.limitinfo_limit=t.data.limitinfo_limit,e.total_document_limit=t.data.total_document_limit,e.totol_limit_released=t.data.totol_limit_released,e.final_flag=t.data.final_flag});var a="api/IdasTrnLsaManagement/limitinfodtl";r.getparams(a,t).then(function(t){e.final_flag=t.data.final_flag})}function b(){var t={lsacreate_gid:e.lsacreate_gid},a="api/IdasTrnLsaManagement/Getmakerinfo";r.getparams(a,t).then(function(t){e.maker_signature=t.data.maker_signature,e.terms_conditions=t.data.terms_conditions,e.deferral_captured=t.data.deferral_captured,e.head=t.data.head});var a="api/IdasTrnLsaManagement/Getlsainfo";r.getparams(a,t).then(function(t){e.document_charge_flag=t.data.document_charge_flag,e.recover_flag=t.data.recover_flag,e.customername=t.data.customer_name,e.clarify_flag=t.data.clarify_flag,e.compliance_flag=t.data.compliance_flag,e.proceed_flag=t.data.proceed_flag});var a="api/IdasTrnLsaManagement/limitinfodtl";r.getparams(a,t).then(function(t){e.final_flag=t.data.final_flag})}function D(){var t={lsacreate_gid:e.lsacreate_gid},a="api/IdasTrnLsaManagement/Getcompliancecheckinfo";r.getparams(a,t).then(function(t){e.nach_mandate=t.data.nach_mandate,e.sign_match=t.data.sign_match,e.sign_match_kyc=t.data.sign_match_kyc,e.escrow_opened=t.data.escrow_opened,e.appropriate_stamp=t.data.nach_mandate,e.roc_filling=t.data.roc_filling,e.nach_mandate_remarks=t.data.nach_mandate_remarks,e.sign_match_remarks=t.data.sign_match_remarks,e.sign_match_kyc_remarks=t.data.sign_match_kyc_remarks,e.escrow_opened_remarks=t.data.escrow_opened_remarks,e.appropriate_stamp_remarks=t.data.appropriate_stamp_remarks,e.roc_filling_remarks=t.data.roc_filling_remarks,e.cersai=t.data.cersai,e.cersai_remarks=t.data.cersai_remarks});var a="api/IdasTrnLsaManagement/Getlsainfo";r.getparams(a,t).then(function(t){e.document_charge_flag=t.data.document_charge_flag,e.recover_flag=t.data.recover_flag,e.customername=t.data.customer_name,e.clarify_flag=t.data.clarify_flag,e.compliance_flag=t.data.compliance_flag,e.proceed_flag=t.data.proceed_flag});var a="api/IdasTrnLsaManagement/limitinfodtl";r.getparams(a,t).then(function(t){e.final_flag=t.data.final_flag})}function S(){var t={lsacreate_gid:e.lsacreate_gid},a="api/IdasTrnLsaManagement/Getprocessingfeeinfo";r.getparams(a,t).then(function(t){e.recovered_type=t.data.recovered_type,e.recovered_amount=t.data.recovered_amount,e.chequeno_details=t.data.chequeno_details,e.chequedate_details=t.data.chequedate_details,e.processingfeebank_name=t.data.processingfeebank_name,e.processingfeaccount_name=t.data.processingfeaccount_name,e.recover_remarks=t.data.recover_remarks,e.to_be_recoveredamount=t.data.to_be_recoveredamount});var a="api/IdasTrnLsaManagement/Getlsainfo";r.getparams(a,t).then(function(t){e.document_charge_flag=t.data.document_charge_flag,e.recover_flag=t.data.recover_flag,e.customername=t.data.customer_name,e.clarify_flag=t.data.clarify_flag,e.compliance_flag=t.data.compliance_flag,e.proceed_flag=t.data.proceed_flag});var a="api/IdasTrnLsaManagement/limitinfodtl";r.getparams(a,t).then(function(t){e.final_flag=t.data.final_flag})}function x(){var t={lsacreate_gid:e.lsacreate_gid},a="api/IdasTrnLsaManagement/Getdocumentchargeinfo";r.getparams(a,t).then(function(t){e.doc_recovered_amount=t.data.doc_recovered_amount,e.doc_chequeno_details=t.data.doc_chequeno_details,e.doc_chequedate_details=t.data.doc_chequedate_details,e.doc_feebank_name=t.data.doc_feebank_name,e.doc_feaccount_name=t.data.doc_feaccount_name,e.document_name=t.data.document_name,e.document_path=t.data.document_path,e.document_charge=new Intl.NumberFormat("en-IN").format(Number(t.data.document_charge))+".00",e.document_charge_gst=t.data.document_charge_gst+"%",null==t.data.document_name?e.document=!1:e.document=!0,e.lbldocumentcharge_applicable=t.data.documentcharge_applicable,e.lbldocumentcharge_remarks=t.data.documentcharge_remarks});var a="api/IdasTrnLsaManagement/Getlsainfo";r.getparams(a,t).then(function(t){e.document_charge_flag=t.data.document_charge_flag,e.recover_flag=t.data.recover_flag,e.customername=t.data.customer_name,e.clarify_flag=t.data.clarify_flag,e.compliance_flag=t.data.compliance_flag,e.proceed_flag=t.data.proceed_flag});var a="api/IdasTrnLsaManagement/limitinfodtl";r.getparams(a,t).then(function(t){e.final_flag=t.data.final_flag})}var w=this;w.title="lsaManagementaddController",v(),e.addlimitinfo=function(t){a.go("app.idasTrnaddLimitinfo")},e.recoveredstatus=function(){e.tobe_recovered=!1,e.already_recovered=!0},e.recoveredstatus1=function(){e.tobe_recovered=!0,e.already_recovered=!1},e.lsaback=function(){a.go("app.lsaManagement")},e.addbankinfo=function(t){function e(e,a){e.ok=function(){a.close("closed")},e.bankdetails=function(){var n={bank_name:e.txtbank_name,account_no:e.txtaccount_no,ifsc_code:e.txtifsc_code,lsacreate_gid:t},o="api/IdasTrnLsaManagement/postbankinfo";lockUI(),r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed")):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),a.close("closed")),y()})}}var t=t;o.open({templateUrl:"/customerbankinformation.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.editbankinfo=function(t){function e(e,a){e.ok=function(){a.close("closed")};var n={lsacustomer2bankinfo:t},o="api/IdasTrnLsaManagement/GetBankinfo";r.getparams(o,n).then(function(t){e.txtbank_nameedit=t.data.bank_name,e.txtaccount_noedit=t.data.account_no,e.txtifsc_codeedit=t.data.ifsc_code,e.lsacustomer2bankinfo=t.data.lsacustomer2bankinfo}),e.bankdetails_edit=function(){var n={bank_name:e.txtbank_nameedit,account_no:e.txtaccount_noedit,ifsc_code:e.txtifsc_codeedit,lsacustomer2bankinfo:t},o="api/IdasTrnLsaManagement/updatebankinfo";lockUI(),r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed")):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),a.close("closed")),y()})}}var t=t;o.open({templateUrl:"/customerbankinformation_edit.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.nachform_no=function(){e.nach_no=!0},e.signmatch_no=function(){e.signmatching=!0},e.signmatch_kyc_no=function(){e.signmatch_kycprovide=!0},e.escrowac_no=function(){e.escrow_no=!0},e.stamping_no=function(){e.stamp_no=!0},e.roc_filling_no=function(){e.roc_no=!0},e.nachform_yes=function(){e.nach_no=!1},e.signmatch_yes=function(){e.signmatching=!1},e.signmatch_kyc_yes=function(){e.signmatch_kycprovide=!1},e.escrowac_yes=function(){e.escrow_no=!1},e.stamping_yes=function(){e.stamp_no=!1},e.roc_filling_yes=function(){e.roc_no=!1},e.rdbcersai_no=function(){e.cersai_no=!0},e.rdbcersai_yes=function(){e.cersai_no=!1},e.clickstep1=function(){e.stepone=!1,e.steptwo=!0,e.stepthree=!0,e.stepfour=!0,e.stepfive=!0,e.stepsix=!0},e.clickstep2=function(){e.stepone=!0,e.steptwo=!1,e.stepthree=!0,e.stepfour=!0,e.stepfive=!0,e.stepsix=!0},e.clickstep3=function(){e.stepone=!0,e.steptwo=!0,e.stepthree=!1,e.stepfour=!0,e.stepfive=!0,e.stepsix=!0},e.clickstep4=function(){e.stepone=!0,e.steptwo=!0,e.stepthree=!0,e.stepfour=!1,e.stepfive=!0,e.stepsix=!0},e.clickstep5=function(){e.stepone=!0,e.steptwo=!0,e.stepthree=!0,e.stepfour=!0,e.stepfive=!1,e.stepsix=!0},e.clickstep6=function(){e.stepone=!0,e.steptwo=!0,e.stepthree=!0,e.stepfour=!0,e.stepfive=!0,e.stepsix=!1},e.amountschange=function(){var t,a=document.getElementById("txtInput").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),new Intl.NumberFormat("en-IN").format(Number(o)));"NaN"==i?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtexistinglimit=""):e.txtexistinglimit=i},e.amountschange1=function(){var t,a=document.getElementById("txtInput1").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),new Intl.NumberFormat("en-IN").format(Number(o)));"NaN"==i?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtdocument_limit=""):e.txtdocument_limit=i},e.amountschange2=function(){var t,a=document.getElementById("txtInput2").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),new Intl.NumberFormat("en-IN").format(Number(o)));"NaN"==i?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtlimit_released=""):e.txtlimit_released=i},e.amountschange3=function(){var t,a=document.getElementById("txtInput3").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==c?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtrecovered_amount=""):(document.getElementById("recoveredamount_words").innerHTML=i,e.txtrecovered_amount=c)},e.amountschange4=function(){var t,a=document.getElementById("txtInput4").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==c?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtdoc_recovered_amount=""):(document.getElementById("documentchargerecoverd_words").innerHTML=i,e.txtdoc_recovered_amount=c)},e.amountschange5=function(){var t,a=document.getElementById("txtInput5").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==c?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtto_be_recoveredamount=""):(document.getElementById("toberecoveredamount_words").innerHTML=i,e.txtto_be_recoveredamount=c)},e.amountschange04=function(){var t,a=document.getElementById("txtInput04").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));if("NaN"==c)s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtdocument_charges="";else if(document.getElementById("documentcharge_words").innerHTML=i,e.txtdocument_charges=c,null!=e.txtgst){var r=e.txtdocument_charges.replace(/[\s,]+/g,"").trim()*e.txtgst/100,d=e.txtdocument_charges.replace(/[\s,]+/g,"").trim(),l=parseInt(r)+parseInt(d);e.txtdoc_recovered_amount=new Intl.NumberFormat("en-IN").format(Number(l))}},e.amountschange10=function(){var t=e.txtdocument_charges.replace(/[\s,]+/g,"").trim()*e.txtgst/100,a=e.txtdocument_charges.replace(/[\s,]+/g,"").trim(),n=parseInt(t)+parseInt(a),o=h(n);document.getElementById("documentchargerecoverd_words").innerHTML=o,e.txtdoc_recovered_amount=new Intl.NumberFormat("en-IN").format(Number(n))},e.update_limit=function(t){var a={principal:e.txtprincipal,interest:e.txtinterest,moratorium:e.txtmoratorium,calloption:e.txtcalloption,limitinfodtl_gid:t},n="api/IdasTrnLsaManagement/repaymentdtl";lockUI(),r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),v(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})},e.recoveredsubmit=function(t){var a={recovered_type:e.rdbrecovered_type,recovered_amount:e.txtrecovered_amount,chequeno_details:e.txtcheque_no,chequedate_details:e.txtcheque_date,processingfeebank_name:e.txtrecoveredbank_name,processingfeaccount_name:e.txtrecoveredaccount_no,recover_remarks:e.txtrecovered_remarks,lsacreate_gid:e.lsacreate_gid,to_be_recoveredamount:e.txtto_be_recoveredamount},n="api/IdasTrnLsaManagement/processingfee";lockUI(),r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),S(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})),S()})},e.doc_charges_submit=function(t){var a={doc_feaccount_name:e.txtdoc_account_no,lsacreate_gid:e.lsacreate_gid},n="api/IdasTrnLsaManagement/Getaccountno_validation";lockUI(),r.post(n,a).then(function(t){function a(t,e){t.ok=function(){e.close("closed"),t.panel1=!1,t.panel2=!1,t.panel3=!1},t.yes=function(){e.close("closed"),I()}}if(void 0==e.txtdocumentcharge_remarks)var n="NA";else var n=e.txtdocumentcharge_remarks;if(1==t.data.status){var i={document_charge:e.txtdocument_charges,doc_recovered_amount:e.txtdoc_recovered_amount,doc_chequeno_details:e.txtdoc_cheque_no,doc_chequedate_details:e.txtdoc_cheque_date,doc_feebank_name:e.txtdoc_bank_name,doc_feaccount_name:e.txtdoc_account_no,lsacreate_gid:e.lsacreate_gid,document_charge_gst:e.txtgst,documentcharge_applicable:e.rdbdocumentcharge,documentcharge_remarks:n},c="api/IdasTrnLsaManagement/documentcharge";lockUI(),r.post(c,i).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})),x()})}else{unlockUI();o.open({templateUrl:"/warning.html",controller:a,size:"md"});a.$inject=["$scope","$modalInstance"]}})},e.doc_charge=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("project_flag","Default"),e.uploadfrm=c,localStorage.setItem(e.uploadfrm,"$scope.uploadfrm");var d="api/IdasTrnLsaManagement/Uploaddoc";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){unlockUI(),$("#adduploadphoto").val(""),1==t.data.status?(e.hidephotodiv=!1,e.showphotodiv=!0,s.alert("Document Uploaded Successfully","success")):s.alert("Error Occured while uploading","warning")})},e.doc_charges_with_doc=function(t){var a="api/IdasTrnLsaManagement/documentmandatory_check";r.get(a).then(function(t){if(1==t.data.status){if(void 0==e.txtdocumentcharge_remarks)var a="NA";else var a=e.txtdocumentcharge_remarks;var n="api/IdasTrnLsaManagement/documentchargewithdoc";lockUI();var o={document_charge:e.txtdocument_charges,doc_recovered_amount:e.txtdoc_recovered_amount,doc_chequeno_details:e.txtdoc_cheque_no,doc_chequedate_details:e.txtdoc_cheque_date,doc_feebank_name:e.txtdoc_bank_name,doc_feaccount_name:e.txtdoc_account_no,lsacreate_gid:e.lsacreate_gid,document_charge_gst:e.txtgst,documentcharge_applicable:e.rdbdocumentcharge,documentcharge_remarks:a};console.log(o),r.post(n,o).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})),x()})}else s.alert(t.data.message,"warning")})},e.edit=function(t){function e(e,a){var n={limitinfodtl_gid:t},o="api/IdasTrnLsaManagement/Getrepaymentinfo";r.getparams(o,n).then(function(t){e.txtprincipal=t.data.principal,e.txtinterest=t.data.interest,e.txtcalloption=t.data.call_option,e.txtmoratorium=t.data.moratorium}),e.ok=function(){a.close("closed")},e.update_repayment=function(){var n={principal:e.txtprincipal,interest:e.txtinterest,call_option:e.txtcalloption,moratorium:e.txtmoratorium,limitinfodtl_gid:t},o="api/IdasTrnLsaManagement/repaymentdtl";r.post(o,n).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed"),k()):s.alert(t.data.message,{status:"Warning",pos:"top-center",timeout:3e3})}),k()}}var t=t;o.open({templateUrl:"/editrepayment.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e["final"]=function(t){var a={terms_conditions:e.rdbterms_conditions,deferral_captured:e.rdbdeferral_captured,head:e.credit_manager,lsacreate_gid:e.lsacreate_gid},n="api/IdasTrnLsaManagement/postfinal";lockUI(),r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),b(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})},e.compliance_submit=function(t){var a={nach_mandate:e.rdbnach,sign_match:e.rdbsign,sign_match_kyc:e.rdbkyc_provided,escrow_opened:e.rdbescrow,appropriate_stamp:e.rdbstamp,roc_filling:e.rdbroc,cersai:e.rdbcersai,nach_mandate_remarks:e.txtnach_remarks,sign_match_remarks:e.txtsign_remarks,sign_match_kyc_remarks:e.txtsign_kyc_remarks,escrow_opened_remarks:e.txtescrow_remarks,appropriate_stamp_remarks:e.txtstamp_remarks,roc_filling_remarks:e.txtroc_remarks,cersai_remarks:e.txtcersai_remarks,lsacreate_gid:e.lsacreate_gid},n="api/IdasTrnLsaManagement/compliancecheck";lockUI(),r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})),D()})},e.proceed=function(t){var n={lsacreate_gid:e.lsacreate_gid},o="api/IdasTrnLsaManagement/proceed_finalinfo";lockUI(),r.post(o,n).then(function(t){1==t.data.status?(unlockUI(),v(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.go("app.lsaManagement")):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})},e.lsaback=function(){a.go("app.lsaManagement")},e.upload=function(t,a,n){var o={name:t[0].name,file:t[0]},i=f.fnCheckValidDocType(t[0].name,"");if(0==i)return s.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",o.file),c.append("file_name",o.name),c.append("document_name",e.documentname),c.append("document_type",e.document_type),c.append("lsacreate_gid",e.lsacreate_gid),c.append("project_flag","Default"),e.uploadfrm=c;var d="api/IdasTrnLsaManagement/Uploaddocument";lockUI(),r.postFile(d,e.uploadfrm).then(function(t){if(e.filename_list=t.data.UploadDocumentList,$("#addupload").val(""),1==t.data.status){var a={lsacreate_gid:e.lsacreate_gid},n="api/IdasTrnLsaManagement/Getdocument";r.getparams(n,a).then(function(t){e.filename_list=t.data.UploadDocumentList}),unlockUI(),e.document_type="",e.showdiv=!0,e.hidediv=!1,s.alert(t.data.message,"success")}else unlockUI(),s.alert(t.data.message)})},e.downloads=function(t,e){g.Downloaddocument(t,e)},e.edit_limitinfo=function(t){e.limitinfodtl_gid=t,e.limitinfodtl_gid=localStorage.setItem("limitinfodtl_gid",t),a.go("app.idasTrnlimitInfoEdit")},e.editprocessing_fee=function(t){function e(e,a){var n={lsacreate_gid:t},o="api/IdasTrnLsaManagement/Getprocessingfeeinfo";r.getparams(o,n).then(function(t){e.rdbrecovered_type=t.data.recovered_type,e.txtrecovered_amount=t.data.recovered_amount,e.txtcheque_no=t.data.chequeno_details,e.txtcheque_date=new Date(t.data.cheque_date),e.txtrecoveredbank_name=t.data.processingfeebank_name,e.txtrecoveredaccount_no=t.data.processingfeaccount_name,e.txtrecovered_remarks=t.data.recover_remarks,e.txtto_be_recoveredamount=t.data.to_be_recoveredamount,"To be Recovered"==t.data.recovered_type&&(e.tobe_recovered=!0,e.already_recovered=!1),"Already Recovered"==t.data.recovered_type&&(e.tobe_recovered=!1,e.already_recovered=!0)}),e.ok=function(){a.close("closed")},e.recoveredstatus=function(){"Already Recovered"==e.rdbrecovered_type&&(e.tobe_recovered=!1,e.already_recovered=!0)},e.recoveredstatus1=function(){"To be Recovered"==e.rdbrecovered_type&&(e.tobe_recovered=!0,e.already_recovered=!1);
},e.amountschange0=function(){var t,a=document.getElementById("txtInput0").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==c?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtrecovered_amount=""):(document.getElementById("editrecoveredamount_words").innerHTML=i,e.txtrecovered_amount=c)},e.amountschange01=function(){var t,a=document.getElementById("txtInput01").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));"NaN"==c?(s.alert("Accept Numeric Only..!",{status:"danger",pos:"top-center",timeout:3e3}),e.txtto_be_recoveredamount=""):(document.getElementById("edittoberecoveredamount_words").innerHTML=i,e.txtto_be_recoveredamount=c)},e.processignfee_update=function(){var n={recovered_type:e.rdbrecovered_type,recovered_amount:e.txtrecovered_amount,chequeno_details:e.txtcheque_no,chequedate_details:e.txtcheque_date,processingfeebank_name:e.txtrecoveredbank_name,processingfeaccount_name:e.txtrecoveredaccount_no,recover_remarks:e.txtrecovered_remarks,lsacreate_gid:t,to_be_recoveredamount:e.txtto_be_recoveredamount},o="api/IdasTrnLsaManagement/updateprocessingfee";r.post(o,n).then(function(t){1==t.data.status?(S(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed")):(s.alert(t.data.message,{status:"Warning",pos:"top-center",timeout:3e3}),a.close("closed"))})}}var t=t;o.open({templateUrl:"/editprocessigninfo.html",controller:e,size:"lg"});e.$inject=["$scope","$modalInstance"]},e.editdocumentcharges=function(t){function e(e,a){var n={lsacreate_gid:t},o="api/IdasTrnLsaManagement/Getdocumentchargeinfo";r.getparams(o,n).then(function(t){e.txtdoc_recovered_amount=t.data.doc_recovered_amount,e.txtdoc_cheque_no=t.data.doc_chequeno_details,e.txtdoc_cheque_date=new Date(t.data.doc_cheque_date),e.txtdoc_bank_name=t.data.doc_feebank_name,e.txtdoc_account_no=t.data.doc_feaccount_name,e.txtdocument_charges_edit=new Intl.NumberFormat("en-IN").format(Number(t.data.document_charge))+".00",e.txtgst_edit=t.data.document_charge_gst,e.rdbdocumentcharge=t.data.documentcharge_applicable,e.lbldocumentcharge_applicable=t.data.documentcharge_applicable,e.txtdocumentcharge_remarks=t.data.documentcharge_remarks,"Yes"==t.data.documentcharge_applicable&&(e.documentcharge_yes=!0,e.documentcharge_no=!1),"No"==t.data.documentcharge_applicable&&(e.documentcharge_yes=!1,e.documentcharge_no=!0)}),w.calender3=function(t){t.preventDefault(),t.stopPropagation(),w.open3=!0},e.documentchargestatus_yes=function(){e.documentcharge_yes=!0,e.documentcharge_no=!1},e.documentchargestatus_no=function(){e.documentcharge_yes=!1,e.documentcharge_no=!0},e.documentchargesedit=function(){var t,a=document.getElementById("documentcharge_edit").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o)),c=new Intl.NumberFormat("en-IN").format(Number(o));if(e.txtdocument_charges_edit=c,document.getElementById("editdocumentamount_words").innerHTML=i,null!=e.txtgst_edit){var r=e.txtdocument_charges_edit.replace(/[\s,]+/g,"").trim()*e.txtgst_edit/100,s=e.txtdocument_charges_edit.replace(/[\s,]+/g,"").trim(),d=parseInt(r)+parseInt(s);e.txtdoc_recovered_amount=new Intl.NumberFormat("en-IN").format(Number(d))}},e.gstedit=function(){var t=e.txtdocument_charges_edit.replace(/[\s,]+/g,"").trim()*e.txtgst_edit/100,a=e.txtdocument_charges_edit.replace(/[\s,]+/g,"").trim(),n=parseInt(t)+parseInt(a),o=h(str);document.getElementById("editdocumentrecoveredamount_words").innerHTML=o,e.txtdoc_recovered_amount=new Intl.NumberFormat("en-IN").format(Number(n))},e.ok=function(){a.close("closed")},e.amountschange02=function(){var t,a=document.getElementById("txtInput02").value,n=a.split(",");for(t=0;t<n.length;t++){var o=a.replace(",","");a=o}var i=(Number(o).toLocaleString("en-US"),h(o));document.getElementById("editdocumentrecoveredamount_words").innerHTML=i;var c=new Intl.NumberFormat("en-IN").format(Number(o));e.txtdoc_recovered_amount=c},e.documentcharges_update=function(){var n={doc_recovered_amount:e.txtdoc_recovered_amount,doc_chequeno_details:e.txtdoc_cheque_no,doc_chequedate_details:e.txtdoc_cheque_date,doc_feebank_name:e.txtdoc_bank_name,doc_feaccount_name:e.txtdoc_account_no,lsacreate_gid:t,document_charge:e.txtdocument_charges_edit,document_charge_gst:e.txtgst_edit,documentcharge_remarks:e.txtdocumentcharge_remarks,documentcharge_applicable:e.rdbdocumentcharge},o="api/IdasTrnLsaManagement/updatedocumentcharges";r.post(o,n).then(function(t){1==t.data.status?(x(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed")):(s.alert(t.data.message,{status:"Warning",pos:"top-center",timeout:3e3}),a.close("closed"))})}}var t=t;o.open({templateUrl:"/editdocumentcharge.html",controller:e,size:"lg"});e.$inject=["$scope","$modalInstance"]},e.processingfee_clear=function(){e.rdbrecovered_type="",e.txtrecovered_amount="",e.txtcheque_no="",e.txtcheque_date="",e.txtrecoveredbank_name="",e.txtrecoveredaccount_no="",e.txtto_be_recoveredamount="",e.txtrecovered_remarks=""},e.documentcharge_clear=function(){e.txtdoc_recovered_amount="",e.txtdoc_cheque_no="",e.txtdoc_cheque_date="",e.txtdoc_bank_name="",e.txtdoc_account_no="",e.txtdocument_charges="",e.txtgst="",e.txtdocumentcharge_remarks=""},e.addsecurityinfo=function(t){e.lsacreate_gid=localStorage.setItem("lsacreate_gid",t),a.go("app.IdasMstSecurityAdd")},e.delete_securityinfo=function(t,a){var n={collateral_gid:t},o="api/IdasTrnLsaManagement/securityinfo_delete";r.getparams(o,n).then(function(t){if(1==t.data.status){var a={lsacreate_gid:e.lsacreate_gid},n="api/IdasTrnLsaManagement/Getsanction2Colletarl";r.getparams(n,a).then(function(t){e.customer2security_list=t.data.customersecurity_list}),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})}else s.alert(t.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},e.edit_security=function(t){e.collateral_gid=localStorage.setItem("collateral_gid",t),a.go("app.IdasTrnSecurityEdit")},e.documentchargestatus_yes=function(){console.log(e.rdbdocumentcharge),"Yes"==e.rdbdocumentcharge&&(e.Yes=!1,e.No=!0)},e.documentchargestatus_no=function(){"No"==e.rdbdocumentcharge&&(e.Yes=!0,e.No=!1)},e.documentchargestatus=function(){if(void 0==e.txtdocumentcharge_remarks)var t="NA";else var t=e.txtdocumentcharge_remarks;var a={documentcharge_applicable:e.rdbdocumentcharge,documentcharge_remarks:t,lsacreate_gid:e.lsacreate_gid},n="api/IdasTrnLsaManagement/documentchargeapplicable";lockUI(),r.post(n,a).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})),x()})},e.proceed_approval=function(){var t={lsacreate_gid:e.lsacreate_gid},n="api/IdasTrnLsaManagement/LSAapproval";lockUI(),r.post(n,t).then(function(t){1==t.data.status?(unlockUI(),s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.go("app.lsaManagement")):(unlockUI(),s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})}}angular.module("angle").controller("lsaManagementaddController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$parse","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){lockUI();var t="api/IdasMstSanction/CheckerApprovalSummary";r.get(t).then(function(t){e.sanctionlist=t.data.sanctiondetails,unlockUI()})}var f=this;f.title="MstCheckerApprovalSummaryController",g(),e.checkerapprovalview=function(t){d.url("app/idasMstSanctionLetterWordView?sanction_gid="+t+"&lspage=checkerapprovalsummary")},e.SanctionletterPDF=function(t){var e={sanction_gid:t},a="api/IdasMstSanction/GetPDFGenerate";lockUI(),r.getparams(a,e).then(function(t){var e=t.data.lspath1,a=t.data.lsname1,e=e.replace("\\","/"),e=e.replace("//","/"),n=e.split("EMS/"),o=n[1].replace("\\","/"),i=a,c=(i.substring(i.lastIndexOf("/")+1),"api/azurestorage/FileUploadDocument"),d={file_path:o};r.post(c,d).then(function(t){1==t.data.status?_.Downloaddocument(o,a):(unlockUI(),s.alert("Error Occurred While Export PDF !","warning"))}),unlockUI()})}}angular.module("angle").controller("MstCheckerApprovalSummaryController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){var t="api/IdasMstSanction/SanctionDtlsEdit",a={sanction_gid:f};lockUI(),r.getparams(t,a).then(function(t){unlockUI(),e.sanctionrefnoEdit=t.data.sanction_refno,e.SanctionDateEdit=t.data.sanction_date,e.SanctionAmountEdit=t.data.sanction_amount,e.customerNameEdit=t.data.customername,e.CustomerurnEdit=t.data.customer_urn,e.verticalCodeEdit=t.data.vertical,e.checkerapproval_flag=t.data.checkerapproval_flag});var t="api/IdasMstSanction/SanctioncheckerEdit";lockUI(),r.getparams(t,a).then(function(t){unlockUI(),e.checkerfile_name=t.data.checkerfile_name,e.checkerfile_path=t.data.checkerfile_path,e.uploaded_by=t.data.uploaded_by,e.uploaded_date=t.data.updated_date})}var g=this;g.title="MstCheckerapprovalViewController";var f=d.search().sanction_gid,v=d.search().lspage;_(),e.downloadsWordFile=function(){var t=val1,e=t.split("EMS"),a=e[1].replace("\\","/"),n=window.location.host,o=location.protocol+"//",i=o.concat(n,a),c=document.createElement("a");c.download=val2;var r=i;c.href=r,c.click()},e.CheckerApprovalBack=function(){"Pending"==v?a.go("app.MstCheckerApprovalSummary"):a.go("app.MstCheckerApprovalCompletedSummary")},e.checkerapprove=function(){var t={sanction_gid:f},e="api/IdasMstSanction/UpdateCheckerApproval";r.post(e,t).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.go("app.MstCheckerApprovalSummary")):s.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3})})}}angular.module("angle").controller("MstCheckerapprovalViewController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p){function _(){lockUI();var t="api/IdasMstSanction/SanctionToCheckerSummary";r.get(t).then(function(t){e.sanctionlist=t.data.sanctiondetails,unlockUI()})}var g=this;g.title="MstCheckerSummaryController",_(),e.checkerview=function(t){d.url("app/idasMstSanctionLetterWordView?sanction_gid="+t+"&lspage=checkersummary")}}angular.module("angle").controller("MstCheckerSummaryController",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_){function g(){e.lsacreate_gid=localStorage.getItem("lsacreate_gid"),e.stepone=!1,e.steptwo=!0,e.stepthree=!0,e.stepfour=!0,e.stepfive=!0,e.stepsix=!0,e.tobe_recovered=!1,e.already_recovered=!1,e.customer_pnl=!0,e.sanction_pnl=!0,e.signmatching=!1,e.nach_no=!1,e.signmatch_kycprovide=!1,e.escrow_no=!1,e.stamp=!1,e.roc_no=!1;var t={lsacreate_gid:e.lsacreate_gid},a="api/IdasTrnLsaManagement/Getlsainfo";r.getparams(a,t).then(function(t){e.document_charge_flag=t.data.document_charge_flag,e.recover_flag=t.data.recover_flag,e.approval_status=t.data.approval_status,e.customername=t.data.customer_name,e.clarify_flag=t.data.clarify_flag,e.compliance_flag=t.data.compliance_flag,e.proceed_flag=t.data.proceed_flag});var a="api/IdasTrnLsaManagement/Getcustomer2sanctioninfo";r.getparams(a,t).then(function(t){e.txtmargin=t.data.margin,e.txttenure=t.data.tenure,e.txtexpiry_date=t.data.expiry_date,e.txtrate_interest=t.data.rate_interest});var a="api/IdasTrnLsaManagement/limitinfodtl";r.getparams(a,t).then(function(t){e.limitinfo_limit=t.data.limitinfo_limit,e.total_document_limit=t.data.total_document_limit,e.totol_limit_released=t.data.totol_limit_released});var a="api/IdasTrnLsaManagement/bankinfodtl";r.getparams(a,t).then(function(t){e.bankinfo_list=t.data.bankinfo_list});var a="api/IdasTrnLsaManagement/GetPenalInterest";r.getparams(a,t).then(function(t){e.penalinterest_list=t.data.loanfacilitytype_list,console.log(t.data.loanfacilitytype_list)});var a="api/IdasTrnLsaManagement/loanfacility";r.get(a).then(function(t){e.loanfacility_list=t.data.loanfacility_list});var a="api/IdasTrnLsaManagement/Getprocessingfeeinfo";r.getparams(a,t).then(function(t){e.recovered_type=t.data.recovered_type,e.recovered_amount=t.data.recovered_amount,e.chequeno_details=t.data.chequeno_details,e.chequedate_details=t.data.chequedate_details,e.processingfeebank_name=t.data.processingfeebank_name,e.processingfeaccount_name=t.data.processingfeaccount_name,e.recover_remarks=t.data.recover_remarks});var a="api/IdasTrnLsaManagement/Getdocumentchargeinfo";r.getparams(a,t).then(function(t){e.doc_recovered_amount=t.data.doc_recovered_amount,e.doc_chequeno_details=t.data.doc_chequeno_details,e.doc_chequedate_details=t.data.doc_chequedate_details,e.doc_feebank_name=t.data.doc_feebank_name,e.doc_feaccount_name=t.data.doc_feaccount_name,e.document_name=t.data.document_name,e.document_path=t.data.document_path,e.document_charge=new Intl.NumberFormat("en-IN").format(Number(t.data.document_charge))+".00",e.document_charge_gst=t.data.document_charge_gst+"%",null==t.data.document_name?e.document=!1:e.document=!0,e.lbldocumentcharge_applicable=t.data.documentcharge_applicable,e.lbldocumentcharge_remarks=t.data.documentcharge_remarks});var a="api/IdasTrnLsaManagement/Getmakerinfo";r.getparams(a,t).then(function(t){e.maker_signature=t.data.maker_signature,e.terms_conditions=t.data.terms_conditions,e.deferral_captured=t.data.deferral_captured,e.head=t.data.head});var a="api/IdasTrnLsaManagement/Getcompliancecheckinfo";r.getparams(a,t).then(function(t){e.nach_mandate=t.data.nach_mandate,e.sign_match=t.data.sign_match,e.sign_match_kyc=t.data.sign_match_kyc,e.escrow_opened=t.data.escrow_opened,e.appropriate_stamp=t.data.nach_mandate,e.roc_filling=t.data.roc_filling,e.nach_mandate_remarks=t.data.nach_mandate_remarks,e.sign_match_remarks=t.data.sign_match_remarks,e.sign_match_kyc_remarks=t.data.sign_match_kyc_remarks,e.escrow_opened_remarks=t.data.escrow_opened_remarks,e.appropriate_stamp_remarks=t.data.appropriate_stamp_remarks,e.roc_filling_remarks=t.data.roc_filling_remarks,e.cersai=t.data.cersai,e.cersai_remarks=t.data.cersai_remarks});var a="api/IdasTrnLsaManagement/Getdocument";r.getparams(a,t).then(function(t){e.filename_list=t.data.UploadDocumentList});var a="api/IdasTrnLsaManagement/GetdetailsLSA";r.getparams(a,t).then(function(t){e.lblcustomer_name=t.data.customer_name,e.lblbranch_name=t.data.branch_name,e.lblstate=t.data.state,e.lblcustomer_urn=t.data.customer_urn,e.lblcustomer_location=t.data.customer_location,e.lbladdress=t.data.address1,e.lblrm_name=t.data.rm_name,e.lblcluster_head=t.data.cluster_head,e.lblzonal_head=t.data.zonal_head,e.lblbusiness_head=t.data.business_head,e.lblcredit_manager=t.data.credit_manager,e.lblvertical=t.data.vertical,e.lblgst_no=t.data.gst_no,e.lblpan_no=t.data.pan_no,e.lblsa_code=t.data.sa_code,e.lblsanctionref_no=t.data.sanctionref_no,e.lblsanction_date=t.data.sanction_date,e.lblapproved_by=t.data.approved_by,e.lblapproved_date=t.data.approved_date,e.lblconstitution=t.data.constitution,e.lblpurpose_lending=t.data.purpose_lending,e.lblfacility=t.data.facility,e.lblmajor_corporate=t.data.major_corporate,e.lblhypothecation_date=t.data.hypothecation_date,e.lblmortgage_date=t.data.mortgage_date,e.lblproduct_solution=t.data.product_solution,e.lblmajot_intervention=t.data.majot_intervention,e.lblsector=t.data.sector,e.lblprimaryvalue_chain=t.data.primaryvalue_chain,e.lblsecondaryvalue_chain=t.data.secondaryvalue_chain,e.lblremarks=t.data.remarks,e.lbllsacreated_date=t.data.lsacreated_date,e.lblsanction_type=t.data.sanction_type,e.address1=t.data.address,e.lbllsaref_no=t.data.lsaref_no,e.lsaapproved_by=t.data.lsaapproved_by,e.lsaapproved_date=t.data.lsaapproved_date});var a="api/IdasTrnLsaManagement/Getsanction2Colletarl";r.getparams(a,t).then(function(t){e.customer2security_list=t.data.customersecurity_list})}var f=this;f.title="viewLSA",g(),e.downloads=function(t,e){_.Downloaddocument(t,e)},e.clickstep1=function(){e.stepone=!1,e.steptwo=!0,e.stepthree=!0,e.stepfour=!0,e.stepfive=!0,e.stepsix=!0},e.clickstep2=function(){e.stepone=!0,e.steptwo=!1,e.stepthree=!0,e.stepfour=!0,e.stepfive=!0,e.stepsix=!0},e.clickstep3=function(){e.stepone=!0,e.steptwo=!0,e.stepthree=!1,e.stepfour=!0,e.stepfive=!0,e.stepsix=!0},e.clickstep4=function(){e.stepone=!0,e.steptwo=!0,e.stepthree=!0,e.stepfour=!1,e.stepfive=!0,e.stepsix=!0},e.clickstep5=function(){e.stepone=!0,e.steptwo=!0,e.stepthree=!0,e.stepfour=!0,e.stepfive=!1,e.stepsix=!0},e.clickstep6=function(){e.stepone=!0,e.steptwo=!0,e.stepthree=!0,e.stepfour=!0,e.stepfive=!0,e.stepsix=!1},e.lsaback=function(){a.go("app.lsaManagement")},e.view_security=function(t){function e(e,a){var n={collateral_gid:t},o="api/IdasTrnLsaManagement/GetColletarl";r.getparams(o,n).then(function(t){e.security_type=t.data.security_type,e.txtsecurity_description=t.data.security_description,e.cboaccount_status=t.data.account_status,e.collateralref_no=t.data.collateralref_no,e.security_code=t.data.security_code,e.collateral_gid=t.data.collateral_gid,e.txtborrowercheque_no=t.data.borrowercheque_no,e.txtborroweraccount_no=t.data.borroweraccount_no,e.txtborrowertbank_name=t.data.borrowertbank_name,e.txtborrowerdeviation=t.data.borrowerdeviation,e.txtborrowerother_remarks=t.data.borrowerother_remarks,e.txtguarantor_cheque=t.data.guarantor_cheque,e.txtguarantor_acno=t.data.guarantor_acno,e.txtguarantor_bankname=t.data.guarantor_bankname,e.txtguarantor_deviation=t.data.guarantor_deviation,e.txtpersonalguarantor_name=t.data.personalguarantor_name,e.txtguarantor_panno=t.data.guarantor_panno,e.txtcorporate_guarantee=t.data.corporate_guarantee,e.txtpersonal_guarantee=t.data.personal_guarantee,e.txtfd_bank_name=t.data.fd_bank_name,e.txtfd_no=t.data.fd_no,e.txtfd_expiry_date=t.data.fd_expiry_date,e.txtauto_renewal=t.data.auto_renewal,e.txtbankguarantee_bankname=t.data.bankguarantee_bankname,e.txtbankguarantee_expirydate=t.data.bankguarantee_expirydate,e.txtinsurancecompany_name=t.data.insurancecompany_name,e.txtpolicy_no=t.data.policy_no,e.txtpolicy_expiry_date=t.data.policy_expiry_date,"UDC From Borrower"==t.data.security_type?(e.borrower=!1,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"UDC From Guarantor"==t.data.security_type?(e.guarantor=!1,e.borrower=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Personal Guarantee"==t.data.security_type?(e.personal_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.corporate_guarantee=!0):"Corporate Guarantee"==t.data.security_type?(e.corporate_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0):"Bank Guarantee"==t.data.security_type?(e.bank_guarantee=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Fixed Deposits"==t.data.security_type?(e.fixed_deposits=!1,e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):"Assignment of Insurance Policy"==t.data.security_type?(e.insurance=!1,e.borrower=!0,e.guarantor=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0):(e.borrower=!0,e.guarantor=!0,e.insurance=!0,e.bank_guarantee=!0,e.fixed_deposits=!0,e.personal_guarantee=!0,e.corporate_guarantee=!0)}),e.ok=function(){a.close("closed")},e.borrowerinfo_submit=function(){var t={borrower_chequeno:e.txtborrowercheque_no,borrower_bankname:e.txborrowertbank_name,borrower_acno:e.txtborroweraccount_no,borrower_deviation:e.txtborrowerdeviation,borrower_remarks:e.txtborrowerother_remarks,lsacreate_gid:lsacreate_gid},n="api/IdasTrnLsaManagement/borrowerinfo";r.post(n,t).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed")):s.alert(t.data.message,{status:"Warning",pos:"top-center",timeout:3e3}),g()})}}var t=t;o.open({templateUrl:"/viewcollateral.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},e.editlsa=function(t){function e(e,a){var n={lsacreate_gid:e.lsacreate_gid,lsacreate_gid:t};console.log(n);var o="api/IdasTrnLsaManagement/GetdetailsLSA";r.getparams(o,n).then(function(t){e.lblcustomer_name=t.data.customer_name,e.lblcustomer_urn=t.data.customer_urn,e.lblsanctionref_no=t.data.sanctionref_no,e.lblsanction_date=t.data.sanction_date,e.txtsa_code=t.data.sa_code,console.log(t.data.hypothecationdate),"0001-01-01T00:00:00"!=t.data.hypothecationdate&&(e.txthypothecation_date=new Date(t.data.hypothecationdate)),"0001-01-01T00:00:00"!=t.data.mortgagedate&&(e.txtmortgage_date=new Date(t.data.mortgagedate)),e.txtremarks=t.data.remarks}),e.ok=function(){a.close("closed")},e.update_lsa=function(){var n={remarks:e.txtremarks,hypothecation_date:e.txthypothecation_date,mortgage_date:e.txtmortgage_date,sa_code:e.txtsa_code,lsacreate_gid:t};console.log(n);var o="api/IdasTrnLsaManagement/updatelsa";r.post(o,n).then(function(t){1==t.data.status?(s.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed")):s.alert(t.data.message,{status:"Warning",pos:"top-center",timeout:3e3}),g()})}}o.open({templateUrl:"/editlsainfo.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("viewLSA",t),t.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","SweetAlert","$route","ngTableParams","$parse","DownloaddocumentService"]}(),function(){"use strict";function t(t,e,a,n,o,i,c,r,s,d,l,u,m,p,_,g,f,v,h){function y(){lockUI();var t="api/idasMstTemplate/GetTemplateDtl",a={template_gid:e.template_gid};s.getparams(t,a).then(function(t){unlockUI(),e.template_name=t.data.template_name,e.templatetype_name=t.data.templatetype_name,e.template_content=t.data.template_content})}var I=this;I.title="viewTemplateDetailsController",e.template_gid=l.search().template_gid,y(),e.back=function(){n.go("app.idasMstTemplateSummary")}}angular.module("angle").controller("viewTemplateDetailsController",t),t.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}();