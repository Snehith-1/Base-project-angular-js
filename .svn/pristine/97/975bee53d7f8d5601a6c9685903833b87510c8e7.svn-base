!function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p){function _(){t.email_gid=localStorage.getItem("email_gid"),t.toMail=localStorage.getItem("toMail"),t.ccMail=localStorage.getItem("ccMail"),t.bccMail=localStorage.getItem("bccMail"),t.email_subject=localStorage.getItem("email_subject"),t.message_id=localStorage.getItem("message_id"),t.reference_id=localStorage.getItem("reference_id"),t.rmemployee_gid=localStorage.getItem("rmemployee_gid"),t.rmemployee_name=localStorage.getItem("rmemployee_name"),t.decision=localStorage.getItem("decision"),t.lspage=localStorage.getItem("lspage"),t.originalmail_Subject=localStorage.getItem("originalmail_Subject");var e="api/IasnTrnEmailSignature/GetEmailSignature";l.get(e).then(function(e){t.pushbackcontent=e.data.emailsignature})}var f=this;f.title="composeMail";t.lsShowBCC=!0,t.lsShowCC=!0,_(),t.uploadattachment=function(){var e=document.getElementById("addupload");if(e.files.length>0){for(var a=new FormData,o=0;o<=e.files.length-1;o++)a.append(e.files[o].name,e.files[o]),a.append("project_flag","Default"),t.uploadfrm=a;var n="api/IasnTrnWorkItem/MailAttchment";lockUI(),l.postFile(n,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",console.log(e.data),1==e.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IasnTrnWorkItem/MailAttchment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails})}else unlockUI(),s.alert("File Format Not Supported!")})}else alert("Please select a file.")},t.updateDesicion=function(){if(void 0==t.pushbackcontent)return void s.alert("Write the body of the content","success");var e={email_gid:t.email_gid,decision:t.decision,employee_gid:t.rmemployee_gid,employee_name:t.rmemployee_name,remarks:"",mailcontent:t.pushbackcontent,subject:t.email_subject,tomail_id:t.toMail,ccmail_id:t.ccMail,bccmail_id:t.bcc_mail,message_id:t.message_id,reference_id:t.reference_id};console.log(e);var o="api/IasnTrnWorkItem/PostDecision";lockUI(),l.post(o,e).then(function(e){unlockUI(),1==e.data.status?(s.alert(e.data.message,"success"),"workitem"==t.lspage?a.go("app.iasnTrnWorkItemSummary"):"myworkitem"==t.lspage?a.go("app.iasnTrnMyWorkItemSummary"):"myconsolidateworkitem"==t.lspage&&a.go("app.iasnConsolidatedWorkItem")):(s.alert(e.data.message,"warning"),"workitem"==t.lspage?a.go("app.iasnTrnWorkItemSummary"):"myworkitem"==t.lspage?a.go("app.iasnTrnMyWorkItemSummary"):"myconsolidateworkitem"==t.lspage&&a.go("app.iasnConsolidatedWorkItem"))})},t.UploadDocCancel=function(e){var a={mailattachment_gid:e},o="api/IasnTrnWorkItem/DeleteAttchment";lockUI(),l.getparams(o,a).then(function(e){if(1==e.data.status){unlockUI(),s.alert("Document deleted Successfully..!!","success");var a="api/IasnTrnWorkItem/MailAttchment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails})}else unlockUI(),s.alert("Error Occurred")})},t.downloads=function(e,t){var a=e,o=a.split("StoryboardAPI"),n=o[1].replace("\\","/"),r=window.location.host,i=location.protocol+"//",l=i.concat(r,n),s=document.createElement("a");t.split(".");s.download=t;var c=l;s.href=c,s.click()},t.back=function(){"workitem"==t.lspage?a.go("app.iasnTrnWorkItem360"):"myworkitem"==t.lspage?a.go("app.iasnTrnMyWorkItem360"):"myconsolidateworkitem"==t.lspage&&a.go("app.isanconsolidatedview")}}angular.module("angle").controller("composeMail",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$timeout","$window"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p){function _(){lockUI(),t.assignto_team=!1,t.assignto_employee=!1,t.total=0,t.totalDisplayed=100,void 0==t.page&&localStorage.setItem("page","workitemsummary"),t.page=localStorage.getItem("page");var e="api/IasnTrnWorkItem/ConsolidatedWorkItem";l.get(e).then(function(e){unlockUI(),t.WorkItemPending_List=e.data.MdlWorkItem,null==t.WorkItemPending_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPending_List.length,t.WorkItemPending_List.length<100&&(t.totalDisplayed=t.WorkItemPending_List.length))})}var f=this;f.title="iasnConsolidatedWorkItem",_(),t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(0!=t.total){if(!(e<t.total))return unlockUI(),void s.alert(" Total Summary "+t.total+" Records Only","warning");t.totalDisplayed+=a,t.total<t.totalDisplayed&&(t.totalDisplayed=t.total,s.alert(" Total Summary "+t.total+" Records Only","warning")),unlockUI()}unlockUI()},t.WorkItem360=function(e){localStorage.setItem("email_gid",e);a.go("app.isanconsolidatedview")},t.view=function(e){c.url("app/isanconsolidatedview?lsemail_gid="+e)},t.recproof_downloads=function(e,t){p.Downloaddocument(e,t)},t["export"]=function(){lockUI();var e="api/IasnTrnWorkItem/GetConsolidateExcel";l.get(e).then(function(e){unlockUI(),p.Downloaddocument(e.data.lscloudpath,e.data.excel_name)})}}angular.module("angle").controller("iasnConsolidatedWorkItem",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p,_,f){function I(){var e="api/IasnTrnWorkItem/WorkItemCounts";c.get(e).then(function(e){t.count_workitempending=e.data.count_workitempending,t.count_workitemassigned=e.data.count_workitemassigned,t.count_pushback=e.data.count_pushback,t.count_forward=e.data.count_forward,t.count_close=e.data.count_close,t.count_archival=e.data.count_archival,t.count_workitemtotal=e.data.count_workitemtotal});var a=localStorage.getItem("user_gid"),e="api/user/privilegelevel3";c.get(e+"?user_gid="+a).then(function(e){var a=e.data.privilegelevel3.map(function(e){return e.project}).indexOf("ISNMSTZRM"),o=e.data.privilegelevel3.map(function(e){return e.project}).indexOf("ISNWOMWO"),n=e.data.privilegelevel3.map(function(e){return e.project}).indexOf("ISNWOMMWO"),r=e.data.privilegelevel3.map(function(e){return e.project}).indexOf("ISNWOMARC"),i=e.data.privilegelevel3.map(function(e){return e.project}).indexOf("ISNRPTCSR");a!=-1?t.zonal_show="Y":t.zonal_show="N",o!=-1?t.workitem_show="Y":t.workitem_show="N",n!=-1?t.myworkitem_show="Y":t.myworkitem_show="N",r!=-1?t.archival_show="Y":t.archival_show="N",i!=-1?t.report_show="Y":t.report_show="N"})}var k=this;k.title="iasnDashboardController",I()}angular.module("angle").controller("iasnDashboardController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","Colors","ChartData","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$timeout","SweetAlert","$cookies"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){}var _=this;_.title="iasnMstcheckeraddController",p(),t.addchecker=function(){a.go("app.isanMstcheckeraddinfo")},t.back=function(){a.go("app.isanMstTeamManagement")}}angular.module("angle").controller("iasnMstcheckeraddController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){}var _=this;_.title="iasnMstcheckeraddinfoController",p(),t.checkerback=function(){a.go("app.isanMstcheckeradd")}}angular.module("angle").controller("iasnMstcheckeraddinfoController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u){function d(){}var g=this;g.title="iasnMstemployeeaddController",d(),t.addemployee=function(){a.go("app.isanMstemployeeaddinfo")},t.back=function(){a.go("app.isanMstTeamManagement")}}angular.module("angle").controller("iasnMstemployeeaddController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u){function d(){var e="api/employee/employee";l.get(e).then(function(e){t.employee_list=e.data.employee_list,t.employee_code=e.data.criticallity,t.employee_mailid=e.data.comments})}var g=this;g.title="iasnMstemployeeaddinfoController",d(),t.onselectedchangeemployee=function(e){t.employee_gid=localStorage.setItem("onchangeemployee_gid",e);({employee_gid:t.employeegid.employee_gid})},t.employeeback=function(){a.go("app.isanMstemployeeadd")}}angular.module("angle").controller("iasnMstemployeeaddinfoController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){var e="api/employee/employee";l.get(e).then(function(e){t.employee_list=e.data.employee_list})}var _=this;_.title="iasnMstTeamAdd",p(),t.Submit=function(){var e={team_name:t.TeamName,description:t.description,zonal_name:t.zone,team_mailid:t.TeamMail,MdlRmList:t.rmlist,MdlCheckerList:t.checkerlist},o="api/IasnMstTeam/CreateTeam";lockUI(),l.post(o,e).then(function(e){unlockUI(),1==e.data.status?(a.go("app.iasnMstTeamManagement"),s.alert(e.data.message,"success")):s.alert(e.data.message,"warning")})},t.Back=function(){a.go("app.iasnMstTeamManagement")}}angular.module("angle").controller("iasnMstTeamAdd",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){t.totalDisplayed=100,t.total=0;var e="api/IasnMstTeam/TeamSummary";l.get(e).then(function(e){unlockUI(),t.teammgmt_list=e.data.MdlTeamSummary,t.total=t.teammgmt_list.length})}var _=this;_.title="iasnMstTeamManagement",p(),t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(0!=t.total){if(!(e<t.total))return unlockUI(),void s.alert(" Total Summary "+t.total+" Records Only","warning");t.totalDisplayed+=a,t.total<t.totalDisplayed&&(t.totalDisplayed=t.total,s.alert(" Total Summary "+t.total+" Records Only","warning")),unlockUI()}unlockUI()},t.addTeam=function(){a.go("app.iasnMstTeamAdd")},t.EditTeam=function(e){localStorage.setItem("team_gid",e),a.go("app.iasnMstTeamEdit")}}angular.module("angle").controller("iasnMstTeamManagement",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){lockUI(),t.totalDisplayed=100;var e="api/IasnMstZone/ZoneSummary";l.get(e).then(function(e){t.ZoneSummary=e.data.MdlZoneSummary,unlockUI(),null==t.ZoneSummary?(t.total=0,t.totalDisplayed=0):(t.total=t.ZoneSummary.length,t.ZoneSummary.length<100&&(t.totalDisplayed=t.ZoneSummary.length))})}t.title="iasnMstZonalMapping",p(),t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(0!=t.total){if(!(e<t.total))return unlockUI(),void s.alert(" Total Summary "+t.total+" Records Only","warning");t.totalDisplayed+=a,t.total<t.totalDisplayed&&(t.totalDisplayed=t.total,s.alert(" Total Summary "+t.total+" Records Only","warning")),unlockUI()}unlockUI()},t.addZone=function(e){function t(e,t,o,n,r,i,l,s,c,m,u,d,g){var _="api/IasnMstZone/Employee";c.get(_).then(function(e){t.employee_list=e.data.employee_list}),t.rdb_acks="",t.Add=function(){var e={zone_name:t.zoneName,employee_gid:t.rmlist,employee_name:$("#rmlist :selected").text(),acknowledgement_flag:t.rdb_acks};lockUI();var o="api/IasnMstZone/PostRMName";c.post(o,e).then(function(e){1==e.data.status?(m.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(m.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),a.close("closed"),p());var o={zone_name:t.zoneName},n="api/IasnMstZone/RMStatusSummary";c.getparams(n,o).then(function(e){t.rmstatus_list=e.data.MdlRMStatusSummary,null!=t.rmstatus_list?t.rmlist_status=!0:t.rmlist_status=!1});var n="api/IasnMstZone/Employee";c.get(n).then(function(e){t.employee_list=e.data.employee_list}),t.rmlist="",t.rdb_acks=""})},t.Submit=function(){var e={zone_name:t.zoneName};lockUI();var o="api/IasnMstZone/CreateZone";c.post(o,e).then(function(e){1==e.data.status?(m.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),a.close("closed"),p()):(m.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),a.close("closed"),p())})},t.deleteRM=function(e){var a=t.zoneName,o={employee_gid:e,zone_name:a},n="api/IasnMstZone/RM_Delete";c.getparams(n,o).then(function(e){if(1==e.data.status){var a="api/IasnMstZone/RMStatusSummary";c.getparams(a,o).then(function(e){t.rmstatus_list=e.data.MdlRMStatusSummary,null!=t.rmstatus_list?t.rmlist_status=!0:t.rmlist_status=!1});var a="api/IasnMstZone/Employee";c.get(a).then(function(e){t.employee_list=e.data.employee_list}),m.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})}else alert(e.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},t.close=function(){a.close("closed"),p()}}var a=n.open({templateUrl:"/addZone.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.editZone=function(e,t){function a(a,n,r,i,l,s,c,m,u,d,g,p,_){var f={zone_gid:e},I="api/IasnMstZone/EditZone";u.getparams(I,f).then(function(e){n.zoneNameEdit=e.data.zone_name,n.zoneref_code=e.data.zoneref_no,n.rm_listEdit="",n.rdb_acksedit=""});var I="api/IasnMstZone/Employee";u.get(I).then(function(e){n.employee_list=e.data.employee_list});var f={zone_name:t},I="api/IasnMstZone/RMStatusSummary";u.getparams(I,f).then(function(e){n.rmstatus_list=e.data.MdlRMStatusSummary}),n.Update=function(){lockUI();var a={zone_gid:e,zone_name:t,employee_gid:n.rm_listEdit,employee_name:$("#rm_listEdit :selected").text(),acknowledgement_flag:n.rdb_acksedit},o="api/IasnMstZone/UpdateZone";u.post(o,a).then(function(e){unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3});var t={zone_name:n.zoneNameEdit},a="api/IasnMstZone/RMStatusSummary";u.getparams(a,t).then(function(e){n.rmstatus_list=e.data.MdlRMStatusSummary});var a="api/IasnMstZone/Employee";u.get(a).then(function(e){n.employee_list=e.data.employee_list}),n.rm_listEdit="",n.rdb_acksedit=""})},n.deleteRM=function(e){var a=t,o={employee_gid:e,zone_name:a},r="api/IasnMstZone/RM_Delete";u.getparams(r,o).then(function(e){if(1==e.data.status){var t="api/IasnMstZone/RMStatusSummary";u.getparams(t,o).then(function(e){n.rmstatus_list=e.data.MdlRMStatusSummary});var t="api/IasnMstZone/Employee";u.get(t).then(function(e){n.employee_list=e.data.employee_list}),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})}else alert(e.data.message,{status:"Warning",pos:"top-center",timeout:3e3})})},n.close=function(){o.close("closed")}}var o=n.open({templateUrl:"/editZone.html",controller:a,backdrop:"static",keyboard:!1,size:"md"});a.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.showPopover=function(e,t){function a(a,o){var n={zone_gid:e},r="api/IasnMstZone/EditZone";l.getparams(r,n).then(function(e){unlockUI(),a.zone_name=t,a.MdlRmList=e.data.MdlRmList}),a.ok=function(){o.close("closed")}}n.open({templateUrl:"/showpopupModal.html",controller:a,backdrop:"static",keyboard:!1,size:"md"});lockUI(),a.$inject=["$scope","$modalInstance"]},t.deleteZone=function(e){var t={zone_gid:e};u.swal({title:"Are you sure?",text:"Do You Want To Delete the Zone ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){lockUI();var a="api/IasnMstZone/Zone_Delete";l.getparams(a,t).then(function(e){1==e.data.status?(p(),u.swal("Deleted Successfully!"),unlockUI()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})}}angular.module("angle").controller("iasnMstZonalMapping",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){lockUI(),t.assignto_team=!1,t.assignto_employee=!1,t.total=0,t.totalDisplayed=100,void 0==t.page&&localStorage.setItem("page","workitemsummary"),t.page=localStorage.getItem("page");var e="api/IasnTrnWorkItem/WorkItemCounts";l.get(e).then(function(e){t.count_workitempending=e.data.count_workitempending,t.count_workitemassigned=e.data.count_workitemassigned,t.count_pushback=e.data.count_pushback,t.count_forward=e.data.count_forward,t.count_close=e.data.count_close,t.count_archival=e.data.count_archival,t.count_composemail=e.data.count_composemail});var e="api/IasnTrnWorkItem/WorkItemPendingSummary";l.get(e).then(function(e){t.WorkItemPending_List=e.data.MdlWorkItem,null==t.WorkItemPending_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPending_List.length,t.WorkItemPending_List.length<100&&(t.totalDisplayed=t.WorkItemPending_List.length))});var e="api/IasnTrnWorkItem/WorkItemSummary";l.get(e).then(function(e){t.WorkItemAllotted_List=e.data.MdlWorkItem,unlockUI(),null==t.WorkItemAllotted_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemAllotted_List.length,t.WorkItemAllotted_List.length<100&&(t.totalDisplayed=t.WorkItemAllotted_List.length))})}var _=this;_.title="iasnTrnAllotedSummary",p(),t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})},t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(0!=t.total){if(!(e<t.total))return unlockUI(),void s.alert(" Total Summary "+t.total+" Records Only","warning");t.totalDisplayed+=a,t.total<t.totalDisplayed&&(t.totalDisplayed=t.total,s.alert(" Total Summary "+t.total+" Records Only","warning")),unlockUI()}unlockUI()},t.WorkItem360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),localStorage.setItem("page","Allotted"),a.go("app.iasnTrnWorkItem360")},t.WorkItemAllotted360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),a.go("app.iasnTrnWorkItemAllotted360")},t.WorkItem=function(){var e="api/IasnTrnWorkItem/WorkItemPendingSummary";l.get(e).then(function(e){t.WorkItemPending_List=e.data.MdlWorkItem,null==t.WorkItemPending_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPending_List.length,t.WorkItemPending_List.length<100&&(t.totalDisplayed=t.WorkItemPending_List.length))})},t.Pushback=function(){var e="api/IasnTrnWorkItem/WorkItemPushbackSummary";l.get(e).then(function(e){t.WorkItemPushback_List=e.data.MdlWorkItem,null==t.WorkItemPushback_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPushback_List.length,t.WorkItemPushback_List.length<100&&(t.totalDisplayed=t.WorkItemPushback_List.length))})},t.Forward=function(){var e="api/IasnTrnWorkItem/WorkItemForwardSummary";l.get(e).then(function(e){t.WorkItemForward_List=e.data.MdlWorkItem,null==t.WorkItemForward_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemForward_List.length,t.WorkItemForward_List.length<100&&(t.totalDisplayed=t.WorkItemForward_List.length))})},t.CloseTab=function(){var e="api/IasnTrnWorkItem/WorkItemCloseSummary";l.get(e).then(function(e){t.WorkItemClose_List=e.data.MdlWorkItem,null==t.WorkItemClose_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemClose_List.length,t.WorkItemClose_List.length<100&&(t.totalDisplayed=t.WorkItemClose_List.length))})},t.AssignZone=function(e,t,a,o,r,i){function l(n,r,i,l,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.rdb_acks="N";var h="api/IasnMstZone/ZoneSummary";g.get(h).then(function(e){r.zone_list=e.data.MdlZoneSummary});var h="api/IasnTrnWorkItem/IsnEmployee";g.get(h).then(function(e){r.employee_list=e.data.MdlIsnEmployee}),r.close=function(){s.close("closed")},r.AssignToUpdate=function(){var t={email_gid:e,zone_gid:r.zone_name,zone_name:$("#zone_name :selected").text(),zone_flag:r.zone_flag,acknowledgement_flag:r.rdb_acks},a="api/IasnTrnWorkItem/AssignZone";lockUI(),g.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/assignZoneContent.html",controller:l,backdrop:"static",keyboard:!1,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.TransferWorkItem=function(e,t,a,o,r,i){function l(n,l,c,m,u,d,g,_,f,I,k,h,S){l.workitemref_no=t,l.subject=o,l.from=a,l.zone_name=r,l.checkeremployee_name=i;var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){l.employee_list=e.data.MdlIsnEmployee});var v={lsemail_gid:e},y="api/IasnTrnWorkItem/TransferLog";f.getparams(y,v).then(function(e){1==e.data.status?(l.transferlog_list=e.data.MdlTransferLog,l.showtransfer=!0):l.showtransfer=!1}),l.close=function(){s.close("closed")},l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),zone_gid:"",zone_name:"",zone_flag:"Y"},a="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?I.alert(e.data.message,"success"):I.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/transferWIContent.html",controller:l,backdrop:"static",keyboard:!1,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.CloseWorkItem=function(e,t,a,o,r){function i(n,r,i,s,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:r.close_remarks,close_acknowledge:r.Acknowledge_mail_trigger,mailcontent:"Close",customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/IasnTrnWorkItem/PostDecision";lockUI(),g.post(a,t).then(function(e){unlockUI(),1==e.data.status?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),l.close("closed"),p()})},r.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeWIContent.html",controller:i,backdrop:"static",keyboard:!1,size:"md"});i.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page","workitemsummarypage"),a.go("app.iasnWomMergeWorkItem")},t.Alloted=function(){a.go("app.iasnTrnAllotedSummary")},t.Pushback=function(){a.go("app.iasnTrnPushbackSummary")},t.Forward=function(){a.go("app.iasnTrnForwardSummary")},t.Close=function(){a.go("app.iasnTrnCloseSummary")},t.WorkItem=function(){a.go("app.iasnTrnWorkItemSummary")},t.ComposeMail=function(){a.go("app.iasnWomWorkOrderSummary")},t.Allottedcount_dtls=function(){function e(e,t){var a="api/IasnTrnWorkItem/AssignedCountList";lockUI(),l.get(a).then(function(t){unlockUI(),e.assignedcount_list=t.data.MdlAssignedList}),e.ok=function(){t.close("closed")}}n.open({templateUrl:"/AllottedCountdtl.html",controller:e,backdrop:"static",keyboard:!1,size:"lg"});e.$inject=["$scope","$modalInstance"]},t.holdworkitem=function(e,t,a,o){function r(n,r){n.email_gid=e,n.workitemref_no=t,n.from=a,n.email_subject=o;var c={lsemail_gid:e,assigned_flag:"Y"},m="api/IasnTrnWorkItem/HoldLogDetails";l.getparams(m,c).then(function(e){1==e.data.status&&(n.holdlog_list=e.data.MdlholdLog)}),n.HoldWISubmit=function(){var t={email_gid:e,workitemhold_reason:n.hold_remarks,assigned_flag:"Y"},a="api/IasnTrnWorkItem/HoldWorkItem";l.post(a,t).then(function(e){1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),i.close("closed"),p()):(s.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),r.close("closed"))})},n.close=function(){r.close("closed")}}var i=n.open({templateUrl:"/holdworkitempopup.html",controller:r,size:"md",backdrop:"static",keyboard:!1});r.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("iasnTrnAllotedSummary",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){t.PnlSpecific=!1,t.archival={},t.assignto_team=!1,t.assignto_employee=!1,t.total=100,t.totalDisplayed=0,t.page=localStorage.getItem("page");var e="api/IasnTrnWorkItem/ArchivalCounts";l.get(e).then(function(e){t.workitem_count=e.data.workitem_count,t.archivalcustomer_count=e.data.archivalcustomer_count,t.archivalspecific_count=e.data.archivalspecific_count});var e="api/IasnTrnWorkItem/WorkItemArchivalSummary";l.get(e).then(function(e){t.WorkItem_List=e.data.MdlWorkItem})}var _=this;_.title="iasnTrnArchivalSummary",p(),t.workitem=function(){var e="api/IasnTrnWorkItem/WorkItemArchivalSummary";l.get(e).then(function(e){t.WorkItem_List=e.data.MdlWorkItem})},t.archivalcustomer=function(){var e="api/IasnTrnWorkItem/CustomerArchival";l.get(e).then(function(e){t.ArchivalCustomer_list=e.data.MdlArchivalCustomer})},t.onclickspecific=function(){t.PnlSpecific=!0,t.archival.customer="",t.archival.cbosanctionrefno=""},t.onclickcustomer=function(){t.PnlSpecific=!1,t.archival.customer=""},t.archivalspecific=function(){var e="api/IasnTrnWorkItem/SpecificArchival";l.get(e).then(function(e){t.SpecificArchival_List=e.data.MdlArchivalCustomer})},t.createArchival=function(){var e;angular.forEach(t.WorkItem_List,function(t){1==t.checked&&(e=t.email_gid)}),void 0==e?s.alert("Select Atleast One Record!"):(t.IsCreate=!0,t.archival.types_of_archival="Customer")},t.complete=function(e){if(e.length>=3){t.message="";var a="api/customer/ExploreCustomer",o={customername:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.message="",t.customer_list=e.data.Customers):(t.customer="",t.message="No Records")})}else t.customer_list=null,t.message="Type atleast three character"},t.fillTextbox=function(e,a){t.archival.customer=a,t.customer_gid=e,t.customer_list=null;var o={customer_gid:e},n="api/loan/customer_getheads";l.getparams(n,o).then(function(e){t.sanctiondtl=e.data.sanctiondtl})},t.close=function(){t.IsCreate=!1},t.ArchivalSubmit=function(){var e,a=[],o="",n="";if(angular.forEach(t.WorkItem_List,function(t){1==t.checked&&(e=t.email_gid,a.push(e))}),"Specific"==t.archival.types_of_archival){if(void 0==t.archival.cbosanctionrefno)return void s.alert("Select the Sanction Ref No.","warning");o=t.archival.cbosanctionrefno.sanctionrefno,n=t.archival.cbosanctionrefno.sanction_Gid}var r={email_gid:a,archival_type:t.archival.types_of_archival,remarks:t.archival.Remarks,customer_gid:t.customer_gid,customer_name:t.archival.customer,sanctionref_no:o,sanction_gid:n};if(void 0!=e){var i="api/IasnTrnWorkItem/PostArchival";lockUI(),l.post(i,r).then(function(e){1==e.data.status?(unlockUI(),s.alert(e.data.message,"success")):(unlockUI(),s.alert(e.data.message)),p()})}else s.alert("Select Atleast One Record!")},t.checkall=function(e){angular.forEach(t.WorkItem_List,function(t){t.checked=e})},t.WorkItem360=function(e){localStorage.setItem("email_gid",e),void 0==t.page?localStorage.setItem("page","archival"):localStorage.setItem("page","archival"),localStorage.setItem("page","Archival"),a.go("app.iasnTrnWorkItem360")},t.WorkItemSummary=function(e,t,o,n){localStorage.setItem("customer_gid",e),localStorage.setItem("type",t),a.go("app.iasnTrnCustomerWrkSummary")}}angular.module("angle").controller("iasnTrnArchivalSummary",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){lockUI(),t.assignto_team=!1,t.assignto_employee=!1,t.total=0,t.totalDisplayed=100,void 0==t.page&&localStorage.setItem("page","workitemsummary"),t.page=localStorage.getItem("page");var e="api/IasnTrnWorkItem/WorkItemCounts";l.get(e).then(function(e){t.count_workitempending=e.data.count_workitempending,t.count_workitemassigned=e.data.count_workitemassigned,t.count_pushback=e.data.count_pushback,t.count_forward=e.data.count_forward,t.count_close=e.data.count_close,t.count_archival=e.data.count_archival,t.count_composemail=e.data.count_composemail});var e="api/IasnTrnWorkItem/WorkItemCloseSummary";l.get(e).then(function(e){t.WorkItemClose_List=e.data.MdlWorkItem,unlockUI(),null==t.WorkItemClose_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemClose_List.length,t.WorkItemClose_List.length<100&&(t.totalDisplayed=t.WorkItemClose_List.length))})}var _=this;_.title="iasnTrnCloseSummary",p(),t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})},t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(0!=t.total){if(!(e<t.total))return unlockUI(),void s.alert(" Total Summary "+t.total+" Records Only","warning");t.totalDisplayed+=a,t.total<t.totalDisplayed&&(t.totalDisplayed=t.total,s.alert(" Total Summary "+t.total+" Records Only","warning")),unlockUI()}unlockUI()},t.WorkItem360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),localStorage.setItem("page","Close"),
a.go("app.iasnTrnWorkItem360")},t.WorkItemAllotted360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),a.go("app.iasnTrnWorkItemAllotted360")},t.WorkItem=function(){var e="api/IasnTrnWorkItem/WorkItemPendingSummary";l.get(e).then(function(e){t.WorkItemPending_List=e.data.MdlWorkItem,null==t.WorkItemPending_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPending_List.length,t.WorkItemPending_List.length<100&&(t.totalDisplayed=t.WorkItemPending_List.length))})},t.Pushback=function(){var e="api/IasnTrnWorkItem/WorkItemPushbackSummary";l.get(e).then(function(e){t.WorkItemPushback_List=e.data.MdlWorkItem,null==t.WorkItemPushback_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPushback_List.length,t.WorkItemPushback_List.length<100&&(t.totalDisplayed=t.WorkItemPushback_List.length))})},t.AssignZone=function(e,t,a,o,r,i){function l(n,r,i,l,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.rdb_acks="N";var h="api/IasnMstZone/ZoneSummary";g.get(h).then(function(e){r.zone_list=e.data.MdlZoneSummary});var h="api/IasnTrnWorkItem/IsnEmployee";g.get(h).then(function(e){r.employee_list=e.data.MdlIsnEmployee}),r.close=function(){s.close("closed")},r.AssignToUpdate=function(){var t={email_gid:e,zone_gid:r.zone_name,zone_name:$("#zone_name :selected").text(),zone_flag:r.zone_flag,acknowledgement_flag:r.rdb_acks},a="api/IasnTrnWorkItem/AssignZone";lockUI(),g.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/assignZoneContent.html",controller:l,backdrop:"static",keyboard:!1,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.TransferWorkItem=function(e,t,a,o,r,i){function l(n,l,c,m,u,d,g,_,f,I,k,h,S){l.workitemref_no=t,l.subject=o,l.from=a,l.zone_name=r,l.checkeremployee_name=i;var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){l.employee_list=e.data.MdlIsnEmployee});var v={lsemail_gid:e},y="api/IasnTrnWorkItem/TransferLog";f.getparams(y,v).then(function(e){1==e.data.status?(l.transferlog_list=e.data.MdlTransferLog,l.showtransfer=!0):l.showtransfer=!1}),l.close=function(){s.close("closed")},l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),zone_gid:"",zone_name:"",zone_flag:"Y"},a="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?I.alert(e.data.message,"success"):I.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/transferWIContent.html",controller:l,backdrop:"static",keyboard:!1,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.CloseWorkItem=function(e,t,a,o,r){function i(n,r,i,s,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:r.close_remarks,close_acknowledge:r.Acknowledge_mail_trigger,mailcontent:"Close",customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/IasnTrnWorkItem/PostDecision";lockUI(),g.post(a,t).then(function(e){unlockUI(),1==e.data.status?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),l.close("closed"),p()})},r.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeWIContent.html",controller:i,backdrop:"static",keyboard:!1,size:"md"});i.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page","workitemsummarypage"),a.go("app.iasnWomMergeWorkItem")},t.Alloted=function(){a.go("app.iasnTrnAllotedSummary")},t.Pushback=function(){a.go("app.iasnTrnPushbackSummary")},t.Forward=function(){a.go("app.iasnTrnForwardSummary")},t.Close=function(){a.go("app.iasnTrnCloseSummary")},t.WorkItem=function(){a.go("app.iasnTrnWorkItemSummary")},t.ComposeMail=function(){a.go("app.iasnWomWorkOrderSummary")}}angular.module("angle").controller("iasnTrnCloseSummary",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p){function _(){t.composemail_gid=localStorage.getItem("composemail_gid");var e="api/IasnTrnWorkItem/ComposeMailview",a={lscomposemail_gid:localStorage.getItem("composemail_gid")};l.getparams(e,a).then(function(e){t.frommail_id=e.data.frommail_id,t.email_subject=e.data.email_subject,t.mailcontent=e.data.mailcontent,t.ccmail_id=e.data.ccmail_id,t.bccmail_id=e.data.bccmail_id,t.tomail_id=e.data.tomail_id,t.attach_list=e.data.MdlAttachmentList,t.zone_name=e.data.zone_name,t.email_date=e.data.email_date,t.email_status=e.data.email_status,t.composemail_gid=e.data.composemail_gid});var e="api/IasnTrnAuditLog/PostComposeAuditView",a={composemail_gid:localStorage.getItem("composemail_gid")};l.getparams(e,a).then(function(e){1==e.data.status});var a={composemail_gid:localStorage.getItem("composemail_gid")},e="api/IasnTrnWorkItem/ComposeReferenceMail";l.getparams(e,a).then(function(e){1==e.data.status&&(t.referenceMail=e.data.MdlReferenceMail)})}var f=this;f.title="iasnTrnComposeMail360",_(),t.trustAsHtml=function(e){return p.trustAsHtml(e)},t.logdetails=function(){if(1==t.IsLogShow)t.IsLogShow=!1;else{t.IsLogShow=!0;var e="api/IasnTrnAuditLog/ComposeAuditLog",a={composemail_gid:localStorage.getItem("composemail_gid")};l.getparams(e,a).then(function(e){1==e.data.status&&(t.auditlog_list=e.data.MdlAuditLog)})}},t.logClose=function(){t.IsLogShow=!1},t["export"]=function(e,t){var a=e,o=a.split("EMS"),n=o[1].replace("\\","/"),r=window.location.host,i=location.protocol+"//",l=i.concat(r,n),s=document.createElement("a"),c=t.split(".");s.download=c[0];var m=l;s.href=m,s.click()},t.back=function(){a.go("app.iasnWomWorkOrderSummary")},t.signature=function(){function e(e,t){var a="api/IasnTrnEmailSignature/GetEmailSignature";l.get(a).then(function(t){e.EmailSignature=t.data.emailsignature}),e.ok=function(){t.close("closed")},e.close=function(){t.close("closed")},e.submit=function(){lockUI();var a={emailsignature:e.EmailSignature},o="api/IasnTrnEmailSignature/PostEmailSignature";l.post(o,a).then(function(e){unlockUI(),1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),t.close("closed")):s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})}}n.open({templateUrl:"/signatureContent.html",controller:e,size:"lg"});e.$inject=["$scope","$modalInstance"]},t.forward=function(e,o,n,r,i){t.ccMail=t.cc_mail,localStorage.setItem("composemail_gid",e),localStorage.setItem("toMail",n),localStorage.setItem("ccMail",r),localStorage.setItem("bccMail",i),localStorage.setItem("email_subject",o),localStorage.setItem("decision","Forward"),localStorage.setItem("lspage","composemail"),a.go("app.iasnTrnForwardMail")},t.archivalWI=function(e){function t(t,o,n,r,i,l,s,c,m,u,d,g,p){o.onclickspecific=function(){o.PnlSpecific=!0,o.customer="",o.cbosanctionrefno=""},o.onclickcustomer=function(){o.PnlSpecific=!1,o.customer=""},o.complete=function(e){if(e.length>=3){o.message="";var t="api/customer/ExploreCustomer",a={customername:e};m.getparams(t,a).then(function(e){1==e.data.status?(o.message="",o.customer_list=e.data.Customers):(o.customer="",o.message="No Records")})}else o.customer_list=null,o.message="Type atleast three character"},o.fillTextbox=function(e,t){o.customer=t,o.customer_gid=e,o.customer_list=null;var a={customer_gid:e},n="api/loan/customer_getheads";m.getparams(n,a).then(function(e){o.sanctiondtl=e.data.sanctiondtl})},o.close=function(){a.close("closed")},o.ArchivalSubmit=function(){var t="",n="";if("Specific"==o.archival.types_of_archival){if(void 0==o.cbosanctionrefno)return a.close("closed"),void u.alert("Select the Sanction Ref No.","warning");t=$("#sanction :selected").text(),n=o.cbosanctionrefno.sanction_Gid}var i={composemail_gid:e,archival_type:o.archival.types_of_archival,remarks:o.archival.Remarks,customer_gid:o.customer_gid,customer_name:o.customer,sanctionref_no:t,sanction_gid:n,status:"Archival"},l="api/IasnTrnWorkItem/ComposeMailDecision";lockUI(),m.post(l,i).then(function(e){unlockUI(),1==e.data.status?(a.close("closed"),u.alert(e.data.message,"success")):(a.close("closed"),u.alert(e.data.message)),_(),r.go("app.iasnWomWorkOrderSummary")})}}var a=n.open({templateUrl:"/archivalContent.html",controller:t,size:"md"});t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]}}angular.module("angle").controller("iasnTrnComposeMail360",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p){function _(){f.calender1=function(e){e.preventDefault(),e.stopPropagation(),f.open1=!0},f.calender2=function(e){e.preventDefault(),e.stopPropagation(),f.open2=!0},f.formats=["dd-MM-yyyy"],f.format=f.formats[0],f.dateOptions={formatYear:"yy",startingDay:1},lockUI();var e="api/IasnTrnWorkItem/GetConsolidatedReport";l.get(e).then(function(e){unlockUI(),t.WorkItem_List=e.data.MdlWorkItem})}var f=this;f.title="iasnTrnConsolidatedReport",_(),t.view=function(e){c.url("app/isanconsolidatedview?lsemail_gid="+e+"&lstab=ConsolidatedReport")},t["export"]=function(){if(void 0==t.emailfrom_date||""==t.emailfrom_date)s.alert("Kindly Select From and To date","warning");else if(void 0==t.emailto_date||""==t.emailto_date)s.alert("Kindly Select From and To date","warning");else{lockUI();var e=t.emailfrom_date,a=new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0],o=t.emailto_date,n=new Date(o.getTime()-6e4*o.getTimezoneOffset()).toISOString().split("T")[0],r="api/IasnTrnWorkItem/GetConsolidatedReportExcel",i={emailfrom_date:a,emailto_date:n};l.getparams(r,i).then(function(e){unlockUI(),p.Downloaddocument(e.data.lscloudpath,e.data.excel_name)})}}}angular.module("angle").controller("iasnTrnConsolidatedReport",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p){function _(){f=localStorage.getItem("customer_gid"),I=localStorage.getItem("type");var e={customer_gid:f,archival_type:I},a="api/IasnTrnWorkItem/WorkItemArchivalSummary";l.post(a,e).then(function(e){t.TaggedWI_List=e.data.MdlWorkItem,t.workitemref_no=e.data.workitemref_no,t.updatedby_on=e.data.updatedby_on})}var f,I,k=this;k.title="iasnTrnCustomerWrkSummary",_(),t.trustAsHtml=function(e){return p.trustAsHtml(e)},t.back=function(){a.go("app.iasnTrnArchivalSummary")},t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})}}angular.module("angle").controller("iasnTrnCustomerWrkSummary",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p,_){function f(){t.lspage=localStorage.getItem("lspage"),t.composemail_gid=localStorage.getItem("composemail_gid"),t.toMail=localStorage.getItem("toMail"),t.ccMail=localStorage.getItem("ccMail"),t.bccMail=localStorage.getItem("bccMail"),t.email_subject=localStorage.getItem("email_subject");var e="api/IasnTrnWorkItem/Mailtempdelete";l.get(e).then(function(e){});var e="api/IasnTrnEmailSignature/GetEmailSignature";l.get(e).then(function(e){t.pushbackcontent=e.data.emailsignature})}var I=this;I.title="iasnTrnForwardMail";t.lsShowBCC=!0,t.lsShowCC=!0,f(),t.updateDesicion=function(){if(void 0==t.pushbackcontent)return void s.alert("Write the body of the content","success");var e={composemail_gid:t.composemail_gid,mailcontent:t.pushbackcontent,email_subject:t.email_subject,tomail_id:t.toMail,ccmail_id:t.ccMail,bccmail_id:t.bcc_mail,status:"Forward"};console.log(e);var o="api/IasnTrnWorkItem/ComposeMailDecision";lockUI(),l.post(o,e).then(function(e){unlockUI(),1==e.data.status?(s.alert(e.data.message,"success"),"Archival"==t.lspage?a.go("app.iasnTrnArchivalSummary"):"composemailsummary"==t.lspage?a.go("app.iasnWomWorkOrderSummary"):"composemail"==t.lspage&&a.go("app.iasnTrnComposeMail360")):(s.alert(e.data.message,"warning"),"composemail"==t.lspage?a.go("app.iasnTrnComposeMail360"):"composemailsummary"==t.lspage?a.go("app.iasnWomWorkOrderSummary"):"Archival"==t.lspage&&a.go("app.iasnTrnArchivalSummary"))})},t.uploadattachment=function(){var e=document.getElementById("addupload");if(e.files.length>0){for(var a=new FormData,o=0;o<=e.files.length-1;o++)a.append(e.files[o].name,e.files[o]),a.append("project_flag","Default"),t.uploadfrm=a;var n="api/IasnTrnWorkItem/ComposeMailAttachment";lockUI(),l.postFile(n,t.uploadfrm).then(function(e){if($("#addupload").val(""),1==e.data.status){var a="api/IasnTrnWorkItem/GetComposeMailAttachment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails}),s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()}else unlockUI(),s.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})})}else alert("Please select a file.")},t.UploadDocCancel=function(e){var a={composemailattachment_gid:e},o="api/IasnTrnWorkItem/DeleteComposeMailAttachment";lockUI(),l.getparams(o,a).then(function(e){if(1==e.data.status){unlockUI(),s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3});var a="api/IasnTrnWorkItem/GetComposeMailAttachment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails})}else unlockUI(),s.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})})},t.downloads=function(e,t){_.Downloaddocument(e,t)},t.back=function(){"composemail"==t.lspage?a.go("app.iasnTrnComposeMail360"):"Archival"==t.lspage?a.go("app.iasnTrnArchivalSummary"):a.go("app.iasnWomWorkOrderSummary")}}angular.module("angle").controller("iasnTrnForwardMail",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$timeout","$window","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){t.assignto_team=!1,t.assignto_employee=!1,t.total=0,t.totalDisplayed=100,void 0==t.page&&localStorage.setItem("page","workitemsummary"),t.page=localStorage.getItem("page");var e="api/IasnTrnWorkItem/WorkItemCounts";l.get(e).then(function(e){t.count_workitempending=e.data.count_workitempending,t.count_workitemassigned=e.data.count_workitemassigned,t.count_pushback=e.data.count_pushback,t.count_forward=e.data.count_forward,t.count_close=e.data.count_close,t.count_archival=e.data.count_archival,t.count_composemail=e.data.count_composemail});var e="api/IasnTrnWorkItem/WorkItemPendingSummary";l.get(e).then(function(e){t.WorkItemPending_List=e.data.MdlWorkItem,null==t.WorkItemPending_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPending_List.length,t.WorkItemPending_List.length<100&&(t.totalDisplayed=t.WorkItemPending_List.length))});var e="api/IasnTrnWorkItem/WorkItemSummary";l.get(e).then(function(e){t.WorkItemAllotted_List=e.data.MdlWorkItem,null==t.WorkItemAllotted_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemAllotted_List.length,t.WorkItemAllotted_List.length<100&&(t.totalDisplayed=t.WorkItemAllotted_List.length))});var e="api/IasnTrnWorkItem/WorkItemForwardSummary";l.get(e).then(function(e){unlockUI(),t.WorkItemForward_List=e.data.MdlWorkItem,null==t.WorkItemForward_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemForward_List.length,t.WorkItemForward_List.length<100&&(t.totalDisplayed=t.WorkItemForward_List.length))})}var _=this;_.title="iasnTrnForwardSummary",p(),lockUI(),t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})},t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(0!=t.total){if(!(e<t.total))return unlockUI(),void s.alert(" Total Summary "+t.total+" Records Only","warning");t.totalDisplayed+=a,t.total<t.totalDisplayed&&(t.totalDisplayed=t.total,s.alert(" Total Summary "+t.total+" Records Only","warning")),unlockUI()}unlockUI()},t.WorkItem360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),localStorage.setItem("page","Forward"),a.go("app.iasnTrnWorkItem360")},t.WorkItemAllotted360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),a.go("app.iasnTrnWorkItemAllotted360")},t.WorkItem=function(){var e="api/IasnTrnWorkItem/WorkItemPendingSummary";l.get(e).then(function(e){t.WorkItemPending_List=e.data.MdlWorkItem,null==t.WorkItemPending_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPending_List.length,t.WorkItemPending_List.length<100&&(t.totalDisplayed=t.WorkItemPending_List.length))})},t.Pushback=function(){var e="api/IasnTrnWorkItem/WorkItemPushbackSummary";l.get(e).then(function(e){t.WorkItemPushback_List=e.data.MdlWorkItem,null==t.WorkItemPushback_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPushback_List.length,t.WorkItemPushback_List.length<100&&(t.totalDisplayed=t.WorkItemPushback_List.length))})},t.CloseTab=function(){var e="api/IasnTrnWorkItem/WorkItemCloseSummary";l.get(e).then(function(e){t.WorkItemClose_List=e.data.MdlWorkItem,null==t.WorkItemClose_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemClose_List.length,t.WorkItemClose_List.length<100&&(t.totalDisplayed=t.WorkItemClose_List.length))})},t.AssignZone=function(e,t,a,o,r,i){function l(n,r,i,l,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.rdb_acks="N";var h="api/IasnMstZone/ZoneSummary";g.get(h).then(function(e){r.zone_list=e.data.MdlZoneSummary});var h="api/IasnTrnWorkItem/IsnEmployee";g.get(h).then(function(e){r.employee_list=e.data.MdlIsnEmployee}),r.close=function(){s.close("closed")},r.AssignToUpdate=function(){var t={email_gid:e,zone_gid:r.zone_name,zone_name:$("#zone_name :selected").text(),zone_flag:r.zone_flag,acknowledgement_flag:r.rdb_acks},a="api/IasnTrnWorkItem/AssignZone";lockUI(),g.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/assignZoneContent.html",controller:l,backdrop:"static",keyboard:!1,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.TransferWorkItem=function(e,t,a,o,r,i){function l(n,l,c,m,u,d,g,_,f,I,k,h,S){l.workitemref_no=t,l.subject=o,l.from=a,l.zone_name=r,l.checkeremployee_name=i;var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){l.employee_list=e.data.MdlIsnEmployee});var v={lsemail_gid:e},y="api/IasnTrnWorkItem/TransferLog";f.getparams(y,v).then(function(e){1==e.data.status?(l.transferlog_list=e.data.MdlTransferLog,l.showtransfer=!0):l.showtransfer=!1}),l.close=function(){s.close("closed")},l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),zone_gid:"",zone_name:"",zone_flag:"Y"},a="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?I.alert(e.data.message,"success"):I.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/transferWIContent.html",controller:l,backdrop:"static",keyboard:!1,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.CloseWorkItem=function(e,t,a,o,r){function i(n,r,i,s,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:r.close_remarks,close_acknowledge:r.Acknowledge_mail_trigger,mailcontent:"Close",customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/IasnTrnWorkItem/PostDecision";lockUI(),g.post(a,t).then(function(e){unlockUI(),1==e.data.status?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),l.close("closed"),p()})},r.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeWIContent.html",controller:i,backdrop:"static",keyboard:!1,size:"md"});i.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page","workitemsummarypage"),a.go("app.iasnWomMergeWorkItem")},t.Alloted=function(){a.go("app.iasnTrnAllotedSummary")},t.Pushback=function(){a.go("app.iasnTrnPushbackSummary")},t.Forward=function(){a.go("app.iasnTrnForwardSummary")},t.Close=function(){a.go("app.iasnTrnCloseSummary")},t.WorkItem=function(){a.go("app.iasnTrnWorkItemSummary")},t.ComposeMail=function(){a.go("app.iasnWomWorkOrderSummary")}}angular.module("angle").controller("iasnTrnForwardSummary",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p){function _(){t.PnlSpecific=!1,t.IsVisibleteam=!1,t.IsVisibleemployee=!1,t.pushback=!1,t.forward=!1,t.all=!1,t.archival=!1,t.typeE="",t.logdetails=!1,t.email_gid=localStorage.getItem("email_gid"),t.page=localStorage.getItem("page");var e="api/employee/employee";l.get(e).then(function(e){t.employee_list=e.data.employee_list});var e="api/customer/customer";l.get(e).then(function(e){t.customer_list=e.data.customer_list});var e="api/IasnTrnWorkItem/WorkItemView",a={lsemail_gid:localStorage.getItem("email_gid")};l.getparams(e,a).then(function(e){t.workitemref_no=e.data.workitemref_no,t.email_from=e.data.email_from,t.email_date=e.data.email_date,t.email_subject=e.data.email_subject,t.email_content=e.data.email_content,t.created_date=e.data.created_date,t.cc_mail=e.data.cc,t.bcc_mail=e.data.bcc,t.to_mail=e.data.email_to,t.zone_name=e.data.zone_name,t.team_code=e.data.team_code,t.team_name=e.data.team_name,t.team_mailid=e.data.team_mailid,t.description=e.data.description,t.rmemployee_gid=e.data.rmemployee_gid,t.rmemployee_name=e.data.rmemployee_name,t.rmemployee_mailid=e.data.email_address,t.checkeremployee_name=e.data.checkeremployee_name,t.attch_list=e.data.MdlAttachmentList,t.status=e.data.status,t.archivalremarks=e.data.archivalremarks,t.Mail_Trigger=e.data.Mail_Trigger,t.assigned_remarks=e.data.assigned_remarks,t.originalmail_Subject=e.data.originalmail_Subject,t.hold_flag=e.data.hold_flag,t.workitemhold_reason=e.data.workitemhold_reason,t.customer_name=e.data.customer_name,t.customer_type=e.data.customer_type,""==t.archivalremarks||null==t.archivalremarks?t.archiverem=!1:t.archiverem=!0,t.closedremarks=e.data.closedremarks,""==t.closedremarks||null==t.closedremarks?t.closerem=!1:t.closerem=!0,t.allottedby_on=e.data.allottedby_on,t.aging=e.data.aging,t.status=e.data.status,t.updatedby_on=e.data.updatedby_on,t.message_id=e.data.message_id,t.reference_id=e.data.reference_id,null!=e.data.employee_gid&&(t.assign_to=e.data.employee_gid)});var a={email_gid:localStorage.getItem("email_gid")},e="api/IasnTrnWorkItem/ReferenceMail";l.getparams(e,a).then(function(e){1==e.data.status&&(t.referenceMail=e.data.MdlReferenceMail)})}var f=this;f.title="iasnTrnMyWorkItem360",_(),t.logdetails=function(){if(1==t.IsLogShow)t.IsLogShow=!1;else{t.IsLogShow=!0;var e="api/IasnTrnWorkItem/TransferLog",a={lsemail_gid:localStorage.getItem("email_gid")};l.getparams(e,a).then(function(e){1==e.data.status&&(t.transferlog_list=e.data.MdlTransferLog,null==t.transferlog_list?t.transfershow=!0:t.transfershow=!1)});var e="api/IasnTrnAuditLog/AuditLog",a={email_gid:localStorage.getItem("email_gid")};l.getparams(e,a).then(function(e){1==e.data.status&&(t.auditlog_list=e.data.MdlAuditLog)})}},t["export"]=function(e,t){var a=e,o=a.split("EMS"),n=o[1].replace("\\","/"),r=window.location.host,i=location.protocol+"//",l=i.concat(r,n),s=document.createElement("a"),c=t.split(".");s.download=c[0];var m=l;s.href=m,s.click()},t.uploadattachment=function(e,a,o){var n={name:e[0].name,file:e[0]},r=new FormData;r.append("fileupload",n.file),r.append("file_name",n.name),r.append("project_flag","Default"),t.uploadfrm=r;var i="api/IasnTrnWorkItem/MailAttchment";lockUI(),l.postFile(i,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",console.log(e.data),1==e.data.status){unlockUI(),s.alert("Document Uploaded Successfully..!!","success");var a="api/IasnTrnWorkItem/MailAttchment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails})}else unlockUI(),s.alert("File Format Not Supported!")})},t.transferto_change=function(e){u.swal({title:"Are you sure?",text:"Do you want to transfer the work item?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes,Transfer it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a={email_gid:localStorage.getItem("email_gid"),employee_gid:e,employee_name:$("#transfer_to :selected").text()},o="api/IasnTrnWorkItem/AssignTo";l.post(o,a).then(function(e){unlockUI(),1==e.data.status?(_(),u.swal("Work Item Transfered Successfully!")):s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})}else u.swal("Error Occured")})},t.pushback=function(){localStorage.setItem("email_gid",localStorage.getItem("email_gid")),localStorage.setItem("toMail",t.rmemployee_mailid),localStorage.setItem("ccMail",t.cc_mail),localStorage.setItem("bccMail",t.bcc_mail),localStorage.setItem("email_subject",t.email_subject),localStorage.setItem("message_id",t.message_id),localStorage.setItem("reference_id",t.reference_id),localStorage.setItem("rmemployee_gid",t.rmemployee_gid),localStorage.setItem("rmemployee_name",t.rmemployee_name),localStorage.setItem("decision","Pushback"),localStorage.setItem("originalmail_Subject",t.originalmail_Subject),localStorage.setItem("lspage","myworkitem"),a.go("app.composeMail")},t.forward=function(){t.ccMail=t.cc_mail,localStorage.setItem("email_gid",localStorage.getItem("email_gid")),localStorage.setItem("toMail",t.rmemployee_mailid),localStorage.setItem("ccMail",t.ccMail),localStorage.setItem("bccMail",t.bcc_mail),localStorage.setItem("email_subject",t.email_subject),localStorage.setItem("message_id",t.message_id),localStorage.setItem("reference_id",t.reference_id),localStorage.setItem("rmemployee_gid",t.rmemployee_gid),localStorage.setItem("rmemployee_name",t.rmemployee_name),localStorage.setItem("decision","Forward"),localStorage.setItem("originalmail_Subject",t.originalmail_Subject),localStorage.setItem("lspage","myworkitem"),a.go("app.composeMail")},t.onchangecopy=function(e){u.swal({title:"Are you sure?",text:"Do you want to move the work item to yors bin?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes,Move it!",closeOnConfirm:!1},function(e){if(e){lockUI();var t={email_gid:localStorage.getItem("email_gid"),employee_gid:null,employee_name:null},a="api/IasnTrnWorkItem/AssignTo";l.post(a,t).then(function(e){unlockUI(),1==e.data.status?(_(),u.swal("Work Item Moved to Your Bin Successfully!")):s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})}else u.swal("Error Occured")})},t.assignto_change=function(e){var t={email_gid:localStorage.getItem("email_gid"),employee_gid:e,employee_name:$("#assign_to :selected").text()},a="api/IasnTrnWorkItem/AssignTo";l.post(a,t).then(function(e){(e.data.status=!0)?s.alert(e.data.message,"success"):s.alert(e.data.message,"warning")})},t.updateDesicion=function(){var e,a,o,n;if(void 0==t.txtremarks)return void s.alert("Enter the Remarks","warning");if("Pushback"==t.decision&&(e=t.rmemployee_gid,a=t.rmemployee_name),"Forward"==t.decision){if(void 0==t.forward_to)return void s.alert("Select the forward to person","warning");e=t.forward_to,a=$("#forward_to :selected").text()}if("Archival"==t.decision){if(void 0==t.customer)return void s.alert("Select the Customer","warning");e="",a="",t.mailcontent="No Content"}"Close"==t.decision&&(e="",a="",t.mailcontent="No Content"),void 0==t.customer?(o="",n=""):(o=t.customer,n=$("#customer :selected").text());var r={email_gid:email_gid,decision:"Close",employee_gid:"",employee_name:"",remarks:t.txtremarks,mailcontent:"test",customer_gid:o,customer_name:n,subject:t.pushback_subject,tomail_id:t.tomail_pushback,ccmail_id:t.cc_pushback,bccmail_id:t.bcc_pushback},i="api/IasnTrnWorkItem/PostDecision";lockUI(),l.post(i,r).then(function(e){unlockUI(),1==e.data.status?(s.alert(e.data.message,"success"),_()):s.alert(e.data.message,"warning")})},t.UploadDocCancel=function(e){var a={mailattachment_gid:e},o="api/IasnTrnWorkItem/DeleteAttchment";lockUI(),l.getparams(o,a).then(function(e){if(unlockUI(),1==e.data.status){s.alert("Document deleted Successfully..!!","success");var a="api/IasnTrnWorkItem/MailAttchment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails})}else s.alert("Error Occurred")})},t.decisionchange=function(e){t.all=!0,"Pushback"==e&&(t.pushback=!0,t.forward=!1,t.archival=!1,t.IsVisibleemployee=!1,t.cc_pushback=t.to_mail+";"+t.cc_mail,t.pushback_subject="Pushback : "+t.email_subject,t.lsShowPushbackCC=!0,t.tomail_pushback=t.rmemployee_mailid),
"Forward"==e&&(t.pushback=!1,t.forward=!0,t.archival=!1,t.IsVisibleemployee=!0,t.lsShowPushbackCC=!0,t.tomail_pushback="",t.cc_pushback=t.to_mail+";"+t.cc_mail,t.pushback_subject="Forward : "+t.email_subject),"Close"==e&&(t.pushback=!1,t.forward=!1,t.archival=!1,t.IsVisibleemployee=!1),"Archival"==e&&(t.pushback=!1,t.forward=!1,t.archival=!0,t.IsVisibleemployee=!1)},t.forwardtochange=function(e){var a="api/IasnTrnWorkItem/EmployeeEmailID",o={employee_gid:e};l.getparams(a,o).then(function(e){t.tomail_pushback=e.data.employee_emailid})},t.back=function(){"Workitem"==t.page?a.go("app.iasnTrnMyWorkItemSummary"):"Pushback"==t.page?a.go("app.iasnTrnMyWorkItemPushback"):"Forward"==t.page?a.go("app.iasnTrnMyWorkItemForward"):"Close"==t.page&&a.go("app.iasnTrnMyWorkItemClose")},t.CloseWorkItem=function(){function e(e,a,o,n,r,i,l,s,c,m,u,d,g){a.CloseWIUpdate=function(){var e={email_gid:localStorage.getItem("email_gid"),decision:"Close",employee_gid:"",employee_name:"",remarks:a.close_remarks,mailcontent:"Close",close_acknowledge:a.Acknowledge_mail_trigger,customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},o="api/IasnTrnWorkItem/PostDecision";lockUI(),c.post(o,e).then(function(e){unlockUI(),1==e.data.status?(m.alert(e.data.message,"success"),t.close("closed")):(m.alert(e.data.message,"warning"),t.close("closed")),n.go("app.iasnTrnMyWorkItemSummary")})},a.close=function(){t.close("closed")}}var t=n.open({templateUrl:"/closeWIContent.html",controller:e,size:"md"});e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.signature=function(){function e(e,t){var a="api/IasnTrnEmailSignature/GetEmailSignature";l.get(a).then(function(t){e.EmailSignature=t.data.emailsignature}),e.ok=function(){t.close("closed")},e.close=function(){t.close("closed")},e.submit=function(){lockUI();var a={emailsignature:e.EmailSignature},o="api/IasnTrnEmailSignature/PostEmailSignature";l.post(o,a).then(function(e){unlockUI(),1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),t.close("closed")):(s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}n.open({templateUrl:"/signatureContent.html",controller:e,size:"lg"});e.$inject=["$scope","$modalInstance"]},t.archivalWI=function(){function e(e,a,o,n,r,i,l,s,c,m,u,d,g){a.onclickspecific=function(){a.PnlSpecific=!0,a.customer="",a.cbosanctionrefno=""},a.onclickcustomer=function(){a.PnlSpecific=!1,a.customer=""},a.complete=function(e){if(e.length>=3){a.message="";var t="api/customer/ExploreCustomer",o={customername:e};c.getparams(t,o).then(function(e){1==e.data.status?(a.message="",a.customer_list=e.data.Customers):(a.customer="",a.message="No Records")})}else a.customer_list=null,a.message="Type atleast three character"},a.fillTextbox=function(e,t){a.customer=t,a.customer_gid=e,a.customer_list=null;var o={customer_gid:e},n="api/loan/customer_getheads";c.getparams(n,o).then(function(e){a.sanctiondtl=e.data.sanctiondtl})},a.close=function(){t.close("closed")},a.ArchivalSubmit=function(){var e,o=[],r="",i="";if(e=localStorage.getItem("email_gid"),o.push(e),"Specific"==a.archival.types_of_archival){if(void 0==a.cbosanctionrefno)return t.close("closed"),void m.alert("Select the Sanction Ref No.","warning");r=$("#sanction :selected").text(),i=a.cbosanctionrefno.sanction_Gid}var l={email_gid:o,archival_type:a.archival.types_of_archival,remarks:a.archival.Remarks,customer_gid:a.customer_gid,customer_name:a.customer,sanctionref_no:r,sanction_gid:i},s="api/IasnTrnWorkItem/PostArchival";lockUI(),c.post(s,l).then(function(e){unlockUI(),1==e.data.status?(t.close("closed"),m.alert(e.data.message,"success")):(t.close("closed"),m.alert(e.data.message)),n.go("app.iasnTrnMyWorkItemSummary")})}}var t=n.open({templateUrl:"/archivalContent.html",controller:e,size:"md"});e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.trustAsHtml=function(e){return p.trustAsHtml(e)},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page",t.page):localStorage.setItem("page","myworkitem"),a.go("app.iasnWomMergeWorkItem")}}angular.module("angle").controller("iasnTrnMyWorkItem360",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){t.assignto_team=!1,t.assignto_employee=!1,t.total=100,t.totalDisplayed=0,void 0==t.page&&localStorage.setItem("page","iasnTrnMyWorkItemSummary"),t.page=localStorage.getItem("page");var e="api/IasnTrnMyWorkItem/MyWorkItemCounts";l.get(e).then(function(e){t.count_myworkitempending=e.data.count_myworkitempending,t.count_myworkitempushback=e.data.count_myworkitempushback,t.count_myworkitemforward=e.data.count_myworkitemforward,t.count_myworkitemclose=e.data.count_myworkitemclose});var e="api/IasnTrnMyWorkItem/Close";l.get(e).then(function(e){unlockUI(),t.close_list=e.data.MdlWorkItem,null==t.close_list?(t.total=0,t.totalDisplayed=0):(t.total=t.close_list.length,t.close_list.length<100&&(t.totalDisplayed=t.close_list.length))})}var _=this;_.title="iasnTrnMyWorkItemClose",p(),lockUI(),t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})},t.WorkItem360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnMyWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page&&localStorage.setItem("page","MyWorkItemSummary"),localStorage.setItem("page","Close"),a.go("app.iasnTrnMyWorkItem360")},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page","MyWorkItemSummarypage"):localStorage.setItem("page","MyWorkItemSummarypage"),a.go("app.iasnWomMergeWorkItem")},t.TransferWorkItem=function(e,t,a,o,r,i){function l(n,l,c,m,u,d,g,_,f,I,k,h,S){l.workitemref_no=t,l.subject=o,l.from=a,l.zone_name=r,l.checkeremployee_name=i;var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){l.employee_list=e.data.MdlIsnEmployee});var v={lsemail_gid:e},y="api/IasnTrnWorkItem/TransferLog";f.getparams(y,v).then(function(e){1==e.data.status?(l.transferlog_list=e.data.MdlTransferLog,l.showtransfer=!0):l.showtransfer=!1}),l.close=function(){s.close("closed")},l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),zone_gid:"",zone_name:"",zone_flag:"Y"},a="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?I.alert(e.data.message,"success"):I.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/transferWIContent.html",controller:l,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.CloseWorkItem=function(e,t,a,o,r){function i(n,r,i,s,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:r.close_remarks,close_acknowledge:r.Acknowledge_mail_trigger,mailcontent:"Close",customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/IasnTrnWorkItem/PostDecision";lockUI(),g.post(a,t).then(function(e){unlockUI(),1==e.data.status?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),l.close("closed"),p()})},r.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeWIContent.html",controller:i,size:"md"});i.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.Pushback=function(){a.go("app.iasnTrnMyWorkItemPushback")},t.Forward=function(){a.go("app.iasnTrnMyWorkItemForward")},t.Close=function(){a.go("app.iasnTrnMyWorkItemClose")},t.WorkItem=function(){a.go("app.iasnTrnMyWorkItemSummary")}}angular.module("angle").controller("iasnTrnMyWorkItemClose",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){t.assignto_team=!1,t.assignto_employee=!1,t.total=100,t.totalDisplayed=0,void 0==t.page&&localStorage.setItem("page","iasnTrnMyWorkItemSummary"),t.page=localStorage.getItem("page");var e="api/IasnTrnMyWorkItem/MyWorkItemCounts";l.get(e).then(function(e){t.count_myworkitempending=e.data.count_myworkitempending,t.count_myworkitempushback=e.data.count_myworkitempushback,t.count_myworkitemforward=e.data.count_myworkitemforward,t.count_myworkitemclose=e.data.count_myworkitemclose});var e="api/IasnTrnMyWorkItem/Forward";l.get(e).then(function(e){unlockUI(),t.forward_list=e.data.MdlWorkItem,null==t.forward_list?(t.total=0,t.totalDisplayed=0):(t.total=t.forward_list.length,t.forward_list.length<100&&(t.totalDisplayed=t.forward_list.length))})}var _=this;_.title="iasnTrnMyWorkItemForward",p(),lockUI(),t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})},t.WorkItem360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnMyWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page&&localStorage.setItem("page","MyWorkItemSummary"),localStorage.setItem("page","Forward"),a.go("app.iasnTrnMyWorkItem360")},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page","MyWorkItemSummarypage"):localStorage.setItem("page","MyWorkItemSummarypage"),a.go("app.iasnWomMergeWorkItem")},t.TransferWorkItem=function(e,t,a,o,r,i){function l(n,l,c,m,u,d,g,_,f,I,k,h,S){l.workitemref_no=t,l.subject=o,l.from=a,l.zone_name=r,l.checkeremployee_name=i;var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){l.employee_list=e.data.MdlIsnEmployee});var v={lsemail_gid:e},y="api/IasnTrnWorkItem/TransferLog";f.getparams(y,v).then(function(e){1==e.data.status?(l.transferlog_list=e.data.MdlTransferLog,l.showtransfer=!0):l.showtransfer=!1}),l.close=function(){s.close("closed")},l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),zone_gid:"",zone_name:"",zone_flag:"Y"},a="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?I.alert(e.data.message,"success"):I.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/transferWIContent.html",controller:l,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.CloseWorkItem=function(e,t,a,o,r){function i(n,r,i,s,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:r.close_remarks,close_acknowledge:r.Acknowledge_mail_trigger,mailcontent:"Close",customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/IasnTrnWorkItem/PostDecision";lockUI(),g.post(a,t).then(function(e){unlockUI(),1==e.data.status?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),l.close("closed"),p()})},r.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeWIContent.html",controller:i,size:"md"});i.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.Pushback=function(){a.go("app.iasnTrnMyWorkItemPushback")},t.Forward=function(){a.go("app.iasnTrnMyWorkItemForward")},t.Close=function(){a.go("app.iasnTrnMyWorkItemClose")},t.WorkItem=function(){a.go("app.iasnTrnMyWorkItemSummary")}}angular.module("angle").controller("iasnTrnMyWorkItemForward",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){t.assignto_team=!1,t.assignto_employee=!1,t.total=100,t.totalDisplayed=0,void 0==t.page&&localStorage.setItem("page","iasnTrnMyWorkItemSummary"),t.page=localStorage.getItem("page");var e="api/IasnTrnMyWorkItem/MyWorkItemCounts";l.get(e).then(function(e){t.count_myworkitempending=e.data.count_myworkitempending,t.count_myworkitempushback=e.data.count_myworkitempushback,t.count_myworkitemforward=e.data.count_myworkitemforward,t.count_myworkitemclose=e.data.count_myworkitemclose});var e="api/IasnTrnMyWorkItem/Pushback";l.get(e).then(function(e){unlockUI(),t.pushback_list=e.data.MdlWorkItem,null==t.pushback_list?(t.total=0,t.totalDisplayed=0):(t.total=t.pushback_list.length,t.pushback_list.length<100&&(t.totalDisplayed=t.pushback_list.length))})}var _=this;_.title="iasnTrnMyWorkItemPushback",p(),lockUI(),t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})},t.Close=function(){var e="api/IasnTrnMyWorkItem/Close";l.get(e).then(function(e){t.close_list=e.data.MdlWorkItem,null==t.close_list?(t.total=0,t.totalDisplayed=0):(t.total=t.close_list.length,t.close_list.length<100&&(t.totalDisplayed=t.close_list.length))})},t.WorkItem360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnMyWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page&&localStorage.setItem("page","MyWorkItemSummary"),localStorage.setItem("page","Pushback"),a.go("app.iasnTrnMyWorkItem360")},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page","MyWorkItemSummarypage"):localStorage.setItem("page","MyWorkItemSummarypage"),a.go("app.iasnWomMergeWorkItem")},t.TransferWorkItem=function(e,t,a,o,r,i){function l(n,l,c,m,u,d,g,_,f,I,k,h,S){l.workitemref_no=t,l.subject=o,l.from=a,l.zone_name=r,l.checkeremployee_name=i;var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){l.employee_list=e.data.MdlIsnEmployee});var v={lsemail_gid:e},y="api/IasnTrnWorkItem/TransferLog";f.getparams(y,v).then(function(e){1==e.data.status?(l.transferlog_list=e.data.MdlTransferLog,l.showtransfer=!0):l.showtransfer=!1}),l.close=function(){s.close("closed")},l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),zone_gid:"",zone_name:"",zone_flag:"Y"},a="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?I.alert(e.data.message,"success"):I.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/transferWIContent.html",controller:l,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.CloseWorkItem=function(e,t,a,o,r){function i(n,r,i,s,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:r.close_remarks,close_acknowledge:r.Acknowledge_mail_trigger,mailcontent:"Close",customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/IasnTrnWorkItem/PostDecision";lockUI(),g.post(a,t).then(function(e){unlockUI(),1==e.data.status?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),l.close("closed"),p()})},r.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeWIContent.html",controller:i,size:"md"});i.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.Pushback=function(){a.go("app.iasnTrnMyWorkItemPushback")},t.Forward=function(){a.go("app.iasnTrnMyWorkItemForward")},t.Close=function(){a.go("app.iasnTrnMyWorkItemClose")},t.WorkItem=function(){a.go("app.iasnTrnMyWorkItemSummary")}}angular.module("angle").controller("iasnTrnMyWorkItemPushback",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){t.assignto_team=!1,t.assignto_employee=!1,t.total=100,t.totalDisplayed=0,void 0==t.page&&localStorage.setItem("page","iasnTrnMyWorkItemSummary"),t.page=localStorage.getItem("page");var e="api/IasnTrnMyWorkItem/MyWorkItemCounts";l.get(e).then(function(e){t.count_myworkitempending=e.data.count_myworkitempending,t.count_myworkitempushback=e.data.count_myworkitempushback,t.count_myworkitemforward=e.data.count_myworkitemforward,t.count_myworkitemclose=e.data.count_myworkitemclose});var e="api/IasnTrnMyWorkItem/Pending";l.get(e).then(function(e){unlockUI(),t.Pending_list=e.data.MdlWorkItem,null==t.Pending_list?(t.total=0,t.totalDisplayed=0):(t.total=t.Pending_list.length,t.Pending_list.length<100&&(t.totalDisplayed=t.Pending_list.length))})}var _=this;_.title="iasnTrnMyWorkItemSummary",p(),lockUI(),t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})},t.WorkItem360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnMyWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page&&localStorage.setItem("page","MyWorkItemSummary"),localStorage.setItem("page","Workitem"),a.go("app.iasnTrnMyWorkItem360")},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page","MyWorkItemSummarypage"):localStorage.setItem("page","MyWorkItemSummarypage"),a.go("app.iasnWomMergeWorkItem")},t.TransferWorkItem=function(e,t,a,o,r,i){function l(n,l,c,m,u,d,g,_,f,I,k,h,S){l.workitemref_no=t,l.subject=o,l.from=a,l.zone_name=r,l.checkeremployee_name=i;var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){l.employee_list=e.data.MdlIsnEmployee});var v={lsemail_gid:e},y="api/IasnTrnWorkItem/TransferLog";f.getparams(y,v).then(function(e){1==e.data.status?(l.transferlog_list=e.data.MdlTransferLog,l.showtransfer=!0):l.showtransfer=!1}),l.close=function(){s.close("closed")},l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),zone_gid:"",zone_name:"",zone_flag:"Y"},a="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?I.alert(e.data.message,"success"):I.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/transferWIContent.html",controller:l,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.CloseWorkItem=function(e,t,a,o,r){function i(n,r,i,s,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:r.close_remarks,close_acknowledge:r.Acknowledge_mail_trigger,mailcontent:"Close",customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/IasnTrnWorkItem/PostDecision";lockUI(),g.post(a,t).then(function(e){unlockUI(),1==e.data.status?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),l.close("closed"),p()})},r.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeWIContent.html",controller:i,size:"md"});i.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.Pushback=function(){a.go("app.iasnTrnMyWorkItemPushback")},t.Forward=function(){a.go("app.iasnTrnMyWorkItemForward")},t.Close=function(){a.go("app.iasnTrnMyWorkItemClose")},t.WorkItem=function(){a.go("app.iasnTrnMyWorkItemSummary")}}angular.module("angle").controller("iasnTrnMyWorkItemSummary",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){lockUI(),t.assignto_team=!1,t.assignto_employee=!1,t.total=0,t.totalDisplayed=100,void 0==t.page&&localStorage.setItem("page","workitemsummary"),t.page=localStorage.getItem("page");var e="api/IasnTrnWorkItem/WorkItemCounts";l.get(e).then(function(e){t.count_workitempending=e.data.count_workitempending,t.count_workitemassigned=e.data.count_workitemassigned,t.count_pushback=e.data.count_pushback,t.count_forward=e.data.count_forward,t.count_close=e.data.count_close,t.count_archival=e.data.count_archival,t.count_composemail=e.data.count_composemail});var e="api/IasnTrnWorkItem/WorkItemPendingSummary";l.get(e).then(function(e){t.WorkItemPending_List=e.data.MdlWorkItem,null==t.WorkItemPending_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPending_List.length,t.WorkItemPending_List.length<100&&(t.totalDisplayed=t.WorkItemPending_List.length))});var e="api/IasnTrnWorkItem/WorkItemPushbackSummary";l.get(e).then(function(e){t.WorkItemPushback_List=e.data.MdlWorkItem,unlockUI(),null==t.WorkItemPushback_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPushback_List.length,t.WorkItemPushback_List.length<100&&(t.totalDisplayed=t.WorkItemPushback_List.length))})}var _=this;_.title="iasnTrnPushbackSummary",p(),t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})},t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(0!=t.total){if(!(e<t.total))return unlockUI(),void s.alert(" Total Summary "+t.total+" Records Only","warning");t.totalDisplayed+=a,t.total<t.totalDisplayed&&(t.totalDisplayed=t.total,s.alert(" Total Summary "+t.total+" Records Only","warning")),unlockUI()}unlockUI()},t.WorkItem360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),localStorage.setItem("page","Pushback"),a.go("app.iasnTrnWorkItem360")},t.WorkItemAllotted360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),a.go("app.iasnTrnWorkItemAllotted360")},t.Allotted=function(){var e="api/IasnTrnWorkItem/WorkItemSummary";l.get(e).then(function(e){t.WorkItemAllotted_List=e.data.MdlWorkItem,null==t.WorkItemAllotted_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemAllotted_List.length,t.WorkItemAllotted_List.length<100&&(t.totalDisplayed=t.WorkItemAllotted_List.length))})},t.WorkItem=function(){var e="api/IasnTrnWorkItem/WorkItemPendingSummary";l.get(e).then(function(e){t.WorkItemPending_List=e.data.MdlWorkItem,null==t.WorkItemPending_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPending_List.length,t.WorkItemPending_List.length<100&&(t.totalDisplayed=t.WorkItemPending_List.length))})},t.Forward=function(){var e="api/IasnTrnWorkItem/WorkItemForwardSummary";l.get(e).then(function(e){t.WorkItemForward_List=e.data.MdlWorkItem,null==t.WorkItemForward_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemForward_List.length,t.WorkItemForward_List.length<100&&(t.totalDisplayed=t.WorkItemForward_List.length))})},t.CloseTab=function(){var e="api/IasnTrnWorkItem/WorkItemCloseSummary";l.get(e).then(function(e){t.WorkItemClose_List=e.data.MdlWorkItem,null==t.WorkItemClose_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemClose_List.length,t.WorkItemClose_List.length<100&&(t.totalDisplayed=t.WorkItemClose_List.length))})},t.AssignZone=function(e,t,a,o,r,i){function l(n,r,i,l,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.rdb_acks="N";var h="api/IasnMstZone/ZoneSummary";g.get(h).then(function(e){r.zone_list=e.data.MdlZoneSummary});var h="api/IasnTrnWorkItem/IsnEmployee";g.get(h).then(function(e){r.employee_list=e.data.MdlIsnEmployee}),r.close=function(){s.close("closed")},r.AssignToUpdate=function(){var t={email_gid:e,zone_gid:r.zone_name,zone_name:$("#zone_name :selected").text(),zone_flag:r.zone_flag,acknowledgement_flag:r.rdb_acks},a="api/IasnTrnWorkItem/AssignZone";lockUI(),g.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/assignZoneContent.html",controller:l,backdrop:"static",keyboard:!1,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.TransferWorkItem=function(e,t,a,o,r,i){function l(n,l,c,m,u,d,g,_,f,I,k,h,S){l.workitemref_no=t,l.subject=o,l.from=a,l.zone_name=r,l.checkeremployee_name=i;var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){l.employee_list=e.data.MdlIsnEmployee});var v={lsemail_gid:e},y="api/IasnTrnWorkItem/TransferLog";f.getparams(y,v).then(function(e){1==e.data.status?(l.transferlog_list=e.data.MdlTransferLog,l.showtransfer=!0):l.showtransfer=!1}),l.close=function(){s.close("closed")},l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),zone_gid:"",zone_name:"",zone_flag:"Y"},a="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?I.alert(e.data.message,"success"):I.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/transferWIContent.html",controller:l,backdrop:"static",keyboard:!1,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.CloseWorkItem=function(e,t,a,o,r){function i(n,r,i,s,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:r.close_remarks,close_acknowledge:r.Acknowledge_mail_trigger,mailcontent:"Close",customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/IasnTrnWorkItem/PostDecision";lockUI(),g.post(a,t).then(function(e){unlockUI(),1==e.data.status?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),l.close("closed"),p()})},r.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeWIContent.html",controller:i,backdrop:"static",keyboard:!1,size:"md"});i.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page","workitemsummarypage"),a.go("app.iasnWomMergeWorkItem")},t.Alloted=function(){a.go("app.iasnTrnAllotedSummary")},t.Pushback=function(){a.go("app.iasnTrnPushbackSummary")},t.Forward=function(){a.go("app.iasnTrnForwardSummary")},t.Close=function(){a.go("app.iasnTrnCloseSummary")},t.WorkItem=function(){a.go("app.iasnTrnWorkItemSummary")},t.ComposeMail=function(){a.go("app.iasnWomWorkOrderSummary")}}angular.module("angle").controller("iasnTrnPushbackSummary",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p){function _(){t.PnlSpecific=!1,t.IsVisibleteam=!1,t.IsVisibleemployee=!1,t.all=!1,t.archival=!1,t.typeE="",t.IsLogShow=!1,t.email_gid=localStorage.getItem("email_gid"),t.page=localStorage.getItem("page");var e="api/IasnTrnWorkItem/WorkItemView",a={lsemail_gid:localStorage.getItem("email_gid")};l.getparams(e,a).then(function(e){t.email_from=e.data.email_from,t.email_date=e.data.email_date,t.email_subject=e.data.email_subject,t.email_content=e.data.email_content,t.created_date=e.data.created_date,t.cc_mail=e.data.cc,t.bcc_mail=e.data.bcc,t.to_mail=e.data.email_to,t.workitemref_no=e.data.workitemref_no,t.zone_gid=e.data.zone_gid,t.zone_name=e.data.zone_name,t.rmemployee_gid=e.data.rmemployee_gid,t.rmemployee_name=e.data.rmemployee_name,
t.rmemployee_mailid=e.data.email_address,t.checkeremployee_name=e.data.checkeremployee_name,t.attch_list=e.data.MdlAttachmentList,t.allottedby_on=e.data.allottedby_on,t.aging=e.data.aging,t.status=e.data.status,t.archivalremarks=e.data.archivalremarks,t.Mail_Trigger=e.data.Mail_Trigger,t.originalmail_Subject=e.data.originalmail_Subject,t.hold_flag=e.data.hold_flag,t.workitemhold_reason=e.data.workitemhold_reason,t.customer=e.data.customer_name,t.rdbcustomer_type=e.data.customer_type,t.cutomer_type=e.data.customer_type,t.customer_name=e.data.customer_name,"Pending"==e.data.status?(t.pendingcustomer=!0,t.othercustomer=!1):(t.pendingcustomer=!1,t.othercustomer=!0),"New"==e.data.customer_type||"Others"==e.data.customer_type?(t.customerexisting=!1,t.customernew=!0):"Existing"==e.data.customer_type?(t.customerexisting=!0,t.customernew=!1):(t.customerexisting=!1,t.customernew=!1),""==t.archivalremarks||null==t.archivalremarks?t.archiverem=!1:t.archiverem=!0,t.closedremarks=e.data.closedremarks,""==t.closedremarks||null==t.closedremarks?t.closerem=!1:t.closerem=!0,t.updatedby_on=e.data.updatedby_on,t.message_id=e.data.message_id,t.reference_id=e.data.reference_id,null!=e.data.employee_gid&&(t.assign_to=e.data.employee_gid)});var a={email_gid:localStorage.getItem("email_gid")},e="api/IasnTrnWorkItem/ReferenceMail";l.getparams(e,a).then(function(e){1==e.data.status&&(t.referenceMail=e.data.MdlReferenceMail)});var e="api/IasnTrnAuditLog/PostAuditView",a={email_gid:localStorage.getItem("email_gid")};l.getparams(e,a).then(function(e){1==e.data.status})}var f=this;f.title="iasnTrnWorkItem360",_(),t.rdbcustomer_new=function(e){t.customerexisting=!1,t.customernew=!0,t.customer=""},t.rdbcustomer_existing=function(e){t.customerexisting=!0,t.customernew=!1,t.customer=""},t.rdbcustomer_others=function(e){t.customerexisting=!1,t.customernew=!0,t.customer=""},t.complete=function(e){if(e.length>=3){t.message="";var a="api/customer/ExploreCustomer",o={customername:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.message="",t.customer_list=e.data.Customers):t.message="No Records"})}else t.customer_list=null,t.message="Type atleast three character"},t.fillTextbox=function(e,a){t.customer=a,t.customer_gid=e,t.customer_list=null},t.UpdateCustomer=function(){if(""==t.rdbcustomer_type||null==t.rdbcustomer_type||void 0==t.rdbcustomer_type)s.alert("Kindly Select Customer Type","warning");else if(""==t.customer||null==t.customer||void 0==t.customer)s.alert("Kindly Enter Customer Name","warning");else{var e={customer_name:t.customer,customer_gid:t.customer_gid,customer_type:t.rdbcustomer_type,email_gid:t.email_gid},a="api/IasnTrnWorkItem/UpdateCustomer";l.post(a,e).then(function(e){1==e.data.status?(unlockUI(),_(),s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),_(),s.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}))})}},t.back=function(){a.go("app/iasnTrnWorkItemSummary")},t["export"]=function(e,t){var a=e,o=a.split("EMS"),n=o[1].replace("\\","/"),r=window.location.host,i=location.protocol+"//",l=i.concat(r,n),s=document.createElement("a"),c=t.split(".");s.download=c[0];var m=l;s.href=m,s.click()},t.AssignWorkItem=function(e,t,a,o,r,i,l){function s(n,s,m,u,d,g,p,_,f,I,k,h,S){s.workitemref_no=t,s.subject=o,s.from=a,s.originalmail_Subject=l;var y="api/IasnMstZone/ZoneSummary";f.get(y).then(function(e){s.zone_list=e.data.MdlZoneSummary}),void 0==r||""==r?s.zone_flag="N":(s.ddlzone_name=r,s.lblzonename=i,s.zone_flag="Y");var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){s.employee_list=e.data.MdlIsnEmployee}),s.close=function(){c.close("closed")},s.AssignToUpdate=function(){if(void 0==s.ddlassign_to)return c.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:s.ddlassign_to.employee_gid,employee_name:$("#ddlassign_to :selected").text(),zone_gid:s.ddlzone_name,zone_name:$("#ddlzone_name :selected").text(),zone_flag:s.zone_flag,assign_remarks:s.assign_remarks},a="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?(c.close("closed"),I.alert(e.data.message,"success"),"archival"==s.page?u.go("app.iasnTrnArchivalSummary"):u.go("app.iasnTrnWorkItemSummary")):(c.close("closed"),I.alert(e.data.message,"warning"),"archival"==s.page?u.go("app.iasnTrnArchivalSummary"):u.go("app.iasnTrnWorkItemSummary"))})}}var c=n.open({templateUrl:"/assignWIContent.html",controller:s,size:"md",backdrop:"static",keyboard:!1});s.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.logdetails=function(){if(1==t.IsLogShow)t.IsLogShow=!1;else{t.IsLogShow=!0;var e="api/IasnTrnWorkItem/TransferLog",a={lsemail_gid:localStorage.getItem("email_gid")};l.getparams(e,a).then(function(e){1==e.data.status&&(t.transferlog_list=e.data.MdlTransferLog,null==t.transferlog_list?t.transfershow=!0:t.transfershow=!1)});var e="api/IasnTrnAuditLog/AuditLog",a={email_gid:localStorage.getItem("email_gid")};l.getparams(e,a).then(function(e){1==e.data.status&&(t.auditlog_list=e.data.MdlAuditLog)})}},t.logClose=function(){t.IsLogShow=!1},t.TransferWorkItem=function(e,t,a,o,r,i,l){function s(n,r,s,m,u,d,g,p,_,f,I,k,h){r.workitemref_no=t,r.subject=o,r.from=a,r.zone_name=i,r.checkeremployee_name=l;var S="api/IasnTrnWorkItem/IsnEmployee";_.get(S).then(function(e){r.employee_list=e.data.MdlIsnEmployee});var y={lsemail_gid:e},S="api/IasnTrnWorkItem/TransferLog";_.getparams(S,y).then(function(e){1==e.data.status?(r.transferlog_list=e.data.MdlTransferLog,r.showtransfer=!0):r.showtransfer=!1}),r.close=function(){c.close("closed")},r.transferWIUpdate=function(){if(void 0==r.transfer_to)return c.close("closed"),void f.alert("Kindly Select the Assign to Person","warning");var e={email_gid:localStorage.getItem("email_gid"),employee_gid:r.transfer_to,employee_name:$("#transfer_to :selected").text(),zone_gid:"",zone_name:"",zone_flag:"Y"},t="api/IasnTrnWorkItem/AssignTo";lockUI(),_.post(t,e).then(function(e){unlockUI(),(e.data.status=!0)?(c.close("closed"),f.alert(e.data.message,"success"),"archival"==r.page?m.go("app.iasnTrnArchivalSummary"):m.go("app.iasnTrnWorkItemSummary")):(c.close("closed"),f.alert(e.data.message,"warning"),"archival"==r.page?m.go("app.iasnTrnArchivalSummary"):m.go("app.iasnTrnWorkItemSummary"))})}}var c=n.open({templateUrl:"/transferWIContent.html",controller:s,size:"md",backdrop:"static",keyboard:!1});s.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.CloseWorkItem=function(e,t,a,o,r,i){function l(e,n,r,l,c,m,u,d,g,p,_,f,I){n.workitemref_no=t,n.subject=o,n.from=a,n.originalmail_Subject=i,n.CloseWIUpdate=function(){var e={email_gid:localStorage.getItem("email_gid"),decision:"Close",employee_gid:"",employee_name:"",remarks:n.close_remarks,close_acknowledge:n.Acknowledge_mail_trigger,mailcontent:"Close",customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},t="api/IasnTrnWorkItem/PostDecision";lockUI(),g.post(t,e).then(function(e){unlockUI(),1==e.data.status?(s.close("closed"),p.alert(e.data.message,"success"),"archival"==n.page?l.go("app.iasnTrnArchivalSummary"):l.go("app.iasnTrnWorkItemSummary")):(s.close("closed"),p.alert(e.data.message,"warning"),"archival"==n.page?l.go("app.iasnTrnArchivalSummary"):l.go("app.iasnTrnWorkItemSummary"))})},n.close=function(){s.close("closed")}}var s=n.open({templateUrl:"/closeWIContent.html",controller:l,size:"md",backdrop:"static",keyboard:!1});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.uploadattachment=function(e,a,o){var n={name:e[0].name,file:e[0]},r=new FormData;r.append("fileupload",n.file),r.append("file_name",n.name),r.append("project_flag","Default"),t.uploadfrm=r;var i="api/IasnTrnWorkItem/MailAttchment";lockUI(),l.postFile(i,t.uploadfrm).then(function(e){if(unlockUI(),$("#addupload").val(""),t.txtdocument_title="",1==e.data.status){s.alert("Document Uploaded Successfully..!!","success");var a="api/IasnTrnWorkItem/MailAttchment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails})}else s.alert("File Format Not Supported!")})},t.transferto_change=function(e){u.swal({title:"Are you sure?",text:"Do you want to transfer the work item?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes,Transfer it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a={email_gid:localStorage.getItem("email_gid"),employee_gid:e,employee_name:$("#transfer_to :selected").text()},o="api/IasnTrnWorkItem/AssignTo";l.post(o,a).then(function(e){unlockUI(),1==e.data.status?(_(),u.swal("Work Item Transfered Successfully!")):s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})}else u.swal("Error Occured")})},t.trustAsHtml=function(e){return p.trustAsHtml(e)},t.onchangecopy=function(e){u.swal({title:"Are you sure?",text:"Do you want to move the work item to yours bin?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes,Move it!",closeOnConfirm:!1},function(e){if(e){lockUI();var t={email_gid:localStorage.getItem("email_gid"),employee_gid:null,employee_name:null},a="api/IasnTrnWorkItem/AssignTo";l.post(a,t).then(function(e){unlockUI(),1==e.data.status?(_(),u.swal("Work Item Moved to Your Bin Successfully!")):s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})}else u.swal("Error Occured")})},t.assignto_change=function(e){var t={email_gid:localStorage.getItem("email_gid"),employee_gid:e,employee_name:$("#assign_to :selected").text()};lockUI();var a="api/IasnTrnWorkItem/AssignTo";l.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?s.alert(e.data.message,"success"):s.alert(e.data.message,"warning")})},t.updateDesicion=function(){var e,a,o,n;if(void 0==t.txtremarks)return void s.alert("Enter the Remarks","warning");if("Pushback"==t.decision&&(e=t.rmemployee_gid,a=t.rmemployee_name),"Forward"==t.decision){if(void 0==t.forward_to)return void s.alert("Select the forward to person","warning");e=t.forward_to,a=$("#forward_to :selected").text()}if("Archival"==t.decision){if(void 0==t.customer)return void s.alert("Select the Customer","warning");e="",a="",t.mailcontent="No Content"}"Close"==t.decision&&(e="",a="",t.mailcontent="No Content"),void 0==t.customer?(o="",n=""):(o=t.customer,n=$("#customer :selected").text());var r={email_gid:localStorage.getItem("email_gid"),decision:t.decision,employee_gid:e,employee_name:a,remarks:t.txtremarks,mailcontent:"test",customer_gid:o,customer_name:n,subject:t.pushback_subject,tomail_id:t.tomail_pushback,ccmail_id:t.cc_pushback,bccmail_id:t.bcc_pushback},i="api/IasnTrnWorkItem/PostDecision";lockUI(),l.post(i,r).then(function(e){if(unlockUI(),1==e.data.status){s.alert(e.data.message,"success");var a={lsemail_gid:localStorage.getItem("email_gid")},o="api/IasnTrnWorkItem/DecisionHistory";l.getparams(o,a).then(function(e){1==e.data.status&&(t.decisionHistoryList=e.data.MdlDecisionhistory)}),_()}else s.alert(e.data.message,"warning")})},t.UploadDocCancel=function(e){var a={mailattachment_gid:e},o="api/IasnTrnWorkItem/DeleteAttchment";lockUI(),l.getparams(o,a).then(function(e){if(unlockUI(),1==e.data.status){s.alert("Document deleted Successfully..!!","success");var a="api/IasnTrnWorkItem/MailAttchment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails})}else s.alert("Error Occurred")})},t.decisionchange=function(e){t.all=!0,"Pushback"==e&&(t.pushback=!0,t.forward=!1,t.archival=!1,t.IsVisibleemployee=!1,t.cc_pushback=t.to_mail+";"+t.cc_mail,t.pushback_subject="Pushback : "+t.email_subject,t.lsShowPushbackCC=!0,t.tomail_pushback=t.rmemployee_mailid),"Forward"==e&&(t.pushback=!1,t.forward=!0,t.archival=!1,t.IsVisibleemployee=!0,t.lsShowPushbackCC=!0,t.tomail_pushback="",t.cc_pushback=t.to_mail+";"+t.cc_mail,t.pushback_subject="Forward : "+t.email_subject),"Close"==e&&(t.pushback=!1,t.forward=!1,t.archival=!1,t.IsVisibleemployee=!1),"Archival"==e&&(t.pushback=!1,t.forward=!1,t.archival=!0,t.IsVisibleemployee=!1)},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page",t.page):"archival"==t.page?localStorage.setItem("page","archival"):localStorage.setItem("page","workitem"),a.go("app.iasnWomMergeWorkItem")},t.forwardtochange=function(e){var a="api/IasnTrnWorkItem/EmployeeEmailID",o={employee_gid:e};l.getparams(a,o).then(function(e){t.tomail_pushback=e.data.employee_emailid})},t.signature=function(){function e(e,t){var a="api/IasnTrnEmailSignature/GetEmailSignature";l.get(a).then(function(t){e.EmailSignature=t.data.emailsignature}),e.ok=function(){t.close("closed")},e.close=function(){t.close("closed")},e.submit=function(){lockUI();var a={emailsignature:e.EmailSignature},o="api/IasnTrnEmailSignature/PostEmailSignature";l.post(o,a).then(function(e){unlockUI(),1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),t.close("closed")):s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})}}n.open({templateUrl:"/signatureContent.html",controller:e,size:"lg",backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},t.archivalWI=function(){function e(e,a,o,n,r,i,l,s,c,m,u,d,g){a.onclickspecific=function(){a.PnlSpecific=!0,a.customer="",a.cbosanctionrefno=""},a.onclickcustomer=function(){a.PnlSpecific=!1,a.customer=""},a.complete=function(e){if(e.length>=3){a.message="";var t="api/customer/ExploreCustomer",o={customername:e};c.getparams(t,o).then(function(e){1==e.data.status?(a.message="",a.customer_list=e.data.Customers):(a.customer="",a.message="No Records")})}else a.customer_list=null,a.message="Type atleast three character"},a.fillTextbox=function(e,t){a.customer=t,a.customer_gid=e,a.customer_list=null;var o={customer_gid:e},n="api/loan/customer_getheads";c.getparams(n,o).then(function(e){a.sanctiondtl=e.data.sanctiondtl})},a.close=function(){t.close("closed")},a.ArchivalSubmit=function(){var e,o=[],r="",i="";if(e=localStorage.getItem("email_gid"),o.push(e),"Specific"==a.archival.types_of_archival){if(void 0==a.cbosanctionrefno)return t.close("closed"),void m.alert("Select the Sanction Ref No.","warning");r=$("#sanction :selected").text(),i=a.cbosanctionrefno.sanction_Gid}var l={email_gid:o,archival_type:a.archival.types_of_archival,remarks:a.archival.Remarks,customer_gid:a.customer_gid,customer_name:a.customer,sanctionref_no:r,sanction_gid:i},s="api/IasnTrnWorkItem/PostArchival";lockUI(),c.post(s,l).then(function(e){unlockUI(),1==e.data.status?(t.close("closed"),m.alert(e.data.message,"success"),"archival"==a.page?n.go("app.iasnTrnArchivalSummary"):n.go("app.iasnTrnWorkItemSummary")):(t.close("closed"),m.alert(e.data.message),"archival"==a.page?n.go("app.iasnTrnArchivalSummary"):n.go("app.iasnTrnWorkItemSummary"))})}}var t=n.open({templateUrl:"/archivalContent.html",controller:e,size:"md",backdrop:"static",keyboard:!1});e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.pushback=function(){t.ccMail=t.cc_mail,localStorage.setItem("email_gid",localStorage.getItem("email_gid")),localStorage.setItem("toMail",t.rmemployee_mailid),localStorage.setItem("ccMail",t.ccMail),localStorage.setItem("bccMail",t.bcc_mail),localStorage.setItem("email_subject",t.email_subject),localStorage.setItem("message_id",t.message_id),localStorage.setItem("reference_id",t.reference_id),localStorage.setItem("rmemployee_gid",t.rmemployee_gid),localStorage.setItem("rmemployee_name",t.rmemployee_name),localStorage.setItem("originalmail_Subject",t.originalmail_Subject),localStorage.setItem("decision","Pushback"),localStorage.setItem("lspage","workitem"),a.go("app.composeMail")},t.forward=function(){t.ccMail=t.cc_mail,localStorage.setItem("email_gid",localStorage.getItem("email_gid")),localStorage.setItem("toMail",t.rmemployee_mailid),localStorage.setItem("ccMail",t.ccMail),localStorage.setItem("bccMail",t.bcc_mail),localStorage.setItem("email_subject",t.email_subject),localStorage.setItem("message_id",t.message_id),localStorage.setItem("reference_id",t.reference_id),localStorage.setItem("rmemployee_gid",t.rmemployee_gid),localStorage.setItem("rmemployee_name",t.rmemployee_name),localStorage.setItem("originalmail_Subject",t.originalmail_Subject),localStorage.setItem("decision","Forward"),localStorage.setItem("lspage","workitem"),a.go("app.composeMail")},t.back=function(){"Workitem"==t.page?a.go("app.iasnTrnWorkItemSummary"):"Allotted"==t.page?a.go("app.iasnTrnAllotedSummary"):"Pushback"==t.page?a.go("app.iasnTrnPushbackSummary"):"Forward"==t.page?a.go("app.iasnTrnForwardSummary"):"Close"==t.page?a.go("app.iasnTrnCloseSummary"):"Archival"==t.page&&a.go("app.iasnTrnArchivalSummary")},t.forwardNew_Mail=function(e,o,n,r,i){t.ccMail=t.cc_mail,localStorage.setItem("composemail_gid",e),localStorage.setItem("toMail",n),localStorage.setItem("ccMail",r),localStorage.setItem("bccMail",i),localStorage.setItem("email_subject",o),localStorage.setItem("decision","Forward"),localStorage.setItem("lspage","Archival"),a.go("app.iasnTrnForwardMail")},t.archivalNew_Mail=function(e){function t(t,o,n,r,i,l,s,c,m,u,d,g,p){o.onclickspecific=function(){o.PnlSpecific=!0,o.customer="",o.cbosanctionrefno=""},o.onclickcustomer=function(){o.PnlSpecific=!1,o.customer=""},o.complete=function(e){if(e.length>=3){o.message="";var t="api/customer/ExploreCustomer",a={customername:e};m.getparams(t,a).then(function(e){1==e.data.status?(o.message="",o.customer_list=e.data.Customers):(o.customer="",o.message="No Records")})}else o.customer_list=null,o.message="Type atleast three character"},o.fillTextbox=function(e,t){o.customer=t,o.customer_gid=e,o.customer_list=null;var a={customer_gid:e},n="api/loan/customer_getheads";m.getparams(n,a).then(function(e){o.sanctiondtl=e.data.sanctiondtl})},o.close=function(){a.close("closed")},o.ArchivalSubmit=function(){var t="",n="";if("Specific"==o.archival.types_of_archival){if(void 0==o.cbosanctionrefno)return a.close("closed"),void u.alert("Select the Sanction Ref No.","warning");t=$("#sanction :selected").text(),n=o.cbosanctionrefno.sanction_Gid}var i={composemail_gid:e,archival_type:o.archival.types_of_archival,remarks:o.archival.Remarks,customer_gid:o.customer_gid,customer_name:o.customer,sanctionref_no:t,sanction_gid:n,status:"Archival"},l="api/IasnTrnWorkItem/ComposeMailDecision";lockUI(),m.post(l,i).then(function(e){unlockUI(),1==e.data.status?(a.close("closed"),u.alert(e.data.message,"success")):(a.close("closed"),u.alert(e.data.message)),_(),"Archival"==o.page?r.go("app.iasnTrnArchivalSummary"):r.go("app.iasnWomWorkOrderSummary")})}}var a=n.open({templateUrl:"/archivalContent.html",controller:t,size:"md",backdrop:"static",keyboard:!1});t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]}}angular.module("angle").controller("iasnTrnWorkItem360",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p){function _(){t.IsVisibleteam=!1,t.IsVisibleemployee=!1,t.pushback=!1,t.forward=!1,t.all=!1,t.archival=!1,t.typeE="",t.IsLogShow=!1,t.email_gid=localStorage.getItem("email_gid"),t.page=localStorage.getItem("page");var e="api/IasnTrnWorkItem/WorkItemView",a={lsemail_gid:localStorage.getItem("email_gid")};l.getparams(e,a).then(function(e){t.email_from=e.data.email_from,t.email_date=e.data.email_date,t.email_subject=e.data.email_subject,t.email_content=e.data.email_content,t.created_date=e.data.created_date,t.cc_mail=e.data.cc,t.bcc_mail=e.data.bcc,t.to_mail=e.data.email_to,t.workitemref_no=e.data.workitemref_no,t.zone_gid=e.data.zone_gid,t.zone_name=e.data.zone_name,t.rmemployee_gid=e.data.rmemployee_gid,t.rmemployee_name=e.data.rmemployee_name,t.rmemployee_mailid=e.data.email_address,t.checkeremployee_name=e.data.checkeremployee_name,t.attch_list=e.data.MdlAttachmentList,t.allottedby_on=e.data.allottedby_on,t.aging=e.data.aging,t.status=e.data.status,t.archivalremarks=e.data.archivalremarks,t.assigned_remarks=e.data.assigned_remarks,t.originalmail_Subject=e.data.originalmail_Subject,t.hold_flag=e.data.hold_flag,t.workitemhold_reason=e.data.workitemhold_reason,t.customer_name=e.data.customer_name,t.customer_type=e.data.customer_type,""==t.archivalremarks||null==t.archivalremarks?t.archiverem=!1:t.archiverem=!0,t.closedremarks=e.data.closedremarks,""==t.closedremarks||null==t.closedremarks?t.closerem=!1:t.closerem=!0,t.updatedby_on=e.data.updatedby_on,t.message_id=e.data.message_id,t.reference_id=e.data.reference_id,null!=e.data.employee_gid&&(t.assign_to=e.data.employee_gid)});var a={email_gid:localStorage.getItem("email_gid")},e="api/IasnTrnWorkItem/ReferenceMail";l.getparams(e,a).then(function(e){1==e.data.status&&(t.referenceMail=e.data.MdlReferenceMail,console.log(e.data.MdlReferenceMail))});var e="api/IasnTrnAuditLog/PostAuditView",a={email_gid:localStorage.getItem("email_gid")};l.getparams(e,a).then(function(e){1==e.data.status})}var f=this;f.title="iasnTrnWorkItemAllotted360",_(),t["export"]=function(e,t){var a=e,o=a.split("EMS"),n=o[1].replace("\\","/"),r=window.location.host,i=location.protocol+"//",l=i.concat(r,n),s=document.createElement("a"),c=t.split(".");s.download=c[0];var m=l;s.href=m,s.click()},t.AssignWorkItem=function(e,t,a,o,r,i,l){function s(n,s,m,u,d,g,p,_,f,I,k,h,S){s.workitemref_no=t,s.subject=o,s.from=a,s.originalmail_Subject=l;var y="api/IasnMstZone/ZoneSummary";f.get(y).then(function(e){s.zone_list=e.data.MdlZoneSummary}),void 0==r||""==r?s.zone_flag="N":(s.ddlzone_name=r,s.lblzonename=i,s.zone_flag="Y");var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){s.employee_list=e.data.MdlIsnEmployee}),s.close=function(){c.close("closed")},s.AssignToUpdate=function(){if(void 0==s.ddlassign_to)return c.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:s.ddlassign_to.employee_gid,employee_name:$("#ddlassign_to :selected").text(),zone_gid:s.ddlzone_name,zone_name:$("#ddlzone_name :selected").text(),zone_flag:s.zone_flag},a="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?(c.close("closed"),I.alert(e.data.message,"success"),"archival"==s.page?u.go("app.iasnTrnArchivalSummary"):u.go("app.iasnWomWorkOrderSummary")):(c.close("closed"),I.alert(e.data.message,"warning"),"archival"==s.page?u.go("app.iasnTrnArchivalSummary"):u.go("app.iasnWomWorkOrderSummary"))})}}var c=n.open({templateUrl:"/assignWIContent.html",controller:s,size:"md"});s.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.logdetails=function(){if(1==t.IsLogShow)t.IsLogShow=!1;else{t.IsLogShow=!0;var e="api/IasnTrnWorkItem/TransferLog",a={lsemail_gid:localStorage.getItem("email_gid")};l.getparams(e,a).then(function(e){1==e.data.status&&(t.transferlog_list=e.data.MdlTransferLog,null==t.transferlog_list?t.transfershow=!0:t.transfershow=!1)});var e="api/IasnTrnAuditLog/AuditLog",a={email_gid:localStorage.getItem("email_gid")};l.getparams(e,a).then(function(e){1==e.data.status&&(t.auditlog_list=e.data.MdlAuditLog)})}},t.logClose=function(){t.IsLogShow=!1},t.TransferWorkItem=function(e,t,a,o,r,i,l,s){function c(n,r,c,u,d,g,p,_,f,I,k,h,S){r.workitemref_no=t,r.subject=o,r.from=a,r.zone_name=i,r.checkeremployee_name=l,r.originalmail_Subject=s;var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){r.employee_list=e.data.MdlIsnEmployee});var v={lsemail_gid:e},y="api/IasnTrnWorkItem/TransferLog";f.getparams(y,v).then(function(e){1==e.data.status?(r.transferlog_list=e.data.MdlTransferLog,r.showtransfer=!0):r.showtransfer=!1}),r.close=function(){m.close("closed")},r.transferWIUpdate=function(){if(void 0==r.transfer_to)return m.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var e={email_gid:localStorage.getItem("email_gid"),employee_gid:r.transfer_to,employee_name:$("#transfer_to :selected").text(),zone_gid:"",zone_name:"",zone_flag:"Y"},t="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(t,e).then(function(e){unlockUI(),(e.data.status=!0)?(m.close("closed"),I.alert(e.data.message,"success"),"archival"==r.page?u.go("app.iasnTrnArchivalSummary"):u.go("app.iasnWomWorkOrderSummary")):(m.close("closed"),I.alert(e.data.message,"warning"),"archival"==r.page?u.go("app.iasnTrnArchivalSummary"):u.go("app.iasnWomWorkOrderSummary"))})}}var m=n.open({templateUrl:"/transferWIContent.html",controller:c,size:"md"});c.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.CloseWorkItem=function(e,t,a,o,r,i){function l(e,n,r,l,c,m,u,d,g,p,_,f,I){n.workitemref_no=t,n.subject=o,n.from=a,n.originalmail_Subject=i,n.CloseWIUpdate=function(){var e={email_gid:localStorage.getItem("email_gid"),decision:"Close",employee_gid:"",employee_name:"",remarks:n.close_remarks,close_acknowledge:n.Acknowledge_mail_trigger,mailcontent:"Close",customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},t="api/IasnTrnWorkItem/PostDecision";lockUI(),g.post(t,e).then(function(e){unlockUI(),1==e.data.status?(s.close("closed"),p.alert(e.data.message,"success"),"archival"==n.page?l.go("app.iasnTrnArchivalSummary"):l.go("app.iasnWomWorkOrderSummary")):(s.close("closed"),p.alert(e.data.message,"warning"),"archival"==n.page?l.go("app.iasnTrnArchivalSummary"):l.go("app.iasnWomWorkOrderSummary"))})},n.close=function(){s.close("closed")}}var s=n.open({templateUrl:"/closeWIContent.html",controller:l,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.uploadattachment=function(e,a,o){var n={name:e[0].name,file:e[0]},r=new FormData;r.append("fileupload",n.file),r.append("file_name",n.name),r.append("project_flag","Default"),t.uploadfrm=r;var i="api/IasnTrnWorkItem/MailAttchment";lockUI(),l.postFile(i,t.uploadfrm).then(function(e){if(unlockUI(),$("#addupload").val(""),t.txtdocument_title="",console.log(e.data),1==e.data.status){s.alert("Document Uploaded Successfully..!!","success");var a="api/IasnTrnWorkItem/MailAttchment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails})}else s.alert("File Format Not Supported!")})},t.transferto_change=function(e){u.swal({title:"Are you sure?",text:"Do you want to transfer the work item?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes,Transfer it!",closeOnConfirm:!1},function(t){if(t){lockUI();var a={email_gid:localStorage.getItem("email_gid"),employee_gid:e,employee_name:$("#transfer_to :selected").text()},o="api/IasnTrnWorkItem/AssignTo";l.post(o,a).then(function(e){unlockUI(),1==e.data.status?(_(),u.swal("Work Item Transfered Successfully!")):s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})}else u.swal("Error Occured")})},t.trustAsHtml=function(e){return p.trustAsHtml(e)},t.onchangecopy=function(e){u.swal({title:"Are you sure?",text:"Do you want to move the work item to yours bin?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes,Move it!",closeOnConfirm:!1},function(e){if(e){lockUI();var t={email_gid:localStorage.getItem("email_gid"),employee_gid:null,employee_name:null},a="api/IasnTrnWorkItem/AssignTo";l.post(a,t).then(function(e){unlockUI(),1==e.data.status?(_(),u.swal("Work Item Moved to Your Bin Successfully!")):s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})}else u.swal("Error Occured")})},t.assignto_change=function(e){var t={email_gid:localStorage.getItem("email_gid"),employee_gid:e,employee_name:$("#assign_to :selected").text()};lockUI();var a="api/IasnTrnWorkItem/AssignTo";l.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?s.alert(e.data.message,"success"):s.alert(e.data.message,"warning")})},t.updateDesicion=function(){var e,a,o,n;if(void 0==t.txtremarks)return void s.alert("Enter the Remarks","warning");if("Pushback"==t.decision&&(e=t.rmemployee_gid,a=t.rmemployee_name),"Forward"==t.decision){if(void 0==t.forward_to)return void s.alert("Select the forward to person","warning");e=t.forward_to,a=$("#forward_to :selected").text()}if("Archival"==t.decision){if(void 0==t.customer)return void s.alert("Select the Customer","warning");e="",a="",t.mailcontent="No Content"}"Close"==t.decision&&(e="",a="",t.mailcontent="No Content"),void 0==t.customer?(o="",n=""):(o=t.customer,n=$("#customer :selected").text());var r={email_gid:localStorage.getItem("email_gid"),decision:t.decision,employee_gid:e,employee_name:a,remarks:t.txtremarks,mailcontent:"test",customer_gid:o,customer_name:n,subject:t.pushback_subject,tomail_id:t.tomail_pushback,ccmail_id:t.cc_pushback,bccmail_id:t.bcc_pushback};console.log(r);var i="api/IasnTrnWorkItem/PostDecision";lockUI(),l.post(i,r).then(function(e){if(unlockUI(),1==e.data.status){s.alert(e.data.message,"success");var a={lsemail_gid:localStorage.getItem("email_gid")},o="api/IasnTrnWorkItem/DecisionHistory";l.getparams(o,a).then(function(e){1==e.data.status&&(t.decisionHistoryList=e.data.MdlDecisionhistory)}),_()}else s.alert(e.data.message,"warning")})},t.UploadDocCancel=function(e){var a={mailattachment_gid:e},o="api/IasnTrnWorkItem/DeleteAttchment";lockUI(),l.getparams(o,a).then(function(e){if(unlockUI(),1==e.data.status){s.alert("Document deleted Successfully..!!","success");var a="api/IasnTrnWorkItem/MailAttchment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails})}else s.alert("Error Occurred")})},t.decisionchange=function(e){t.all=!0,"Pushback"==e&&(t.pushback=!0,t.forward=!1,t.archival=!1,t.IsVisibleemployee=!1,t.cc_pushback=t.to_mail+";"+t.cc_mail,t.pushback_subject="Pushback : "+t.email_subject,t.lsShowPushbackCC=!0,t.tomail_pushback=t.rmemployee_mailid),"Forward"==e&&(t.pushback=!1,t.forward=!0,t.archival=!1,t.IsVisibleemployee=!0,t.lsShowPushbackCC=!0,t.tomail_pushback="",t.cc_pushback=t.to_mail+";"+t.cc_mail,t.pushback_subject="Forward : "+t.email_subject),"Close"==e&&(t.pushback=!1,t.forward=!1,t.archival=!1,t.IsVisibleemployee=!1),"Archival"==e&&(t.pushback=!1,t.forward=!1,t.archival=!0,t.IsVisibleemployee=!1)},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page",t.page):"archival"==t.page?localStorage.setItem("page","archival"):localStorage.setItem("page","workitem"),a.go("app.iasnWomMergeWorkItem")},t.forwardtochange=function(e){var a="api/IasnTrnWorkItem/EmployeeEmailID",o={employee_gid:e};l.getparams(a,o).then(function(e){t.tomail_pushback=e.data.employee_emailid})},t.signature=function(){function e(e,t){var a="api/IasnTrnEmailSignature/GetEmailSignature";l.get(a).then(function(t){e.EmailSignature=t.data.emailsignature}),e.ok=function(){t.close("closed")},e.close=function(){t.close("closed")},e.submit=function(){lockUI();var a={emailsignature:e.EmailSignature},o="api/IasnTrnEmailSignature/PostEmailSignature";l.post(o,a).then(function(e){unlockUI(),1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),t.close("closed")):s.alert(e.data.message,{
status:"danger",pos:"top-center",timeout:3e3})})}}n.open({templateUrl:"/signatureContent.html",controller:e,size:"lg"});e.$inject=["$scope","$modalInstance"]},t.archivalWI=function(){function e(e,a,o,n,r,i,l,s,c,m,u,d,g){a.complete=function(e){if(e.length>=3){a.message="";var t="api/customer/ExploreCustomer",o={customername:e};c.getparams(t,o).then(function(e){1==e.data.status?(a.message="",a.customer_list=e.data.Customers):(a.customer="",a.message="No Records")})}else a.customer_list=null,a.message="Type atleast three character"},a.fillTextbox=function(e,t){a.customer=t,a.customer_gid=e,a.customer_list=null;var o={customer_gid:e},n="api/loan/customer_getheads";c.getparams(n,o).then(function(e){a.sanctiondtl=e.data.sanctiondtl})},a.close=function(){t.close("closed")},a.ArchivalSubmit=function(){var e,o=[],r="",i="";if(e=localStorage.getItem("email_gid"),o.push(e),"Specific"==a.archival.types_of_archival){if(void 0==a.cbosanctionrefno)return t.close("closed"),void m.alert("Select the Sanction Ref No.","warning");r=$("#sanction :selected").text(),i=a.cbosanctionrefno.sanction_Gid}var l={email_gid:o,archival_type:a.archival.types_of_archival,remarks:a.archival.Remarks,customer_gid:a.customer_gid,customer_name:a.customer,sanctionref_no:r,sanction_gid:i},s="api/IasnTrnWorkItem/PostArchival";lockUI(),c.post(s,l).then(function(e){unlockUI(),1==e.data.status?(t.close("closed"),m.alert(e.data.message,"success"),"archival"==a.page?n.go("app.iasnTrnArchivalSummary"):n.go("app.iasnWomWorkOrderSummary")):(t.close("closed"),m.alert(e.data.message),"archival"==a.page?n.go("app.iasnTrnArchivalSummary"):n.go("app.iasnWomWorkOrderSummary"))})}}var t=n.open({templateUrl:"/archivalContent.html",controller:e,size:"md"});e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.pushback=function(){t.ccMail=t.cc_mail,localStorage.setItem("email_gid",localStorage.getItem("email_gid")),localStorage.setItem("toMail",t.rmemployee_mailid),localStorage.setItem("ccMail",t.ccMail),localStorage.setItem("bccMail",t.bcc_mail),localStorage.setItem("email_subject",t.email_subject),localStorage.setItem("message_id",t.message_id),localStorage.setItem("reference_id",t.reference_id),localStorage.setItem("rmemployee_gid",t.rmemployee_gid),localStorage.setItem("rmemployee_name",t.rmemployee_name),localStorage.setItem("decision","Pushback"),localStorage.setItem("lspage","workitem"),a.go("app.composeMail")},t.forward=function(){t.ccMail=t.cc_mail,localStorage.setItem("email_gid",localStorage.getItem("email_gid")),localStorage.setItem("toMail",t.rmemployee_mailid),localStorage.setItem("ccMail",t.ccMail),localStorage.setItem("bccMail",t.bcc_mail),localStorage.setItem("email_subject",t.email_subject),localStorage.setItem("message_id",t.message_id),localStorage.setItem("reference_id",t.reference_id),localStorage.setItem("rmemployee_gid",t.rmemployee_gid),localStorage.setItem("rmemployee_name",t.rmemployee_name),localStorage.setItem("decision","Forward"),localStorage.setItem("lspage","myworkitem"),a.go("app.composeMail")},t.back=function(){a.go("app.iasnTrnAllotedSummary")}}angular.module("angle").controller("iasnTrnWorkItemAllotted360",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p){function _(){var e="api/IasnTrnWorkItem/Mailtempdelete";l.get(e).then(function(e){});var e="api/IasnTrnEmailSignature/GetEmailSignature";l.get(e).then(function(e){t.pushbackcontent=e.data.emailsignature})}var f=this;f.title="iasnTrnWorkItemMail";t.lsShowBCC=!0,t.lsShowCC=!0,_(),t.sendmail=function(){if(void 0==t.pushbackcontent)return void s.alert("Write the body of the content","success");var e={email_subject:t.email_subject,frommail_id:t.fromMail,tomail_id:t.toMail,ccmail_id:t.ccMail,bccmail_id:t.bcc_mail,mailcontent:t.pushbackcontent},o="api/IasnTrnWorkItem/ComposeMail";lockUI(),l.post(o,e).then(function(e){unlockUI(),1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.go("app.iasnWomWorkOrderSummary")):(s.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),a.go("app.iasnWomWorkOrderSummary"))})},t.uploadattachment=function(){var e=document.getElementById("file");if(e.files.length>0){for(var a=new FormData,o=0;o<=e.files.length-1;o++)a.append(e.files[o].name,e.files[o]),a.append("project_flag","Default"),t.uploadfrm=a;var n="api/IasnTrnWorkItem/ComposeMailAttachment";lockUI(),l.postFile(n,t.uploadfrm).then(function(e){if($("#file").val(""),1==e.data.status){var a="api/IasnTrnWorkItem/GetComposeMailAttachment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails}),s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()}else unlockUI(),s.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})})}else alert("Please select a file.")},t.UploadDocCancel=function(e){var a={composemailattachment_gid:e},o="api/IasnTrnWorkItem/DeleteComposeMailAttachment";lockUI(),l.getparams(o,a).then(function(e){if(1==e.data.status){unlockUI(),s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3});var a="api/IasnTrnWorkItem/GetComposeMailAttachment";l.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails})}else unlockUI(),s.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})})},t.downloads=function(e,t){var a=e,o=a.split("StoryboardAPI"),n=o[1].replace("\\","/"),r=window.location.host,i=location.protocol+"//",l=i.concat(r,n),s=document.createElement("a");t.split(".");s.download=t;var c=l;s.href=c,s.click()}}angular.module("angle").controller("iasnTrnWorkItemMail",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$timeout","$window"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){t.assignto_team=!1,t.assignto_employee=!1,t.total=0,t.totalDisplayed=100,void 0==t.page&&localStorage.setItem("page","workitemsummary"),t.page=localStorage.getItem("page");var e="api/IasnTrnWorkItem/WorkItemCounts";l.get(e).then(function(e){t.count_workitempending=e.data.count_workitempending,t.count_workitemassigned=e.data.count_workitemassigned,t.count_pushback=e.data.count_pushback,t.count_forward=e.data.count_forward,t.count_close=e.data.count_close,t.count_archival=e.data.count_archival,t.count_composemail=e.data.count_composemail});var e="api/IasnTrnWorkItem/WorkItemPendingSummary";l.get(e).then(function(e){unlockUI(),t.WorkItemPending_List=e.data.MdlWorkItem,null==t.WorkItemPending_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPending_List.length,t.WorkItemPending_List.length<100&&(t.totalDisplayed=t.WorkItemPending_List.length))});var e="api/IasnTrnWorkItem/WorkItemSummary";l.get(e).then(function(e){t.WorkItemAllotted_List=e.data.MdlWorkItem,null==t.WorkItemAllotted_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemAllotted_List.length,t.WorkItemAllotted_List.length<100&&(t.totalDisplayed=t.WorkItemAllotted_List.length))});var e="api/IasnTrnWorkItem/WorkItemForwardSummary";l.get(e).then(function(e){t.WorkItemForward_List=e.data.MdlWorkItem,null==t.WorkItemForward_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemForward_List.length,t.WorkItemForward_List.length<100&&(t.totalDisplayed=t.WorkItemForward_List.length))})}var _=this;_.title="iasnTrnWorkItemSummary",p(),lockUI(),t.refresh=function(){lockUI(),p()},t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})},t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(0!=t.total){if(!(e<t.total))return unlockUI(),void s.alert(" Total Summary "+t.total+" Records Only","warning");t.totalDisplayed+=a,t.total<t.totalDisplayed&&(t.totalDisplayed=t.total,s.alert(" Total Summary "+t.total+" Records Only","warning")),unlockUI()}unlockUI()},t.WorkItem360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),localStorage.setItem("page","Workitem"),a.go("app.iasnTrnWorkItem360")},t.WorkItemAllotted360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),a.go("app.iasnTrnWorkItemAllotted360")},t.WorkItem=function(){var e="api/IasnTrnWorkItem/WorkItemPendingSummary";l.get(e).then(function(e){t.WorkItemPending_List=e.data.MdlWorkItem,null==t.WorkItemPending_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPending_List.length,t.WorkItemPending_List.length<100&&(t.totalDisplayed=t.WorkItemPending_List.length))})},t.Pushback=function(){var e="api/IasnTrnWorkItem/WorkItemPushbackSummary";l.get(e).then(function(e){t.WorkItemPushback_List=e.data.MdlWorkItem,null==t.WorkItemPushback_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPushback_List.length,t.WorkItemPushback_List.length<100&&(t.totalDisplayed=t.WorkItemPushback_List.length))})},t.CloseTab=function(){var e="api/IasnTrnWorkItem/WorkItemCloseSummary";l.get(e).then(function(e){t.WorkItemClose_List=e.data.MdlWorkItem,null==t.WorkItemClose_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemClose_List.length,t.WorkItemClose_List.length<100&&(t.totalDisplayed=t.WorkItemClose_List.length))})},t.AssignZone=function(e,t,a,o,r,i){function l(n,r,i,l,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.rdb_acks="N";var h="api/IasnMstZone/ZoneSummary";g.get(h).then(function(e){r.zone_list=e.data.MdlZoneSummary});var h="api/IasnTrnWorkItem/IsnEmployee";g.get(h).then(function(e){r.employee_list=e.data.MdlIsnEmployee}),r.close=function(){s.close("closed")},r.AssignToUpdate=function(){var t={email_gid:e,zone_gid:r.zone_name,zone_name:$("#zone_name :selected").text(),zone_flag:r.zone_flag,acknowledgement_flag:r.rdb_acks},a="api/IasnTrnWorkItem/AssignZone";lockUI(),g.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/assignZoneContent.html",controller:l,backdrop:"static",keyboard:!1,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.TransferWorkItem=function(e,t,a,o,r,i){function l(n,l,c,m,u,d,g,_,f,I,k,h,S){l.workitemref_no=t,l.subject=o,l.from=a,l.zone_name=r,l.checkeremployee_name=i;var y="api/IasnTrnWorkItem/IsnEmployee";f.get(y).then(function(e){l.employee_list=e.data.MdlIsnEmployee});var v={lsemail_gid:e},y="api/IasnTrnWorkItem/TransferLog";f.getparams(y,v).then(function(e){1==e.data.status?(l.transferlog_list=e.data.MdlTransferLog,l.showtransfer=!0):l.showtransfer=!1}),l.close=function(){s.close("closed")},l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void I.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),zone_gid:"",zone_name:"",zone_flag:"Y"},a="api/IasnTrnWorkItem/AssignTo";lockUI(),f.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?I.alert(e.data.message,"success"):I.alert(e.data.message,"warning"),s.close("closed"),p()})}}var s=n.open({templateUrl:"/transferWIContent.html",controller:l,backdrop:"static",keyboard:!1,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.CloseWorkItem=function(e,t,a,o,r){function i(n,r,i,s,c,m,u,d,g,_,f,I,k){r.workitemref_no=t,r.subject=o,r.from=a,r.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:r.close_remarks,close_acknowledge:r.Acknowledge_mail_trigger,mailcontent:"Close",customer_gid:"",customer_name:"",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/IasnTrnWorkItem/PostDecision";lockUI(),g.post(a,t).then(function(e){unlockUI(),1==e.data.status?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),l.close("closed"),p()})},r.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeWIContent.html",controller:i,backdrop:"static",keyboard:!1,size:"md"});i.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.mergeworkitem=function(e,o,n){localStorage.setItem("email_gid",e),localStorage.setItem("email_subject",o),localStorage.setItem("workitemref_no",n),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page","workitemsummarypage"),a.go("app.iasnWomMergeWorkItem")},t.Alloted=function(){a.go("app.iasnTrnAllotedSummary")},t.Pushback=function(){a.go("app.iasnTrnPushbackSummary")},t.Forward=function(){a.go("app.iasnTrnForwardSummary")},t.Close=function(){a.go("app.iasnTrnCloseSummary")},t.WorkItem=function(){a.go("app.iasnTrnWorkItemSummary")},t.ComposeMail=function(){a.go("app.iasnWomWorkOrderSummary")},t.holdworkitem=function(e,t,a,o){function r(n,r){n.email_gid=e,n.workitemref_no=t,n.from=a,n.email_subject=o;var c={lsemail_gid:e,assigned_flag:"N"},m="api/IasnTrnWorkItem/HoldLogDetails";l.getparams(m,c).then(function(e){1==e.data.status?(n.holdlog_list=e.data.MdlholdLog,n.showholdworkitem=!0):n.showholdworkitem=!1}),n.HoldWISubmit=function(){var t={email_gid:e,workitemhold_reason:n.hold_remarks,assigned_flag:"N"},a="api/IasnTrnWorkItem/HoldWorkItem";l.post(a,t).then(function(e){1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),i.close("closed"),p()):(s.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),r.close("closed"))})},n.close=function(){r.close("closed")}}var i=n.open({templateUrl:"/holdworkitempopup.html",controller:r,size:"md",backdrop:"static",keyboard:!1});r.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("iasnTrnWorkItemSummary",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p){function _(){t.page=localStorage.getItem("page"),I=localStorage.getItem("email_gid"),t.email_subject=localStorage.getItem("email_subject"),t.workitemref_no=localStorage.getItem("workitemref_no");var e={email_gid:I},a="api/IasnMergeWorkItem/TaggedWISummary";l.getparams(a,e).then(function(e){t.TaggedWI_List=e.data.MdlWorkItem,null!=t.TaggedWI_List&&(t.count_workitem=t.TaggedWI_List.length,t.Tagtotal=t.TaggedWI_List.length)})}var f=this;f.title="iasnWomMergeWorkItem";var I;_(),t.UnTaggedWI_List=void 0,t.ShowSearch=!1,t.complete_searchrm=function(e){if(e.length>=3){t.rmmessage="";var a="api/IasnMergeWorkItem/WIEmailFromList",o={email_from:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.rmmessage="",t.rm_list=e.data.MdlWISearch):(t.searchrm_name="",t.rmmessage="No Records")})}else t.rm_list=null,t.rmmessage="Type atleast three character"},t.fillTextboxRM=function(e){t.searchrm_name=e,t.rm_list=null},t.complete_searchsubject=function(e){if(e.length>=3){t.subjectmessage="";var a="api/IasnMergeWorkItem/WISubjectList",o={email_subject:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.subjectmessage="",t.subject_list=e.data.MdlWISearch):(t.searchsubject="",t.subjectmessage="No Records")})}else t.subject_list=null,t.subjectmessage="Type atleast three character"},t.fillTextboxSubject=function(e){t.searchsubject=e,t.subject_list=null},t.trustAsHtml=function(e){return p.trustAsHtml(e)},t.SearchWorkItem=function(){lockUI(),t.ShowSearch=!0,void 0==t.searchrm_name&&(t.searchrm_name=""),void 0==t.searchsubject&&(t.searchsubject=""),void 0==t.searchzone_name&&(t.searchzone_name="");var e={email_gid:localStorage.getItem("email_gid"),email_from:t.searchrm_name,email_subject:t.searchsubject,zone_name:t.searchzone_name},a="api/IasnMergeWorkItem/UnTaggedWISummary";l.post(a,e).then(function(e){t.UnTaggedWI_List=e.data.MdlWorkItem,null!=t.UnTaggedWI_List&&(t.count_UnTagworkitem=t.UnTaggedWI_List.length,t.UnTagTotal=t.UnTaggedWI_List.length)}),unlockUI()},t.MergeWorkItem=function(){if(void 0==t.UnTaggedWI_List)return void s.alert("Search the Work Item");var e,a=[];if(angular.forEach(t.UnTaggedWI_List,function(t){1==t.checked&&(e=t.email_gid,a.push(t.email_gid))}),void 0==e)return void s.alert("Select Atleast One Record!");var o={mergeemail_gid:a,email_gid:localStorage.getItem("email_gid")},n="api/IasnMergeWorkItem/WIMerge";lockUI(),l.post(n,o).then(function(e){t.UnTaggedWI_List=null,unlockUI(),_(),1==e.data.status?(t.searchrm_name="",t.searchsubject="",t.searchzone_name="",s.alert(e.data.message,"success")):s.alert(e.data.message,"warning")})},t.complete_searchzone=function(e){if(e.length>=3){t.zonemessage="";var a="api/IasnMergeWorkItem/WIZoneList",o={zone_name:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.zonemessage="",t.zone_list=e.data.MdlWISearch):(t.searchzone_name="",t.zonemessage="No Records")})}else t.zone_list=null,t.zonemessage="Type atleast three character"},t.checkall=function(e){angular.forEach(t.UnTaggedWI_List,function(t){t.checked=e})},t.back=function(){"workitem"==t.page?a.go("app.iasnTrnWorkItem360"):"workitemsummary"==t.page?(localStorage.setItem="workitemsummary",a.go("app.iasnTrnWorkItem360")):"myworkitem"==t.page?a.go("app.iasnTrnMyWorkItem360"):"MyWorkItemSummary"==t.page?(localStorage.setItem="MyWorkItemSummary",a.go("app.iasnTrnMyWorkItem360")):"archival"==t.page?(localStorage.setItem="archival",a.go("app.iasnTrnWorkItem360")):"workitemsummarypage"==t.page?a.go("app.iasnWomWorkOrderSummary"):"MyWorkItemSummarypage"==t.page&&a.go("app.iasnTrnMyWorkItemSummary")},t.fillTextboxZone=function(e){t.searchzone_name=e,t.zone_list=null},t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})},t.WorkItem360=function(e){localStorage.setItem("email_gid",e),a.go("app.iasnTrnWorkItem360")},t.UndoMail=function(e){var t={email_gid:e};u.swal({title:"Are you sure?",text:"Do You Want To Undo the Mail Merge ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Undo it!",closeOnConfirm:!1},function(e){if(e){lockUI();var a="api/IasnMergeWorkItem/WIUndoMerge";l.getparams(a,t).then(function(e){1==e.data.status?(_(),u.swal("Reverted!"),unlockUI()):(s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})}}angular.module("angle").controller("iasnWomMergeWorkItem",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){lockUI(),t.total=0,t.totalDisplayed=100,void 0==t.page&&localStorage.setItem("page","workitemsummary"),t.page=localStorage.getItem("page");var e="api/IasnTrnWorkItem/WorkItemCounts";l.get(e).then(function(e){t.count_workitempending=e.data.count_workitempending,t.count_workitemassigned=e.data.count_workitemassigned,t.count_pushback=e.data.count_pushback,t.count_forward=e.data.count_forward,t.count_close=e.data.count_close,t.count_archival=e.data.count_archival,t.count_composemail=e.data.count_composemail});var e="api/IasnTrnWorkItem/ComposeMailSummary";l.get(e).then(function(e){unlockUI(),t.ComposeMail_List=e.data.MdlWorkItem,null==t.ComposeMail_List?(t.total=0,t.totalDisplayed=0):(t.total=t.ComposeMail_List.length,t.ComposeMail_List.length<100&&(t.totalDisplayed=t.ComposeMail_List.length))})}var _=this;_.title="iasnWomWorkOrderSummary",p(),t.EmployeeProfile=function(e){var a="api/IasnTrnWorkItem/EmployeeProfile",o={employee_gid:e};l.getparams(a,o).then(function(e){1==e.data.status?(t.user_code=e.data.user_code,t.user_name=e.data.user_name,t.user_photo=e.data.user_photo,t.user_designation=e.data.user_designation,t.user_department=e.data.user_department,t.user_mobileno=e.data.user_mobileno):(t.user_code="-",t.user_name="-",t.user_photo="N",t.user_designation="-",t.user_department="-")})},t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(0!=t.total){if(!(e<t.total))return unlockUI(),void s.alert(" Total Summary "+t.total+" Records Only","warning");t.totalDisplayed+=a,t.total<t.totalDisplayed&&(t.totalDisplayed=t.total,s.alert(" Total Summary "+t.total+" Records Only","warning")),unlockUI()}unlockUI()},t.WorkItem360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),a.go("app.iasnTrnWorkItem360")},t.WorkItemAllotted360=function(e){localStorage.setItem("email_gid",e);var o={email_gid:e},n="api/IasnTrnWorkItem/MailSeen";l.getparams(n,o).then(function(e){}),void 0==t.page?localStorage.setItem("page","workitemsummarypage"):localStorage.setItem("page",t.page),a.go("app.iasnTrnWorkItemAllotted360")},t.Allotted=function(){var e="api/IasnTrnWorkItem/WorkItemSummary";l.get(e).then(function(e){t.WorkItemAllotted_List=e.data.MdlWorkItem,null==t.WorkItemAllotted_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemAllotted_List.length,t.WorkItemAllotted_List.length<100&&(t.totalDisplayed=t.WorkItemAllotted_List.length))})},t.WorkItem=function(){var e="api/IasnTrnWorkItem/WorkItemPendingSummary";l.get(e).then(function(e){t.WorkItemPending_List=e.data.MdlWorkItem,null==t.WorkItemPending_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPending_List.length,t.WorkItemPending_List.length<100&&(t.totalDisplayed=t.WorkItemPending_List.length))})},t.Pushback=function(){var e="api/IasnTrnWorkItem/WorkItemPushbackSummary";l.get(e).then(function(e){t.WorkItemPushback_List=e.data.MdlWorkItem,null==t.WorkItemPushback_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemPushback_List.length,t.WorkItemPushback_List.length<100&&(t.totalDisplayed=t.WorkItemPushback_List.length))})},t.Forward=function(){var e="api/IasnTrnWorkItem/WorkItemForwardSummary";l.get(e).then(function(e){t.WorkItemForward_List=e.data.MdlWorkItem,null==t.WorkItemForward_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemForward_List.length,t.WorkItemForward_List.length<100&&(t.totalDisplayed=t.WorkItemForward_List.length))})},t.CloseTab=function(){var e="api/IasnTrnWorkItem/WorkItemCloseSummary";l.get(e).then(function(e){t.WorkItemClose_List=e.data.MdlWorkItem,null==t.WorkItemClose_List?(t.total=0,t.totalDisplayed=0):(t.total=t.WorkItemClose_List.length,t.WorkItemClose_List.length<100&&(t.totalDisplayed=t.WorkItemClose_List.length))})},t.Alloted=function(){a.go("app.iasnTrnAllotedSummary")},t.Pushback=function(){a.go("app.iasnTrnPushbackSummary")},t.Forward=function(){a.go("app.iasnTrnForwardSummary")},t.Close=function(){a.go("app.iasnTrnCloseSummary")},t.WorkItem=function(){a.go("app.iasnTrnWorkItemSummary")},t.composemaildt=function(){a.go("app.iasnTrnWorkItemMail")},t.ComposeMail=function(){a.go("app.iasnWomWorkOrderSummary")},t.archivalWI=function(e){function t(t,o,n,r,i,l,s,c,m,u,d,g,_){o.onclickspecific=function(){o.PnlSpecific=!0,o.customer="",o.cbosanctionrefno=""},o.onclickcustomer=function(){o.PnlSpecific=!1,o.customer=""},o.complete=function(e){if(e.length>=3){o.message="";var t="api/customer/ExploreCustomer",a={customername:e};m.getparams(t,a).then(function(e){1==e.data.status?(o.message="",o.customer_list=e.data.Customers):(o.customer="",o.message="No Records")})}else o.customer_list=null,o.message="Type atleast three character"},o.fillTextbox=function(e,t){o.customer=t,o.customer_gid=e,o.customer_list=null;var a={customer_gid:e},n="api/loan/customer_getheads";m.getparams(n,a).then(function(e){o.sanctiondtl=e.data.sanctiondtl})},o.close=function(){a.close("closed")},o.ArchivalSubmit=function(){var t="",n="";if("Specific"==o.archival.types_of_archival){if(void 0==o.cbosanctionrefno)return a.close("closed"),void u.alert("Select the Sanction Ref No.","warning");t=$("#sanction :selected").text(),n=o.cbosanctionrefno.sanction_Gid}var i={composemail_gid:e,archival_type:o.archival.types_of_archival,remarks:o.archival.Remarks,customer_gid:o.customer_gid,customer_name:o.customer,sanctionref_no:t,sanction_gid:n,status:"Archival"},l="api/IasnTrnWorkItem/ComposeMailDecision";lockUI(),m.post(l,i).then(function(e){unlockUI(),1==e.data.status?(a.close("closed"),u.alert(e.data.message,"success")):(a.close("closed"),u.alert(e.data.message)),p(),r.go("app.iasnWomWorkOrderSummary")})}}var a=n.open({templateUrl:"/archivalContent.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.ComposeMail360=function(e){localStorage.setItem("composemail_gid",e),a.go("app.iasnTrnComposeMail360")},t.forward=function(e,o,n,r,i){t.ccMail=t.cc_mail,localStorage.setItem("composemail_gid",e),localStorage.setItem("toMail",n),localStorage.setItem("ccMail",r),localStorage.setItem("bccMail",i),localStorage.setItem("email_subject",o),localStorage.setItem("decision","Forward"),localStorage.setItem("lspage","composemailsummary"),a.go("app.iasnTrnForwardMail")}}angular.module("angle").controller("iasnWomWorkOrderSummary",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g,p){function _(){t.IsVisibleteam=!1,t.IsVisibleemployee=!1,t.pushback=!1,t.forward=!1,t.all=!1,t.archival=!1,t.typeE="",t.IsLogShow=!1;var e="api/IasnTrnWorkItem/WorkItemView",a={lsemail_gid:t.email_gid};l.getparams(e,a).then(function(e){t.email_from=e.data.email_from,t.email_date=e.data.email_date,t.email_subject=e.data.email_subject,t.email_content=e.data.email_content,t.created_date=e.data.created_date,t.cc_mail=e.data.cc,t.bcc_mail=e.data.bcc,t.to_mail=e.data.email_to,t.workitemref_no=e.data.workitemref_no,t.zone_gid=e.data.zone_gid,t.zone_name=e.data.zone_name,t.rmemployee_gid=e.data.rmemployee_gid,t.rmemployee_name=e.data.rmemployee_name,t.rmemployee_mailid=e.data.rmemployee_mailid,t.checkeremployee_name=e.data.checkeremployee_name,t.attch_list=e.data.MdlAttachmentList,t.allottedby_on=e.data.allottedby_on,t.aging=e.data.aging,t.status=e.data.status,t.archivalremarks=e.data.archivalremarks,""==t.archivalremarks||null==t.archivalremarks?t.archiverem=!1:t.archiverem=!0,t.closedremarks=e.data.closedremarks,""==t.closedremarks||null==t.closedremarks?t.closerem=!1:t.closerem=!0,t.updatedby_on=e.data.updatedby_on,t.message_id=e.data.message_id,t.reference_id=e.data.reference_id,null!=e.data.employee_gid&&(t.assign_to=e.data.employee_gid)});var a={email_gid:t.email_gid},e="api/IasnTrnWorkItem/ReferenceMail";l.getparams(e,a).then(function(e){1==e.data.status&&(t.referenceMail=e.data.MdlReferenceMail)});var e="api/IasnTrnAuditLog/PostAuditView",a={email_gid:t.email_gid};l.getparams(e,a).then(function(e){1==e.data.status})}var f=this;f.title="isanconsolidatedview";var I=c.search().lsemail_gid;t.email_gid=I;var k=c.search().lstab;_(),t["export"]=function(e,t){var a=e,o=a.split("EMS"),n=o[1].replace("\\","/"),r=window.location.host,i=location.protocol+"//",l=i.concat(r,n),s=document.createElement("a"),c=t.split(".");s.download=c[0];var m=l;s.href=m,s.click()},t.logdetails=function(){if(1==t.IsLogShow)t.IsLogShow=!1;else{t.IsLogShow=!0;var e="api/IasnTrnWorkItem/TransferLog",a={lsemail_gid:t.email_gid};l.getparams(e,a).then(function(e){1==e.data.status&&(t.transferlog_list=e.data.MdlTransferLog,null==t.transferlog_list?t.transfershow=!0:t.transfershow=!1)});var e="api/IasnTrnAuditLog/AuditLog",a={email_gid:t.email_gid};l.getparams(e,a).then(function(e){1==e.data.status&&(t.auditlog_list=e.data.MdlAuditLog)})}},t.logClose=function(){t.IsLogShow=!1},t.trustAsHtml=function(e){return p.trustAsHtml(e)},t.forwardtochange=function(e){var a="api/IasnTrnWorkItem/EmployeeEmailID",o={employee_gid:e};l.getparams(a,o).then(function(e){t.tomail_pushback=e.data.employee_emailid})},t.back=function(){"ConsolidatedReport"==k?a.go("app.iasnTrnConsolidatedReport"):a.go("app.iasnConsolidatedWorkItem")}}angular.module("angle").controller("isanconsolidatedview",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce"]}(),function(){"use strict";function e(e,t,a,o,n,r,i,l,s,c,m,u,d,g){function p(){var e={team_gid:localStorage.getItem("team_gid")},a="api/IasnMstTeam/EditTeam";i.getparams(a,e).then(function(e){if(t.TeamCode=e.data.team_code,t.TeamName=e.data.team_name,t.TeamMail=e.data.team_mailid,t.zone=e.data.zonal_name,t.description=e.data.description,t.employee_list=e.data.employee_list,null!=e.data.MdlRmList){t.rmlist=[];for(var a=e.data.MdlRmList.length,o=0;o<a;o++){var n=t.employee_list.map(function(e){return e.employee_gid}).indexOf(e.data.MdlRmList[o].employee_gid);t.rmlist.push(t.employee_list[n])}}if(null!=e.data.MdlCheckerList){var a=e.data.MdlCheckerList.length;t.checkerlist=[];for(var o=0;o<a;o++){var n=t.employee_list.map(function(e){return e.employee_gid}).indexOf(e.data.MdlCheckerList[o].employee_gid);t.checkerlist.push(t.employee_list[n])}}})}var _=this;_.title="iasnMstTeamEdit",p(),t.Update=function(){if(void 0==t.TeamName)return void l.alert("Team Name is Mandatory","warning");if(void 0==t.TeamMail)return void l.alert("Team Mail is Mandatory","warning");if(void 0==t.description)return void l.alert("Description is Mandatory","warning");if(void 0==t.zone)return void l.alert("Zone is Mandatory","warning");if(void 0==t.rmlist)return void l.alert("Kindly select the RM List","warning");if(void 0==t.checkerlist)return void l.alert("Kindly select the Checker List","warning");var e={team_gid:localStorage.getItem("team_gid"),team_name:t.TeamName,description:t.description,zonal_name:t.zone,team_mailid:t.TeamMail,MdlRmList:t.rmlist,MdlCheckerList:t.checkerlist},o="api/IasnMstTeam/UpdateTeam";lockUI(),i.post(o,e).then(function(e){unlockUI(),1==e.data.status?(a.go("app.iasnMstTeamManagement"),l.alert(e.data.message,"success")):l.alert(e.data.message,"warning")})},t.Back=function(){a.go("app.iasnMstTeamManagement")}}angular.module("angle").controller("iasnMstTeamEdit",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout"];
}();