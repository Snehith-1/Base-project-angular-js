<h3>
    View Service Ticket
</h3>
<div ng-controller="viewServicecontroller">
    <div class="panel">
        <div class="panel-body">
            <div class="table-responsive">
                <table datatable="ng" class="row-border hover">
                    <thead>
                        <tr class="bg-primary-light text-white">
                            <th>Ticket Ref no</th>
                            <th>Ticket Date</th>
                            <th>Ticket Raised For</th>
                            <th>Ticket Raised By</th>
                            <th>Ticket Subject</th>
                            <th>Assign Status</th>
                            <th>Approval Status</th>
                            <th>Stage</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="data in viewservice_list">
                            <td title="Ticket Ref no'">{{data.complaint_refno}}</td>
                            <td title="'Ticket Date">{{data.complaint_date}}</td>
                            <td data-title="'Ticket Raised For'">{{data.raisedfor_employee}}</td>
                            <td data-title="'Ticket Raised By'">{{data.raised_by}}</td>
                            <td data-title="'Ticket Subject'">
                                {{data.complaint_title}}
                            </td>
                            <td data-title="'>Assign Status'">{{data.leadstage_name}}</td>
                            <td data-title="'Approval Status'">{{data.status_view}}</td>
                            <td>
                                <div ng-switch="data.leadstage_name">
                                    <a ng-switch-when="Completed" class="btn btn-success" ng-click="btn_closeclick(data.complaint_gid)" style="padding:2px 25px">
                                        <span class="fa fa-close"></span> Close
                                    </a><br />
                                    <a ng-switch-when="Completed" class="btn btn-danger" ng-click="btn_incompleteclick(data.complaint_gid)">
                                        <span class="fa fa-close"></span> Incomplete
                                    </a>
                                    <label ng-switch-when="Closed"><label style="color:red;">Ticket Closed</label></label>
                                </div>

                            </td>
                            <td data-title="'Action'" sortable="'location'">
                                <button ng-click="btn_viewclick(data.complaint_gid)" title="view" class="btn btn-sm">
                                    <span class="fa fa-eye" title="view"></span>
                                </button>
                                <div ng-switch="data.response_new">
                                    <button ng-click="btnviewresponselog(data.complaint_gid)" ng-switch-when="Y" class="btn btn-sm bg-light-blue-A100">
                                        <span class="fa fa-send" title="Response Log"> New</span>
                                    </button>
                                    <button ng-click="btnviewresponselog(data.complaint_gid)" class="btn btn-sm bg-red-300" ng-switch-when="">
                                        <span class="fa fa-send" title="Response Log"></span>
                                    </button>
                                    <button ng-click="btnviewresponselog(data.complaint_gid)" class="btn btn-sm bg-red-300" ng-switch-when="N">
                                        <span class="fa fa-send" title="Response Log"></span>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script type="text/ng-template" id="/myModaledit.html">
        <div class="modal-header bg-green-200 ng-scope">
            <h4 id="myModalLabel" class="modal-title text-center">
                Response Log
            </h4>
        </div>
        <div class="modal-body ng-scope">

            <div class="pd-sm-10">
                <form novalidate="" name="userform2" ng-submit="form.submitForm1()" autocomplete="off" class="form-validate form-horizontal">
                    <div ng-repeat="data in responselog_detailslist">
                        <div ng-switch="data.session_user">
                            <div class="row">

                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div ng-switch-when="Y" style="width:initial">
                                        <div class="bg-light-green-A100">
                                            <span style="color:darkblue">{{data.created_by}}</span>
                                            <p style="width:initial">{{data.response_description}}</p>
                                            <span style="color:red; align-content:flex-end">{{data.created_date}}</span>
                                        </div>
                                        <br />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div ng-switch-when="N" style="width:initial;border-radius:100px;">
                                        <div class="bg-amber-A100">
                                            <span style="color:forestgreen">{{data.created_by}}</span>
                                            <p style="width:initial">{{data.response_description}}</p>
                                            <span style="color:red;">{{data.created_date}}</span>
                                        </div>
                                        <br />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <textarea id="txt_response" name="txt_remarks" rows="4" cols="60" ng-model="txtresponse"
                                  placeholder="Enter Response..." class="form-control" align="left"></textarea>
                    </div>
                    <br />
                    <footer class="text-center">
                        <button id="response_send" class="btn btn-success" ng-click="responseclick()" title="Send"><i class="fa fa-send">&emsp;</i>Send</button>
                        <button id="response_cancel" ng-click="ok()"
                                title="Cancel" class="btn btn-danger">
                            <i class="fa fa-close">&nbsp;&nbsp;</i>Cancel
                        </button>
                    </footer>

                </form>
            </div>
        </div>
    </script>
</div>
