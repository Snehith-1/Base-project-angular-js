!function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d){function u(){t.Warning=!1;var e="api/customer/cMmail";i.get(e).then(function(e){t.txtccmail=e.data.ccmail});var e="api/vertical/vertical";i.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/employee/employee";i.get(e).then(function(e){t.employee_list=e.data.employee_list});var e="api/customer/state";i.get(e).then(function(e){t.state_list=e.data.state_list});var e="api/customer/Getconstitution";i.get(e).then(function(e){t.constitution_list=e.data.constitution_list,console.log(e.data.constitution_list)}),t.txtcountry="India"}var m=this;m.title="addcustomerController",u(),t.urnvalidation=function(){var e={urn:t.txtcustomerurn},a="api/MstCustomerAdd/GetURNInfo";i.getparams(a,e).then(function(e){1==e.data.status?t.Warning=!0:t.Warning=!1})},t.customerback=function(e){a.go("app.customerMaster")},t.customerSubmit=function(){if(void 0==t.customer||null==t.customer||""==t.customer)l.alert("Kindly check the customer","warning");else if("You can't add this Customer. Tag the customer from master."==t.message)l.alert("You can't add this Customer. Tag the customer from master.","warning");else{var e={urn:t.txtcustomerurn},r="api/MstCustomerAdd/GetURNInfo";i.getparams(r,e).then(function(e){if(1==e.data.status)l.alert("Already this URN is in Imported Customer","warning");else{var r=$("#vertical_code :selected").text(),n=$("#zonalHead_name :selected").text(),o=$("#businessHead_name :selected").text(),c=$("#regionalHead_name :selected").text(),s=$("#cluster_manager_name :selected").text(),d=$("#relationshipMgmt_name :selected").text(),m=$("#creditmanager_name :selected").text(),p=$("#statename :selected").text(),g=$("#zonlRM_name :selected").text(),_=$("#riskmanager_name :selected").text(),f=$("#RiskMonitoring_Name :selected").text(),v={vertical_gid:t.vertical,vertical_code:r,customercode:t.txtcustomercode,customername:t.customer,contactperson:t.txtcontactperson,customer_urn:t.txtcustomerurn,contactnumber:t.txtcontactno,mobileno:t.txtmobileno,email:t.txtemail,address1:t.txtaddress1,region:t.txtregion,address2:t.txtaddress2,state_gid:t.state_gid,state:p,postalcode:t.txtpostalcode,country:t.txtcountry,tomail:t.txttomail,ccmail:t.txtccmail,zonalGid:t.zonalHead,businessHeadGid:t.businessHead,regionalHeadGid:t.regionalHead,relationshipMgmtGid:t.relationshipMgmt,clustermanagerGid:t.clustermanager,creditmanagerGid:t.creditmanager,zonal_name:n,businesshead_name:o,regionalhead_name:c,cluster_manager_name:s,relationshipmgmt_name:d,creditmanager_name:m,gst_number:t.gst_number,pan_number:t.pan_number,constitution_name:t.cboconstitution.constitution_name,constitution_gid:t.cboconstitution.constitution_gid,major_corporate:t.txtmajor_corporate,zonal_riskmanagerGID:t.zonalRM_GID,zonal_riskmanagerName:g,risk_managerGID:t.riskmanager_GID,riskmanager_name:_,riskMonitoring_GID:t.RiskMonitoring_GID,riskMonitoring_Name:f},h="api/customer/customerSubmit";lockUI(),i.post(h,v).then(function(e){1==e.data.status?(unlockUI(),u(),a.go("app.customerMaster"),l.alert("Customer Created Successfully..!!","success")):(unlockUI(),l.alert(e.data.message))})}})}},t.complete=function(e){if(e.length>=3){var a="api/customer/CommonCustomer",r={customername:e};i.getparams(a,r).then(function(e){if(1==e.data.status){t.customer_list=e.data.Customers}else null==e.data.message?(t.customer_list=null,t.message=""):(t.customer_list=null,t.message=e.data.message)}),t.message=""}else t.message="",t.customer_list=null},t.fillTextbox=function(e,a){t.customer=a,t.customer_gid=e,t.customer_list=null;var r="api/customer/CommonCustomer",n={customername:a};i.getparams(r,n).then(function(e){0==e.data.status?t.message="":null==e.data.message?(t.customer_list=null,t.message=""):(t.customer_list=null,t.message=e.data.message)})}}angular.module("angle").controller("addcustomerController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u){function m(){t.totalDisplayed=100;var e="api/deferral/cadApprovalSummary";lockUI(),i.get(e).then(function(e){unlockUI(),t.cadApproval_data=e.data.managedeferralSummaryDtls,null==t.cadApproval_data?(t.total=0,t.totalDisplayed=0):(t.total=t.cadApproval_data.length,t.cadApproval_data.length<100&&(t.totalDisplayed=t.cadApproval_data.length))})}var p=this;p.title="cadApprovalcontroller",m(),t.popupApprove=function(e,r,n){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),t.tracking_type=localStorage.setItem("tracking_type",n),a.go("app.defapp")},t.loadMore=function(e){if(void 0==e)return void l.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.cadApproval_data){if(!(e<t.cadApproval_data.length))return unlockUI(),void l.alert(" Total Summary "+t.cadApproval_data.length+" Records Only","warning");t.totalDisplayed+=a,t.cadApproval_data.length<t.totalDisplayed&&(t.totalDisplayed=t.cadApproval_data.length,l.alert(" Total Summary "+t.cadApproval_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.downloads=function(e,t){var a=e,r=a.split("StoryboardAPI"),n=r[1].replace("\\","/"),o=window.location.host,i=location.protocol+"//",l=i.concat(o,n),c=document.createElement("a");t.split(".");c.download=t;var s=l;c.href=s,c.click()},t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"}}angular.module("angle").controller("cadApprovalcontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g){function _(){t.totalDisplayed=100;var e="api/deferral/CheckerApprovalSummary";lockUI(),c.get(e).then(function(e){t.deferral_data=e.data.deferralSummaryDtls,unlockUI(),null==t.deferral_data?(t.total=0,t.totalDisplayed=0):(t.total=t.deferral_data.length,t.deferral_data.length<100&&(t.totalDisplayed=t.deferral_data.length))});var e="api/deferral/UserCode";c.get(e).then(function(e){v=e.data.user_code,"S0537"!=v&&"S0562"!=v&&"S0616"!=v&&"S0448"!=v||(t.user_status="Y")})}var f=this;f.title="checkerApprovalSummaryController";var v,h=0,y=[];_(),t.checkall=function(e){angular.forEach(t.deferral_data,function(t){t.checked=e})},t.bulkVerifyChecker=function(){function e(e,t){e.ok=function(){t.close("closed")},e.RemarksUpdate=function(){var a={deferral_gid:y,deferral_status:"PushBack",checker_remarks:e.checker_remarks};if(void 0!=e.checker_remarks){t.close("closed");var r="api/deferral/CheckerBulkVerify";lockUI(),c.post(r,a).then(function(t){unlockUI(),1==t.data.status?(e.deferral_status="",s.alert("Checker Verification done Successfully!","success")):s.alert("Error While Checker Verification","warning"),_()}),y=[],h=0,$('input[type="checkbox"]:checked').prop("checked",!1),_(),e.deferral_status=""}else t.close("closed"),s.alert("Update Checker Remarks","warning"),y=[],h=0,$('input[type="checkbox"]:checked').prop("checked",!1),_()}}function e(e,t){e.ok=function(){t.close("closed")},e.Update=function(){var a={deferral_gid:y,deferral_status:"Close",approval_remarks:e.approval_remarks,customer_remarks:e.customerremarks};if(void 0!=e.approval_remarks||void 0!=e.customerremarks){t.close("closed");var r="api/deferral/CheckerBulkVerify";lockUI(),c.post(r,a).then(function(t){unlockUI(),1==t.data.status?(e.deferral_status="",s.alert("Checker Verification done Successfully!","success")):s.alert("Error While Checker Verification","warning"),_()}),y=[],h=0,$('input[type="checkbox"]:checked').prop("checked",!1),_(),e.deferral_status=""}else t.close("closed"),s.alert("Update Remarks","warning"),y=[],h=0,$('input[type="checkbox"]:checked').prop("checked",!1),_()}}if(angular.forEach(t.deferral_data,function(e){if(1==e.checked){var t=e.deferral_gid;y.push(t),h+=1}}),0==h)return s.alert("Select Atleast One Deferral!","warning"),!1;if("PushBack"==t.deferral_status){a.open({templateUrl:"/updatecheckerremarks.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"],t.deferral_status=""}else if("Close"==t.deferral_status){a.open({templateUrl:"/updateremarks.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"],t.deferral_status=""}else{var r={deferral_gid:y,deferral_status:t.deferral_status},n="api/deferral/CheckerBulkVerify";lockUI(),c.post(n,r).then(function(e){unlockUI(),1==e.data.status?(s.alert("Checker Verification done Successfully!","success"),t.deferral_status="",_()):(s.alert("Error While Checker Verification","warning"),t.deferral_status=""),_()}),y=[],h=0,$('input[type="checkbox"]:checked').prop("checked",!1),_(),t.deferral_status=""}},t["export"]=function(){if(null==t.deferral_data)return void s.alert("No Records to Export !","warning");angular.forEach(t.deferral_data,function(e){if(1==e.checked){var t=e.deferral_gid;y.push(t)}});var e={deferral_gid:y};lockUI();var a="api/deferral/CheckerExcelExport";c.post(a,e).then(function(e){1==e.data.status?(unlockUI(),g.Downloaddocument(e.data.lspath,e.data.lsname)):(unlockUI(),s.alert("Error Occurred While Export !","success"),_())})},t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.deferral_data){if(!(e<t.deferral_data.length))return unlockUI(),void s.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning");t.totalDisplayed+=a,t.deferral_data.length<t.totalDisplayed&&(t.totalDisplayed=t.deferral_data.length,s.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.verifyChecker=function(e){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),r.go("app.checkerApprovalView")}}angular.module("angle").controller("checkerApprovalSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){_.open=function(e){e.preventDefault(),e.stopPropagation(),_.opened=!0},_.dateOptions={formatYear:"yy",startingDay:1},_.formats=["dd-MM-yyyy"],_.format=_.formats[0],t.deferral_gid=localStorage.getItem("deferral_gid");var e={deferral_gid:t.deferral_gid},a="api/deferral/Getcaddoc";i.getparams(a,e).then(function(e){t.UploadDocumentname=e.data,t.deferrals=e.data.deferralSummaryDtls,t.deferral_gid=e.data.deferral_gid,t.loanref_no=e.data.loanref_no,t.loan_title=e.data.loan_title,t.record_id=e.data.record_id,t.deferral_name=e.data.deferral_name,t.approval_remarks=e.data.remarks,t.customerremarks=e.data.customer_remarks,t.approval_status=e.data.approval_status,t.filename_list=e.data.filename_list,t.customer_name=e.data.customer_name,t.zonal_name=e.data.zonal_name,t.businesshead_name=e.data.businesshead_name,t.rm_name=e.data.rm_name,t.vertical_code=e.data.vertical_code,t.entity_name=e.data.entity_name,t.branch_name=e.data.branch_name,t.customer_code=e.data.customer_code,t.cluster_manager_name=e.data.cluster_manager_name});var a="api/deferral/UserCode";i.get(a).then(function(e){f=e.data.user_code,"S0537"!=f&&"S0562"!=f||(t.user_status="Y")}),t.activeAdd=!1,t.defaultchecker=!0}function g(){var e="api/vertical/vertical";i.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/entity/entity";i.get(e).then(function(e){t.entity_list=e.data.entity_list});var e="api/branch/branch";i.get(e).then(function(e){t.branch_list=e.data.branch_list});var e="api/deferral/deferral";i.get(e).then(function(e){t.deferral_list=e.data.deferral_list});var e="api/covenanttype/getcovenanttype";i.get(e).then(function(e){t.covenanttype_list=e.data.covenanttype_list});var e="api/customer/customer";i.get(e).then(function(e){t.customer_list=e.data.customer_list});var e="api/employee/employee";i.get(e).then(function(e){t.clusterlist=e.data.employee_list,t.businesshead_list=e.data.employee_list,t.relationshiplist=e.data.employee_list,t.zonallist=e.data.employee_list,t.creditlist=e.data.employee_list});var a={deferral_gid:localStorage.getItem("deferral_gid")},e="api/deferral/Getcaddoc";i.getparams(e,a).then(function(e){1==e.data.status&&(t.filename_list=e.data.filename_list)});var a={deferral_gid:localStorage.getItem("deferral_gid")},e="api/deferral/Getdeferraldetails";i.getparams(e,a).then(function(e){t.Getdeferral=e.data,t.branchEdit=e.data.branch_gid,t.entityEdit=e.data.entity_gid,t.customer=e.data.customer_gid,t.customer_name=e.data.customer_name,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.cluster_manager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_name=e.data.creditmanager_gid,t.tracking_type=e.data.tracking_type,t.loanRefNoedit=e.data.loanGID,t.due_dateedit=e.data.due_date,t.due_dateedit=Date.parse(t.due_dateedit),"Covenant"==e.data.tracking_type?(t.showval=!0,t.hideval=!1):(t.showval=!1,t.hideval=!0),t.deferralname=e.data.deferraltype_gid,t.covenanttype=e.data.covenanttype_gid,t.deferralcategoryedit=e.data.deferral_category,t.vertical=e.data.vertical_gid,t.vertical_code=e.data.vertical_code,t.criticallity=e.data.criticallity,t.remarks=e.data.remarks,t.customerremarks=e.data.customerremarks,t.checker_status=e.data.checker_status,t.checker_remarks=e.data.checker_remarks})}var _=this;_.title="checkerApprovalViewController",p();var f;t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"},t.upload=function(e,a,r){var n={name:e[0].name,file:e[0]},o=m.fnCheckValidDocType(e[0].name,"");if(0==o)return l.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;t.deferral_gid=localStorage.getItem("deferral_gid");var c=new FormData;c.append("fileupload",n.file),c.append("file_name",n.name),c.append("document_name",t.documentname),c.append("deferral_gid",t.deferral_gid),c.append("loan_gid",t.loan_gid),c.append("project_flag","Default"),t.uploadfrm=c,document.getElementById("load").style.visibility="visible";var s="api/deferral/UploadcadDocument";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){unlockUI(),t.filename_list=e.data.filename_list,$("#addupload").val(""),1==e.data.status?l.alert("Document Uploaded Successfully..!!","success"):(unlockUI(),l.alert("File Format Not Supported!"));var a={deferral_gid:localStorage.getItem("deferral_gid")},r="api/deferral/Getcaddoc";i.getparams(r,a).then(function(e){1==e.data.status&&(t.filename_list=e.data.filename_list)})})},t.downloads=function(e,t){u.Downloaddocument(e,t)};var v={deferral_gid:localStorage.getItem("deferral_gid")},h="api/deferral/checkerlist";i.getparams(h,v).then(function(e){t.checker_list=e.data.checker_list,null==t.checker_list?t.approval_history=!0:t.approval_history=!1}),t.onselectedchangedeferral=function(e){t.showvalchecker_remarks=!1;var a={deferral:e},r="api/loan/getdeferralcriticallity";i.getparams(r,a).then(function(e){t.MDLcriticallity=e.data,t.criticallity=e.data.criticallity,t.remarks=e.data.comments,t.customerremarks=e.data.comments,t.critical=!0})},t.onselectedchangecovenant=function(e){t.showvalchecker_remarks=!1;var a={covenanttype:e},r="api/loan/getcovenanttypecriticallity";i.getparams(r,a).then(function(e){t.MDLcriticallity=e.data,t.criticallity=e.data.criticallity,t.remarks=e.data.comments,t.customerremarks=e.data.comments,t.critical=!0})},t.btncopy=function(){var e=t.remarks;t.customerremarks=e},t.onselectedchange=function(e){"PushBack"==e?(t.showvalchecker_remarks=!0,t.activeAdd=!1):(t.showvalchecker_remarks=!1,t.activeAdd=!1),"Close"==e?(t.showvalclosed=!0,t.activeAdd=!1):(t.showvalclosed=!1,t.activeAdd=!1),"Approve"==e?(g(),t.activeAdd=!0,t.defaultchecker=!1):(t.activeAdd=!1,t.defaultchecker=!0)},t.deferralback=function(e){a.go("app.checkerApprovalSummary")},t.isShowHide=function(e){"show"==e?(t.showval=!0,t.hideval=!1):"hide"==e?(t.showval=!1,t.hideval=!0):(t.showval=!1,t.hideval=!1)},t.CheckerVerify=function(){if("PushBack"==t.deferral_status){var e={def_gid:t.deferral_gid,deferral_status:t.deferral_status,checker_remarks:t.checker_remarks,approval_remarks:t.approval_remarks,customer_remarks:t.customerremarks};if(void 0==t.checker_remarks||"+"==t.checker_remarks.replace(/ +(?= )/g,"+")||"+"==t.checker_remarks.replace(/\s\s+/g,"+")||"+"==t.checker_remarks.replace("","+")||"+"==t.checker_remarks.replace(/\n/g,"+")||"+"==t.checker_remarks.replace(" ","+"))l.alert("Enter Checker Remarks","warning");else{var r="api/deferral/CheckerVerify";lockUI(),i.post(r,e).then(function(e){unlockUI(),1==e.data.status?(a.go("app.checkerApprovalSummary"),l.alert("Checker Verification done Successfully..!!","success")):l.alert("Error While Checker Verification","warning")})}}else if("Approve"==t.deferral_status){var n,o,c,s,d,u,m,p,g,_,f=t.vertical_code,v=t.entity_list.map(function(e){return e.entity_gid}).indexOf(t.entityEdit);n=v==-1?"":t.entity_list[v].entity_name;var h=t.branch_list.map(function(e){return e.branch_gid}).indexOf(t.branchEdit);o=h==-1?"":t.branch_list[h].branch_name;var y=t.customer_list.map(function(e){return e.customer_gid}).indexOf(t.customer);d=y==-1?"":t.customer_list[y].customername;var k=t.zonallist.map(function(e){return e.employee_gid}).indexOf(t.zonalHead);u=k==-1?"":t.zonallist[k].employee_name;var S=t.businesshead_list.map(function(e){return e.employee_gid}).indexOf(t.businessHead);m=S==-1?"":t.businesshead_list[S].employee_name;var $=t.clusterlist.map(function(e){return e.employee_gid}).indexOf(t.cluster_manager);p=$==-1?"":t.clusterlist[$].employee_name;var D=t.relationshiplist.map(function(e){return e.employee_gid}).indexOf(t.relationshipMgmt);g=D==-1?"":t.relationshiplist[D].employee_name;var b=t.creditlist.map(function(e){return e.employee_gid}).indexOf(t.creditmgmt_name);_=b==-1?"":t.creditlist[b].employee_name;var I=t.deferral_list.map(function(e){return e.deferraltype_gid}).indexOf(t.deferralname);c=I==-1?"":t.deferral_list[I].deferral_name;var U=t.covenanttype_list.map(function(e){return e.covenanttype_gid}).indexOf(t.covenanttype);s=U==-1?"":t.covenanttype_list[U].covenanttype_name,"Covenant"==t.tracking_type?(t.deferralname="",c=""):(t.covenanttype="",s="");var e={deferral_gid:localStorage.getItem("deferral_gid"),def_gid:t.deferral_gid,deferral_status:t.deferral_status,entity_gid:t.entityEdit,entity_name:n,branch_gid:t.branchEdit,branch_name:o,customer_gid:t.customer,customer_name:d,loan_gid:t.loanRefNoedit,zonalhead_gid:t.zonalHead,zonalhead_name:u,businesshead_gid:t.businessHead,businesshead_name:m,clustermgr_gid:t.cluster_manager,clusterhead_name:p,relationmgr_gid:t.relationshipMgmt,relationmgr_name:g,creditmgr_gid:t.creditmgmt_name,creditmgr_name:_,category_gid:t.deferralcategoryedit,tracking_type:t.tracking_type,deferraltype_gid:t.deferralname,deferraltype_name:c,covenanttype_gid:t.covenanttype,covenanttype_name:s,duedate:t.due_dateedit,criticallity:t.criticallity,vertical_code:f,vertical_gid:t.vertical,remarks:t.remarks,customerremarks:t.customerremarks,checker_status:t.checker_status};if("Deferral"==t.tracking_type){if(""==t.deferralname)return void l.alert("Kindly select the deferral","warning")}else if("Covenant"==t.tracking_type&&""==t.covenanttype)return void l.alert("Kindly select the covenant","warning");if(""==t.remarks)return void l.alert("Kindly Enter Internal Remarks","warning");if(""==t.customerremarks)return void l.alert("Kindly Enter Customer Remarks","warning");var r="api/deferral/CheckerVerify";lockUI(),i.post(r,e).then(function(e){unlockUI(),1==e.data.status?(a.go("app.checkerApprovalSummary"),l.alert("Checker Verification done Successfully..!!","success")):l.alert("Error While Checker Verification","warning")})}else{var e={def_gid:t.deferral_gid,deferral_status:t.deferral_status,checker_remarks:t.checker_remarks,approval_remarks:t.approval_remarks,customer_remarks:t.customerremarks},r="api/deferral/CheckerVerify";lockUI(),i.post(r,e).then(function(e){unlockUI(),1==e.data.status?(a.go("app.checkerApprovalSummary"),l.alert("Checker Verification done Successfully..!!","success")):l.alert("Error While Checker Verification","warning")})}}}angular.module("angle").controller("checkerApprovalViewController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){var e="api/collateral/getCollateralSummary";lockUI(),c.get(e).then(function(e){unlockUI(),t.collateral_data=e.data.customercollateral_list})}var k=this;k.title="collateralSummaryController",y(),t.popupcollateral=function(){r.go("app.collateral")},t["delete"]=function(e){var t={collateral_gid:e};n.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){var a="api/collateral/collateralDelete";c.getparams(a,t).then(function(e){1==e.data.status,y()}),n.swal("Deleted Successfully!")}})},t.edit=function(e){t.collateral_gid=localStorage.setItem("collateral_gid",e),r.go("app.editCollateral")}}angular.module("angle").controller("collateralSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){t.totalDisplayed=100;var e="api/covenanttype/getcovenanttype";c.get(e).then(function(e){t.covenant_data=e.data.covenanttype_list,unlockUI(),null==t.covenant_data?(t.total=0,t.totalDisplayed=0):(t.total=t.covenant_data.length,t.covenant_data.length<100&&(t.totalDisplayed=t.covenant_data.length))})}var k=this;k.title="covenantcontroller",y(),t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.covenant_data){if(!(e<t.covenant_data.length))return unlockUI(),void s.alert(" Total Summary "+t.covenant_data.length+" Records Only","warning");t.totalDisplayed+=a,t.covenant_data.length<t.totalDisplayed&&(t.totalDisplayed=t.covenant_data.length,s.alert(" Total Summary "+t.covenant_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.popupcovenenttype=function(){function e(e,t){var a="api/employee/employee";c.get(a).then(function(t){e.employee_list=t.data.employee_list}),e.ok=function(){t.close("closed")},e.covenantSubmit=function(){void 0==e.comments&&(e.comments="");var a={covenanttype_name:e.covenantTypename,covenanttype_code:e.covenantTypecode,criticallity:e.criticality,comments:e.comments},r="api/covenanttype/createcovenanttype";c.post(r,a).then(function(e){1==e.data.status?(t.close("closed"),s.alert("Covenant Type created Successfully..!!",{status:"success",pos:"top-center",timeout:3e3}),y()):(s.alert("Error Occurred ",{status:"warning",pos:"top-right",timeout:3e3}),y())})}}a.open({templateUrl:"/covenanttype.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},t.edit=function(e){function r(t,a){t.covenanttype_gid=localStorage.setItem("covenanttype_gid",e);var r={covenanttype_gid:e},n="api/covenanttype/GetCovenantTypeupdate";c.getparams(n,r).then(function(e){t.covenantTypecodeedit=e.data.covenantTypecodeedit,t.covenantTypenameedit=e.data.covenantTypenameedit,t.criticality=e.data.criticallity,t.commentsEdit=e.data.comments,t.covenantTypegid=e.data.covenanttype_gid}),t.ok=function(){a.close("closed")},t.cancel=function(){a.dismiss("cancel")},t.covenantUpdate=function(){var e={covenanttypenameedit:t.covenantTypenameedit,covenanttypecodeedit:t.covenantTypecodeedit,criticallity:t.criticality,comments:t.commentsEdit,covenanttype_gid:t.covenantTypegid},r="api/covenanttype/covenantTypeUpdate";c.post(r,e).then(function(e){1==e.data.status?(a.close("closed"),s.alert("Covenant Type Updated Successfully..!!",{status:"success",pos:"top-center",timeout:3e3}),y()):(s.alert("Error Occurred ",{status:"warning",pos:"top-right",timeout:3e3}),y())})}}a.open({templateUrl:"/covenantedit.html",controller:r,size:"md"});t.covenanttype_gid=e,r.$inject=["$scope","$modalInstance"]},t["delete"]=function(e){var t={covenanttype_gid:e};n.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){var a="api/covenanttype/covenantTypeDelete";c.getparams(a,t).then(function(e){1==e.data.status?y():(s.alert("Error Occurred !",{status:"warning",pos:"top-right",timeout:3e3}),y())}),n.swal("Deleted Successfully!")}})}}angular.module("angle").controller("covenantcontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u){function m(){var e="api/security/getSecuritytype";l.get(e).then(function(e){t.security_data=e.data.securitytype_list})}var p=this;p.title="createCollateral",m(),t.complete=function(e){if(e.length>=3){t.message="";var a="api/customer/ExploreCustomer",r={customername:e};l.getparams(a,r).then(function(e){1==e.data.status?(t.message="",t.customer_list=e.data.Customers):t.message="No Records"})}else t.customer_list=null,t.message="Type atleast three character"},t.fillTextbox=function(e,a){t.customer=a,t.customer_gid=e,t.customer_list=null;var r={customer_gid:e},n="api/deferral/customer2loan";l.getparams(n,r).then(function(e){t.loan=e.data.loan})},t.onselectedchangecustomer=function(e){var a={customer_gid:e},r="api/deferral/customer2loan";l.getparams(r,a).then(function(e){t.loan=e.data.loan})},t.checkall=function(e){angular.forEach(t.loan,function(t){t.checked=e})},t.collateralSubmit=function(){var e=[];angular.forEach(t.loan,function(t){if(1==t.checked){var a=t.value;e.push(a)}});var r=$("#security_type :selected").text(),n={customer_name:t.customer,customer_gid:t.customer_gid,security_type:r,securitytype_gid:t.security_type,security_description:t.security_description,account_status:t.account_status,loan_gid:e},o="api/collateral/createCollateral";l.post(o,n).then(function(e){1==e.data.status?(unlockUI(),c.alert("Collateral Created Successfully..!!","success"),a.go("app.collateralsummary")):(unlockUI(),c.alert("Select Atleast One Loan"))})},t.back=function(){a.go("app.collateralsummary")}}angular.module("angle").controller("createCollateral",e),e.$inject=["$rootScope","$scope","$state","$modal","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){t.def=!1,t.cov=!1,_.open=function(e){e.preventDefault(),e.stopPropagation(),_.opened=!0},_.dateOptions={formatYear:"yy",startingDay:1},_.formats=["dd-MM-yyyy"],_.format=_.formats[0];var e="api/entity/entity";l.get(e).then(function(e){t.entity_list=e.data.entity_list});var e="api/branch/branch";l.get(e).then(function(e){t.branch_list=e.data.branch_list});var e="api/deferral/deferral";l.get(e).then(function(e){t.deferral_list=e.data.deferral_list});var e="api/covenanttype/getcovenanttype";l.get(e).then(function(e){t.covenanttype_list=e.data.covenanttype_list});var e="api/employee/employee";l.get(e).then(function(e){t.employee_list=e.data.employee_list});var a={deferral_gid:""},e="api/deferral/Getcaddoc";l.getparams(e,a).then(function(e){1==e.data.status&&(t.filename_list=e.data.filename_list)})}var _=this;_.title="createDeferral",g();var f;t.complete=function(e){if(e.length>=3){t.message="";var a="api/customer/ExploreCustomer",r={customername:e};l.getparams(a,r).then(function(e){1==e.data.status?(t.message="",t.customer_list=e.data.Customers):t.message="No Records"})}else t.customer_list=null,t.message="Type atleast three character"},t.fillTextbox=function(e,a){t.customer=a,t.customer_gid=e,t.customer_list=null;var r={customer_gid:e},n="api/deferral/customer2loan";l.getparams(n,r).then(function(e){t.loan=e.data.loan}),t.showcustomer=!0,t.showdetails=!0;var n="api/loan/customer_getheads";l.getparams(n,r).then(function(e){t.mdlheadsofcustomer=e.data,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.clustermanager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_gid=e.data.creditmanager_gid,t.vertical_code=e.data.vertical_code,t.vertical=!0})},t.btncopy=function(){f=t.remarks,t.customerremarks=f},t.onselectedchangecustomer=function(){var e={customer_gid:t.customer_gid},a="api/deferral/customer2loan";l.getparams(a,e).then(function(e){t.loan=e.data.loan}),t.showcustomer=!0,t.showdetails=!0;var a="api/loan/customer_getheads";l.getparams(a,e).then(function(e){t.mdlheadsofcustomer=e.data,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.clustermanager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_gid=e.data.creditmanager_gid,t.vertical_code=e.data.vertical_code,t.vertical=!0})},t.onselectedchangedeferral=function(e){void 0==t.deferralname?(t.MDLcriticallity="",t.criticallity="",t.remarks="",t.customerremarks="",t.critical=!1):(t.MDLcriticallity=t.deferralname,t.criticallity=t.deferralname.criticallity,t.remarks=t.deferralname.comments,t.customerremarks=t.deferralname.comments,t.critical=!0)},t.onselectedchangecovenant=function(e){void 0==t.covenanttype?(t.MDLcriticallity="",t.criticallity="",t.remarks="",t.customerremarks="",t.critical=!1):(t.MDLcriticallity=t.covenanttype,t.criticallity=t.covenanttype.criticallity,t.remarks=t.covenanttype.comments,t.customerremarks=t.covenanttype.comments,t.critical=!0)},t.isShowHide=function(e){"show"==e?(t.def=!1,t.cov=!0,t.showval=!0,t.hideval=!1,t.showdiv=!0):"hide"==e?(t.def=!0,t.cov=!1,t.showval=!1,t.hideval=!0,t.showdiv=!0):(t.showval=!1,t.hideval=!1,t.showdiv=!0)},t.upload=function(e,a,r){var n={name:e[0].name,file:e[0]},o=p.fnCheckValidDocType(e[0].name,"");if(0==o)return c.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var i=new FormData;i.append("fileupload",n.file),i.append("file_name",n.name),i.append("document_name",t.documentname),i.append("deferral_gid",t.deferral_gid),i.append("loan_gid",t.loan_gid),i.append("project_flag","Default"),t.uploadfrm=i;var s="api/deferral/UploadcadDocument";lockUI(),l.postFile(s,t.uploadfrm).then(function(e){if(t.filename_list=e.data.filename_list,$("#addupload").val(""),$("#editupload").val(""),1==e.data.status){unlockUI(),c.alert("Document Uploaded Successfully..!!","success");var a={deferral_gid:t.deferral_gid},r="api/deferral/Getcaddoc";l.getparams(r,a).then(function(e){1==e.data.status&&(t.filename_list=e.data.filename_list)})}else unlockUI(),c.alert("File Format Not Supported!")})},t.downloads=function(e,t){m.Downloaddocument(e,t)},t.deferralback=function(e){a.go("app.DeferralManagement")},t.deferralSubmit=function(){var e,r,n,o;if("Deferral"==t.trackingtype){if(void 0==t.deferralname)return void c.alert("Kindly select the deferral","warning");e=$("#deferralname :selected").text(),r=t.deferralname.deferral_gid,n="",o=""}else if("Covenant"==t.trackingtype){if(void 0==t.covenanttype)return void c.alert("Kindly select the covenant","warning");e="",r="",n=$("#covenanttype_name :selected").text(),o=t.covenanttype.covenanttype_gid}var i=($("#loandata :selected").text(),$("#zonal_name :selected").text()),s=$("#businesshead_name :selected").text(),d=$("#relationshipmgmt_name :selected").text(),u=$("#cluster_manager_name :selected").text(),m=$("#creditmgmt_name :selected").text(),p=$("#entity_name :selected").text(),g=$("#branch_name :selected").text(),_={
entity_gid:t.entity.entity_gid,branch_gid:t.branch.branch_gid,entity_name:p,branch_name:g,customer_gid:t.customer_gid,covenanttype_gid:o,criticallity:t.criticallity,deferraltype_gid:r,loans:t.$parent.loan,record_id:t.record_id,tracking_type:t.trackingtype,vertical_code:t.vertical_code,deferral_name:e,covenanttype_name:n,deferral_gid:r,deferral_category:t.deferralcategory,due_date:t.due_date,sanction_refno:t.sanctionrefno,sanction_date:t.sanctiondate,remarks:t.remarks,customerremarks:t.customerremarks,customer_name:t.customer,zonal_name:i,businesshead_name:s,relationshipmgmt_name:d,cluster_manager_name:u,creditmgmt_name:m,zonalGid:t.zonalHead,businessHeadGid:t.businessHead,relationshipMgmtGid:t.relationshipMgmt,clustermanagerGid:t.clustermanager,creditmanager_gid:t.creditmgmt_gid};if("Deferral"==t.trackingtype)if("Select Deferral"==e)lockUI(),c.alert("Select Deferral!","warning"),unlockUI();else{lockUI();var f="api/deferral/createDeferral";l.post(f,_).then(function(e){1==e.data.status?(unlockUI(),c.alert("Deferral Created Successfully..!!","success"),a.go("app.DeferralManagement")):(unlockUI(),c.alert("Select Atleast One Loan"),a.go("app.createDeferral"))})}else if("Covenant"==t.trackingtype)if("Select Covenant Type"==n)c.alert("Select Covenant Type!","warning");else{lockUI();var f="api/deferral/createDeferral";l.post(f,_).then(function(e){1==e.data.status?(unlockUI(),c.alert("Deferral Created Successfully..!!","success"),a.go("app.DeferralManagement")):(unlockUI(),c.alert("Select Atleast One Loan"),a.go("app.createDeferral"))})}},t.deferralSave=function(){var e,a,r,n,o=($("#loandata :selected").text(),$("#zonal_name :selected").text()),i=$("#businesshead_name :selected").text(),s=$("#relationshipmgmt_name :selected").text(),d=$("#cluster_manager_name :selected").text(),u=$("#creditmgmt_name :selected").text(),m=$("#entity_name :selected").text(),p=$("#branch_name :selected").text();if("Deferral"==t.trackingtype){if(void 0==t.deferralname)return void c.alert("Kindly select the deferral","warning");e=$("#deferralname :selected").text(),a=t.deferralname.deferral_gid,r="",n=""}else if("Covenant"==t.trackingtype){if(void 0==t.covenanttype.covenanttype_name)return void c.alert("Kindly select the covenant","warning");e="",a="",r=$("#covenanttype_name :selected").text(),n=t.covenanttype.covenanttype_gid}var g={entity_gid:t.entity.entity_gid,branch_gid:t.branch.branch_gid,entity_name:m,branch_name:p,customer_gid:t.customer_gid,covenanttype_gid:n,criticallity:t.criticallity,deferraltype_gid:a,loans:t.$parent.loan,record_id:t.record_id,tracking_type:t.trackingtype,vertical_code:t.vertical_code,deferral_name:e,covenanttype_name:r,deferral_gid:a,deferral_category:t.deferralcategory,due_date:t.due_date,sanction_refno:t.sanctionrefno,sanction_date:t.sanctiondate,remarks:t.remarks,customerremarks:t.customerremarks,customer_name:t.customer,zonal_name:o,businesshead_name:i,relationshipmgmt_name:s,cluster_manager_name:d,creditmgmt_name:u,zonalGid:t.zonalHead,businessHeadGid:t.businessHead,relationshipMgmtGid:t.relationshipMgmt,clustermanagerGid:t.clustermanager,creditmanager_gid:t.creditmgmt_gid};lockUI();var _="api/deferral/createDeferral";l.post(_,g).then(function(e){if(1==e.data.status){unlockUI(),c.alert("Deferral Created Successfully..!!","success"),t.deferralcategory="",t.due_date="",t.deferralname="",t.covenanttype="",t.trackingtype="",t.selectedData="",t.remarks="",t.customerremarks="",t.loan=[];var a={customer_gid:t.customer_gid},r="api/deferral/customer2loan";l.getparams(r,a).then(function(e){t.loan=e.data.loan}),t.critical=!1,t.showval=!1,t.hideval=!1,document.getElementById("trackingtype").checked=!1;var a={deferral_gid:""},r="api/deferral/Getcaddoc";l.getparams(r,a).then(function(e){1==e.data.status&&(t.filename_list=e.data.filename_list)})}})}}angular.module("angle").controller("createDeferral",e),e.$inject=["$rootScope","$scope","$state","$modal","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d){function u(){m.open=function(e){e.preventDefault(),e.stopPropagation(),m.opened=!0},m.dateOptions={formatYear:"yy",startingDay:1};var e="api/employee/employee";i.get(e).then(function(e){t.employee_list=e.data.employee_list})}var m=this;m.title="createLoan",u(),t.complete=function(e){if(e.length>=3){t.message="";var a="api/customer/ExploreCustomer",r={customername:e};i.getparams(a,r).then(function(e){1==e.data.status?(t.message="",t.customer_list=e.data.Customers):t.message="No Records"})}else t.customer_list=null,t.message="Type atleast three character"},t.fillTextbox=function(e,a){console.log("string",a),t.customer=a,t.customer_gid=e,t.customer_list=null;var r={customer_gid:e},n="api/loan/customer_getheads";i.getparams(n,r).then(function(e){t.mdlheadsofcustomer=e.data,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.clustermanager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_name=e.data.creditmanager_gid,t.vertical_code=e.data.vertical_code,t.vertical_code=!0,t.sanctiondtl=e.data.sanctiondtl})},t.loanback=function(e){a.go("app.loanManagement")},t.sanctionrefnochange=function(e){var a={sanction_gid:t.cbosanctionrefno.sanction_Gid},r="api/loan/GetSanctionDate";i.getparams(r,a).then(function(e){t.sanctionDate=e.data.sanctiondate,t.Sanction_Date=e.data.Sanction_Date,t.facilitytype=e.data.facility_type,t.facilitytype_gid=e.data.facilitytype_gid});var a={customer2sanction_gid:t.cbosanctionrefno.sanction_Gid},r="api/loan/SanctionLoanFacility";i.getparams(r,a).then(function(e){1==e.data.status&&(t.loan_list=e.data.loanfacility)})},t.loanSubmit=function(){var e=$("#vertical_code :selected").text(),r=$("#facility :selected").text(),n=$("#zonal_name :selected").text(),o=$("#businesshead_name :selected").text(),c=$("#relationshipmgmt_name :selected").text(),s=$("#cluster_manager_name :selected").text(),d=$("#creditmanager_name :selected").text(),m=$("#sanction :selected").text(),p={loanRefNo:t.loanRefNo,loanmaster_gid:t.cbofacility.facility_gid,sanctionGid:t.cbosanctionrefno.sanction_Gid,sanctionRefno:m,sanctionDate:t.Sanction_Date,loanTitle:r,customerGid:t.customer_gid,customer_name:t.customer,vertical_gid:t.vertical,vertical_code:e,zonal_name:n,businesshead_name:o,relationshipmgmt_name:c,cluster_manager_name:s,creditmanager_name:d,zonalGid:t.zonalHead,businessHeadGid:t.businessHead,relationshipMgmtGid:t.relationshipMgmt,clustermanagerGid:t.clustermanager,creditmanager_gid:t.creditmgmt_name},g="api/loan/createLoan";lockUI(),i.post(g,p).then(function(e){1==e.data.status?(unlockUI(),l.alert("Loan Created Successfully..!!","success"),a.go("app.loanManagement")):(unlockUI(),l.alert(e.data.message,"warning")),u()})}}angular.module("angle").controller("createLoan",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){var e="api/customer/CustomerAlert";lockUI(),c.get(e).then(function(e){unlockUI(),t.customerlist=e.data.customer_list,t.customer_list=e.data.customer_list;var a=t.customer_list.length;t.count_customer=a})}var k=this;k.title="customerAlertcontroller",y(),t.deferraldetails=function(e,a){var r={customer_gid:e},n="api/customer/deferraldetails";c.getparams(n,r).then(function(r){t.customer_list[a][e]=r.data.customerdeferral_list})},t.rdGenerate=function(e){t.customer_gid=e,t.customer_gid=localStorage.setItem("customer_gid",e),r.go("app.customerAlertGenerate")},t.mailHistory=function(e){t.customer_gid=e,t.customer_gid=localStorage.setItem("customer_gid",e),t.pageNavigation=localStorage.setItem("mailManagement","CustomerAlert"),r.go("app.customerAlertHistory")},t.onselectedchangecustomer=function(){var e="api/customer/CustomerAlertSearch",a={customer_gid:t.customer.customer_gid};lockUI(),c.getparams(e,a).then(function(e){unlockUI(),null!=e.data.customer_list?t.customer_list=e.data.customer_list:(t.customer="",alert("No Record Found"),y())})},t.refresh=function(){t.customer="",y()}}angular.module("angle").controller("customerAlertcontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){t.customer_gid=localStorage.getItem("customer_gid");var e="api/customer/Getcustomerdetails",a={customer_gid:t.customer_gid};c.getparams(e,a).then(function(e){t.customeredit=e.data});var e="api/customer/deferraldetails";c.getparams(e,a).then(function(e){t.customer_data=e.data.customerdeferral_list,console.log(e.data.customerdeferral_list)});var e="api/template/Content";c.get(e).then(function(e){t.content=e.data.template_content})}var k=this;k.title="customerAlertGeneratecontroller",y(),t.checkall=function(e){angular.forEach(t.customer_data,function(t){t.checked=e})},t.Contentback=function(){r.go("app.customerAlert")},t.ContentSave=function(){var e,a=[];angular.forEach(t.customer_data,function(t){if(1==t.checked){var r=t.deferral_gid;e=t.deferral_gid,a.push(r)}});var n={deferral_gid:a,customer_gid:localStorage.getItem("customer_gid"),template_content:t.content};if(void 0!=e){var o="api/customerAlertGenerate/Generate";lockUI(),c.post(o,n).then(function(e){1==e.data.status?(unlockUI(),s.alert("Template Content Saved Successfully!","success"),r.go("app.customerAlert")):(unlockUI(),s.alert("Oops something went wrong!"))})}else s.alert("Select Atleast One Deferral!")}}angular.module("angle").controller("customerAlertGeneratecontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){t.customer_gid=localStorage.getItem("customer_gid"),t.pageNavigation=localStorage.getItem("mailManagement");var e={customer_gid:t.customer_gid},a="api/customerAlertGenerate/mailHistory";lockUI(),c.getparams(a,e).then(function(e){t.mail_data=e.data.mailhistory_list,unlockUI()})}var k=this;k.title="customerAlertHistorycontroller",y(),t.view=function(e){t.customermail_gid=e,t.customermail_gid=localStorage.setItem("customermail_gid",e),r.go("app.mailHistoryView")},t.back=function(){"mailManagement"==t.pageNavigation?r.go("app.mailManagement"):r.go("app.customerAlert")}}angular.module("angle").controller("customerAlertHistorycontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d){function u(){var e="api/employee/employee";i.get(e).then(function(e){t.employee_list=e.data.employee_list});var e="api/segment/segment";i.get(e).then(function(e){t.segment_list=e.data.segment_list});var e="api/customer/state";i.get(e).then(function(e){t.state_list=e.data.state_list}),t.customer_gid=localStorage.getItem("customer_gid");var e="api/customer/Getcustomerupdatedetails",a={customer_gid:t.customer_gid};lockUI(),i.getparams(e,a).then(function(e){t.customerCodeedit=e.data.customerCodeedit,t.customerNameedit=e.data.customerNameedit,t.contactpersonedit=e.data.contactPersonedit,t.contactnumberedit=e.data.contactnoedit,t.emailedit=e.data.emailedit,t.mobileNoedit=e.data.mobileNoedit,t.txtaddress1=e.data.addressline1edit,t.txtaddress2=e.data.addressline2edit,t.segment=e.data.segment_gid,t.segment_name=e.data.segment_name,t.statename=e.data.state,t.state_gid=e.data.state_gid,t.employee_gid=e.data.employee_gid,t.employee_name=e.data.employee_name,console.log(e.data.employee_name)}),unlockUI()}var m=this;m.title="customeredit",u(),t.customereditback=function(){a.go("app.customerMaster")}}angular.module("angle").controller("customeredit",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h,y){function k(){t.totalDisplayed=100;var e="api/customer/customerdetail";lockUI(),c.get(e).then(function(e){t.customer_data=e.data.customer_list,unlockUI(),null==t.customer_data?(t.total=0,t.totalDisplayed=0):(t.total=t.customer_data.length,t.customer_data.length<100&&(t.totalDisplayed=t.customer_data.length))})}var S=this;S.title="customerMastercontroller",k(),t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.customer_data){if(!(e<t.customer_data.length))return unlockUI(),void s.alert(" Total Summary "+t.customer_data.length+" Records Only","warning");t.totalDisplayed+=a,t.customer_data.length<t.totalDisplayed&&(t.totalDisplayed=t.customer_data.length,s.alert(" Total Summary "+t.customer_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.popupcustomer=function(){r.go("app.addCustomer")},t.edit=function(e){t.customer_gid=e,t.customer_gid=localStorage.setItem("customer_gid",e),r.go("app.editCustomer")},t.updatecustomerURN=function(e,t,r){function n(a,n){a.customername=t,""!=r?a.customer_urn=r:a.customer_urn="-",a.ok=function(){n.close("closed")},a.UrnUpdate=function(){var t={customer_gid:e,newcustomer_urn:a.txtnewcustomerURN,currentcustomer_urn:r};lockUI();var o="api/customer/GetNewCustomerURN";c.post(o,t).then(function(e){1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.close("closed"),k()):(n.close("closed"),s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}a.open({templateUrl:"/updateURN.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]},t.btntag2legal=function(e,t,r){function n(a,n){a.customername=t,""!=r?a.customer_urn=r:a.customer_urn="-";var o={customer_gid:e},i="api/Customer/TaggedHistoryList";c.getparams(i,o).then(function(e){a.customertag_list=e.data.customertag_list,unlockUI()}),a.ok=function(){n.close("closed")},a.btnconfirm=function(){var o={customer_gid:e,customer_name:t,tag_remarks:a.txttag_remarks,currentcustomer_urn:r};lockUI();var i="api/customer/TagtoLegal";c.post(i,o).then(function(e){1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.close("closed"),k()):(n.close("closed"),s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}a.open({templateUrl:"/tagtoLegal.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]},t["delete"]=function(e){var t={customer_gid:e};n.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){var a="api/customer/customerDelete";c.getparams(a,t).then(function(e){1==e.data.status?k():(s.alert("Error Occurred !",{status:"warning",pos:"top-right",timeout:3e3}),k())}),n.swal("Deleted Successfully!")}})},t.exportcustomerdata=function(){lockUI();var e="api/customer/ExportCustomer";c.get(e).then(function(e){1==e.data.status?(y.Downloaddocument(e.data.lspath,e.data.lsname),unlockUI()):(unlockUI(),s.alert("Error Occurred While Export !","success"),k())})},t.btntag2npa=function(e,t,r){function n(a,n){a.customername=t,""!=r?a.customer_urn=r:a.customer_urn="-";var o={customer_gid:e},i="api/Customer/TaggedNPAHistoryList";c.getparams(i,o).then(function(e){a.customertagnpa_list=e.data.customertagnpa_list,unlockUI()}),a.ok=function(){n.close("closed")},a.btnconfirmnpa=function(){var o={customer_gid:e,customer_name:t,tag_remarks:a.txttag_remarks,currentcustomer_urn:r};lockUI();var i="api/customer/TagtoNPA";c.post(i,o).then(function(e){1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.close("closed"),k()):(n.close("closed"),s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}a.open({templateUrl:"/tagtoNPA.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("customerMastercontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){g.open=function(e){e.preventDefault(),e.stopPropagation(),g.opened=!0},g.dateOptions={formatYear:"yy",startingDay:1},g.formats=["dd-MM-yyyy"],g.format=g.formats[0],t.deferral_gid=localStorage.getItem("deferral_gid"),t.tracking_type=localStorage.getItem("tracking_type");var e={deferral_gid:t.deferral_gid},a="api/deferral/getDeferraldetail";i.getparams(a,e).then(function(e){t.UploadDocumentname=e.data,t.customerremarks=e.data.customer_remarks,t.approval_remarks=e.data.remarks,t.deferrals=e.data.deferralSummaryDtls,t.deferral_gid=e.data.deferral_gid,t.loanref_no=e.data.loanref_no,t.loan_title=e.data.loan_title,t.record_id=e.data.record_id,t.deferral_name=e.data.deferral_name,t.approval_status=e.data.approval_status,t.def_status=e.data.def_status,t.filename_list=e.data.filename_list,t.customer_name=e.data.customer_name,t.zonal_name=e.data.zonal_name,t.businesshead_name=e.data.businesshead_name,t.rm_name=e.data.rm_name,t.credit_manager=e.data.credit_manager,t.customer_code=e.data.customer_code,t.vertical_code=e.data.vertical_code,t.entity_name=e.data.entity_name,t.branch_name=e.data.branch_name,t.deferral_approver_name=e.data.cluster_manager_name,t.tracking_type=e.data.tracking_type,"Covenant"==e.data.tracking_type?t.showrdb=!0:t.showrdb=!1,"Approval Pending"==e.data.approval_status||"Extension Approval Pending"==e.data.approval_status?t.uploaddoc=!0:t.uploaddoc=!1,"Closed"==e.data.approval_status?t.uploaddocument=!1:t.uploaddocument=!0});var e={deferral_gid:t.deferral_gid},a="api/deferral/checkerlist";i.getparams(a,e).then(function(e){t.checker_list=e.data.checker_list,null==t.checker_list?t.approval_history=!0:t.approval_history=!1});var e={deferral_gid:t.deferral_gid},a="api/deferral/getdeferralstages";i.getparams(a,e).then(function(e){1==e.data.status?t.stage_list=e.data.stage_list:document.getElementById("stages").style.display="none"})}var g=this;g.title="defapp",p(),t.upload=function(e,a,r){var n={name:e[0].name,file:e[0]},o=m.fnCheckValidDocType(e[0].name,"");if(0==o)return l.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",n.file),c.append("file_name",n.name),c.append("document_name",t.documentname),c.append("deferral_gid",t.deferral_gid),c.append("loan_gid",t.loan_gid),c.append("by","cad"),c.append("project_flag","Default"),t.uploadfrm=c;var s="api/deferral/uploaddeferraldocumentbycad";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){unlockUI(),t.filename_list=e.data.filename_list,$("#addupload").val(""),1==e.data.status?l.alert("Document Uploaded Successfully..!!","success"):(unlockUI(),l.alert("File Format Not Supported!"))})},t.downloads=function(e,t){u.Downloaddocument(e,t)},t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"},t.Approve=function(){if("Deferral"==t.tracking_type&&"Extend"==t.deferral_status)if(void 0==t.extened_date)l.alert("Enter Extended Date");else{var e={def_gid:t.deferral_gid,deferral_status:t.deferral_status,due_date:t.extened_date,approval_remarks:t.approval_remarks,customer_remarks:t.customerremarks},r="api/deferral/deferralApprove";lockUI(),i.post(r,e).then(function(e){unlockUI(),1==e.data.status?(a.go("app.cadApproval"),l.alert("Submitted Successfully..!!","success")):l.alert("Extended Date must be greater than Due Date!")})}else if("Covenant"==t.tracking_type&&"Extend"==t.deferral_status)if(void 0==t.extened_date)l.alert("Enter Extended Date");else if(void 0==t.rdb_extendtype)l.alert("Select Extend Type");else{var e={def_gid:t.deferral_gid,deferral_status:t.deferral_status,due_date:t.extened_date,approval_remarks:t.approval_remarks,customer_remarks:t.customerremarks,extend_type:t.rdb_extendtype},r="api/deferral/deferralApprove";lockUI(),i.post(r,e).then(function(e){unlockUI(),1==e.data.status?(a.go("app.cadApproval"),l.alert("Submitted Successfully..!!","success")):l.alert("Extended Date must be greater than Due Date!")})}else{var e={def_gid:t.deferral_gid,deferral_status:t.deferral_status,due_date:t.extened_date,approval_remarks:t.approval_remarks,customer_remarks:t.customerremarks},r="api/deferral/deferralApprove";lockUI(),i.post(r,e).then(function(e){unlockUI(),1==e.data.status?(a.go("app.cadApproval"),l.alert("Submitted Successfully..!!","success")):l.alert("Error Occurred While Submitting!")})}},t.deferralback=function(e){a.go("app.cadApproval")},t.onselectedchange=function(e){"Extend"==e?t.showval=!0:t.showval=!1}}angular.module("angle").controller("defapp",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){t.totalDisplayed=100;var e="api/deferral/deferralmasterSummary";lockUI(),l.get(e).then(function(e){t.deferral=e.data.deferral_list,unlockUI(),console.log(t.total),null==t.deferral?(t.total=0,t.totalDisplayed=0):(t.total=t.deferral.length,t.deferral.length<100&&(t.totalDisplayed=t.deferral.length))}),console.log(t.totalDisplayed)}var _=this;_.title="deferralcontroller",g(),t.loadMore=function(e){if(void 0==e)return void c.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.deferral){if(!(e<t.deferral.length))return unlockUI(),void c.alert(" Total Summary "+t.deferral.length+" Records Only","warning");t.totalDisplayed+=a,t.deferral.length<t.totalDisplayed&&(t.totalDisplayed=t.deferral.length,c.alert(" Total Summary "+t.deferral.length+" Records Only","warning")),unlockUI()}unlockUI()},t.popupdeferral=function(){function e(e,t){e.ok=function(){t.close("closed")},e.deferralSubmit=function(){void 0==e.comments&&(e.comments="");var a={deferral_code:e.deferral_code,deferral_name:e.deferral_name,criticallity:e.criticality,comments:e.comments},r="api/deferral/deferralmasterSubmit";l.post(r,a).then(function(e){1==e.data.status&&(t.close("closed"),c.alert("Deferral Created Successfully..!!",{status:"success",pos:"top-center",timeout:3e3}),g())})}}n.open({templateUrl:"/myModalContent.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},t.edit=function(e){function t(t,a){t.ok=function(){a.close("closed")},t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e);var r={deferral_gid:e},n="api/deferral/Getdeferralupdate";l.getparams(n,r).then(function(e){console.log(r),t.deferralCodeedit=e.data.deferralCodeedit,t.deferralNameedit=e.data.deferralNameedit,t.criticality=e.data.criticallity,t.commentsEdit=e.data.comments,t.deferral_gid=e.data.deferral_gid}),t.deferralUpdate=function(){var e={deferralCodeedit:t.deferralCodeedit,deferralNameedit:t.deferralNameedit,criticallity:t.criticality,comments:t.commentsEdit,deferral_gid:t.deferral_gid},r="api/deferral/deferralUpdate";l.post(r,e).then(function(e){1==e.data.status?(g(),a.close("closed"),c.alert("Deferral Updated Successfully..!!",{status:"success",pos:"top-center",timeout:3e3})):u.swal("Error Occurred While Updating Deferral !","warning")})}}n.open({templateUrl:"/myModaledit.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t["delete"]=function(e){t.deferral_gid=localStorage.setItem("deferral_gid",e);var a={deferral_gid:e};u.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){var t="api/deferral/deferralDelete";l.getparams(t,a).then(function(e){1==e.data.status?g():(c.alert("Error Occurred While Deleting Customer!",{status:"warning",pos:"top-right",timeout:3e3}),g())}),u.swal("Deleted Successfully!")}})}}angular.module("angle").controller("deferralcontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){t.totalDisplayed=100;var e="api/deferral/directDeferralSummary";lockUI(),c.get(e).then(function(e){t.deferral_data=e.data.deferralSummaryDtls,unlockUI(),null==t.deferral_data?(t.total=0,t.totalDisplayed=0):(t.total=t.deferral_data.length,t.deferral_data.length<100&&(t.totalDisplayed=t.deferral_data.length))})}var _=this;_.title="deferralManagement",g(),t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.deferral_data){if(!(e<t.deferral_data.length))return unlockUI(),void s.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning");t.totalDisplayed+=a,t.deferral_data.length<t.totalDisplayed&&(t.totalDisplayed=t.deferral_data.length,s.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.edit=function(e){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),r.go("app.editDeferral")},t["delete"]=function(e){var t={deferral_gid:e};n.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){var a="api/deferral/deferraldeleterecords";c.getparams(a,t).then(function(e){1==e.data.status?(g(),n.swal("Deleted Successfully!")):(g(),n.swal("Deferral Moved to multiple Stages.You cant Delete it!"))})}})},t.popupdeferral=function(){r.go("app.createDeferral")},t.popupView=function(e){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),r.go("app.viewDeferral")}}angular.module("angle").controller("deferralManagement",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){t.totalDisplayed=100;var e="api/vertical/vertical";l.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/branch/branch";l.get(e).then(function(e){t.branch_list=e.data.branch_list});var e="api/employee/employee";l.get(e).then(function(e){t.employee_list=e.data.employee_list});var e="api/customer/state";l.get(e).then(function(e){t.state_list=e.data.state_list});var e="api/entity/entity";l.get(e).then(function(e){t.entity_list=e.data.entity_list});var e="api/deferral/deferralreportsummary";lockUI(),l.get(e).then(function(e){t.deferral_data=e.data.deferralSummaryDtls,unlockUI(),null==t.deferral_data?(t.total=0,t.totalDisplayed=0):(t.total=t.deferral_data.length,t.deferral_data.length<100&&(t.totalDisplayed=t.deferral_data.length))})}g(),t.complete=function(e){if(e.length>=3){t.message="";var a="api/customer/ExploreCustomer",r={customername:e};l.getparams(a,r).then(function(e){1==e.data.status?(t.message="",t.customer_list=e.data.Customers):t.message="No Records"})}else t.customer_list=null,t.message="Type atleast three character"},t.fillTextbox=function(e,a){t.customer=a,t.customer_gid=e,t.customer_list=null},t.loadMore=function(e){if(void 0==e)return void c.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.deferral_data){if(!(e<t.deferral_data.length))return unlockUI(),void c.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning");t.totalDisplayed+=a,t.deferral_data.length<t.totalDisplayed&&(t.totalDisplayed=t.deferral_data.length,c.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.all=function(){t.entity_gid="",t.branch="",t.customer_gid="",t.customer="",t.vertical="",t.relationshipMgmt="",t.zonalHead="",t.businessHead="",t.clustermanager="",t.creditmanager="",t.cbostate="",g()},t.search=function(){var e={customer_gid:t.customer_gid,vertical_gid:t.vertical,entity_gid:t.entity_gid,branch_gid:t.branch,relationshipMgmt:t.relationshipMgmt,zonalHead:t.zonalHead,businessHead:t.businessHead,clustermanager:t.clustermanager,creditmanager:t.creditmanager,state_gid:t.cbostate},a="api/deferral/directDeferralSummaryreport";lockUI(),l.post(a,e).then(function(e){unlockUI(),t.deferral_data=e.data.deferralSummaryDtls})},t.popupView=function(e){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),r.go("app.ReportDetails")},t["export"]=function(){var e={customer_gid:t.customer_gid,vertical_gid:t.vertical,branch_gid:t.branch,entity_gid:t.entity_gid,relationshipMgmt:t.relationshipMgmt,zonalHead:t.zonalHead,businessHead:t.businessHead,clustermanager:t.clustermanager,creditmanager:t.creditmanager,state_gid:t.cbostate};lockUI();var a="api/deferral/export";l.post(a,e).then(function(e){1==e.data.status?(p.Downloaddocument(e.data.lspath,e.data.lsname),unlockUI()):(unlockUI(),c.alert("Error Occurred While Export !","warning"),g())})},t.exportnpa=function(){var e={customer_gid:t.customer_gid,vertical_gid:t.vertical,branch_gid:t.branch,entity_gid:t.entity_gid,relationshipMgmt:t.relationshipMgmt,zonalHead:t.zonalHead,businessHead:t.businessHead,clustermanager:t.clustermanager,creditmanager:t.creditmanager,state_gid:t.cbostate};lockUI();var a="api/deferral/exportnpa";l.post(a,e).then(function(e){1==e.data.status?(p.Downloaddocument(e.data.lspath,e.data.lsname),unlockUI()):(unlockUI(),c.alert("Error Occurred While Export !","warning"),g())})}}angular.module("angle").controller("deferralReport",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){var e="api/customer/state";l.get(e).then(function(e){t.state_list=e.data.state_list});var e="api/vertical/vertical";l.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/entity/entity";l.get(e).then(function(e){t.entity_list=e.data.entity_list}),t.page=localStorage.getItem("page"),t.totalDisplayed=100;var e="api/deferral/User2reportsummary";lockUI(),l.get(e).then(function(e){t.User2_data=e.data.deferralSummaryDtls,unlockUI(),null==t.User2_data?(t.total=0,t.totalDisplayed=0):(t.total=t.User2_data.length,t.User2_data.length<100&&(t.totalDisplayed=t.User2_data.length))})}var _=this;_.title="DtsRptUserReport2",g(),t.loadMore=function(e){if(void 0==e)return void c.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.User2_data){if(!(e<t.User2_data.length))return unlockUI(),void c.alert(" Total Summary "+t.User2_data.length+" Records Only","warning");t.totalDisplayed+=a,t.User2_data.length<t.totalDisplayed&&(t.totalDisplayed=t.User2_data.length,c.alert(" Total Summary "+t.User2_data.length+" Records Only","warning")),unlockUI()}t.vertical="",t.entity_gid="",t.cbostate="",unlockUI()},t.all=function(){t.entity_gid="",t.vertical="",t.cbostate="",g()},t.search=function(){var e={vertical_gid:t.vertical,entity_gid:t.entity_gid,
state_gid:t.cbostate},a="api/deferral/User2reportsummarysearch";lockUI(),l.post(a,e).then(function(e){unlockUI(),t.User2_data=e.data.deferralSummaryDtls})},t.popupView=function(e){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),localStorage.setItem("page","UserReport2"),r.go("app.reportpagedetails")},t["export"]=function(){void 0!=t.cbostate&&""!=t.cbostate||(t.cbostate="");var e={vertical_gid:t.vertical,entity_gid:t.entity_gid,state_gid:t.cbostate};lockUI();var a="api/deferral/UserReport2export";l.post(a,e).then(function(e){1==e.data.status?(p.Downloaddocument(e.data.lspath,e.data.lsname),unlockUI()):(unlockUI(),c.alert("Error Occurred While Export !","warning"),g())})}}angular.module("angle").controller("DtsRptUserReport2",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a){function r(){t.welcome_msg="Deferral Tracking System";var e="api/ecmsdashboard/ecmmsprivilege",r=localStorage.getItem("user_gid");a.get(e+"?user_gid="+r).then(function(e){var a=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMMSTCMR"),r=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMTSNDFM"),n=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMTSNLON"),o=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMRPTRPV"),i=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMRPTUSE"),l=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMRPTDFR"),c=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMTSNRMD"),s=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMTSNTRM"),d=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMTSNDRA"),u=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMTSNRE"),m=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMTSNCOL"),p=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMTSNPEA"),g=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMTSNCRA"),_=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMTSNCAM"),f=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMTSNCKA"),v=e.data.ecmsprivilege_list.map(function(e){return e.ecmsprivilege}).indexOf("ECMRPTUS2");a!=-1&&(t.customer_show="Y"),r!=-1&&(t.deferralmgmt_show="Y"),n!=-1&&(t.loanmgmt_show="Y"),o!=-1&&(t.cadreport_show="Y"),i!=-1&&(t.userreport_show="Y"),l!=-1&&(t.deferralreport_show="Y"),c!=-1&&(t.rmdeferral_show="Y"),s!=-1&&(t.transferrm_show="Y"),d!=-1&&(t.deferralapproval_show="Y"),u!=-1&&(t.reopendeferrals_show="Y"),m!=-1?t.coltralmgmnt_show="Y":m==-1&&(t.coltralmgmnt_show="N"),p!=-1&&(t.penaltyalert_show="Y"),g!=-1&&(t.customeralert_show="Y"),_!=-1&&(t.mailmgmt_show="Y"),f!=-1&&(t.checkerapproval_show="Y"),v!=-1&&(t.userreport2_show="Y")})}var n=this;n.title="ecmsDashboard",r(),t.customer=function(){t.welcome_msg="Customer"},t.loanmgmt=function(){t.welcome_msg="Loan Management"},t.deferralmgmt=function(){t.welcome_msg="Deferral Management"},t.cad_report=function(){t.welcome_msg="CAD Report"},t.user_report=function(){t.welcome_msg="User Report"},t.deferral_report=function(){t.welcome_msg="Deferral Report"}}angular.module("angle").controller("ecmsDashboard",e),e.$inject=["$location","$scope","SocketService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){var e="api/customer/customer";c.get(e).then(function(e){t.customer_list=e.data.customer_list});var e="api/security/getSecuritytype";c.get(e).then(function(e){t.security_data=e.data.securitytype_list});var a={collateral_gid:localStorage.getItem("collateral_gid")},e="api/collateral/getCollateralDetails";c.getparams(e,a).then(function(e){t.customer=e.data.customer_gid,t.security_type=e.data.securitytype_gid,t.account_status=e.data.account_status,t.security_description=e.data.security_description,t.loan_data=e.data.collateralloandetails_list})}var k=this;k.title="editcollateralcontroller",y(),t.back=function(){r.go("app.collateralsummary")},t.update=function(e){var a=$("#customer :selected").text(),n=$("#security_type :selected").text(),o={customer_gid:t.customer,customer_name:a,securitytype_gid:t.security_type,security_type:n,account_status:t.account_status,security_description:t.security_description,collateral_gid:localStorage.getItem("collateral_gid")},i="api/collateral/UpdateCollateral";c.post(i,o).then(function(e){1==e.data.status&&(console.log("test"),unlockUI(),s.alert("Collateral Updated Successfully..!!","success"),r.go("app.collateralsummary"))})}}angular.module("angle").controller("editcollateralcontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d){function u(){t.Warning=!1;var e="api/employee/employee";i.get(e).then(function(e){t.clusterlist=e.data.employee_list,t.businesshead_list=e.data.employee_list,t.regionalhead_list=e.data.employee_list,t.relationshiplist=e.data.employee_list,t.zonallist=e.data.employee_list,t.creditlist=e.data.employee_list,t.zonalrm_list=e.data.employee_list,t.rm_list=e.data.employee_list,t.riskmonitorning_list=e.data.employee_list});var e="api/customer/Getconstitution";i.get(e).then(function(e){t.constitution_list=e.data.constitution_list});var e="api/vertical/vertical";i.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/customer/state";i.get(e).then(function(e){t.state_list=e.data.state_list}),t.customer_gid=localStorage.getItem("customer_gid");var e="api/customer/Getcustomerupdatedetails",a={customer_gid:t.customer_gid};lockUI(),i.getparams(e,a).then(function(e){t.customerCodeedit=e.data.customerCodeedit,t.customerNameedit=e.data.customerNameedit,t.contactPersonedit=e.data.contactPersonedit,t.mobileNoedit=e.data.mobileNo_edit,t.contactnoedit=e.data.contactno_edit,t.emailedit=e.data.emailedit,t.txtaddress1=e.data.addressline1edit,t.txtaddress2=e.data.addressline2edit,t.regionedit=e.data.regionedit,t.countryedit=e.data.countryedit,t.vertical=e.data.vertical_gid,t.vertical_code=e.data.vertical_code,t.statename=e.data.state,t.state_gid=e.data.state_gid,t.postalcodeedit=e.data.postalcode_edit,t.tomailedit=e.data.tomailedit,t.ccmailedit=e.data.ccmailedit,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.regionalHead=e.data.regionalHeadGid,t.clustermanager=e.data.clustermanagerGid,t.creditmanager=e.data.creditmanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.customerURNedit=e.data.customer_urnedit,t.pan_number=e.data.pan_number,t.gst_number=e.data.gst_number,t.txtmajor_corporateedit=e.data.major_corporateedit,t.cboconstitutionedit=e.data.constitution_gidedit,t.ZonalRM=e.data.zonal_riskmanagerGID,t.riskmanager=e.data.risk_managerGID,t.RiskMonitoringName=e.data.riskMonitoring_GID,unlockUI()})}var m=this;m.title="editCustomercontroller",u(),t.urnvalidation=function(){var e={urn:t.customerURNedit},a="api/MstCustomerAdd/GetURNInfo";i.getparams(a,e).then(function(e){1==e.data.status?t.Warning=!0:t.Warning=!1})},t.customereditback=function(){a.go("app.customerMaster")},t.customerUpdate=function(){var e={urn:t.customerURNedit},r="api/MstCustomerAdd/GetURNInfo";i.getparams(r,e).then(function(e){if(1==e.data.status)l.alert("Already this URN is in Imported Customer","warning");else{var r=$("#zonalHead_name :selected").text(),n=$("#businessHead_name :selected").text(),o=$("#regionalHead_name :selected").text(),c=$("#vertical_code :selected").text(),s=$("#cluster_manager_name :selected").text(),d=$("#relationshipMgmt_name :selected").text(),m=$("#creditmanager_name :selected").text(),p=$("#statename :selected").text(),g=$("#constitutionname :selected").text(),_=$("#zonlRM_name :selected").text(),f=$("#riskmanager_name :selected").text(),v=$("#RiskMonitoring_Name :selected").text(),h={customer_gid:t.customer_gid,customerCodeedit:t.customerCodeedit,customerNameedit:t.customerNameedit,contactPersonedit:t.contactPersonedit,mobileNoedit:t.mobileNoedit,contactnoedit:t.contactnoedit,emailedit:t.emailedit,addressline1edit:t.txtaddress1,regionedit:t.regionedit,addressline2edit:t.txtaddress2,countryedit:t.countryedit,vertical_gid:t.vertical,vertical_code:c,state_gid:t.state_gid,state:p,tomailedit:t.tomailedit,ccmailedit:t.ccmailedit,postalcodeedit:t.postalcodeedit,zonalGid:t.zonalHead,businessHeadGid:t.businessHead,regionalHeadGid:t.regionalHead,clustermanagerGid:t.clustermanager,creditmanagerGid:t.creditmanager,relationshipMgmtGid:t.relationshipMgmt,zonal_name:r,businesshead_name:n,regionalhead_name:o,cluster_manager_name:s,creditmanager_name:m,relationshipmgmt_name:d,customer_urnedit:t.customerURNedit,gst_number:t.gst_number,pan_number:t.pan_number,major_corporateedit:t.txtmajor_corporateedit,constitution_nameedit:g,constitution_gidedit:t.cboconstitutionedit,zonal_riskmanagerGID:t.ZonalRM,zonal_riskmanagerName:_,risk_managerGID:t.riskmanager,risk_managerName:f,riskMonitoring_GID:t.RiskMonitoringName,riskMonitoring_Name:v},y="api/customer/customerUpdate";i.post(y,h).then(function(e){1==e.data.status?(u(),a.go("app.customerMaster"),l.alert("Customer Updated Successfully..!!","success")):l.alert(e.data.message),u()})}})}}angular.module("angle").controller("editCustomercontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){$("#loandata").multiselect({includeSelectAllOption:!0}),g.open=function(e){e.preventDefault(),e.stopPropagation(),g.opened=!0},g.dateOptions={formatYear:"yy",startingDay:1},g.formats=["dd-MM-yyyy"],g.format=g.formats[0];var e="api/vertical/vertical";i.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/entity/entity";i.get(e).then(function(e){t.entity_list=e.data.entity_list});var e="api/branch/branch";i.get(e).then(function(e){t.branch_list=e.data.branch_list});var e="api/deferral/deferral";i.get(e).then(function(e){t.deferral_list=e.data.deferral_list});var e="api/covenanttype/getcovenanttype";i.get(e).then(function(e){t.covenanttype_list=e.data.covenanttype_list});var e="api/customer/customer";i.get(e).then(function(e){t.customer_list=e.data.customer_list});var e="api/employee/employee";i.get(e).then(function(e){t.clusterlist=e.data.employee_list,t.businesshead_list=e.data.employee_list,t.relationshiplist=e.data.employee_list,t.zonallist=e.data.employee_list,t.creditlist=e.data.employee_list});var a={deferral_gid:localStorage.getItem("deferral_gid")},e="api/deferral/checkerlist";i.getparams(e,a).then(function(e){t.checker_list=e.data.checker_list});var r={deferral_gid:localStorage.getItem("deferral_gid")},e="api/deferral/Getdeferraldetails";i.getparams(e,r).then(function(e){t.Getdeferral=e.data,t.branchEdit=e.data.branch_gid,t.entityEdit=e.data.entity_gid,t.customer=e.data.customer_gid,t.customer_name=e.data.customer_name,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.cluster_manager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_name=e.data.creditmanager_gid,t.tracking_type=e.data.tracking_type,t.loanRefNoedit=e.data.loanGID,t.due_dateedit=e.data.due_date,t.due_dateedit=Date.parse(t.due_dateedit),"Covenant"==e.data.tracking_type?(t.showval=!0,t.hideval=!1):(t.showval=!1,t.hideval=!0),t.deferralname=e.data.deferraltype_gid,t.covenanttype=e.data.covenanttype_gid,t.deferralcategoryedit=e.data.deferral_category,t.vertical=e.data.vertical_gid,t.vertical_code=e.data.vertical_code,t.criticallity=e.data.criticallity,t.remarks=e.data.remarks,t.customerremarks=e.data.customerremarks,t.checker_status=e.data.checker_status,t.checker_remarks=e.data.checker_remarks,"PushBack"==e.data.checker_status?t.showvalchecker_pushback=!0:t.showvalchecker_pushback=!1}),t.onselectedchangedeferral=function(e){var a={deferral:e},r="api/loan/getdeferralcriticallity";i.getparams(r,a).then(function(e){t.MDLcriticallity=e.data,t.criticallity=e.data.criticallity,t.remarks=e.data.comments,t.customerremarks=e.data.comments,t.critical=!0})},t.onselectedchangecovenant=function(e){var a={covenanttype:e},r="api/loan/getcovenanttypecriticallity";i.getparams(r,a).then(function(e){t.MDLcriticallity=e.data,t.criticallity=e.data.criticallity,t.remarks=e.data.comments,t.customerremarks=e.data.comments,t.critical=!0})},t.btncopy=function(){_=t.remarks,t.customerremarks=_},t.onselectedchangecustomer=function(e){var a={customer_gid:e},r="api/loan/customer_getheads";i.getparams(r,a).then(function(e){t.vertical_code=e.data.vertical_code,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.clustermanager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_name=e.data.creditmanager_gid})};var e="api/deferral/Getcaddoc";i.getparams(e,r).then(function(e){1==e.data.status&&(t.filename_list=e.data.filename_list)})}var g=this;g.title="editDeferral";var _;p(),t.isShowHide=function(e){"show"==e?(t.showval=!0,t.hideval=!1):"hide"==e?(t.showval=!1,t.hideval=!0):(t.showval=!1,t.hideval=!1)},t.upload=function(e,a,r){var n={name:e[0].name,file:e[0]},o=m.fnCheckValidDocType(e[0].name,"");if(0==o)return l.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;t.deferral_gid=localStorage.getItem("deferral_gid");var c=new FormData;c.append("fileupload",n.file),c.append("file_name",n.name),c.append("document_name",t.documentname),c.append("deferral_gid",t.deferral_gid),c.append("loan_gid",t.loan_gid),c.append("project_flag","Default"),t.uploadfrm=c,document.getElementById("load").style.visibility="visible";var s="api/deferral/UploadcadDocument";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){unlockUI(),t.filename_list=e.data.filename_list,$("#addupload").val(""),1==e.data.status?(p(),l.alert("Document Uploaded Successfully..!!","success")):(unlockUI(),l.alert("File Format Not Supported!")),p()})},t.downloads=function(e,t){u.Downloaddocument(e,t)},t.deferralback=function(){a.go("app.DeferralManagement")},t.deferralUpdateEdit=function(){var e,r,n,o,c,s,d,u,m,g,_=t.entity_list.map(function(e){return e.entity_gid}).indexOf(t.entityEdit);e=_==-1?"":t.entity_list[_].entity_name;var f=t.branch_list.map(function(e){return e.branch_gid}).indexOf(t.branchEdit);r=f==-1?"":t.branch_list[f].branch_name;var v=t.customer_list.map(function(e){return e.customer_gid}).indexOf(t.customer);c=v==-1?"":t.customer_list[v].customername;var h=t.zonallist.map(function(e){return e.employee_gid}).indexOf(t.zonalHead);s=h==-1?"":t.zonallist[h].employee_name;var y=t.businesshead_list.map(function(e){return e.employee_gid}).indexOf(t.businessHead);d=y==-1?"":t.businesshead_list[y].employee_name;var k=t.clusterlist.map(function(e){return e.employee_gid}).indexOf(t.cluster_manager);u=k==-1?"":t.clusterlist[k].employee_name;var S=t.relationshiplist.map(function(e){return e.employee_gid}).indexOf(t.relationshipMgmt);m=S==-1?"":t.relationshiplist[S].employee_name;var $=t.creditlist.map(function(e){return e.employee_gid}).indexOf(t.creditmgmt_name);g=$==-1?"":t.creditlist[$].employee_name;var D=t.deferral_list.map(function(e){return e.deferraltype_gid}).indexOf(t.deferralname);n=D==-1?"":t.deferral_list[D].deferral_name;var b=t.covenanttype_list.map(function(e){return e.covenanttype_gid}).indexOf(t.covenanttype);o=b==-1?"":t.covenanttype_list[b].covenanttype_name,"Covenant"==t.tracking_type?(t.deferralname="",n=""):(t.covenanttype="",o="");var I={deferral_gid:localStorage.getItem("deferral_gid"),entity_gid:t.entityEdit,entity_name:e,branch_gid:t.branchEdit,branch_name:r,customer_gid:t.customer,customer_name:c,loan_gid:t.loanRefNoedit,zonalhead_gid:t.zonalHead,zonalhead_name:s,businesshead_gid:t.businessHead,businesshead_name:d,clustermgr_gid:t.cluster_manager,clusterhead_name:u,relationmgr_gid:t.relationshipMgmt,relationmgr_name:m,creditmgr_gid:t.creditmgmt_name,creditmgr_name:g,category_gid:t.deferralcategoryedit,tracking_type:t.tracking_type,deferraltype_gid:t.deferralname,deferraltype_name:n,covenanttype_gid:t.covenanttype,covenanttype_name:o,duedate:t.due_dateedit,criticallity:t.criticallity,vertical_code:t.vertical_code,vertical_gid:t.vertical,remarks:t.remarks,customerremarks:t.customerremarks,checker_status:t.checker_status};if("Deferral"==t.tracking_type){if(console.log(t.deferralname),""==t.deferralname)return void l.alert("Kindly select the deferral","warning")}else if("Covenant"==t.tracking_type&&(console.log(t.covenanttype),""==t.covenanttype))return void l.alert("Kindly select the covenant","warning");var U="api/deferral/update";i.post(U,I).then(function(e){1==e.data.status?(p(),a.go("app.DeferralManagement"),l.alert("Deferral Updated Successfully..!!","success")):l.alert("Error Occurred While Updating Deferral !")})}}angular.module("angle").controller("editDeferral",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d){function u(){m.open=function(e){e.preventDefault(),e.stopPropagation(),m.opened=!0},m.dateOptions={formatYear:"yy",startingDay:1};var e="api/employee/employee";i.get(e).then(function(e){t.clusterlist=e.data.employee_list,t.businesshead_list=e.data.employee_list,t.relationshiplist=e.data.employee_list,t.zonallist=e.data.employee_list,t.creditlist=e.data.employee_list}),lockUI(),t.loan_gid=localStorage.getItem("loan_gid");var e="api/loan/getLoandetails",a={loan_gid:t.loan_gid};i.getparams(e,a).then(function(e){t.customer_gid=e.data.customer_gid;var a=e.data.customerName.split("/");t.customer=a[1],t.vertical=e.data.vertical_gid,t.loanRefNoedit=e.data.loanRefNo,t.sanctionrefnoedit=e.data.sanctionRefno,t.sanctionDateedit=e.data.sanction_date,t.sanction_Date=e.data.sanctionDate,t.loanmaster_gid=e.data.loanmaster_gid,t.zonalHead=e.data.zonal_gid,t.businessHead=e.data.businesshead_gid,t.clustermanager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipmgmt_gid,t.creditmgmt_name=e.data.creditmanager_gid,unlockUI();var r={customer_gid:e.data.customer_gid},n="api/loan/customer_getheads";i.getparams(n,r).then(function(e){t.mdlheadsofcustomer=e.data,t.sanctiondtl=e.data.sanctiondtl}),t.cbosanctionGid=e.data.sanction_Gid;var r={customer2sanction_gid:t.cbosanctionGid},n="api/loan/SanctionLoanFacility";i.getparams(n,r).then(function(e){1==e.data.status&&(t.loan_list=e.data.loanfacility)})})}var m=this;m.title="editLoan",u(),t.complete=function(e){if(e.length>=3){t.message="";var a="api/customer/ExploreCustomer",r={customername:e};i.getparams(a,r).then(function(e){1==e.data.status?(t.message="",t.customer_list=e.data.Customers):t.message="No Records"})}else t.customer_list=null,t.message="Type atleast three character"},t.fillTextbox=function(e,a){t.customer=a,t.customer_gid=e,t.customer_list=null;var r={customer_gid:e},n="api/loan/customer_getheads";i.getparams(n,r).then(function(e){t.mdlheadsofcustomer=e.data,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.clustermanager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_gid=e.data.creditmanager_gid,t.vertical_code=e.data.vertical_code,t.creditmgmt_name=e.data.creditmanager_gid,t.sanctiondtl=e.data.sanctiondtl,t.loan_list={},t.vertical=!0})},t.sanctionrefnochange=function(e){var a={sanction_gid:e},r="api/loan/GetSanctionDate";i.getparams(r,a).then(function(e){t.sanctionDateedit=e.data.sanctiondate,t.sanction_Date=e.data.Sanction_Date}),t.loan_list={};var a={customer2sanction_gid:e},r="api/loan/SanctionLoanFacility";i.getparams(r,a).then(function(e){1==e.data.status?"1"==e.data.count_loan?(t.loan_list=e.data.loanfacility,t.loanmaster_gid=e.data.loanfacility[0].facility_gid):t.loan_list=e.data.loanfacility:t.loan="-----Select Loan Facility Type----"})},t.onselectedchangecustomer=function(e){var a={customer_gid:t.cbocustomergid.customer_gid},r="api/loan/customer_getheads";i.getparams(r,a).then(function(e){t.mdlheadsofcustomer=e.data,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.clustermanager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_name=e.data.creditmanager_gid,t.sanctiondtl=e.data.sanctiondtl,t.loan_list={}})},t.loanback=function(){a.go("app.loanManagement")},t.loanUpdate=function(e){var r=$("#vertical_code :selected").text(),n=$("#loanTitle :selected").text(),o=$("#sanctionrefno :selected").text(),c=$("#zonal_name :selected").text(),s=$("#businesshead_name :selected").text(),d=$("#cluster_manager_name :selected").text(),u=$("#relationshipmgmt_name :selected").text(),m=$("#creditmanager_name :selected").text(),p={loan_gid:t.loan_gid,customer_gid:t.customer_gid,customer_name:t.customer,vertical_gid:t.vertical,sanctionGid:t.cbosanctionGid,loanRefNoedit:t.loanRefNoedit,sanctionrefnoedit:o,sanctionDateedit:t.sanction_Date,loanmaster_gid:t.loanmaster_gid,loanTitleedit:n,vertical_code:r,zonalGid:t.zonalHead,businessHeadGid:t.businessHead,clustermanagerGid:t.clustermanager,relationshipMgmtGid:t.relationshipMgmt,creditmanager_name:m,zonal_name:c,businesshead_name:s,cluster_manager_name:d,relationshipmgmt_name:u,creditmanager_gid:t.creditmgmt_name};console.log(p);var g="api/loan/loanUpdate";i.post(g,p).then(function(e){1==e.data.status?(a.go("app.loanManagement"),l.alert("Loan Updated Successfully..!!","success")):l.alert(e.data.message,"warning")})}}angular.module("angle").controller("editLoan",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v){function h(){var e=u.apiList.extensionSummary.api;c.get(e).then(function(e){t.cadApproval=e.data.deferralSummaryDtls})}h(),t.popupapproveExtension=function(e){function t(t,a){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e);var r={deferral_gid:e},n=u.apiList.GetDetails.api;c.getparams(n,r).then(function(e){1==e.data.status?(t.UploadDocumentname=e.data,t.deferral_gid=e.data.deferral_gid,t.deferralextension_gid=e.data.deferralextension_gid,t.loanref_no=e.data.loanref_no,t.loan_title=e.data.loan_title,t.record_id=e.data.record_id,t.deferral_name=e.data.deferral_name,t.filename_list=e.data.filename_list,t.extensionapplied_remarks=e.data.extensionapplied_remarks):0==e.data.status&&s.alert("No Extension Request Raised!",{status:"warning",pos:"top-center",timeout:3e3})}),t.ok=function(){a.close("closed")},t.cancel=function(){a.dismiss("cancel")},t.downloads=function(e,t){v.Downloaddocument(e,t)}}a.open({templateUrl:"/extensionDetails.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t.approveExtension=function(){var e={deferral_gid:t.deferral_gid,deferralextension_gid:t.deferralextension_gid,extensionapproval_remarks:t.extensionapproval_remarks,due_date:t.due_date};u.apiList.approveExtension.api;lockUI(),c.post(u.apiList.approveExtension.api,e).then(function(e){1==e.data.status?(unlockUI(),t.close("popupapproveExtension"),location.reload(),s.alert("Extension Approved Successfully..!!",{status:"success",pos:"top-center",timeout:3e3})):s.alert("Error While Approving Extension !",{status:"warning",pos:"top-right",timeout:3e3})})},t.downloads=function(e,t){v.Downloaddocument(e,t)},t.close=function(e){document.getElementById("userformextension").reset();var t=document.getElementById(e);t.style.display="none"}}angular.module("angle").controller("extensionApprovalcontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$filter","ngTableParams","$resource","$timeout","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d){function u(){var e=s.apiList.notification.api;lockUI(),i.get(e).then(function(e){unlockUI(),t.count_acknowledgement=e.data.count_acknowledgement,t.count_myasset=e.data.count_myasset,t.count_surrender=e.data.count_surrender,t.count_temporaryhandover=e.data.count_temporaryhandover,t.employee_id=e.data.employee_id,t.count_response=e.data.count_response,t.count_myapprovals=e.data.count_myapprovals})}var m=this;m.title="landingcontroller",u(),t.view=function(e,r){t.employee_id=e,n.store("ackCtrl",t),a.go("app.viewasset")},t.acknowledge=function(e,r){t.employee_id=e,n.store("ackCtrl",t),a.go("app.acknowledgemyasset")},t.surrender=function(e,r){t.employee_id=e,n.store("ackCtrl",t),a.go("app.assetsurrender")},t.temporaryhandover=function(e,r){t.employee_id=e,n.store("ackCtrl",t),a.go("app.temporaryhandover")},t.newserviceticket=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.newservice_ticket")},t.newtaskrequest=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.newtaskrequest")},t.viewserviceticket=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.viewserviceticket")},t.myapprovals=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.myapprovals")},t.loanManagement=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.loanManagement")},t.rmManagement=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.rmManagement")},t.deferralManagement=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.DeferralManagement")},t.segment=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.segment")},t.deferral=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.deferral")},t.covenantType=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.covenantType")},t.transferRM=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.transferRM")},t.customerMaster=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.customerMaster")},t.cadApproval=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.cadApproval")},t.extensionApproval=function(e){t.employee_id=e,n.store("ackCtrl",t),a.go("app.extensionApproval")},t.adminlogin=function(){var e=s.apiList.SValues.api;lockUI(),i.get(e).then(function(e){unlockUI();var t=window.location.host,a="https://",r=window.open(a.concat(t,"/Framework/adlogin.aspx?userCode=",e.data.user_code,"&?&userPassword=",e.data.user_password,"&?&companyCode=",e.data.company_code),"_blank");r.focus()})}}angular.module("angle").controller("landingcontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){a.activeAdd=!0,a.DivEdittab=!1,_.open=function(e){e.preventDefault(),e.stopPropagation(),_.opened=!0},_.dateOptions={formatYear:"yy",startingDay:1},_.formats=["dd-MM-yyyy"],_.format=_.formats[0],a.btnupdate=!1,a.btnsubmit=!0,a.loan_gid=localStorage.getItem("loan_gid");var e="api/loan/getLoandeferraldetails",t={loan_gid:a.loan_gid};l.getparams(e,t).then(function(e){a.LoanDetails=e.data,a.customerName=e.data.customerName,a.loanRefNo=e.data.loanRefNo,a.loanTitle=e.data.loanTitle,a.sanctionRefno=e.data.sanctionRefno,a.sanctionDate=e.data.sanctionDate,f=e.data.customer_gid,a.customer_gid=e.data.customer_gid,a.vertical_gid=e.data.vertical_gid,a.vertical_code=e.data.vertical_code,a.zonalHead=e.data.zonal_gid,a.businessHead=e.data.businesshead_gid,a.clustermanager=e.data.clustermanagerGid,a.relationshipMgmt=e.data.relationshipmgmt_gid,a.creditmanager=e.data.creditmanager_gid,a.zonal_name=e.data.zonal_name,a.businesshead_name=e.data.businesshead_name,a.rm_name=e.data.rm_name,a.cluster_manager_name=e.data.cluster_manager_name,a.creditmgmt_name=e.data.creditmgmt_name,a.entityName=e.data.entityName,a.entity_gid=e.data.entity_gid,a.branchName=e.data.branchName,a.branch_gid=e.data.branch_gid});var e="api/deferral/deferralSummary",t={loan_gid:a.loan_gid};l.getparams(e,t).then(function(e){a.deferrals=e.data.deferralSummaryDtls});var e="api/deferral/deferral";l.get(e).then(function(e){a.deferral_list=e.data.deferral_list});var e="api/entity/entity";l.get(e).then(function(e){a.entity_list=e.data.entity_list});var e="api/branch/branch";l.get(e).then(function(e){a.branch_list=e.data.branch_list});var e="api/covenanttype/getcovenanttype";l.get(e).then(function(e){a.covenanttype_list=e.data.covenanttype_list});var r={deferral_gid:""},e="api/deferral/Getcaddoc";l.getparams(e,r).then(function(e){1==e.data.status&&(a.filename_list=e.data.filename_list)})}var _=this;_.title="loan2deferralcontroller";var f;g();var v;a.onselectedchangedeferral=function(){a.critical=!0,a.MDLcriticallity=a.deferralname,a.criticallity=a.deferralname.criticallity,a.remarks=a.deferralname.comments,a.customerremarks=a.deferralname.comments},a.onselectedchangecovenant=function(){a.critical=!0,a.MDLcriticallity=a.covenanttype,a.criticallity=a.covenanttype.criticallity,a.remarks=a.covenanttype.comments,a.customerremarks=a.covenanttype.comments},a.btncopy=function(){v=a.remarks,a.customerremarks=v},a.isShowHide=function(e){"show"==e?(a.showval=!0,a.hideval=!1,a.showdiv=!0):"hide"==e?(a.showval=!1,a.hideval=!0,a.showdiv=!0):(a.showval=!1,a.hideval=!1,a.showdiv=!1)},a.upload=function(e,t,r){var n={name:e[0].name,file:e[0]},o=p.fnCheckValidDocType(e[0].name,"");if(0==o)return c.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var i=new FormData;i.append("fileupload",n.file),i.append("file_name",n.name),i.append("document_name",a.documentname),i.append("deferral_gid",a.deferral_gid),i.append("loan_gid",a.loan_gid),i.append("project_flag","Default"),a.uploadfrm=i;var s="api/deferral/UploadcadDocument";lockUI(),l.postFile(s,a.uploadfrm).then(function(e){if(a.filename_list=e.data.filename_list,$("#addupload").val(""),$("#editupload").val(""),1==e.data.status){unlockUI(),c.alert("Document Uploaded Successfully..!!","success");var t={deferral_gid:a.deferral_gid},r="api/deferral/Getcaddoc";l.getparams(r,t).then(function(e){1==e.data.status&&(a.filename_list=e.data.filename_list)})}else unlockUI(),c.alert("File Format Not Supported!")})},a.downloads=function(e,t){m.Downloaddocument(e,t)},a.popupView=function(e){a.deferral_gid=e,a.deferral_gid=localStorage.setItem("deferral_gid",e),r.go("app.viewloan2deferralDetails")},a.deferralback=function(e){r.go("app.loanManagement")},a.isShowHideAdd=function(e){"Deferral"==e?(a.showDeferralAdd=!0,a.showCovenantAdd=!1):(a.showDeferralAdd=!1,a.showCovenantAdd=!0)},a.isShowHideEdit=function(e){"Deferral"==e?(a.showDeferralEdit=!0,a.showCovenantEdit=!1):(a.showDeferralEdit=!1,a.showCovenantEdit=!0)},a.deferralSubmit=function(e){var t,r,n,o;if("Deferral"==a.trackingtype){if(void 0==a.deferralname||""==a.deferralname)return void c.alert("Kindly select the deferral","warning");t=$("#deferralname :selected").text(),r=a.deferralname.deferral_gid,n="",o=""}else if("Covenant"==a.trackingtype){if(void 0==a.covenanttype||""==a.covenanttype)return void c.alert("Kindly select the covenant","warning");n=$("#covenanttype_name :selected").text(),o=a.covenanttype.covenanttype_gid,t="",r=""}var i={entity_gid:a.entity_gid,branch_gid:a.branch_gid,entity_name:a.entityName,branch_name:a.branchName,loan_gid:a.loan_gid,record_id:a.record_id,tracking_type:a.trackingtype,criticallity:a.criticallity,vertical_code:a.vertical_code,customer_gid:a.customer_gid,covenanttype_gid:o,deferral_name:t,covenanttype_name:n,deferraltype_gid:r,deferral_category:a.deferralcategory,
due_date:a.due_date,remarks:a.remarks,customerremarks:a.customerremarks,zonal_name:a.zonal_name,businesshead_name:a.businesshead_name,relationshipmgmt_name:a.rm_name,cluster_manager_name:a.cluster_manager_name,creditmgmt_name:a.creditmgmt_name,zonalGid:a.zonalHead,businessHeadGid:a.businessHead,relationshipMgmtGid:a.relationshipMgmt,clustermanagerGid:a.clustermanager,creditmanager_gid:a.creditmanager,customer_name:a.customerName};if("Deferral"==a.trackingtype){lockUI();var s="api/deferral/loan2Deferral";l.post(s,i).then(function(e){1==e.data.status?(unlockUI(),c.alert("Deferral Created Successfully..!!","success"),a.entity="",a.branch="",a.trackingtype="",a.deferralname.deferral_gid="",a.deferralname="",a.deferralcategory="",a.due_date="",a.critical=!1,a.showval=!1,a.hideval=!1,document.getElementById("deferralforms").reset()):(unlockUI(),c.alert("Error Occurred While Creating Deferral!"),document.getElementById("deferralforms").reset()),g()})}else if("Covenant"==a.trackingtype){lockUI();var s="api/deferral/loan2Deferral";l.post(s,i).then(function(e){1==e.data.status?(unlockUI(),c.alert("Deferral Created Successfully..!!","success"),a.entity="",a.branch="",a.trackingtype="",a.covenanttype.covenanttype_gid="",a.covenanttype="",a.deferralcategory="",a.due_date="",a.critical=!1,a.showval=!1,a.hideval=!1,document.getElementById("deferralforms").reset()):(unlockUI(),c.alert("Error Occurred While Creating Deferral!","warning"),document.getElementById("deferralforms").reset()),g()})}},a.popupEdit=function(e){a.deferral_gid=e,a.activeAdd=!1,a.DivEdittab=!0;var t={deferral_gid:localStorage.getItem("deferral_gid")},r="api/deferral/checkerlist";l.getparams(r,t).then(function(e){a.checker_list=e.data.checker_list}),a.entity_list_edit=a.entity_list,a.branch_list_edit=a.branch_list,a.deferral_list_edit=a.deferral_list,a.covenanttype_list_edit=a.covenanttype_list;var n={deferral_gid:e},r="api/deferral/Getdeferraldetails";l.getparams(r,n).then(function(e){a.entityEdit=e.data.entity_gid,a.branchEdit=e.data.branch_gid,a.deferralcategoryEdit=e.data.deferral_category,a.trackingtypeEdit=e.data.tracking_type,a.deferralnameEdit=e.data.deferraltype_gid,a.covenanttypeEdit=e.data.covenanttype_gid,a.due_dateEdit=e.data.due_date,a.due_dateEdit=Date.parse(a.due_dateEdit),a.criticallity=e.data.criticallity,a.remarksEdit=e.data.remarks,a.customerremarksEdit=e.data.customerremarks,a.checker_status=e.data.checker_status,a.checker_remarks=e.data.checker_remarks,"PushBack"==e.data.checker_status?a.showvalchecker_pushback=!0:a.showvalchecker_pushback=!1,"Deferral"==a.trackingtypeEdit?(a.showDeferralEdit=!0,a.showCovenantEdit=!1):(a.showDeferralEdit=!1,a.showCovenantEdit=!0);var t="api/deferral/Getcaddoc";l.getparams(t,n).then(function(e){1==e.data.status&&(a.filename_list=e.data.filename_list)})})},a.loan2deferralUpdateEdit=function(){var e,t,r=a.deferral_list.map(function(e){return e.deferraltype_gid}).indexOf(a.deferralnameEdit);e=r==-1?"":a.deferral_list[r].deferral_name;var n=a.covenanttype_list.map(function(e){return e.covenanttype_gid}).indexOf(a.covenanttypeEdit);t=n==-1?"":a.covenanttype_list[n].covenanttype_name,"Covenant"==a.trackingtypeEdit?(a.deferralname="",e=""):(a.covenanttypeEdit="",t="");var o={deferral_gid:a.deferral_gid,entity_gid:a.entity_gid,entity_name:a.entityName,branch_gid:a.branch_gid,branch_name:a.branchName,customer_gid:a.customer_gid,customer_name:a.customerName,loan_gid:a.loan_gid,zonalhead_gid:a.zonalHead,zonalhead_name:a.zonal_name,businesshead_gid:a.businessHead,businesshead_name:a.businesshead_name,clustermgr_gid:a.clustermanager,clusterhead_name:a.cluster_manager_name,relationmgr_gid:a.relationshipMgmt,relationmgr_name:a.rm_name,creditmgr_gid:a.creditmanager,creditmgr_name:a.creditmgmt_name,category_gid:a.deferralcategoryEdit,tracking_type:a.trackingtypeEdit,deferraltype_gid:a.deferralnameEdit,deferraltype_name:e,covenanttype_gid:a.covenanttypeEdit,covenanttype_name:t,duedate:a.due_dateEdit,criticallity:a.criticallity,vertical_gid:a.vertical_gid,vertical_code:a.vertical_code,remarks:a.remarksEdit,customerremarks:a.customerremarksEdit,checker_status:a.checker_status},i="api/deferral/update";lockUI(),l.post(i,o).then(function(e){1==e.data.status?(unlockUI(),g(),document.getElementById("critical").style.visibility="hidden",a.activeAdd=!0,a.DivEdittab=!1,a.deferral_gid="",c.alert("Deferral Updated Successfully..!!","success")):(unlockUI(),c.alert("Error Occurred While Updating Deferral !"))})}}angular.module("angle").controller("loan2deferralcontroller",e),e.$inject=["$rootScope","$modal","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){t.totalDisplayed=100;var e="api/loan/loanSummary";lockUI(),l.get(e).then(function(e){unlockUI(),t.loan_data=e.data.loanDetails,null==t.loan_data?(t.total=0,t.totalDisplayed=0):(t.total=t.loan_data.length,t.loan_data.length<100&&(t.totalDisplayed=t.loan_data.length))}),t.loadMore=function(e){if(void 0==e)return void c.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.loan_data){if(!(e<t.loan_data.length))return unlockUI(),void c.alert(" Total Summary "+t.loan_data.length+" Records Only","warning");t.totalDisplayed+=a,t.loan_data.length<t.totalDisplayed&&(t.totalDisplayed=t.loan_data.length,c.alert(" Total Summary "+t.loan_data.length+" Records Only","warning")),unlockUI()}unlockUI()};var e="api/customer/customer";l.get(e).then(function(e){t.customer_list=e.data.customer_list});var e="api/employee/employee";l.get(e).then(function(e){t.employee_list=e.data.employee_list})}var g=this;g.title="loanmanagement",p(),t.popuploan=function(){a.go("app.createLoan")},t.edit=function(e){t.loan_gid=e,t.loan_gid=localStorage.setItem("loan_gid",e),a.go("app.editLoan")},t.PopupNewLoanRef=function(e,t,a){function n(r,n){r.customername=a,r.loanref_no=t,r.ok=function(){n.close("closed")},r.LoanRefUpdate=function(){var a={loan_gid:e,newloanref_no:r.txtnewloanrefno,oldloanref_no:t};lockUI();var o="api/loan/LoanRefUpdate";l.post(o,a).then(function(e){1==e.data.status?(unlockUI(),n.close("closed"),p(),c.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})):(n.close("closed"),c.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}r.open({templateUrl:"/updateLoanref.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]},t.createDeferral=function(e){t.loan_gid=e,t.loan_gid=localStorage.setItem("loan_gid",e),a.go("app.loan2deferral")}}angular.module("angle").controller("loanmanagement",e),e.$inject=["$rootScope","$scope","$state","$modal","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){t.totalDisplayed=100,lockUI();var e="api/loan/getLoanmasterSummary";c.get(e).then(function(e){unlockUI(),t.vertical=e.data.loanDetails,null==t.vertical?(t.total=0,t.totalDisplayed=0):(t.total=t.vertical.length,t.vertical.length<100&&(t.totalDisplayed=t.vertical.length))})}var _=this;_.title="loancontroller",g(),t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.vertical){if(!(e<t.vertical.length))return unlockUI(),void s.alert(" Total Summary "+t.vertical.length+" Records Only","warning");t.totalDisplayed+=a,t.vertical.length<t.totalDisplayed&&(t.totalDisplayed=t.vertical.length,s.alert(" Total Summary "+t.vertical.length+" Records Only","warning")),unlockUI()}unlockUI()},t["delete"]=function(e){var t={loanmaster_gid:e};n.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){var a="api/loan/deleteloanmaster";c.getparams(a,t).then(function(e){1==e.data.status?g():(s.alert("Error Occurred While Deleting Loan!",{status:"warning",pos:"top-right",timeout:3e3}),g())}),n.swal("Deleted Successfully!")}})},t.popuploan=function(){function e(e,t){e.ok=function(){t.close("closed")},e.segmentSubmit=function(){var r={remarks:e.remarks},n="api/loan/loanCreate";c.post(n,r).then(function(e){1==e.data.status?(t.close("closed"),s.alert("Loan Added Successfully..!!","success"),g()):(s.alert("Error Occurred While Adding Loan!","warning"),g())}),a.go("app.loanMaster")}}r.open({templateUrl:"/myModalContent.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},t.edit=function(e){function t(t,a){var r={loanmaster_gid:e},n="api/loan/editloanmaster";c.getparams(n,r).then(function(e){t.descriptionedit=e.data.loanTitleedit,t.loanmaster_gid=e.data.loanmaster_gid}),t.ok=function(){a.close("closed")},t.segmentUpdate=function(e){var r={loanTitleedit:t.descriptionedit,loanmaster_gid:t.loanmaster_gid},n="api/loan/updateloanmaster";c.post(n,r).then(function(e){1==e.data.status?(g(),a.close("closed"),s.alert("Loan Updated Successfully..!!","success")):(s.alert("Error Occurred While Updating Loan !","success"),g())})}}r.open({templateUrl:"/myModaledit.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("loancontroller",e),e.$inject=["$rootScope","$scope","$state","$modal","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){t.customermail_gid=localStorage.getItem("customermail_gid");var e={customermail_gid:t.customermail_gid},a="api/customerAlertGenerate/mailHistoryView";lockUI(),c.getparams(a,e).then(function(e){t.objCutomerAlert=e.data,t.content=e.data.content,document.getElementById("test").innerHTML+=t.content,t.mail_data=e.data.mailhistorydeferral_list,unlockUI()})}var k=this;k.title="mailHistoryViewcontroller",y(),t.back=function(){r.go("app.customerAlertHistory")}}angular.module("angle").controller("mailHistoryViewcontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){t.totalDisplayed=100;var e="api/customerAlertGenerate/mailManagement";lockUI(),c.get(e).then(function(e){unlockUI(),t.customer_data=e.data.customermail_list,null==t.customer_data?(t.total=0,t.totalDisplayed=0):(t.total=t.customer_data.length,t.customer_data.length<100&&(t.totalDisplayed=t.customer_data.length))})}var k=this;k.title="mailManagementcontroller",y(),t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.customer_data){if(!(e<t.customer_data.length))return unlockUI(),void s.alert(" Total Summary "+t.customer_data.length+" Records Only","warning");t.totalDisplayed+=a,t.customer_data.length<t.totalDisplayed&&(t.totalDisplayed=t.customer_data.length,s.alert(" Total Summary "+t.customer_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.send=function(e){t.customeralert_gid=e,t.customeralert_gid=localStorage.setItem("customeralert_gid",e),r.go("app.sendMailalert")},t.mailHistory=function(e){t.customer_gid=e,t.customer_gid=localStorage.setItem("customer_gid",e),t.pageNavigation=localStorage.setItem("mailManagement","mailManagement"),r.go("app.customerAlertHistory")}}angular.module("angle").controller("mailManagementcontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){t.totalDisplayed=100;var e="api/deferral/manageDeferralSummary";lockUI(),l.get(e).then(function(e){t.deferral_data=e.data.managedeferralSummaryDtls,unlockUI(),null==t.deferral_data?(t.total=0,t.totalDisplayed=0):(t.total=t.deferral_data.length,t.deferral_data.length<100&&(t.totalDisplayed=t.deferral_data.length))})}var g=this;g.title="manageDeferral",p(),t.loadMore=function(e){if(void 0==e)return void c.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.deferral_data){if(!(e<t.deferral_data.length))return unlockUI(),void c.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning");t.totalDisplayed+=a,t.deferral_data.length<t.totalDisplayed&&(t.totalDisplayed=t.deferral_data.length,c.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.edit=function(e){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),r.go("app.manageDeferraledit")},t.popupdeferral=function(){r.go("app.manageDeferraladd")},t.popupView=function(e){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),r.go("app.manageDeferralview")}}angular.module("angle").controller("manageDeferral",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){_.open=function(e){e.preventDefault(),e.stopPropagation(),_.opened=!0},_.dateOptions={formatYear:"yy",startingDay:1},_.formats=["dd-MM-yyyy"],_.format=_.formats[0],$("#loandata").multiselect({includeSelectAllOption:!0});var e="api/vertical/vertical";l.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/entity/entity";l.get(e).then(function(e){t.entity_list=e.data.entity_list});var e="api/branch/branch";l.get(e).then(function(e){t.branch_list=e.data.branch_list});var e="api/deferral/deferral";l.get(e).then(function(e){t.deferral_list=e.data.deferral_list});var e="api/covenanttype/getcovenanttype";l.get(e).then(function(e){t.covenanttype_list=e.data.covenanttype_list});var e="api/employee/employee";l.get(e).then(function(e){t.employee_list=e.data.employee_list});var a={deferral_gid:""},e="api/deferral/Getcaddoc";l.getparams(e,a).then(function(e){1==e.data.status&&(t.filename_list=e.data.filename_list)}),t.onselectedchangecustomer=function(e){var a={customer_gid:t.customer_gid},r="api/deferral/customer2loan";l.getparams(r,a).then(function(e){t.loan=e.data.loan}),t.showcustomer=!0,t.showdetails=!0;var r="api/loan/customer_getheads";l.getparams(r,a).then(function(e){t.mdlheadsofcustomer=e.data,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.clustermanager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_gid=e.data.creditmanager_gid,t.vertical_code=e.data.vertical_code,t.vertical=!0})},t.onselectedchangedeferral=function(e){void 0==t.deferralname?(t.MDLcriticallity="",t.criticallity="",t.remarks="",t.customerremarks="",t.critical=!1):(t.MDLcriticallity=t.deferralname,t.criticallity=t.deferralname.criticallity,t.remarks=t.deferralname.comments,t.customerremarks=t.deferralname.comments,t.critical=!0)},t.onselectedchangecovenant=function(e){void 0==t.covenanttype?(t.MDLcriticallity="",t.criticallity="",t.remarks="",t.customerremarks="",t.critical=!1):(t.MDLcriticallity=t.covenanttype,t.criticallity=t.covenanttype.criticallity,t.remarks=t.covenanttype.comments,t.customerremarks=t.covenanttype.comments,t.critical=!0)}}var _=this;_.title="manageDeferraladd",g();var f;t.complete=function(e){if(e.length>=3){t.message="";var a="api/customer/ExploreCustomer",r={customername:e};l.getparams(a,r).then(function(e){1==e.data.status?(t.message="",t.customer_list=e.data.Customers):t.message="No Records"})}else t.customer_list=null,t.message="Type atleast three character"},t.fillTextbox=function(e,a){t.customer=a,t.customer_gid=e,t.customer_list=null;var r={customer_gid:e},n="api/deferral/customer2loan";l.getparams(n,r).then(function(e){t.loan=e.data.loan}),t.showcustomer=!0,t.showdetails=!0;var n="api/loan/customer_getheads";l.getparams(n,r).then(function(e){t.mdlheadsofcustomer=e.data,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.clustermanager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_gid=e.data.creditmanager_gid,t.vertical_code=e.data.vertical_code,t.vertical=!0})},t.btncopy=function(){f=t.remarks,t.customerremarks=f},t.isShowHide=function(e){"show"==e?(t.showval=!0,t.hideval=!1,t.showdiv=!0):"hide"==e?(t.showval=!1,t.hideval=!0,t.showdiv=!0):(t.showval=!1,t.hideval=!1,t.showdiv=!0)},t.upload=function(e,a,r){var n={name:e[0].name,file:e[0]},o=p.fnCheckValidDocType(e[0].name,"");if(0==o)return c.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var i=new FormData;i.append("fileupload",n.file),i.append("file_name",n.name),i.append("document_name",t.documentname),i.append("deferral_gid",t.deferral_gid),i.append("loan_gid",t.loan_gid),i.append("project_flag","Default"),t.uploadfrm=i;var s="api/deferral/UploadcadDocument";lockUI(),l.postFile(s,t.uploadfrm).then(function(e){if(t.filename_list=e.data.filename_list,$("#addupload").val(""),$("#editupload").val(""),1==e.data.status){unlockUI(),c.alert("Document Uploaded Successfully..!!","success");var a={deferral_gid:t.deferral_gid},r="api/deferral/Getcaddoc";l.getparams(r,a).then(function(e){1==e.data.status&&(t.filename_list=e.data.filename_list)})}else unlockUI(),c.alert("File Format Not Supported!")})},t.downloads=function(e,t){m.Downloaddocument(e,t)},t.deferralback=function(e){a.go("app.manageDeferral")},t.deferralSubmit=function(){var e,r,n,o,e=$("#deferral_name :selected").text(),n=$("#covenanttype_name :selected").text(),i=$("#zonal_name :selected").text(),s=$("#businesshead_name :selected").text(),d=$("#relationshipmgmt_name :selected").text(),u=$("#cluster_manager_name :selected").text(),m=$("#creditmgmt_name :selected").text(),p=$("#entity_name :selected").text(),g=$("#branch_name :selected").text();if("Deferral"==t.trackingtype){if(void 0==t.deferralname)return void c.alert("Kindly select the deferral","warning");e=$("#deferralname :selected").text(),r=t.deferralname.deferral_gid,n="",o=""}else if("Covenant"==t.trackingtype){if(void 0==t.covenanttype)return void c.alert("Kindly select the covenant","warning");e="",r="",n=$("#covenanttype_name :selected").text(),o=t.covenanttype.covenanttype_gid}var _={entity_gid:t.entity.entity_gid,branch_gid:t.branch.branch_gid,entity_name:p,branch_name:g,customer_gid:t.customer_gid,covenanttype_gid:o,criticallity:t.criticallity,deferraltype_gid:r,loans:t.$parent.loan,record_id:t.record_id,tracking_type:t.trackingtype,vertical_code:t.vertical_code,deferral_name:e,covenanttype_name:n,deferral_gid:r,deferral_category:t.deferralcategory,due_date:t.due_date,sanction_refno:t.sanctionrefno,sanction_date:t.sanctiondate,remarks:t.remarks,customerremarks:t.customerremarks,customer_name:t.customer,zonal_name:i,businesshead_name:s,relationshipmgmt_name:d,cluster_manager_name:u,creditmgmt_name:m,zonalGid:t.zonalHead,businessHeadGid:t.businessHead,relationshipMgmtGid:t.relationshipMgmt,clustermanagerGid:t.clustermanager,creditmanager_gid:t.creditmgmt_gid};lockUI();var f="api/deferral/createDeferral";l.post(f,_).then(function(e){1==e.data.status?(unlockUI(),c.alert("Deferral Created Successfully..!!","success"),a.go("app.manageDeferral")):(unlockUI(),c.alert("Select Atleast One Loan"),a.go("app.manageDeferraladd"))})},t.deferralSave=function(){var e,r,n,o,i=($("#loandata :selected").text(),$("#zonal_name :selected").text()),s=$("#businesshead_name :selected").text(),d=$("#relationshipmgmt_name :selected").text(),u=$("#cluster_manager_name :selected").text(),m=$("#creditmgmt_name :selected").text(),p=$("#entity_name :selected").text(),g=$("#branch_name :selected").text();if("Deferral"==t.trackingtype){if(void 0==t.deferralname)return void c.alert("Kindly select the deferral","warning");e=$("#deferralname :selected").text(),r=t.deferralname.deferral_gid,n="",o=""}else if("Covenant"==t.trackingtype){if(void 0==t.covenanttype)return void c.alert("Kindly select the covenant","warning");e="",r="",n=$("#covenanttype_name :selected").text(),o=t.covenanttype.covenanttype_gid}var _={entity_gid:t.entity.entity_gid,branch_gid:t.branch.branch_gid,entity_name:p,branch_name:g,customer_gid:t.customer_gid,covenanttype_gid:o,criticallity:t.criticallity,deferraltype_gid:r,loans:t.$parent.loan,record_id:t.record_id,tracking_type:t.trackingtype,vertical_code:t.vertical_code,deferral_name:e,covenanttype_name:n,deferral_gid:r,deferral_category:t.deferralcategory,due_date:t.due_date,sanction_refno:t.sanctionrefno,sanction_date:t.sanctiondate,remarks:t.remarks,customerremarks:t.customerremarks,customer_name:t.customer,zonal_name:i,businesshead_name:s,relationshipmgmt_name:d,cluster_manager_name:u,creditmgmt_name:m,zonalGid:t.zonalHead,businessHeadGid:t.businessHead,relationshipMgmtGid:t.relationshipMgmt,clustermanagerGid:t.clustermanager,creditmanager_gid:t.creditmgmt_gid};lockUI();var f="api/deferral/createDeferral";l.post(f,_).then(function(e){if(1==e.data.status){unlockUI(),c.alert("Deferral Created Successfully..!!","success"),t.deferralcategory="",t.due_date="",t.deferralname="",t.covenanttype="",t.trackingtype="",t.selectedData="",t.remarks="",t.loan=[];var r={customer_gid:t.customer_gid},n="api/deferral/customer2loan";l.getparams(n,r).then(function(e){t.loan=e.data.loan}),t.critical=!1,t.showval=!1,t.hideval=!1,document.getElementById("trackingtype").checked=!1;var r={deferral_gid:""},n="api/deferral/Getcaddoc";l.getparams(n,r).then(function(e){1==e.data.status&&(t.filename_list=e.data.filename_list)})}else unlockUI(),c.alert("Select Atleast One Loan"),a.go("app.createDeferral")})}}angular.module("angle").controller("manageDeferraladd",e),e.$inject=["$rootScope","$scope","$state","$modal","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){$("#loandata").multiselect({includeSelectAllOption:!0}),g.open=function(e){e.preventDefault(),e.stopPropagation(),g.opened=!0},g.dateOptions={formatYear:"yy",startingDay:1},g.formats=["dd-MM-yyyy"],g.format=g.formats[0];var e="api/vertical/vertical";i.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/entity/entity";i.get(e).then(function(e){t.entity_list=e.data.entity_list});var e="api/branch/branch";i.get(e).then(function(e){t.branch_list=e.data.branch_list});var e="api/deferral/deferral";i.get(e).then(function(e){t.deferral_list=e.data.deferral_list});var e="api/covenanttype/getcovenanttype";i.get(e).then(function(e){t.covenanttype_list=e.data.covenanttype_list});var e="api/customer/customer";i.get(e).then(function(e){t.customer_list=e.data.customer_list});var e="api/employee/employee";i.get(e).then(function(e){t.clusterlist=e.data.employee_list,t.businesshead_list=e.data.employee_list,t.relationshiplist=e.data.employee_list,t.zonallist=e.data.employee_list,t.creditlist=e.data.employee_list});var a={deferral_gid:localStorage.getItem("deferral_gid")},e="api/deferral/checkerlist";i.getparams(e,a).then(function(e){t.checker_list=e.data.checker_list});var r={deferral_gid:localStorage.getItem("deferral_gid")},e="api/deferral/Getdeferraldetails";i.getparams(e,r).then(function(e){t.Getdeferral=e.data,t.branchEdit=e.data.branch_gid,t.entityEdit=e.data.entity_gid,t.customer=e.data.customer_gid,t.customer_name=e.data.customer_name,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.cluster_manager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_name=e.data.creditmanager_gid,t.tracking_type=e.data.tracking_type,t.loanRefNoedit=e.data.loanGID,t.due_dateedit=e.data.due_date,t.due_dateedit=Date.parse(t.due_dateedit),"Covenant"==e.data.tracking_type?(t.showval=!0,t.hideval=!1):(t.showval=!1,t.hideval=!0),t.deferralname=e.data.deferraltype_gid,t.covenanttype=e.data.covenanttype_gid,t.deferralcategoryedit=e.data.deferral_category,t.vertical=e.data.vertical_gid,t.vertical_code=e.data.vertical_code,t.criticallity=e.data.criticallity,t.remarks=e.data.remarks,t.customerremarks=e.data.customerremarks,t.checker_status=e.data.checker_status,t.checker_remarks=e.data.checker_remarks,"PushBack"==e.data.checker_status?t.showvalchecker_pushback=!0:t.showvalchecker_pushback=!1}),t.onselectedchangedeferral=function(e){var a={deferral:e},r="api/loan/getdeferralcriticallity";i.getparams(r,a).then(function(e){t.MDLcriticallity=e.data,t.criticallity=e.data.criticallity,t.remarks=e.data.comments,t.customerremarks=e.data.comments,t.critical=!0})},t.onselectedchangecovenant=function(e){var a={covenanttype:e},r="api/loan/getcovenanttypecriticallity";i.getparams(r,a).then(function(e){t.MDLcriticallity=e.data,t.criticallity=e.data.criticallity,t.remarks=e.data.comments,t.customerremarks=e.data.comments,t.critical=!0})},t.onselectedchangecustomer=function(e){var a={customer_gid:e},r="api/loan/customer_getheads";i.getparams(r,a).then(function(e){t.vertical_code=e.data.vertical_code,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.clustermanager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmgmt_name=e.data.creditmanager_gid})};var e="api/deferral/Getcaddoc";i.getparams(e,r).then(function(e){1==e.data.status&&(t.filename_list=e.data.filename_list)})}var g=this;g.title="manageDeferraledit",p();var _;t.btncopy=function(){_=t.remarks,t.customerremarks=_},t.isShowHide=function(e){"show"==e?(t.showval=!0,t.hideval=!1):"hide"==e?(t.showval=!1,t.hideval=!0):(t.showval=!1,t.hideval=!1)},t.upload=function(e,a,r){var n={name:e[0].name,file:e[0]},o=m.fnCheckValidDocType(e[0].name,"");if(0==o)return l.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;t.deferral_gid=localStorage.getItem("deferral_gid");var c=new FormData;c.append("fileupload",n.file),c.append("file_name",n.name),c.append("document_name",t.documentname),c.append("deferral_gid",t.deferral_gid),c.append("loan_gid",t.loan_gid),c.append("project_flag","Default"),t.uploadfrm=c,document.getElementById("load").style.visibility="visible";var s="api/deferral/UploadcadDocument";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){unlockUI(),t.filename_list=e.data.filename_list,$("#addupload").val(""),1==e.data.status?(p(),l.alert("Document Uploaded Successfully..!!","success")):(unlockUI(),l.alert("File Format Not Supported!")),p()})},t.downloads=function(e,t){u.Downloaddocument(e,t)},t.deferralback=function(){a.go("app.manageDeferral")},t.deferralUpdateEdit=function(){var e,r,n,o,c,s,d,u,m,g,_=$("#vertical_code :selected").text(),f=t.entity_list.map(function(e){return e.entity_gid}).indexOf(t.entityEdit);e=f==-1?"":t.entity_list[f].entity_name;var v=t.branch_list.map(function(e){return e.branch_gid}).indexOf(t.branchEdit);r=v==-1?"":t.branch_list[v].branch_name;var h=t.customer_list.map(function(e){return e.customer_gid}).indexOf(t.customer);c=h==-1?"":t.customer_list[h].customername;var y=t.zonallist.map(function(e){return e.employee_gid}).indexOf(t.zonalHead);s=y==-1?"":t.zonallist[y].employee_name;var k=t.businesshead_list.map(function(e){return e.employee_gid}).indexOf(t.businessHead);d=k==-1?"":t.businesshead_list[k].employee_name;var S=t.clusterlist.map(function(e){return e.employee_gid}).indexOf(t.cluster_manager);u=S==-1?"":t.clusterlist[S].employee_name;var D=t.relationshiplist.map(function(e){return e.employee_gid}).indexOf(t.relationshipMgmt);m=D==-1?"":t.relationshiplist[D].employee_name;var b=t.creditlist.map(function(e){return e.employee_gid}).indexOf(t.creditmgmt_name);g=b==-1?"":t.creditlist[b].employee_name;var I=t.deferral_list.map(function(e){return e.deferraltype_gid}).indexOf(t.deferralname);n=I==-1?"":t.deferral_list[I].deferral_name;var U=t.covenanttype_list.map(function(e){return e.covenanttype_gid}).indexOf(t.covenanttype);o=U==-1?"":t.covenanttype_list[U].covenanttype_name,"Covenant"==t.tracking_type?(t.deferralname="",n=""):(t.covenanttype="",o="");var w={deferral_gid:localStorage.getItem("deferral_gid"),entity_gid:t.entityEdit,entity_name:e,branch_gid:t.branchEdit,branch_name:r,customer_gid:t.customer,customer_name:c,loan_gid:t.loanRefNoedit,zonalhead_gid:t.zonalHead,zonalhead_name:s,businesshead_gid:t.businessHead,businesshead_name:d,clustermgr_gid:t.cluster_manager,clusterhead_name:u,relationmgr_gid:t.relationshipMgmt,relationmgr_name:m,creditmgr_gid:t.creditmgmt_name,creditmgr_name:g,category_gid:t.deferralcategoryedit,tracking_type:t.tracking_type,deferraltype_gid:t.deferralname,deferraltype_name:n,covenanttype_gid:t.covenanttype,covenanttype_name:o,duedate:t.due_dateedit,criticallity:t.criticallity,vertical_code:_,vertical_gid:t.vertical,remarks:t.remarks,customerremarks:t.customerremarks,checker_status:t.checker_status},x="api/deferral/update";i.post(x,w).then(function(e){1==e.data.status?(p(),a.go("app.manageDeferral"),l.alert("Deferral Updated Successfully..!!","success")):l.alert("Error Occurred While Updating Deferral !")})}}angular.module("angle").controller("manageDeferraledit",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u){function m(){t.deferral_gid=localStorage.getItem("deferral_gid");var e={deferral_gid:t.deferral_gid},a="api/deferral/Getcaddoc";i.getparams(a,e).then(function(e){t.UploadDocumentname=e.data,t.deferrals=e.data.deferralSummaryDtls,t.deferral_gid=e.data.deferral_gid,t.loanref_no=e.data.loanref_no,t.loan_title=e.data.loan_title,t.record_id=e.data.record_id,t.deferral_name=e.data.deferral_name,t.approval_remarks=e.data.approval_remarks,t.approval_status=e.data.approval_status,t.filename_list=e.data.filename_list,t.customer_name=e.data.customer_name,t.zonal_name=e.data.zonal_name,t.businesshead_name=e.data.businesshead_name,t.rm_name=e.data.rm_name,t.customer_code=e.data.customer_code,t.vertical_code=e.data.vertical_code,t.entity_name=e.data.entity_name,t.branch_name=e.data.branch_name,t.cluster_manager_name=e.data.cluster_manager_name}),t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"},t.downloads=function(e,t){u.Downloaddocument(e,t)}}var p=this;p.title="manageDeferralview",m(),t.deferralback=function(e){a.go("app.manageDeferral")}}angular.module("angle").controller("manageDeferralview",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){t.totalDisplayed=100;var e="api/penalityAlert/penalityManagement";lockUI(),l.get(e).then(function(e){unlockUI(),t.customer_data=e.data.customermail_list,null==t.customer_data?(t.total=0,t.totalDisplayed=0):(t.total=t.customer_data.length,t.customer_data.length<100&&(t.totalDisplayed=t.customer_data.length))})}var _=this;_.title="penalityAlertcontroller",g(),t.loadMore=function(e){if(void 0==e)return void i.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.customer_data){if(!(e<t.customer_data.length))return unlockUI(),void i.alert(" Total Summary "+t.customer_data.length+" Records Only","warning");t.totalDisplayed+=a,t.customer_data.length<t.totalDisplayed&&(t.totalDisplayed=t.customer_data.length,i.alert(" Total Summary "+t.customer_data.length+" Records Only","warning")),
unlockUI()}unlockUI()},t.viewpenalityalert=function(e){localStorage.setItem("penalityalert_gid",e),a.go("app.penalityAlertView")},t.startpenalityalert=function(e){function t(e,t){var r="api/penalityAlert/Getcustomerpenalitydetails";l.getparams(r,a).then(function(t){e.customerdetails=t.data}),e.ok=function(){t.close("closed")},e.sendStartPenalityAlert=function(){var e="api/penalityAlert/startpenalityalert";lockUI(),l.post(e,a).then(function(e){1==e.data.status?(i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),t.close("closed"),g(),unlockUI()):(i.alert(e.data.message,{status:"Warning",pos:"top-center",timeout:3e3}),unlockUI())})}}var a={customeralert_gid:e};console.log(a);m.open({templateUrl:"/penalityAlertMailContent.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t.endpenalityalert=function(e){var t={customeralert_gid:e},a="api/penalityAlert/Getpenalityrecorddetails";l.getparams(a,t).then(function(e){function a(a,r){a.customerdetails=e.data,a.ok=function(){r.close("closed")},a.sendendPenalityAlert=function(){lockUI();var e="api/penalityAlert/endpenalityalert";l.post(e,t).then(function(e){1==e.data.status?(i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),r.close("closed"),g(),unlockUI()):(i.alert(e.data.message,{status:"Warning",pos:"top-center",timeout:3e3}),unlockUI())})}}if(console.log(e),0==e.data.status)return alert(e.data.message),e.data.message;m.open({templateUrl:"/endpenalityAlertMailContent.html",controller:a,size:"md"});a.$inject=["$scope","$modalInstance"]})}}angular.module("angle").controller("penalityAlertcontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","Notify","SocketService","$location","$route","$filter","ngTableParams","$modal","$resource"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){lockUI();var e={customeralert_gid:localStorage.getItem("penalityalert_gid")},a="api/penalityAlert/Getcustomerpenalitydetails";l.getparams(a,e).then(function(e){t.customerdetails=e.data,t.deferral_data=e.data.mailalert_list,t.penalityalert=e.data.penalityalert_list,t.penalityhistory=e.data.mailhistorydeferral_list}),unlockUI()}var g=this;g.title="penalityAlertViewcontroller",p(),t.back=function(){a.go("app.penalityAlert")}}angular.module("angle").controller("penalityAlertViewcontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","Notify","SocketService","$location","$route","$filter","ngTableParams","$resource"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d){function u(){t.Warning=!1;var e="api/customer/cMmail";i.get(e).then(function(e){t.txtccmail=e.data.ccmail});var e="api/vertical/vertical";i.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/employee/employee";i.get(e).then(function(e){t.employee_list=e.data.employee_list});var e="api/customer/state";i.get(e).then(function(e){t.state_list=e.data.state_list});var e="api/customer/Getconstitution";i.get(e).then(function(e){t.constitution_list=e.data.constitution_list,console.log(e.data.constitution_list)}),t.txtcountry="India"}var m=this;m.title="registerCustomer",u(),t.customerback=function(e){a.go("app.registerCustomersummary")},t.urnvalidation=function(){var e={urn:t.txtcustomerURN},a="api/MstCustomerAdd/GetURNInfo";i.getparams(a,e).then(function(e){1==e.data.status?t.Warning=!0:t.Warning=!1})},t.complete=function(e){if(e.length>=3){var a="api/customer/CommonCustomer",r={customername:e};i.getparams(a,r).then(function(e){if(1==e.data.status){t.customer_list=e.data.Customers}else null==e.data.message?(t.customer_list=null,t.message=""):(t.customer_list=null,t.message=e.data.message)})}else t.customer_list=null,t.message=""},t.fillTextbox=function(e,a){t.customer=a,t.customer_gid=e,t.customer_list=null;var r="api/customer/CommonCustomer",n={customername:a};i.getparams(r,n).then(function(e){0==e.data.status?t.message="":null==e.data.message?(t.customer_list=null,t.message=""):(t.customer_list=null,t.message=e.data.message)})},t.customerSubmit=function(){if(void 0==t.customer||null==t.customer||""==t.customer)l.alert("Kindly check the customer","warning");else if("You can't add this Customer. Tag the customer from master."==t.message)l.alert("You can't add this Customer. Tag the customer from master.","warning");else{var e={urn:t.txtcustomerURN},r="api/MstCustomerAdd/GetURNInfo";i.getparams(r,e).then(function(e){if(1==e.data.status)l.alert("Already this URN is in Imported Customer","warning");else{var r=$("#vertical_code :selected").text(),n=$("#zonalHead_name :selected").text(),o=$("#businessHead_name :selected").text(),c=$("#regionalHead_name :selected").text(),s=$("#cluster_manager_name :selected").text(),d=$("#relationshipMgmt_name :selected").text(),m=$("#creditmanager_name :selected").text(),p=$("#statename :selected").text(),g=$("#zonlRM_name :selected").text(),_=$("#riskmanager_name :selected").text(),f=$("#RiskMonitoring_Name :selected").text(),v={vertical_gid:t.vertical,vertical_code:r,customercode:t.txtcustomercode,customername:t.customer,contactperson:t.txtcontactperson,contactnumber:t.txtcontactno,mobileno:t.txtmobileno,email:t.txtemail,address1:t.txtaddress1,region:t.txtregion,address2:t.txtaddress2,state_gid:t.state_gid,state:p,postalcode:t.txtpostalcode,country:t.txtcountry,tomail:t.txttomail,ccmail:t.txtccmail,zonalGid:t.zonalHead,businessHeadGid:t.businessHead,regionalHeadGid:t.regionalHead,relationshipMgmtGid:t.relationshipMgmt,clustermanagerGid:t.clustermanager,creditmanagerGid:t.creditmanager,zonal_name:n,businesshead_name:o,regionalhead_name:c,cluster_manager_name:s,relationshipmgmt_name:d,creditmanager_name:m,customer_urn:t.txtcustomerURN,pan_number:t.pan_number,gst_number:t.gst_number,constitution_name:t.cboconstitution.constitution_name,constitution_gid:t.cboconstitution.constitution_gid,major_corporate:t.txtmajor_corporate,zonal_riskmanagerGID:t.zonalRM_GID,zonal_riskmanagerName:g,risk_managerGID:t.riskmanager_GID,riskmanager_name:_,riskMonitoring_GID:t.RiskMonitoring_GID,riskMonitoring_Name:f},h="api/customer/customerSubmit";lockUI(),i.post(h,v).then(function(e){1==e.data.status?(unlockUI(),u(),a.go("app.registerCustomersummary"),l.alert("Customer Created Successfully..!!","success")):(unlockUI(),l.alert(e.data.message)),u()})}})}}}angular.module("angle").controller("registerCustomer",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d){function u(){t.Warning=!1;var e="api/employee/employee";i.get(e).then(function(e){t.clusterlist=e.data.employee_list,t.businesshead_list=e.data.employee_list,t.regionalhead_list=e.data.employee_list,t.relationshiplist=e.data.employee_list,t.zonallist=e.data.employee_list,t.creditlist=e.data.employee_list,t.zonalrm_list=e.data.employee_list,t.rm_list=e.data.employee_list,t.riskmonitorning_list=e.data.employee_list});var e="api/customer/Getconstitution";i.get(e).then(function(e){t.constitution_list=e.data.constitution_list});var e="api/vertical/vertical";i.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/customer/state";i.get(e).then(function(e){t.state_list=e.data.state_list}),t.customer_gid=localStorage.getItem("customer_gid");var e="api/customer/Getcustomerupdatedetails",a={customer_gid:t.customer_gid};lockUI(),i.getparams(e,a).then(function(e){t.customerCodeedit=e.data.customerCodeedit,t.customerNameedit=e.data.customerNameedit,t.contactPersonedit=e.data.contactPersonedit,t.mobileNoedit=e.data.mobileNo_edit,t.contactnoedit=e.data.contactno_edit,t.emailedit=e.data.emailedit,t.txtaddress1=e.data.addressline1edit,t.txtaddress2=e.data.addressline2edit,t.regionedit=e.data.regionedit,t.countryedit=e.data.countryedit,t.vertical=e.data.vertical_gid,t.vertical_code=e.data.vertical_code,t.statename=e.data.state,t.state_gid=e.data.state_gid,t.postalcodeedit=e.data.postalcode_edit,t.tomailedit=e.data.tomailedit,t.ccmailedit=e.data.ccmailedit,t.zonalHead=e.data.zonalGid,t.businessHead=e.data.businessHeadGid,t.regionalHead=e.data.regionalHeadGid,t.clustermanager=e.data.clustermanagerGid,t.relationshipMgmt=e.data.relationshipMgmtGid,t.creditmanager=e.data.creditmanagerGid,t.customerURNedit=e.data.customer_urnedit,t.pan_number=e.data.pan_number,t.gst_number=e.data.gst_number,t.txtmajor_corporateedit=e.data.major_corporateedit,t.cboconstitutionedit=e.data.constitution_gidedit,t.ZonalRM=e.data.zonal_riskmanagerGID,t.riskmanager=e.data.risk_managerGID,t.RiskMonitoringName=e.data.riskMonitoring_GID,unlockUI()})}var m=this;m.title="registercustomerEdit",u(),t.customereditback=function(){a.go("app.registerCustomersummary")},t.urnvalidation=function(){var e={urn:t.customerURNedit},a="api/MstCustomerAdd/GetURNInfo";i.getparams(a,e).then(function(e){1==e.data.status?t.Warning=!0:t.Warning=!1})},t.customerUpdate=function(){var e={urn:t.customerURNedit},r="api/MstCustomerAdd/GetURNInfo";i.getparams(r,e).then(function(e){if(1==e.data.status)l.alert("Already this URN is in Imported Customer","warning");else{var r=$("#zonalHead_name :selected").text(),n=$("#businessHead_name :selected").text(),o=$("#regionalHead_name :selected").text(),c=$("#vertical_code :selected").text(),s=$("#cluster_manager_name :selected").text(),d=$("#relationshipMgmt_name :selected").text(),m=$("#creditmanager_name :selected").text(),p=$("#statename :selected").text(),g=$("#constitutionname :selected").text(),_=$("#zonlRM_name :selected").text(),f=$("#riskmanager_name :selected").text(),v=$("#RiskMonitoring_Name :selected").text(),h={customer_gid:t.customer_gid,customerCodeedit:t.customerCodeedit,customerNameedit:t.customerNameedit,contactPersonedit:t.contactPersonedit,mobileNoedit:t.mobileNoedit,contactnoedit:t.contactnoedit,emailedit:t.emailedit,addressline1edit:t.txtaddress1,regionedit:t.regionedit,addressline2edit:t.txtaddress2,countryedit:t.countryedit,vertical_gid:t.vertical,vertical_code:c,state_gid:t.state_gid,state:p,tomailedit:t.tomailedit,ccmailedit:t.ccmailedit,postalcodeedit:t.postalcodeedit,zonalGid:t.zonalHead,businessHeadGid:t.businessHead,regionalHeadGid:t.regionalHead,clustermanagerGid:t.clustermanager,creditmanagerGid:t.creditmanager,relationshipMgmtGid:t.relationshipMgmt,zonal_name:r,businesshead_name:n,regionalhead_name:o,cluster_manager_name:s,creditmanager_name:m,relationshipmgmt_name:d,customer_urnedit:t.customerURNedit,gst_number:t.gst_number,pan_number:t.pan_number,major_corporateedit:t.txtmajor_corporateedit,constitution_nameedit:g,constitution_gidedit:t.cboconstitutionedit,zonal_riskmanagerGID:t.ZonalRM,zonal_riskmanagerName:_,risk_managerGID:t.riskmanager,risk_managerName:f,riskMonitoring_GID:t.RiskMonitoringName,riskMonitoring_Name:v},y="api/customer/customerUpdate";i.post(y,h).then(function(e){1==e.data.status?(u(),a.go("app.registerCustomersummary"),l.alert("Customer Updated Successfully..!!","success")):l.alert(e.data.message),u()})}})}}angular.module("angle").controller("registercustomerEdit",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h,y){function k(){t.totalDisplayed=100;var e="api/customer/customerdetail";lockUI(),c.get(e).then(function(e){unlockUI(),t.customer_data=e.data.customer_list,null==t.customer_data?(t.total=0,t.totalDisplayed=0):(t.total=t.customer_data.length,t.customer_data.length<100&&(t.totalDisplayed=t.customer_data.length))})}var S=this;S.title="registerCustomersummary",k(),t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.customer_data){if(!(e<t.customer_data.length))return unlockUI(),void s.alert(" Total Summary "+t.customer_data.length+" Records Only","warning");t.totalDisplayed+=a,t.customer_data.length<t.totalDisplayed&&(t.totalDisplayed=t.customer_data.length,s.alert(" Total Summary "+t.customer_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.popupcustomer=function(){r.go("app.registerCustomer")},t.btntag2legal=function(e,t,r){function n(a,n){a.customername=t,""!=r?a.customer_urn=r:a.customer_urn="-",a.ok=function(){n.close("closed")},a.btnconfirm=function(){var o={customer_gid:e,customer_name:t,tag_remarks:a.txttag_remarks,currentcustomer_urn:r};lockUI();var i="api/customer/TagtoLegal";c.post(i,o).then(function(e){1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.close("closed"),k()):(n.close("closed"),s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}a.open({templateUrl:"/tagtoLegal.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]},t.edit=function(e){t.customer_gid=e,t.customer_gid=localStorage.setItem("customer_gid",e),r.go("app.registercustomerEdit")},t.updatecustomerURN=function(e,t,r){function n(a,n){a.customername=t,""!=r?a.customer_urn=r:a.customer_urn="-",a.ok=function(){n.close("closed")},a.UrnUpdate=function(){var t={customer_gid:e,newcustomer_urn:a.txtnewcustomerURN,currentcustomer_urn:r};lockUI();var o="api/customer/GetNewCustomerURN";c.post(o,t).then(function(e){1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.close("closed"),k()):(s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}a.open({templateUrl:"/updateURN.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]},t.btntag2npa=function(e,t,r){function n(a,n){a.customername=t,""!=r?a.customer_urn=r:a.customer_urn="-";var o={customer_gid:e},i="api/Customer/TaggedNPAHistoryList";c.getparams(i,o).then(function(e){a.customertagnpa_list=e.data.customertagnpa_list,unlockUI()}),a.ok=function(){n.close("closed")},a.btnconfirmnpa=function(){var o={customer_gid:e,customer_name:t,tag_remarks:a.txttag_remarks,currentcustomer_urn:r};lockUI();var i="api/customer/TagtoNPA";c.post(i,o).then(function(e){1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.close("closed"),k()):(n.close("closed"),s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}a.open({templateUrl:"/tagtoNPA.html",controller:n,size:"md"});n.$inject=["$scope","$modalInstance"]},t.exportcustomerdata=function(){lockUI();var e="api/customer/ExportCustomer";c.get(e).then(function(e){1==e.data.status?(y.Downloaddocument(e.data.lspath,e.data.lsname),unlockUI()):(unlockUI(),s.alert("Error Occurred While Export !","success"),k())})},t["delete"]=function(e){var t={customer_gid:e};n.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){var a="api/customer/customerDelete";c.getparams(a,t).then(function(e){1==e.data.status?k():(s.alert("Error Occurred !",{status:"warning",pos:"top-right",timeout:3e3}),k())}),n.swal("Deleted Successfully!")}})}}angular.module("angle").controller("registerCustomersummary",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u){function m(){t.totalDisplayed=100;var e="api/deferral/reopensummary";lockUI(),i.get(e).then(function(e){unlockUI(),t.cadApproval_data=e.data.rmdeferralSummaryDtls,null==t.cadApproval_data?(t.total=0,t.totalDisplayed=0):(t.total=t.cadApproval_data.length,t.cadApproval_data.length<100&&(t.totalDisplayed=t.cadApproval_data.length))})}var p=this;p.title="reopen",m(),t.loadMore=function(e){if(void 0==e)return void l.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.cadApproval_data){if(!(e<t.cadApproval_data.length))return unlockUI(),void l.alert(" Total Summary "+t.cadApproval_data.length+" Records Only","warning");t.totalDisplayed+=a,t.cadApproval_data.length<t.totalDisplayed&&(t.totalDisplayed=t.cadApproval_data.length,l.alert(" Total Summary "+t.cadApproval_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.isShowHide=function(e){"show"==e?(t.showval=!0,t.hideval=!0):"hide"==e?(t.showval=!1,t.hideval=!1):(t.showval=!1,t.hideval=!1)},t.popupApprove=function(e){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),a.go("app.reopenclosed")},t.downloads=function(e,t){var a=e,r=a.split("StoryboardAPI"),n=r[1].replace("\\","/"),o=window.location.host,i=location.protocol+"//",l=i.concat(o,n),c=document.createElement("a");t.split(".");c.download=t;var s=l;c.href=s,c.click()},t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"}}angular.module("angle").controller("reopen",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){g.open=function(e){e.preventDefault(),e.stopPropagation(),g.opened=!0},g.dateOptions={formatYear:"yy",startingDay:1},t.deferral_gid=localStorage.getItem("deferral_gid");var e={deferral_gid:t.deferral_gid},r="api/deferral/getReopen";i.getparams(r,e).then(function(e){t.UploadDocumentname=e.data,t.customer_remarks=e.data.customer_remarks,t.approvalremarks=e.data.remarks,t.deferrals=e.data.deferralSummaryDtls,t.deferral_gid=e.data.deferral_gid,t.loanref_no=e.data.loanref_no,t.loan_title=e.data.loan_title,t.record_id=e.data.record_id,t.deferral_name=e.data.deferral_name,t.approval_remarks=e.data.approval_remarks,t.approval_status=e.data.approval_status,t.def_status=e.data.def_status,t.filename_list=e.data.filename_list,t.customer_name=e.data.customer_name,t.zonal_name=e.data.zonal_name,t.businesshead_name=e.data.businesshead_name,t.rm_name=e.data.rm_name,t.credit_manager=e.data.credit_manager,t.customer_code=e.data.customer_code,t.vertical_code=e.data.vertical_code,t.entity_name=e.data.entity_name,t.branch_name=e.data.branch_name,t.deferral_approver_name=e.data.cluster_manager_name,"Approval Pending"==e.data.approval_status||"Extension Approval Pending"==e.data.approval_status?t.uploaddoc=!0:t.uploaddoc=!1});var e={deferral_gid:t.deferral_gid},r="api/deferral/getdeferralstages";i.getparams(r,e).then(function(e){1==e.data.status?t.stage_list=e.data.stage_list:document.getElementById("stages").style.display="none"});var e={deferral_gid:localStorage.getItem("deferral_gid")},r="api/deferral/checkerlist";i.getparams(r,e).then(function(e){t.checker_list=e.data.checker_list,null==t.checker_list?t.approval_history=!0:t.approval_history=!1}),t.upload=function(e,a,r){var n={name:e[0].name,file:e[0]},o=m.fnCheckValidDocType(e[0].name,"");if(0==o)return l.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",n.file),c.append("file_name",n.name),c.append("document_name",t.documentname),c.append("deferral_gid",t.deferral_gid),c.append("loan_gid",t.loan_gid),c.append("by","cad"),c.append("project_flag","Default"),t.uploadfrm=c;var s="api/deferral/uploaddeferraldocumentbycad";i.postFile(s,t.uploadfrm).then(function(e){t.filename_list=e.data.filename_list,$("#addupload").val(""),1==e.data.status?l.alert("Document Uploaded Successfully..!!","success"):l.alert("File Format Not Supported!")})},t.downloads=function(e,t){u.Downloaddocument(e,t)},t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"},t.Approve=function(){var e={def_gid:t.deferral_gid,deferral_status:t.deferral_status,due_date:t.extened_date,approval_remarks:t.approvalremarks,customer_remarks:t.customer_remarks};console.log(e);var r="api/deferral/deferralApprove";i.post(r,e).then(function(e){1==e.data.status?(a.go("app.reopen"),l.alert("Submitted Successfully..!!","success")):l.alert("Error Occurred While Submitting!")})}}var g=this;g.title="reopenclosed",p(),t.deferralback=function(e){a.go("app.reopen")},t.onselectedchange=function(e){"Extend"==e?t.showval=!0:t.showval=!1}}angular.module("angle").controller("reopenclosed",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){t.page=localStorage.getItem("page"),t.totalDisplayed=100;var e="api/deferral/reportView";lockUI(),l.get(e).then(function(e){unlockUI(),t.deferral_data=e.data.deferralSummaryDtls,null==t.deferral_data?(t.total=0,t.totalDisplayed=0):(t.total=t.deferral_data.length,t.deferral_data.length<100&&(t.totalDisplayed=t.deferral_data.length))});var e="api/vertical/vertical";l.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/branch/branch";l.get(e).then(function(e){t.branch_list=e.data.branch_list});var e="api/customer/state";l.get(e).then(function(e){t.state_list=e.data.state_list});var e="api/entity/entity";l.get(e).then(function(e){t.entity_list=e.data.entity_list})}g(),t.complete=function(e){if(e.length>=3){t.message="";var a="api/customer/ExploreCustomer",r={customername:e};l.getparams(a,r).then(function(e){1==e.data.status?(t.message="",t.customer_list=e.data.Customers):t.message="No Records"})}else t.customer_list=null,t.message="Type atleast three character"},t.fillTextbox=function(e,a){t.customer=a,t.customer_gid=e,t.customer_list=null},t.loadMore=function(e){if(void 0==e)return void c.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.deferral_data){if(!(e<t.deferral_data.length))return unlockUI(),void c.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning");t.totalDisplayed+=a,t.deferral_data.length<t.totalDisplayed&&(t.totalDisplayed=t.deferral_data.length,c.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.all=function(){t.entity_gid="",t.branch="",t.customer_gid="",t.customer="",t.vertical="",t.cbostate="",g()},t.search=function(){var e={customer_gid:t.customer_gid,vertical_gid:t.vertical,entity_gid:t.entity_gid,branch_gid:t.branch,relationshipMgmt:t.relationshipMgmt,zonalHead:t.zonalHead,businessHead:t.businessHead,deferralApprover:t.deferralApprover,state_gid:t.cbostate};lockUI();var a="api/deferral/reportsummaryview";l.post(a,e).then(function(e){unlockUI(),t.deferral_data=e.data.deferralSummaryDtls})},t.popupView=function(e){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),localStorage.setItem("page","UserReport"),r.go("app.reportpagedetails")},t["export"]=function(){void 0==t.cbostate&&(t.cbostate="");var e={customer_gid:t.customer_gid,vertical_gid:t.vertical,branch_gid:t.branch,entity_gid:t.entity_gid,relationshipMgmt:t.relationshipMgmt,zonalHead:t.zonalHead,businessHead:t.businessHead,deferralApprover:t.deferralApprover,state_gid:t.cbostate};lockUI();var a="api/deferral/excelexport";l.post(a,e).then(function(e){1==e.data.status?(p.Downloaddocument(e.data.lspath,e.data.lsname),unlockUI()):(unlockUI(),c.alert("Error Occurred While Export !","warning"),g())})}}angular.module("angle").controller("report",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u){function m(){t.deferral_gid=localStorage.getItem("deferral_gid");var e={deferral_gid:t.deferral_gid},a="api/deferral/Getcaddoc";i.getparams(a,e).then(function(e){t.UploadDocumentname=e.data,t.deferrals=e.data.deferralSummaryDtls,t.deferral_gid=e.data.deferral_gid,t.loanref_no=e.data.loanref_no,t.loan_title=e.data.loan_title,t.record_id=e.data.record_id,t.deferral_name=e.data.deferral_name,t.approval_remarks=e.data.approval_remarks,t.approval_status=e.data.approval_status,t.filename_list=e.data.filename_list,t.customer_name=e.data.customer_name,t.zonal_name=e.data.zonal_name,t.businesshead_name=e.data.businesshead_name,t.rm_name=e.data.rm_name,t.credit_manager=e.data.credit_manager,t.customer_code=e.data.customer_code,t.vertical_code=e.data.vertical_code,t.entity_name=e.data.entity_name,t.branch_name=e.data.branch_name,t.cluster_manager_name=e.data.cluster_manager_name});var a="api/deferral/getdeferralstages";i.getparams(a,e).then(function(e){t.stage_list=e.data.stage_list}),t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"},t.downloads=function(e,t){u.Downloaddocument(e,t)}}var p=this;p.title="viewDeferral",m(),t.deferralback=function(e){a.go("app.deferralReport")}}angular.module("angle").controller("ReportDetails",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u){function m(){t.page=localStorage.getItem("page"),t.deferral_gid=localStorage.getItem("deferral_gid");var e={deferral_gid:t.deferral_gid},a="api/deferral/Getcaddoc";i.getparams(a,e).then(function(e){t.UploadDocumentname=e.data,t.deferrals=e.data.deferralSummaryDtls,t.deferral_gid=e.data.deferral_gid,t.loanref_no=e.data.loanref_no,t.loan_title=e.data.loan_title,t.record_id=e.data.record_id,t.deferral_name=e.data.deferral_name,t.approval_remarks=e.data.approval_remarks,t.approval_status=e.data.approval_status,t.filename_list=e.data.filename_list,t.customer_name=e.data.customer_name,t.zonal_name=e.data.zonal_name,t.businesshead_name=e.data.businesshead_name,t.rm_name=e.data.rm_name,t.credit_manager=e.data.credit_manager,t.customer_code=e.data.customer_code,t.vertical_code=e.data.vertical_code,t.entity_name=e.data.entity_name,t.branch_name=e.data.branch_name,t.cluster_manager_name=e.data.cluster_manager_name});var a="api/deferral/getdeferralstages";i.getparams(a,e).then(function(e){t.stage_list=e.data.stage_list}),t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"},t.downloads=function(e,t){u.Downloaddocument(e,t)}}var p=this;p.title="viewDeferral",m(),t.deferralback=function(){"UserReport2"==t.page?a.go("app.DtsRptUserReport2"):a.go("app.userReport")}}angular.module("angle").controller("reportpagedetails",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){t.totalDisplayed=100;var e="api/deferral/directDeferralSummaryview";lockUI(),l.get(e).then(function(e){unlockUI(),t.deferral_data=e.data.deferralSummaryDtls,null==t.deferral_data?(t.total=0,t.totalDisplayed=0):(t.total=t.deferral_data.length,t.deferral_data.length<100&&(t.totalDisplayed=t.deferral_data.length))});var e="api/vertical/vertical";l.get(e).then(function(e){t.vertical_list=e.data.vertical_list});var e="api/branch/branch";l.get(e).then(function(e){t.branch_list=e.data.branch_list});var e="api/customer/state";l.get(e).then(function(e){t.state_list=e.data.state_list});var e="api/entity/entity";l.get(e).then(function(e){t.entity_list=e.data.entity_list})}g(),t.complete=function(e){if(e.length>=3){t.message="";var a="api/customer/ExploreCustomer",r={customername:e};l.getparams(a,r).then(function(e){1==e.data.status?(t.message="",t.customer_list=e.data.Customers):t.message="No Records"})}else t.customer_list=null,t.message="Type atleast three character"},t.fillTextbox=function(e,a){t.customer=a,t.customer_gid=e,t.customer_list=null},t.all=function(){t.entity_gid="",t.branch="",t.customer_gid="",t.customer="",t.vertical="",t.cbostate="",g()},t.loadMore=function(e){if(void 0==e)return void c.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.deferral_data){if(!(e<t.deferral_data.length))return unlockUI(),void c.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning");t.totalDisplayed+=a,t.deferral_data.length<t.totalDisplayed&&(t.totalDisplayed=t.deferral_data.length,c.alert(" Total Summary "+t.deferral_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.search=function(){var e={customer_gid:t.customer_gid,vertical_gid:t.vertical,entity_gid:t.entity_gid,branch_gid:t.branch,relationshipMgmt:t.relationshipMgmt,zonalHead:t.zonalHead,businessHead:t.businessHead,deferralApprover:t.deferralApprover,state_gid:t.cbostate};lockUI();var a="api/deferral/directDeferralSummaryreportview";l.post(a,e).then(function(e){unlockUI(),t.deferral_data=e.data.deferralSummaryDtls})},t.popupView=function(e){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),r.go("app.reportViewdetails")},t["export"]=function(){var e={customer_gid:t.customer_gid,vertical_gid:t.vertical,branch_gid:t.branch,entity_gid:t.entity_gid,relationshipMgmt:t.relationshipMgmt,zonalHead:t.zonalHead,businessHead:t.businessHead,deferralApprover:t.deferralApprover,state_gid:t.cbostate};lockUI();var a="api/deferral/excel";l.post(a,e).then(function(e){1==e.data.status?(p.Downloaddocument(e.data.lspath,e.data.lsname),unlockUI()):(unlockUI(),c.alert("Error Occurred While Export !","warning"),g())})}}angular.module("angle").controller("reportView",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u){function m(){t.deferral_gid=localStorage.getItem("deferral_gid");var e={deferral_gid:t.deferral_gid},a="api/deferral/Getcaddoc";i.getparams(a,e).then(function(e){t.UploadDocumentname=e.data,t.deferrals=e.data.deferralSummaryDtls,t.deferral_gid=e.data.deferral_gid,t.loanref_no=e.data.loanref_no,t.loan_title=e.data.loan_title,t.record_id=e.data.record_id,t.deferral_name=e.data.deferral_name,t.approval_remarks=e.data.approval_remarks,t.approval_status=e.data.approval_status,t.filename_list=e.data.filename_list,t.customer_name=e.data.customer_name,t.zonal_name=e.data.zonal_name,t.businesshead_name=e.data.businesshead_name,t.rm_name=e.data.rm_name,t.credit_manager=e.data.credit_manager,t.customer_code=e.data.customer_code,t.vertical_code=e.data.vertical_code,t.entity_name=e.data.entity_name,t.branch_name=e.data.branch_name,t.cluster_manager_name=e.data.cluster_manager_name});var a="api/deferral/getdeferralstages";i.getparams(a,e).then(function(e){t.stage_list=e.data.stage_list}),t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"},t.downloads=function(e,t){u.Downloaddocument(e,t)}}var p=this;p.title="viewDeferral",m(),t.deferralback=function(e){a.go("app.cadReport")}}angular.module("angle").controller("reportViewdetails",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){t.relationshipmgmt_gid=localStorage.getItem("relationshipmgmt_gid");var e={relationshipmgmt_gid:t.relationshipmgmt_gid},a="api/deferral/rmdeferraldetails";lockUI(),l.getparams(a,e).then(function(e){t.deferral_data=e.data.deferralSummaryDtls,unlockUI()});var a="api/employee/employee";l.get(a).then(function(e){t.employee_list=e.data.employee_list});
}var g=this;g.title="RMDetails",p(),t.checkall=function(e){angular.forEach(t.deferral_data,function(t){t.checked=e})},t.back=function(e){r.go("app.transferRM")},t.transfer=function(){var e=[];angular.forEach(t.deferral_data,function(t){if(1==t.checked){var a=t.deferral_gid;e.push(a)}});var a={deferral_gid:e,employee_gid:t.employee_gid},n="api/deferral/deferralTransfer";l.post(n,a).then(function(e){1==e.data.status?(c.alert("Transferred Successfully!","success"),r.go("app.transferRM")):c.alert("Select Atleast One!")})}}angular.module("angle").controller("RMDetails",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u){function m(){t.totalDisplayed=100;var e="api/deferral/getrmSummary";lockUI(),i.get(e).then(function(e){t.rmDeferral_data=e.data.rmdeferralSummaryDtls,unlockUI(),null==t.rmDeferral_data?(t.total=0,t.totalDisplayed=0):(t.total=t.rmDeferral_data.length,t.rmDeferral_data.length<100&&(t.totalDisplayed=t.rmDeferral_data.length))})}var p=this;p.title="rmManagementcontroller",m(),t.loadMore=function(e){if(void 0==e)return void l.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.rmDeferral_data){if(!(e<t.rmDeferral_data.length))return unlockUI(),void l.alert(" Total Summary "+t.rmDeferral_data.length+" Records Only","warning");t.totalDisplayed+=a,t.rmDeferral_data.length<t.totalDisplayed&&(t.totalDisplayed=t.rmDeferral_data.length,l.alert(" Total Summary "+t.rmDeferral_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.popupUpload=function(e,r){t.deferral_gid=e,t.deferral_gid=localStorage.setItem("deferral_gid",e),t.loan_gid=r,t.loan_gid=localStorage.setItem("loan_gid",r),a.go("app.rmManagementRequest")}}angular.module("angle").controller("rmManagementcontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){t.deferral_gid=localStorage.getItem("deferral_gid");var e={deferral_gid:t.deferral_gid},r="api/deferral/getDeferralDocument";i.getparams(r,e).then(function(e){t.UploadDocumentname=e.data,t.deferrals=e.data.deferralSummaryDtls,t.deferral_gid=e.data.deferral_gid,t.loanref_no=e.data.loanref_no,t.loan_title=e.data.loan_title,t.record_id=e.data.record_id,t.deferral_name=e.data.deferral_name,t.approval_remarks=e.data.approval_remarks,t.approval_status=e.data.approval_status,t.filename_list=e.data.filename_list,t.customer_name=e.data.customer_name,t.zonal_name=e.data.zonal_name,t.businesshead_name=e.data.businesshead_name,t.rm_name=e.data.rm_name,t.customer_code=e.data.customer_code,t.vertical_code=e.data.vertical_code,t.entity_name=e.data.entity_name,t.credit_manager=e.data.credit_manager,t.branch_name=e.data.branch_name,t.cluster_manager_name=e.data.cluster_manager_name,"Pending"==e.data.approval_status||"PushBack"==e.data.approval_status||"ReOpen"==e.data.approval_status?t.uploaddoc=!0:t.uploaddoc=!1});var e={deferral_gid:t.deferral_gid},r="api/deferral/getdeferralstages";i.getparams(r,e).then(function(e){1==e.data.status?t.stage_list=e.data.stage_list:document.getElementById("stages").style.display="none"}),t.upload=function(e,a,r){var n={name:e[0].name,file:e[0]},o=m.fnCheckValidDocType(e[0].name,"");if(0==o)return l.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",n.file),c.append("file_name",n.name),c.append("document_name",t.documentname),c.append("deferral_gid",t.deferral_gid),c.append("loan_gid",t.loan_gid),c.append("by","cad"),c.append("project_flag","Default"),t.uploadfrm=c;var s="api/deferral/UploadDocument";i.postFile(s,t.uploadfrm).then(function(e){t.filename_list=e.data.filename_list,$("#addupload").val(""),1==e.data.status?l.alert("Document Uploaded Successfully..!!","success"):l.alert("File Format Not Supported!")})},t.downloads=function(e,t){u.Downloaddocument(e,t)},t.Approve=function(){var e={def_gid:t.deferral_gid,deferral_status:t.deferral_status,due_date:t.extened_date,applied_remarks:t.applied_remarks};i.post("api/deferral/getApprove",e).then(function(e){1==e.data.status?(a.go("app.rmManagement"),l.alert("Request Raised Successfully..!!","success")):l.alert("Error Occurred While Requesting!")})}}var g=this;g.title="rmManagementRequest",p(),t.deferralback=function(e){a.go("app.rmManagement")}}angular.module("angle").controller("rmManagementRequest",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){t.totoalDisplayed=100;var e="api/security/getSecuritytype";lockUI(),c.get(e).then(function(e){t.security_data=e.data.securitytype_list,unlockUI(),null==t.security_data?(t.total=0,t.totalDisplayed=0):(t.total=t.security_data.length,t.security_data.length<100&&(t.totalDisplayed=t.security_data.length))})}var k=this;k.title="securityTypecontroller",y(),t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.security_data){if(!(e<t.security_data.length))return unlockUI(),void s.alert(" Total Summary "+t.security_data.length+" Records Only","warning");t.totalDisplayed+=a,t.security_data.length<t.totalDisplayed&&(t.totalDisplayed=t.security_data.length,s.alert(" Total Summary "+t.security_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.popupSecurity=function(){function e(e,t){e.ok=function(){t.close("closed")},e.SecuritySubmit=function(){var a={security_type:e.txtsecurity_type,bureau_code:e.txtbureau_code,lms_code:e.txtlms_code},r="api/security/createSecurityType";c.post(r,a).then(function(e){1==e.data.status?(t.close("closed"),s.alert("Security Type Added Successfully..!!","success"),y()):s.alert("Error Occurred While Adding Security Type!","warning")}),t.close("closed"),y()}}a.open({templateUrl:"/myModalContent.html",controller:e,backdrop:"static",keyboard:!1,size:"md"});e.$inject=["$scope","$modalInstance"]},t.edit=function(e){function r(t,a){t.securitytype_gid=localStorage.setItem("securitytype_gid",e);var r={securitytype_gid:e},n="api/security/GetSecurityTypeEdit";c.getparams(n,r).then(function(e){t.txteditsecurity_type=e.data.security_type,t.securityTypegid=e.data.securitytype_gid,t.txteditbureau_code=e.data.bureau_code,t.txteditlms_code=e.data.lms_code}),t.ok=function(){a.close("closed")},t.cancel=function(){a.dismiss("cancel")},t.securityUpdate=function(){var r={security_type:t.txteditsecurity_type,securitytype_gid:e,bureau_code:t.txteditbureau_code,lms_code:t.txteditlms_code},n="api/security/securityTypeUpdate";c.post(n,r).then(function(e){1==e.data.status?(a.close("closed"),s.alert("Security Type Updated Successfully..!!",{status:"success",pos:"top-center",timeout:3e3}),y()):(s.alert("Error Occurred ",{status:"warning",pos:"top-right",timeout:3e3}),y())})}}a.open({templateUrl:"/securityedit.html",controller:r,backdrop:"static",keyboard:!1,size:"md"});t.securitytype_gid=e,r.$inject=["$scope","$modalInstance"]},t["delete"]=function(e){var t={securitytype_gid:e},a="api/security/securityTypeDelete";c.getparams(a,t).then(function(e){1==e.data.status?n.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){e&&(n.swal("Deleted Successfully!"),unlockUI(),y())}):(s.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI(),y())})},t.Status_update=function(e){function t(t,a){var r={securitytype_gid:e},n="api/security/GetSecurityTypeEdit";c.getparams(n,r).then(function(e){t.securityTypenameedit=e.data.security_type,t.securityTypegid=e.data.securitytype_gid,t.txtbureau_codeedit=e.data.bureau_code,t.txtlms_codeedit=e.data.lms_code,t.rbo_status=e.data.status_log});var n="api/security/GetActiveLog";c.getparams(n,r).then(function(e){t.securitytype_list=e.data.securitytype_list}),t.ok=function(){a.close("closed")},t.update_status=function(){var r={remarks:t.txtremarks,status_log:t.rbo_status,securitytype_gid:e},n="api/security/securityTypeStatusUpdate";lockUI(),c.post(n,r).then(function(e){unlockUI(),1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),y()):s.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})}),a.close("closed")}}a.open({templateUrl:"/statusCompanyDocument.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("securityTypecontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){var e="api/segment/segment";c.get(e).then(function(e){t.segment=e.data.segment_list})}var _=this;_.title="segmentcontroller",g(),t["delete"]=function(e){var t={segment_gid:e};n.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){var a="api/segment/segmentDelete";c.getparams(a,t).then(function(e){1==e.data.status?g():(s.alert("Error Occurred While Deleting Customer!",{status:"warning",pos:"top-right",timeout:3e3}),g())}),n.swal("Deleted Successfully!")}})},t.popupsegment=function(){function e(e,t){e.ok=function(){t.close("closed")},e.segmentSubmit=function(){var r={segment_code:e.segment_code,segment_name:e.segment_name},n="api/segment/createSegment";c.post(n,r).then(function(e){1==e.data.status?(t.close("closed"),s.alert("Vertical Added Successfully..!!","success"),g()):(s.alert("Error Occurred While Adding Vertical!","warning"),g())}),a.go("app.segment")}}r.open({templateUrl:"/myModalContent.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},t.edit=function(e){function t(t,a){var r={segment_gid:e},n="api/segment/Getsegmentupdate";c.getparams(n,r).then(function(e){t.verticalNameedit=e.data.verticalNameedit,t.descriptionedit=e.data.descriptionedit,t.segment_gid=e.data.segment_gid}),t.ok=function(){a.close("closed")},t.segmentUpdate=function(){var e={verticalNameedit:t.verticalNameedit,descriptionedit:t.descriptionedit,segment_gid:t.segment_gid},r="api/segment/segmentUpdate";c.post(r,e).then(function(e){1==e.data.status?(g(),a.close("closed"),s.alert("Vertical Updated Successfully..!!","success")):(s.alert("Error Occurred While Updating Vertical !","success"),g())})}}r.open({templateUrl:"/myModaledit.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("segmentcontroller",e),e.$inject=["$rootScope","$scope","$state","$modal","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){t.customeralert_gid=localStorage.getItem("customeralert_gid");var e="api/customerAlertGenerate/Getcustomerdetails",a={customeralert_gid:t.customeralert_gid};c.getparams(e,a).then(function(e){t.customermail_list=e.data,t.customer_gid=e.data.customer_gid,t.customeralert_gid=e.data.customeralert_gid,t.customer_code=e.data.customercode,t.customer_name=e.data.customername,t.content=e.data.content,document.getElementById("test").innerHTML+=t.content,t.mailalert_list=e.data.mailalert_list})}var k=this;k.title="sendMailalert",y(),t.onselectedchangeTemplate=function(e){var a={template_gid:e},r="api/template/Content";c.getparams(r,a).then(function(e){t.content=e.data.template_content})},t.sendmail=function(e){var a={customeralert_gid:t.customeralert_gid,customer_gid:t.customer_gid,content:t.content,customercode:t.customer_code,customername:t.customer_name},n="api/customerAlertGenerate/sendMail";lockUI(),c.post(n,a).then(function(e){1==e.data.status?(unlockUI(),s.alert("Mail Sent to the Customer Successfully!","success"),r.go("app.mailManagement")):(unlockUI(),s.alert("Oops!Problem While Sent Mail.Kindly Check Mail ID"))})},t.sendback=function(){r.go("app.mailManagement")}}angular.module("angle").controller("sendMailalert",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d){function u(){}var m=this;m.title="sidebarcontroller",u()}angular.module("angle").controller("sidebarcontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){var e=window.location.href,a=e.split("lspage=");t.relpath1=a[1],t.totalDisplayed=100;var e="api/Customer/TaggedCustomerList";c.get(e).then(function(e){t.customertag_list=e.data.customertag_list,unlockUI(),null==t.customertag_list?(t.total=0,t.totalDisplayed=0):(t.total=t.customertag_list.length,t.customertag_list.length<100&&(t.totalDisplayed=t.customertag_list.length))})}var k=this;k.title="taggedCustomerListController",y(),t.btnback=function(){"regcustomer"==t.relpath1?r.go("app.registerCustomersummary"):r.go("app.customerMaster")},t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.covenant_data){if(!(e<t.covenant_data.length))return unlockUI(),void s.alert(" Total Summary "+t.covenant_data.length+" Records Only","warning");t.totalDisplayed+=a,t.covenant_data.length<t.totalDisplayed&&(t.totalDisplayed=t.covenant_data.length,s.alert(" Total Summary "+t.covenant_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.untag=function(e,r,n){function o(t,a){t.customer_name=r,""!=n?t.customer_urn=n:t.customer_urn="-";var o={customer_gid:e},i="api/Customer/TaggedHistoryList";c.getparams(i,o).then(function(e){t.customertag_list=e.data.customertag_list,unlockUI()}),t.ok=function(){a.close("closed")},t.cancel=function(){a.dismiss("cancel")},t.btnuntagcustomer=function(){var o={customer_gid:e,customer_name:r,currentcustomer_urn:n,untag_remarks:t.untagremarks},i="api/Customer/UnTagtoLegal";c.post(i,o).then(function(e){1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),a.close("closed"),y()):(a.close("closed"),s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}a.open({templateUrl:"/customeruntag.html",controller:o,size:"md"});t.customer_gid=e,o.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("taggedCustomerListController",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p,g,_,f,v,h){function y(){var e=window.location.href,a=e.split("lspage=");t.relpath1=a[1],t.totalDisplayed=100;var e="api/Customer/TaggedNPACustomerList";c.get(e).then(function(e){t.customertagnpa_list=e.data.customertagnpa_list,unlockUI(),null==t.customertagnpa_list?(t.total=0,t.totalDisplayed=0):(t.total=t.customertag_list.length,t.customertagnpa_list.length<100&&(t.totalDisplayed=t.customertag_list.length))})}var k=this;k.title="taggedNPACustomerListController",y(),t.btnback=function(){"regcustomer"==t.relpath1?r.go("app.registerCustomersummary"):r.go("app.customerMaster")},t.loadMore=function(e){if(void 0==e)return void s.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.covenant_data){if(!(e<t.covenant_data.length))return unlockUI(),void s.alert(" Total Summary "+t.covenant_data.length+" Records Only","warning");t.totalDisplayed+=a,t.covenant_data.length<t.totalDisplayed&&(t.totalDisplayed=t.covenant_data.length,s.alert(" Total Summary "+t.covenant_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.untagnpa=function(e,r,n){function o(t,a){t.customer_name=r,""!=n?t.customer_urn=n:t.customer_urn="-";var o={customer_gid:e},i="api/Customer/TaggedNPAHistoryList";c.getparams(i,o).then(function(e){t.customertagnpa_list=e.data.customertagnpa_list,unlockUI()}),t.ok=function(){a.close("closed")},t.cancel=function(){a.dismiss("cancel")},t.btnuntagnpacustomer=function(){var o={customer_gid:e,customer_name:r,currentcustomer_urn:n,untag_remarks:t.untagremarks},i="api/Customer/UnTagtoNPA";c.post(i,o).then(function(e){1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),a.close("closed"),y()):(a.close("closed"),s.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}a.open({templateUrl:"/customeruntagnpa.html",controller:o,size:"md"});t.customer_gid=e,o.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("taggedNPACustomerListController",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d){function u(){t.user_name=localStorage.getItem("user_name")}function m(e,t,a){t=t||"",a=a||512;for(var r=atob(e),n=[],o=0;o<r.length;o+=a){for(var i=r.slice(o,o+a),l=new Array(i.length),c=0;c<i.length;c++)l[c]=i.charCodeAt(c);var s=new Uint8Array(l);n.push(s)}var d=new Blob(n,{type:t});return d}var p=this;p.title="topnavbarcontroller",u(),e.$$listenerCount.downloadEvent||e.$on("downloadEvent",function(e,t){if(1==t.data.status){if("pdf"==t.data.format)a="application/pdf";else if("xls"==t.data.format)var a="application/vnd.ms-excel";else if("xlsx"==t.data.format)var a="application/vnd.ms-excel";var r=t.data.file,n=m(r,a),o=URL.createObjectURL(n),i=document.getElementById("btnpdf");i.download=t.data.name,i.href=o,i.click()}else l.alert("Error in downloading. please contact sysadmin",{status:"warning",pos:"top-right",timeout:3e3})}),e.$$listenerCount.DocumentViewerListener||e.$on("DocumentViewerListener",function(e,t){if(1==t.data.status){if("pdf"==t.data.format.toLowerCase())a="application/pdf";else if("png"==t.data.format.toLowerCase())var a="image/png";else if("jpg"==t.data.format.toLowerCase())var a="image/jpg";else if("jpeg"==t.data.format.toLowerCase())var a="image/jpeg";else if("txt"==t.data.format.toLowerCase())var a="text/plain";else if("html"==t.data.format.toLowerCase())var a="text/html";var r=t.data.file,n=m(r,a),o=URL.createObjectURL(n);const i=window.open("");i.document.write("<iframe width='100%' height='100%'  src='"+o+"#toolbar=0'></iframe>")}else l.alert("Error Occured. please contact sysadmin",{status:"warning",pos:"top-right",timeout:3e3})}),t.user_profile=function(){c.url("app/MstUserProfile")}}angular.module("angle").controller("topnavbarcontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){t.totalDisplayed=100,lockUI();var e="api/deferral/rm";l.get(e).then(function(e){t.transferRM_data=e.data.deferralSummaryDtls,unlockUI(),null==t.transferRM_data?(t.total=0,t.totalDisplayed=0):(t.total=t.transferRM_data.length,t.transferRM_data.length<100&&(t.totalDisplayed=t.transferRM_data.length))})}var g=this;g.title="transferRMcontroller",p(),t.loadMore=function(e){if(void 0==e)return void c.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.transferRM_data){if(!(e<t.transferRM_data.length))return unlockUI(),void c.alert(" Total Summary "+t.transferRM_data.length+" Records Only","warning");t.totalDisplayed+=a,t.transferRM_data.length<t.totalDisplayed&&(t.totalDisplayed=t.transferRM_data.length,c.alert(" Total Summary "+t.transferRM_data.length+" Records Only","warning")),unlockUI()}unlockUI()},t.popuptransfer=function(e){t.relationshipmgmt_gid=e,t.relationshipmgmt_gid=localStorage.setItem("relationshipmgmt_gid",e),r.go("app.RMDetails")},t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"}}angular.module("angle").controller("transferRMcontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u){function m(){}var p=this;p.title="user_logincontroller",m(),t.submitclick=function(){var e={user_code:t.user_code,user_password:t.user_password},r=s.apiList.user_login.api;lockUI(),i.postlogin(r,e).then(function(e){unlockUI(),(e.data.status=!0)&&(u.putObject("token",e.data.token),localStorage.setItem("user_name",e.data.username),a.go("app.landingpage"))})}}angular.module("angle").controller("user_logincontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m,p){function g(){t.totalDisplayed=100;var e="api/vertical/vertical";lockUI(),c.get(e).then(function(e){t.vertical=e.data.vertical_list,unlockUI()})}var _=this;_.title="verticalcontroller",g(),t.editRule=function(e){d.url("app/MstVerticalApplicantTypeRule?lsvertical_gid="+e)},t["delete"]=function(e){var t={vertical_gid:e},a="api/vertical/verticalDelete";c.getparams(a,t).then(function(e){1==e.data.status?o.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){e&&(o.swal("Deleted Successfully!"),unlockUI(),g())}):(s.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI(),g())})},t.popupvertical=function(){function e(e,t){e.ok=function(){t.close("closed")};var a="api/entity/Entity";c.get(a).then(function(t){e.entity_list=t.data.entity_list}),e.verticalSubmit=function(){var a={bureau_code:e.txtbureau_code,vertical_name:e.txtvertical_name,vertical_code:e.txtvertical_code,lms_code:e.txtlms_code,entity_gid:e.cboentity_type.entity_gid,entity_name:e.cboentity_type.entity_name,vertical_refno:e.txtvertical_refno},r="api/vertical/createVertical";c.post(r,a).then(function(e){1==e.data.status?(t.close("closed"),s.alert("Vertical Added Successfully..!!","success"),g()):s.alert("Error Occurred While Adding Vertical!","warning")}),t.close("closed"),g()}}a.open({templateUrl:"/myModalContent.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},t.edit=function(e){function t(t,a){var r={vertical_gid:e},n="api/vertical/Getverticalupdate";c.getparams(n,r).then(function(e){t.bureau_codeedit=e.data.bureau_codeedit,t.lms_codeedit=e.data.lms_codeedit,t.vertical_codeedit=e.data.verticalCodeedit,t.verticalNameedit=e.data.verticalNameedit,t.vertical_gid=e.data.vertical_gid,t.cboentity_type=e.data.entity_gid,t.txtvertical_refno=e.data.vertical_refno});var n="api/entity/Entity";c.get(n).then(function(e){t.entity_list=e.data.entity_list}),t.ok=function(){a.close("closed")},t.verticalUpdate=function(){var e=$("#entity_name :selected").text(),r={bureau_codeedit:t.bureau_codeedit,lms_codeedit:t.lms_codeedit,verticalCodeedit:t.vertical_codeedit,verticalNameedit:t.verticalNameedit,vertical_gid:t.vertical_gid,entity_gid:t.cboentity_type,entity_name:e,vertical_refno:t.txtvertical_refno},n="api/vertical/verticalUpdate";c.post(n,r).then(function(e){1==e.data.status?(g(),a.close("closed"),s.alert("Vertical Updated Successfully..!!","success")):(s.alert("Error Occurred While Updating Vertical !","success"),g())})}}a.open({templateUrl:"/myModaledit.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t.Status_update=function(e){function t(t,a){var r={vertical_gid:e},n="api/vertical/Getverticalupdate";c.getparams(n,r).then(function(e){t.bureau_codeedit=e.data.bureau_codeedit,t.lms_codeedit=e.data.lms_codeedit,t.vertical_codeedit=e.data.verticalCodeedit,t.lblvertical_name=e.data.verticalNameedit,t.rbo_status=e.data.status_log,t.txtvertical_refno=e.data.vertical_refno});var r={vertical_gid:e},n="api/vertical/GetActiveLog";c.getparams(n,r).then(function(e){t.vertical_list=e.data.vertical_list}),t.ok=function(){a.close("closed")},t.update_status=function(){var r={vertical_name:t.lblvertical_name,remarks:t.txtremarks,status_log:t.rbo_status,vertical_gid:e},n="api/vertical/VerticalStatusUpdate";lockUI(),c.post(n,r).then(function(e){unlockUI(),1==e.data.status?(s.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),g()):s.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})}),a.close("closed")}}a.open({templateUrl:"/statusCompanyDocument.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t.editTemplate=function(e){d.url("app/MstTemplateSummary?lsvertical_gid="+e)},t.editSanctionTemplate=function(e){d.url("app/MstSanctionTemplateSummary?lsvertical_gid="+e)},t.document_deferral=function(e){d.url("app/MstDisbursementDeferralDocument?vertical_gid="+e)},t.disbursement_document=function(e){d.url("app/MstVerticalDisbursementDocument?vertical_gid="+e)},t.disbursement_bankaccount=function(e){d.url("app/MstDisbursementBankAccount?vertical_gid="+e)},t.disbursement_odbelow30=function(e){d.url("app/MstDisbursementODBelow30?vertical_gid="+e)},t.disbursement_odbelow90=function(e){d.url("app/MstDisbursementODBelow90?vertical_gid="+e)},t.penal_waiver=function(e){d.url("app/MstPenalWaiver?vertical_gid="+e)},t.editContrateTemplate=function(e){d.url("app/AgrMstContrateTemplateSummary?lsvertical_gid="+e)}}angular.module("angle").controller("verticalcontroller",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u){function m(){t.deferral_gid=localStorage.getItem("deferral_gid");var e={deferral_gid:t.deferral_gid},a="api/deferral/Getcaddoc";i.getparams(a,e).then(function(e){t.UploadDocumentname=e.data,t.deferrals=e.data.deferralSummaryDtls,t.deferral_gid=e.data.deferral_gid,t.loanref_no=e.data.loanref_no,t.loan_title=e.data.loan_title,t.record_id=e.data.record_id,t.deferral_name=e.data.deferral_name,t.approval_remarks=e.data.approval_remarks,t.approval_status=e.data.approval_status,t.filename_list=e.data.filename_list,t.customer_name=e.data.customer_name,t.zonal_name=e.data.zonal_name,t.businesshead_name=e.data.businesshead_name,t.rm_name=e.data.rm_name,t.vertical_code=e.data.vertical_code,t.entity_name=e.data.entity_name,t.branch_name=e.data.branch_name,t.customer_code=e.data.customer_code,t.cluster_manager_name=e.data.cluster_manager_name}),t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"},t.downloads=function(e,t){u.Downloaddocument(e,t)}}var p=this;p.title="viewDeferral",m(),t.deferralback=function(e){a.go("app.DeferralManagement")}}angular.module("angle").controller("viewDeferral",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,r,n,o,i,l,c,s,d,u,m){function p(){t.deferral_gid=localStorage.getItem("deferral_gid");var e={deferral_gid:t.deferral_gid},a="api/deferral/Getcaddoc";i.getparams(a,e).then(function(e){t.UploadDocumentname=e.data,t.deferrals=e.data.deferralSummaryDtls,t.deferral_gid=e.data.deferral_gid,t.loanref_no=e.data.loanref_no,t.loan_title=e.data.loan_title,t.record_id=e.data.record_id,t.deferral_name=e.data.deferral_name,t.approval_remarks=e.data.approval_remarks,t.approval_status=e.data.approval_status,t.filename_list=e.data.filename_list,t.customer_name=e.data.customer_name,t.zonal_name=e.data.zonal_name,t.businesshead_name=e.data.businesshead_name,t.rm_name=e.data.rm_name,t.credit_manager=e.data.credit_manager,t.customer_code=e.data.customer_code,t.vertical_code=e.data.vertical_code,t.entity_name=e.data.entity_name,t.branch_name=e.data.branch_name,t.cluster_manager_name=e.data.cluster_manager_name}),t.close=function(e){document.getElementById("userform").reset();var t=document.getElementById(e);t.style.display="none"},t.upload=function(e,a,r){var n={name:e[0].name,file:e[0]},o=m.fnCheckValidDocType(e[0].name,"");if(0==o)return l.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var c=new FormData;c.append("fileupload",n.file),c.append("file_name",n.name),c.append("document_name",t.documentname),c.append("deferral_gid",t.deferral_gid),c.append("loan_gid",t.loan_gid),c.append("project_flag","Default"),t.uploadfrm=c;var s="api/deferral/UploadcadDocument";i.postFile(s,t.uploadfrm).then(function(e){if(t.filename_list=e.data.filename_list,$("#addupload").val(""),1==e.data.status){p(),l.alert("Document Uploaded Successfully..!!","success");$modal.open({templateUrl:"/UploadDocument.html",controller:ModalInstanceCtrl,size:"md"})}else l.alert("File Format Not Supported!");p()})},t.downloads=function(e,t){u.Downloaddocument(e,t)}}var g=this;g.title="viewloan2deferralDetails",p(),t.deferralback=function(e){a.go("app.loan2deferral")}}angular.module("angle").controller("viewloan2deferralDetails",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","DownloaddocumentService","cmnfunctionService"]}();