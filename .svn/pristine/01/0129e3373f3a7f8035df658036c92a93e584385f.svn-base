<h3>
    Allocation Report
</h3>
<div ng-controller="allocationReport">
    <style type="text/css">
        .list-group-item:hover {
            color: #000000;
            background-image: linear-gradient(90deg, #d8eef5 0%, #adc9e7 35%, #88a9d9 100%);
            font-weight: bold;
            cursor: pointer;
        }

        .panel-scroll {
            max-height: 120px;
            overflow: auto;
        }
    </style>
    <div class="panel">
        <div class="panel-body">
            <div class="row">
                <div class="col-lg-12 col-sm-12 col-md-12">
                    <div class="col-lg-8 col-sm-8 col-md-8">

                        <label class="col-form-label control-label"><strong>Customer </strong></label>
                        <input type="text" name="customer" id="customer" ng-model="customer" required
                               ng-keyup="complete(customer)" class="form-control" placeholder="Search Customer Name Here..." />

                        <ul class="list-group panel-scroll" style="height:100%; word-wrap: break-word;">
                            <li class="list-group-item" ng-repeat="m in customer_list"
                                ng-click="fillTextbox(m.customer_gid,m.customername)">{{m.customername}}</li>
                        </ul>

                        <label style="color:red;">{{message}}</label>

                    </div>

                    <div class="col-lg-4  col-sm-4 col-md-4">
                        <label>Zonal Name </label>
                        <select id="zonal_name" name="zonal_name" chosen="" ng-options="m.zonalmapping_gid as m.zonal_name for m in zonalMappingList"
                                ng-model="zonalmapping_gid" class="chosen-select form-control" required>
                            <option value=""> -------- Select Zonal Name --------</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="col-lg-4  col-sm-4 col-md-4">
                        <label>Zonal Risk Manager </label>
                        <select id="zonalrisk_manager" name="zonalrisk_manager" chosen="" ng-options="m.employee_gid as m.employee_name for m in employee_list"
                                ng-model="zonalrisk_manager" class="chosen-select form-control" required>
                            <option value=""> -------- Select Zonal Risk Manager --------</option>
                        </select>
                    </div>

                    <div class="col-lg-4  col-sm-4 col-md-4">
                        <label>Risk Manager </label>
                        <select id="risk_manager" name="risk_manager" chosen="" ng-options="m.employee_gid as m.employee_name for m in employee_list"
                                ng-model="risk_manager" class="chosen-select form-control" required>
                            <option value=""> -------- Select Risk Manager --------</option>
                        </select>
                    </div>

                    <div class="col-lg-4  col-sm-4 col-md-4" style="padding-top:6px;">
                        <br />
                        <button type="button" class="btn btn-green btn-md" style="background-color:#23b1e6;" ng-disabled="userform.$invalid" ng-click="search()" title="Search"><i class="fa fa-search"></i></button>&nbsp;&nbsp;
                        <button type="button" class="btn btn-green btn-md" style="background-color:#0d87b5;" ng-disabled="userform.$invalid" ng-click="refresh()" title="Refresh"><i class="fa fa-refresh"></i></button>&nbsp;&nbsp;
                        <button type="button" class="btn btn-green btn-md" style="background-color:#a2510b;" ng-disabled="userform.$invalid" ng-click="export()" title="Export Excel"><i class="fa fa-file"><a download="" href="" id="btnpdf" style="display:none;"></a></i></button>&nbsp;&nbsp;
                    </div>

                </div>
            </div>
            <br>
        </div>
    </div>

    <div class="panel">
        <div class="panel-body">
            <div class="row">
                <form name="pageloadform" ng-submit="form.submitForm1()" novalidate="" autocomplete="off" class="form-validate form-horizontal">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="col-lg-4 col-md-4 col-sm-4">
                            Showing 1 to {{totalDisplayed}} of {{total}} Entries
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4">

                            Show <input ng-model="pagecount" id="pagecount" type="text" name="pagecount" ng-pattern="/^\d+$/"/>
                            <button class="btn btn-info" id="loadmore" ng-disabled="!pagecount" ng-click="loadMore(pagecount)">
                                <em class="fa fa-spinner"></em> Load More
                            </button>
                            <div ng-messages="pageloadform.pagecount.$dirty && pageloadform.pagecount.$error">
                                <p class="text-danger" ng-message="pattern">This field required only numbers</p>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4">
                            <div class="input-group">
                                <input type="text" ng-model="searchtxt" placeholder="Search Here .." class="form-control input-sm" />
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-default btn-sm">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </span>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <br />
            <div class="table-responsive">
                <table class="table hover table-striped row-border">
                    <thead>
                        <tr class="bg-primary-light text-white">
                            <th class="text-nowrap">Entity</th>
                            <th class="text-nowrap">URN No</th>
                            <th class="text-nowrap">Customer Name</th>
                            <th class="text-nowrap">Vertical</th>
                            <th class="text-nowrap">Constitution</th>
                            <th class="text-nowrap">Sanction Amount</th>
                            <th class="text-nowrap">Sanction Date</th>
                            <th class="text-nowrap">Zonal</th>
                            <th class="text-nowrap">State</th>
                            <th class="text-nowrap">District</th>
                            <th class="text-nowrap">Zonal Risk Manager</th>
                            <th class="text-nowrap">Risk Manager</th>
                            <th class="text-nowrap">Allocated By</th>
                            <th class="text-nowrap">Allocated Date</th>
                            <th class="text-nowrap">Allocated Month</th>
                            <th class="text-nowrap">Type of Loan Vertical</th>
                            <th class="text-nowrap">Type of Risk Review</th>
                            <th class="text-nowrap">Turnover of last FY (audited)</th>
                            <th class="text-nowrap">Schedule Log Details</th>
                            <th class="text-nowrap">Last Visited Date</th>
                            <th class="text-nowrap">Days passed Visit</th>
                            <th class="text-nowrap">Visit Completed Date</th>
                            <th class="text-nowrap">Visit Completed Month</th>
                            <th class="text-nowrap">Allocation Status</th>
                            <th class="text-nowrap">ATR Status</th>
                            <th class="text-nowrap">Tier1 Status</th>
                            <th class="text-nowrap">Tier2 Status</th>
                            <th class="text-nowrap">Tier3 Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="data in allocationdtl_list|filter :searchtxt|limitTo:totalDisplayed">
                            <td data-title="'Entity'">{{data.entity_name}}</td>
                            <td data-title="'URN No'">{{data.customer_urn}}</td>
                            <td data-title="'Customer Name'">{{data.customername}}</td>
                            <td data-title="'Vertical'">{{data.vertical}}</td>
                            <td data-title="'Constitution'">{{data.constitution}}</td>
                            <td data-title="'Sanction Amount'">{{data.sanction_amount}}</td>
                            <td data-title="'Sanction Date'">{{data.sanction_date}}</td>
                            <td data-title="'Zonal'">{{data.zonal_name}}</td>
                            <td data-title="'State'">{{data.state_name}}</td>
                            <td data-title="'District'">{{data.district_name}}</td>
                            <td data-title="'Zonal Risk Manager'">{{data.ZonalRMname}}</td>
                            <td data-title="'Risk Manager'">{{data.assigned_RM}}</td>
                            <td data-title="'Allocated By'">{{data.created_by}}</td>
                            <td data-title="'Allocated Date'">{{data.allocated_date}}</td>
                            <td data-title="'Allocated Month'">{{data.allocatedmonth}}</td>
                            <td data-title="'Type of Loan Vertical'">{{data.typeof_loanvertical}}</td>
                            <td data-title="'Type of Risk Review'">{{data.typeof_riskreview}}</td>
                            <td data-title="'Turnover of last FY (audited)'">{{data.turnover_lastFY}}</td>
                            <td data-title="'Schedule Log Details'">{{data.schedule_status}}</td>
                            <td data-title="'Last Visited Date'" class="text-nowrap">{{data.lastvisit_date}}</td>
                            <td data-title="'Days passed Visit'" class="text-nowrap">{{data.count_lastvisit}}</td>
                            <td data-title="'Visit Completed Date'">{{data.visited_date}}</td>
                            <td data-title="'Visit Completed Month'">{{data.visit_allocatemonth}}</td>
                            <td data-title="'Allocation Status'">{{data.allocation_status}}</td>
                            <td data-title="'ATR Status'" ng-switch="data.observation_flag">
                                <label class="label label-info" ng-switch-when="N">Pending</label>
                                <label class="label label-success" ng-switch-when="Y">Approved</label>
                                <label ng-switch-default>-</label>
                            </td>
                            <td data-title="'Tier 1 Status'" ng-switch="data.tier1_approvalstatus">
                                <label class="label label-info" ng-switch-when=Pending>Pending</label>
                                <label class="label label-success" ng-switch-when=Approved>Approved</label>
                                <label class="label label-danger" ng-switch-when=Rejected>Rejected</label>
                                <label ng-switch-default>-</label>
                            </td>
                            <td data-title="'Tier 2 Status'" ng-switch="data.tier2_approval_status">
                                <label class="label label-info" ng-switch-when=Pending>Pending</label>
                                <label class="label label-success" ng-switch-when=Approved>Approved</label>
                                <label class="label label-danger" ng-switch-when=Rejected>Rejected</label>
                                <label ng-switch-default>-</label>
                            </td>
                            <td data-title="'Tier 3 Status'" ng-switch="data.tier3_flag">
                                <label class="label label-info" ng-switch-when="N">Pending</label>
                                <label class="label label-success" ng-switch-when="Y">Completed</label>
                                <label ng-switch-default>-</label>
                            </td>
                            <td class="text-nowrap">

                                <button title="Allocation Details" class="btn btn-info btn-sm"
                                        ng-click="viewcustomerdtl(data.allocationdtl_gid,data.tier1format_gid)">
                                    <em class="fa fa-retweet"></em>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>