<h3>
    Deferral Details
</h3>
<div ng-controller="reopenclosed as dpick">
    <div id="panelDemo8" class="panel panel-success ">
        <div class="panel-heading">DEFERRAL DETAILS</div>

        <div class="panel-body">

            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="col-lg-4  col-sm-4 col-md-4">
                        <strong class="mt0">Loan Reference Number</strong><br />
                        <p>{{UploadDocumentname.loanref_no}}</p>
                    </div>

                    <div class="col-lg-4  col-sm-4 col-md-4">
                        <strong class="mt0">Customer ID</strong>
                        <br />
                        <p>{{UploadDocumentname.customer_code}}</p>
                    </div>

                    <div class="col-lg-4  col-sm-4 col-md-4">
                        <strong class="mt0">Customer Name</strong>
                        <br />
                        <p>{{UploadDocumentname.customer_name}}</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="col-lg-4  col-sm-4 col-md-4">
                        <strong class="mt0">Vertical</strong><br />
                        <p>{{UploadDocumentname.vertical_code}}</p>
                    </div>

                    <div class="col-lg-4  col-sm-4 col-md-4">
                        <strong class="mt0">Entity</strong>
                        <br />
                        <p>{{UploadDocumentname.entity_name}}</p>
                    </div>

                    <div class="col-lg-4  col-sm-4 col-md-4">
                        <strong class="mt0">Branch</strong>
                        <br />
                        <p>{{UploadDocumentname.branch_name}}</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">


                    <div class="col-lg-4  col-sm-4 col-md-4">
                        <strong>Record ID</strong><br />
                        <p>{{record_id}}</p>
                    </div>
                    <div class="col-lg-4  col-sm-4 col-md-4">
                        <strong>Deferral Type</strong><br />
                        <p>{{UploadDocumentname.deferral_name}}</p>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <strong>Zonal Head</strong>
                        <br />
                        <p>{{UploadDocumentname.zonal_name}}</p>
                    </div>

                </div>
            </div>


            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 ">

                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <strong>Business Head </strong><br />
                        <p>{{businesshead_name}}</p>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <strong>Cluster Manager</strong><br />
                        <p>{{UploadDocumentname.cluster_manager_name}}</p>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <strong>Relationship Manager </strong>
                        <p>{{UploadDocumentname.rm_name}}</p>
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 ">

                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <strong>Credit Manager </strong><br />
                        <p>{{UploadDocumentname.credit_manager}}</p>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <strong>Catagory</strong>
                        <p>{{UploadDocumentname.deferral_catagory}}</p>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <strong>Due Date</strong>
                        <p>{{UploadDocumentname.duedate}}</p>
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 ">
                   
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <strong>Criticality</strong>
                        <p>{{UploadDocumentname.criticallity}}</p>
                    </div>

                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <strong>Sanction Ref.No</strong>
                        <p>{{UploadDocumentname.sanction_refno}}</p>
                    </div>
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <strong>Sanction Date</strong>
                        <p>{{UploadDocumentname.sanctiondate}}</p>
                    </div>


                    
                    
                </div>
            </div>

           
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 ">
                    <div class="col-lg-12 col-md-12 col-sm-12 ">
                        <strong>Internal Remarks</strong>
                        <p ng-model="approval_remarks">{{UploadDocumentname.remarks}}</p>
                    </div>
                   
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 ">
                     
                    <div class="col-lg-12 col-md-12 col-sm-12 ">
                        <strong>Customer Remarks</strong>
                        <p ng-model="customer_remarks">{{UploadDocumentname.customer_remarks}}</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 ">
                    <div class="col-lg-12 col-md-12 col-sm-12 ">
                        <div class="table-responsive">
                            <p class="lead bb text-primary text-bold"><label style="font-weight:bold;font-size:16px;">Checker History</label></p>
                            <table class="table table-striped table-bordered table-success">
                                <thead class="panel-footer">
                                    <tr class="bg-brown-300 text-center text-white">
                                        <td style="width:20%;"><strong>Checker Status</strong></td>
                                        <td style="width:40%;"><strong>Checker Remarks</strong></td>
                                        <td style="width:40%;"><strong>Checked By</strong></td>
                                    </tr>
                                </thead>
                                <tbody ng-show="approval_history">
                                    <tr class="text-center" style="background-color:#efe8e8;">
                                        <td style="width:100%;color:darkblue;text-align:center;" colspan="11"><strong>No Checker History</strong></td>
                                    </tr>
                                </tbody>
                                <tbody>
                                    <tr ng-repeat="data in checker_list" class="bg-brown-50 row-border">
                                        <td style="width:20px;">
                                            {{data.checker_status}}
                                        </td>
                                        <td style="width:40px;">
                                            {{data.checker_remarks}}
                                        </td>
                                        <td style="width:40px;">
                                            {{data.checked_by}}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


            </div>
            <br />
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 ">
                    <div class="col-lg-12 col-md-12 col-sm-12 ">
                        <div class="table-responsive" id="stages">
                            <div>
                                <p class="lead bb text-primary text-bold"><label style="font-weight:bold;font-size:16px;">Deferral Stages</label></p>
                                <table ng-table="userTable" class="table table-striped table-bordered table-success">
                                    <thead class="panel-footer">
                                        <tr class="bg-brown-300 text-center">
                                            <td style="width:10%;"><strong>Deferral Stages</strong></td>
                                            <td style="width:20%;"><strong>Remarks</strong></td>
                                            <td style="width:10%;"><strong>Extended Date</strong></td>
                                            <td style="width:10%;"><strong>Updated By</strong></td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="data in stage_list" style="background-color:white;">
                                            <!--<td class="text-center">{{$index +1}}</td>-->
                                            <td style="width:30px;">
                                                {{data.approval_status}}
                                            </td>
                                            <td style="width:40px;">
                                                {{data.approval_remarks}}
                                            </td>
                                            <td style="width:40px;">
                                                {{data.extended_date}}
                                            </td>
                                            <td style="width:30px;">
                                                {{data.approved_by}}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 ">
                    <div class="col-lg-4 col-md-4 col-sm-4">
                        <strong>Upload Documents</strong>
                        <input type="file" id="addupload" ng-model="test_document" onchange="angular.element(this).scope().upload(this.files, angular.element(this).scope().documentupload, this.name)"
                               data-classbutton="btn btn-default" data-classinput="form-control inline" data-button-text="Select" required />
                    </div>
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 ">
                    <div class="col-lg-12 col-md-12 col-sm-12 ">
                        <div class="table-responsive">
                            <table ng-table="usersTable" class="table table-striped table-bordered table-success">

                                <thead class="bg-success text-white">
                                    <tr width="100%">
                                        <td style="width:10%; text-align :center; text-transform :uppercase ; font-weight :bold ;">S.No</td>
                                        <td style="width:30%;text-align :center;text-transform :uppercase ;font-weight :bold ;">Document Name</td>
                                        <td style="width:30%;text-align :center;text-transform :uppercase ;font-weight :bold ;">Uploaded By</td>
                                        <td style="width:20%;text-align :center;text-transform :uppercase ;font-weight :bold ;">Uploaded Date</td>
                                        <td style="width:10%;text-align :center;text-transform :uppercase ;font-weight :bold ;">Download</td>
                                    </tr>
                                </thead>
                                <tr ng-repeat="data in filename_list">
                                    <td class="text-center">{{$index +1}}</td>
                                    <td style="padding-left:20px;">{{data.filename}}</td>
                                    <td style="padding-left:20px;">{{data.uploaded_by}}</td>
                                    <td style="padding-left:20px;">{{data.created_date}}</td>
                                    <td class="text-center"><em class="fa fa-download" ng-click="downloads(data.path,data.filename)"><a download="" href="" id="btnpdf"></a></em></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <form novalidate="" name="deferralform" ng-submit="form.Approve()" autocomplete="off" class="form-validate form-horizontal">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 ">
                        <div class="col-lg-5">

                            <label class="col-form-label"><strong>Deferral Stage</strong></label>
                            <select ng-switch="UploadDocumentname.approval_status" name="deferral_status" dropzone="" ng-click="onselectedchange(deferral_status)" ng-model="deferral_status" required="" class="mda-form-control" size="1">


                                <option value="">-----Select Stage----</option>


                                <option ng-switch-when="PushBack" value="Closed">Closed</option>
                                <option ng-switch-when="Waived" value="Closed">Closed</option>
                                <option ng-switch-when="Extend" value="Closed">Closed</option>
                                <option ng-switch-when="ReOpen" value="Acknowledge">Closed</option>
                                <option ng-switch-when="Pending" value="Closed">Closed</option>
                                <option ng-switch-when="Approval Pending" value="Closed">Closed</option>
                                <option ng-switch-when="Acknowledge" value="Closed">Closed</option>

                                <option ng-switch-when="Closed" value="ReOpen">ReOpen</option>

                            </select>
                        </div>
                        <div class="col-lg-1">

                        </div>

                        <!--<md-input-container flex="" class="md-default-theme" style="height: auto;">
                    <label for="input_13">Extended date  </label>
                    <input type="date" id="due_date" name="due_date" ng-model="extened_date" />
                </md-input-container>-->

                        <div class="col-lg-3">

                        </div>
                    </div>
                </div>
                <br />
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 ">
                        <div class="col-lg-6">

                            <md-input-container flex="" class="md-default-theme" style="height: auto;">
                                <label for="input_13">Internal Remarks</label>
                                <textarea ng-model="approvalremarks" rows="3" md-maxlength="1000" required class="ng-valid md-input ng-valid-md-maxlength ng-touched ng-dirty ng-valid-parse"
                                          id="input_13" ng-trim="false" aria-multiline="true" tabindex="0" aria-invalid="true"></textarea>
                            </md-input-container>
                        </div>
                        <div class="col-lg-6">

                            <md-input-container flex="" class="md-default-theme" style="height: auto;">
                                <label for="input_13">Customer Remarks</label>
                                <textarea ng-model="customer_remarks" rows="3" md-maxlength="1000" required class="ng-valid md-input ng-valid-md-maxlength ng-touched ng-dirty ng-valid-parse"
                                          id="input_13" ng-trim="false" aria-multiline="true" tabindex="0" aria-invalid="true"></textarea>
                            </md-input-container>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div class="col-lg-12 col-md-12 col-sm-12">

                        <div align="center">
                            <button type="button" class="btn btn-success btn-md" ng-disabled="deferralform.$invalid" ng-click="Approve()"><i class="fa fa-arrow-circle-right"></i> &nbsp;&nbsp;Submit</button>
                            <button ng-click="deferralback()" class="btn btn-info"><i class="fa fa-arrow-circle-left"></i>&nbsp;&nbsp;Back</button>
                        </div>
                    </div>
                </div>
            </form>
            </div>
        </div>
   
    </div>

