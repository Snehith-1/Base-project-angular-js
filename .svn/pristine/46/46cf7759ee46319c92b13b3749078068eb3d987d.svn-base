<h3>
    Retrieval Request
</h3>
<div ng-controller="idasTrnRetrievalReqView as dp">

    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="col-lg-8 col-md-8 col-sm-8">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <em class="fa fa-plus"></em>&nbsp; Retrieval Request
                    </div>
                    <div class="panel-body">
                        <form name="Retrievalform" id="Retrievalform" novalidate="" class="form-validate mb-lg"
                            autocomplete="off">
                            <div class="row">

                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label">Requested Date &nbsp;</label>
                                        <p class="input-group">
                                            {{requested_date}}
                                        </p>
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2">

                                    </div>
                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <label class="col-form-label control-label"><strong>Requested By
                                                &nbsp;</strong></label>
                                        <br>
                                        {{requestedby_name}}

                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">

                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12 col-sm-12 col-md-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label">Approved Date &nbsp;</label>
                                        <br>
                                        {{approved_date}}
                                    </div>
                                    <div class="col-lg-2 col-sm-2 col-md-2">

                                    </div>
                                    <div class="col-lg-5 col-md-5 col-s-5">
                                        <label class="col-form-label control-label"><strong>Approved By
                                                &nbsp;</strong></label>
                                        <br>
                                        {{approvalby_name}}

                                    </div>
                                    <div class="col-lg-1 col-sm-1 col-md-1">

                                    </div>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">

                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <label class="col-form-label control-label"><strong> Retrieval Type &nbsp;
                                            </strong></label><br />

                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" disabled required name="retrieval_type"
                                                    value="Temporary" ng-model="retrieval_type" />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Temporary
                                            </label>
                                            <label>
                                                <input type="radio" disbaled required name="retrieval_type"
                                                    value="Permanent" ng-model="retrieval_type" />
                                                <span class="fa fa-circle"></span>Permanent
                                            </label>

                                        </div>

                                    </div>
                                    <div class="col-lg-1 col-sm-1 col-md-1">

                                    </div>
                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <label class="col-form-label control-label">
                                            <strong>
                                                Retrieval Reason &nbsp;
                                            </strong>
                                        </label>
                                        <br>
                                        {{requested_for}}

                                    </div>
                                    <div class="col-lg-1 col-sm-1 col-md-1">

                                    </div>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <label class="col-form-label control-label">
                                            <strong>
                                                Remarks &nbsp;
                                            </strong>
                                        </label>
                                        <p>
                                            {{req_remarks}}
                                        </p>


                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <em class="icon icon-cloud-upload"></em>&nbsp;Uploaded Document
                    </div>
                    <div class="panel-body">

                        <div class="row">
                            <div class="col-lg-12 col-sm-12 col-md-12">
                                <div class="col-lg-12 col-sm-12 col-md-12">
                                    <div ui-scroll-viewport="" style="height:220px; overflow-y: auto;" class="row">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-secondary table-bordered">

                                                <tbody>
                                                    <tr ng-repeat="data in uploaddocument" width="100%">
                                                        <td>
                                                            {{$index+1}}
                                                        </td>
                                                        <td>
                                                            <label>{{data.document_title}}</label>
                                                            <br />
                                                            <a download="" href="" id="btnpdf" ng-click="downloadsdocument(data.document_path,data.document_name)">{{data.document_name}}</a>
                                                        </td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="col-lg-12 col-md-12 col-sm-12">


                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <em class="fa fa-plus"></em>&nbsp; Retrieval Request - File Details
                    </div>

                    <div class="panel-body" ng-switch="documentretrieved_status">
                        <div ng-if="documentretrieved_status=='Pending'">
                            <form name="Receivedform" id="Receivedform" novalidate="" class="form-validate mb-lg"
                                autocomplete="off">
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                            <label>
                                                <strong>
                                                    Vendor
                                                </strong>
                                            </label>
                                            <br>
                                            <span style="color:brown"><strong>Crown</strong></span>
                                        </div>

                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label>
                                                <strong>
                                                 Vendor Contact Person &nbsp;<span style="color:red;">*</span>
                                                </strong>
                                            </label>
                                            <input ng-model="$parent.contact_person" tabindex="0" maxlength="128" required
                                                aria-required="true" aria-invalid="true"
                                                class="form-control ng-pristine ng-invalid ng-invalid-required ng-touched">

                                        </div>
                                        <div class="col-lg-1 col-md-1 col-sm-1">

                                        </div>

                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label>
                                                <strong>
                                                    Mobile No &nbsp;<span style="color:red;">*</span>
                                                </strong>
                                            </label>
                                            <input ng-model="$parent.mobile_no" tabindex="0" maxlength="15" required
                                                type="number" aria-required="true" aria-invalid="true"
                                                class="form-control ng-pristine ng-invalid ng-invalid-required ng-touched">

                                        </div>
                                        <div class="col-lg-1 col-md-1 col-sm-1">

                                        </div>
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12">


                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                            <label>
                                                <strong>
                                                    Document Received Type &nbsp;<span style="color:red;">*</span>
                                                </strong>
                                            </label>
                                            <div class="radio c-radio">
                                                <label>
                                                    <input type="radio" required name="received_type" value="Courier"
                                                        ng-model="$parent.received_type" />
                                                    &nbsp;&nbsp;<span class="fa fa-circle"></span>Courier
                                                </label>
                                                <label>
                                                    <input type="radio"  required name="$scope.received_type" value="Direct"
                                                        ng-model="$parent.received_type" />
                                                    <span class="fa fa-circle"></span>Direct
                                                </label>

                                            </div>

                                        </div>

                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label>
                                                <strong>
                                                    Document Received Date &nbsp;<span style="color:red;">*</span>
                                                </strong>
                                            </label>
                                            <p class="input-group">
                                                <input type="text" datepicker-popup="{{dp.format}}"
                                                    ng-model="$parent.receivedDate" is-open="dp.openrec"
                                                    datepicker-options="dp.dateOptions" ng-required="true"
                                                    close-text="Close" class="form-control" />
                                                <span class="input-group-btn">
                                                    <button type="button" ng-click="dp.calenderrec($event)"
                                                        class="btn btn-default">
                                                        <em class="fa fa-calendar"></em>
                                                    </button>
                                                </span>
                                            </p>

                                        </div>
                                        <div class="col-lg-1 col-md-1 col-sm-1">

                                        </div>

                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label>
                                                <strong>
                                                    Document Received To &nbsp;<span style="color:red;">*</span>
                                                </strong>
                                            </label>
                                            <select id="employee" name="employee" chosen=""
                                                ng-options="m.employee_name for m in employee_list"
                                                ng-model="$parent.cboemployeegid" class="chosen-select form-control" required>
                                                <option value=""> ---Select Received To--- </option>
                                            </select>

                                        </div>
                                        <div class="col-lg-1 col-md-1 col-sm-1">

                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <div ng-switch-when="Received">

                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label>
                                            <strong>
                                                Vendor
                                            </strong>
                                        </label>
                                        <br>
                                        <span style="color:brown"><strong>Crown</strong></span>
                                    </div>

                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label>
                                            <strong>
                                              Vendor Contact Person
                                            </strong>
                                        </label><br>
                                        {{contactperson_name}}

                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">

                                    </div>

                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label>
                                            <strong>
                                                Mobile No
                                            </strong>
                                        </label><br>
                                        {{mobile_no}}

                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">

                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">


                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label>
                                            <strong>
                                                Document Received Type &nbsp;
                                            </strong>
                                        </label>
                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" disabled required name="documentretrieved_type"
                                                    value="Courier" ng-model="documentretrieved_type" />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Courier
                                            </label>
                                            <label>
                                                <input type="radio" disbaled required name="documentretrieved_type"
                                                    value="Direct" ng-model="documentretrieved_type" />
                                                <span class="fa fa-circle"></span>Direct
                                            </label>

                                        </div>

                                    </div>

                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label>
                                            <strong>
                                                Document Received Date
                                            </strong>
                                        </label><br>
                                        {{documentretrieved_date}}

                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">

                                    </div>

                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label>
                                            <strong>
                                                Document Received To
                                            </strong>
                                        </label><br>
                                        {{documentreceivedto_name}}

                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">

                                    </div>
                                </div>
                            </div>

                        </div>
                        <br>
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <strong>
                                        Retrieval Mode : 
                                    </strong>{{documentretrieved_mode}}
                                </div>
                            </div>
                        </div>
                        <br>
                        <div ng-show="documentretrieved_mode=='File'" class="dd-handle ng-scope" >
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        Showing 1 to {{totalDisplayed}} of {{total}} Entries
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                
                                        Show <input ng-model="pagecount" id="pagecount" type="number" />
                                        <button class="btn" id="loadmore" ng-disabled="!pagecount" ng-click="loadMore(pagecount)">Load More</button>
                
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <div class="input-group">
                                            <input type="text" ng-model="searchtxt" placeholder="Search Here .." class="form-control input-sm" />
                                            <span class="input-group-btn">
                                                <button type="submit" class="btn btn-default btn-sm">
                                                    <i class="fa fa-search"></i>
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
        
                            <div  class="row">
                                <div class="col-lg-12 col-sm-12 col-md-12">
                    
                                    <div class="table-responsive">
                    
                                        <table  class="table row-border hover">
                                            <thead>
                                                <tr width="100%" class="bg-primary text-white">
                                                    <th width="5%" scope="col">S.No</th>
                                                    <th width="15%" scope="col">URN/Customer Name</th>
                                                    <th width="10%" scope="col">File Stamp Ref No.</th>
                                                    <th width="10%" scope="col">Box Stamp Ref No.</th>
                                                    <th width="10%" scope="col">Boxed On</th>
                                                    <th width="15%" scope="col">Despatch Details</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="subdata in RetrivedDtls_list|filter :searchtxt|limitTo:totalDisplayed " width="100%">
                                                    <td title="'S.No'">{{$index+1}}</td>
                                                    <td title="Customer Name">{{subdata.customer_name}}</td>
                                                    <td title="'File Stamp Ref No.">{{subdata.batchref_no}}</td>
                                                    <td data-title="'Box Stamp Ref No.'">{{subdata.boxref_no}}</td>
                                                    <td data-title="Boxed On">{{subdata.cartonbox_date}}</td>
                                                    <td data-title="Despatch Details"> <span>
                                                      <strong>Despatched by</strong>   {{subdata.despatched_by}} <strong> On</strong> {{subdata.despatch_date}}<br>
                                                      <strong>Despatched to</strong>   {{subdata.contact_person}}
                                                    </span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                
                 
                    <br>
                </div>
                <div ng-show="documentretrieved_mode=='Customer'" class="dd-handle ng-scope"   ng-repeat="data in RetrivedDtls_list">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
            
                            <div class="col-lg-12 col-sm-12 col-md-12" style="color :brown ;font-size:130%;font-weight :bold;">
                                {{data.customername}}<label style="font-weight:bold">/</label>{{data.customer_urn}}
            
                            </div>
                            <div class="col-lg-3 col-sm-3 col-md-3">
            
                            </div>
            
            
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="col-lg-2 col-sm-2 col-md-2">
                                <label style="font-weight:bold">Vertical</label>
                            </div>
                            <div class="col-lg-4 col-sm-4 col-md-4">
                                {{data.vertical_code}}
                            </div>
                            <div class="col-lg-2 col-sm-2 col-md-2">
                                <label style="font-weight:bold">Zonal Head</label>
                            </div>
                            <div class="col-lg-4 col-sm-4 col-md-4">
                                {{data.zonal_name}}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="col-lg-2 col-sm-2 col-md-2">
                                <label style="font-weight:bold">Business Head</label>
                            </div>
                            <div class="col-lg-4 col-sm-4 col-md-4">
                                {{data.businesshead_name}}
                            </div>
                            <div class="col-lg-2 col-sm-2 col-md-2">
                                <label style="font-weight:bold">Cluster Manager</label>
                            </div>
                            <div class="col-lg-4 col-sm-4 col-md-4">
                                {{data.cluster_manager_name}}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="col-lg-2 col-sm-2 col-md-2">
                                <label style="font-weight:bold">Relationship Manager</label>
                            </div>
                            <div class="col-lg-4 col-sm-4 col-md-4">
                                {{data.relationshipmgmt_name}}
                            </div>
                            <div class="col-lg-2 col-sm-2 col-md-2">
                                <label style="font-weight:bold">Credit Manager</label>
                            </div>
                            <div class="col-lg-4 col-sm-4 col-md-4">
                                {{data.creditmgmt_name}}
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <div class="text-info">
                                    File Details &nbsp;&nbsp;
                                    <a ng-hide="data.hide" ng-click="data.hide=true">
                                        <button title="Click to View File Details" ng-click="customerdetails(data.customer_gid,$index)">
                                            <em class="fa fa-chevron-circle-down" style="font-size:14px;"></em>
                                        </button>
                                    </a>
                                    <a ng-show="data.hide" ng-click="data.hide=false">
                                        <button title="Click to Hide File Details" ng-click="customerdetails(data.customer_gid,$index)">
                                            <em class="fa fa-chevron-circle-up" style="font-size:14px;"></em>
                                        </button>
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-3 col-md-3">
                            </div>
                            <div class="col-lg-3 col-sm-3 col-md-3">
            
                                <!-- <button title="Document Received" ng-click="recordreceived()" class="btn btn-sm  btn-green">
                                    <em class="fa fa-hand-o-right"></em>
                                </button> -->
            
                            </div>
                        </div>
                    </div>
            <br>
            
                    <div ng-show="data.hide" class="row">
                        <div class="col-lg-12 col-sm-12 col-md-12">
            
                            <div id="panelDemo13" class="panel panel-default">
                                <div class="panel-body ">
                                    <div class="table-responsive">
            
                                        <table id="statictable" class="row-border hover">
                                            <thead>
                                                <tr width="100%" class="bg-success text-white">
                                                    <th scope="col">S.No</th>
                                                    <th scope="col">File Stamp Ref No.</th>
                                                    <th scope="col">Box Stamp Ref No.</th>
                                                    <th>Boxed On </th>
                                                    <th>Despatch Details</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="subdata in data[data.customer_gid]" width="100%">
                                                    <td align="center" title="'S.No'">{{$index+1}}</td>
                                                    <td title="'File Stamp Ref No.">{{subdata.batchref_no}}</td>
                                                    <td data-title="'Box Stamp Ref No.'">{{subdata.boxref_no}}</td>
                                                    <td data-title="Boxed On">{{subdata.cartonbox_date}}</td>
                                                    <td data-title="Despatch Details"> <span>
                                                    <strong>Despatched by</strong>   {{subdata.despatched_by}} <strong>On</strong> {{subdata.despatch_date}}<br>
                                                     <strong>Despatched to</strong>   {{subdata.contact_person}}
                                                    </span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
            
                            </div>
                        </div>
                    </div>
                </div>
                <div ng-show="documentretrieved_mode=='Box'" class="dd-handle ng-scope"  ng-repeat="data in RetrivedDtls_list">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
            
                            <div class="col-lg-6 col-sm-6 col-md-6" style="color :brown ;font-size:130%;font-weight :bold;">
                                {{data.boxref_no}}<label style="font-weight:bold">/</label>{{data.stampref_no}}
            
                            </div>
                            <div class="col-lg-3 col-sm-3 col-md-3">
            
                            </div>
            
            
                        </div>
                    </div>

                   <div class="row">
                      
                    <div class="col-lg-12 col-sm-12 col-md-12">
                        <div class="col-6 col-md-6 col-sm-6">
                            <strong>Carton Box Date</strong><br>
                            {{data.cartonbox_date}}
                        </div>
                    </div>
                   </div>
                    <div class="row">
                       
                        <div class="col-lg-12 col-md-12 col-sm-12">
                           <div class="col-lg-12 col-md-12 col-sm-12">
                            <strong>Remarks </strong><br>
                            {{data.remarks}}
                           </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="col-lg-6 col-sm-6 col-md-6">
                                <div class="text-info">
                                    File Details &nbsp;&nbsp;
                                    <a ng-hide="data.hide" ng-click="data.hide=true">
                                        <button title="Click to View File Details" ng-click="boxdetails(data.box_gid,$index)">
                                            <em class="fa fa-chevron-circle-down" style="font-size:14px;"></em>
                                        </button>
                                    </a>
                                    <a ng-show="data.hide" ng-click="data.hide=false">
                                        <button title="Click to Hide File Details" ng-click="boxdetails(data.box_gid,$index)">
                                            <em class="fa fa-chevron-circle-up" style="font-size:14px;"></em>
                                        </button>
                                    </a>
                                </div>
                            </div>
                            <div class="col-lg-3 col-sm-3 col-md-3">
                            </div>
                            <div class="col-lg-3 col-sm-3 col-md-3">
            
                              
                            </div>
                        </div>
                    </div>
                    <div ng-show="data.hide" class="row">
                        <div class="col-lg-12 col-sm-12 col-md-12">
            
                            <div id="panelDemo13" class="panel panel-default">
                                <div class="panel-body ">
                                    <div class="table-responsive">
            
                                        <table id="statictable" class="row-border hover">
                                            <thead>
                                                <tr width="100%" class="bg-success text-white">
                                                    <th scope="col">S.No</th>
                                                    <th scope="col">URN/Customer Name</th>
                                                    <th scope="col">File Stamp Ref No.</th>
                                                    <th>Despatch Details</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr ng-repeat="subdata in data[data.box_gid]" width="100%">
                                                    <td align="center" title="'S.No'">{{$index+1}}</td>
                                                    <td title="'URN/Customer Name">{{subdata.customer_name}}</td>
                                                    <td title="'File Stamp Ref No.'">{{subdata.batchref_no}}</td>
                                                    <td data-title="Despatch Details"> <span>
                                                       <strong>Despatched by</strong> {{subdata.despatched_by}} <strong>On</strong> {{subdata.despatch_date}}<br>
                                                       <strong>Despatched to</strong>  {{subdata.contact_person}}
                                                    </span></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
            
                            </div>
                        </div>
                    </div>
                </div>
              

                <div>
                    <div align="center">

                        <button ng-click="receivedSubmit()" ng-if="documentretrieved_status=='Pending'"
                            ng-disabled="Receivedform.$invalid" class="btn btn-success"><i
                                class="fa fa-arrow-circle-right"></i>&nbsp;&nbsp;Received</button>
                        <button ng-click="back()" class="btn btn-info"><i
                                class="fa fa-arrow-circle-left"></i>&nbsp;&nbsp;Back</button>


                    </div>
                </div>
            </div>
        </div>
    </div>


</div>