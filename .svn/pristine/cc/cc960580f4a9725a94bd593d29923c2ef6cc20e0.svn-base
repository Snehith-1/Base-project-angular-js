<h3>
    Create Deferral
</h3>
<div ng-controller="createDeferral as dpick">
    <style type="text/css">
        .list-group-item:hover {
            color: #000000;
            background-image: linear-gradient(90deg, #d8eef5 0%, #adc9e7 35%, #88a9d9 100%);
            font-weight: bold;
            cursor: pointer;
        }

        .panel-scroll {
            max-height: 120px;
            overflow: auto;
        }
    </style>

    <!--<div id="load" class="loader" style="display:none;text-align: center;"></div>-->
    <div class="col-lg-12 col-md-12 col-sm-12">
        <div class=" panel panel-success" id="panelDemo8 " style="padding-left:1px ;padding-right:1px">
            <!--<div>-->
            <div class="panel-heading">
                <span class="btn-label">
                    <i class="fa fa-plus"></i>
                </span>CREATE DEFERRAL
            </div>
            <div id="load" class="loader" style="display:none;text-align: center;"></div>
            <div class="panel-body">
                <form novalidate="" id="userform" name="userform" ng-submit="form.submitTransfer()" autocomplete="off"
                    class="form-validate mb-lg">

                    <div class="modal-body" style="padding-right:40px;">

                        <div class="row">

                            <div class="row">
                                <div class="col-sm-12 col-md-12 col-lg-12 ">
                                    <div class="col-lg-5">
                                        <label class="col-form-label control-label"><strong>Entity &nbsp;<span style="color:red;">*</span></strong></label>
                                        <select id="entity_name" name="entity" chosen="" required
                                            ng-options="m.entity_name for m in entity_list" ng-model="entity"
                                            class="chosen-select form-control">
                                            <option value=""> ---Select Entity--- </option>
                                        </select>

                                    </div>
                                    <div class="col-lg-1">
                                    </div>
                                    <div class="col-lg-5">
                                        <label class="col-form-label control-label"><strong>Branch &nbsp;<span style="color:red;">*</span></strong></label>
                                        <select id="branch_name" name="branch" chosen="" required
                                            ng-options="m.branch_name for m in branch_list" ng-model="branch"
                                            class="chosen-select form-control">
                                            <option value=""> ---Select Branch--- </option>
                                        </select>

                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-sm-12 col-md-12 col-lg-12 ">
                                    <div class="col-lg-5">
                                        <!--<label>Customer &nbsp;<span style="color:red;">*</span></label>-->

                                        <!--<select id="customer_name" name="customer" chosen="" required
                                            ng-options="m.customername for m in customer_list" ng-change="onselectedchangecustomer()" ng-model="customer"
                                            class="chosen-select form-control">
                                            <option value=""> ---Select Customer--- </option>
                                        </select>-->
                                        <label class="col-form-label control-label"><strong>Customer *</strong></label>
                                        <input type="text" name="customer" id="customer" ng-model="customer" required
                                               ng-keyup="complete(customer)" class="form-control" placeholder="Search Customer Name Here..." />

                                        <ul class="list-group panel-scroll" style="height:100%; word-wrap: break-word;">
                                            <li class="list-group-item" ng-repeat="m in customer_list"
                                                ng-click="fillTextbox(m.customer_gid,m.customername)">{{m.customername}}</li>
                                        </ul>

                                        <label style="color:red;">{{message}}</label>
                                    </div>
                                    <div class="col-lg-1">
                                    </div>
                                    <div class="col-lg-2" ng-show="vertical">
                                        <label><strong>Vertical</strong></label>
                                        <br />
                                        <p ng-model="vertical_code">{{mdlheadsofcustomer.vertical_code}}</p>
                                    </div>
                                    <div class="col-lg-3">
                                        <label>Loan &nbsp;<span style="color:red;">*</span></label>
                                        <br />
                                        <select name="loan" chosen="" multiple="multiple"
                                            ng-options="c.label for c in loan"
                                            ng-change="onselectedchangeloan(selectedData)" ng-model="$parent.loan"
                                            class="chosen-select form-control" required></select>
                                    </div>
                                </div>
                            </div>
                            <br />

                            <div ng-show="showcustomer">
                                <div class="row">
                                    <br />
                                    <div class="col-lg-12 col-md-12 col-sm-12 ">
                                        <div class="col-lg-5">
                                            <label class="col-form-label control-label"><strong>Zonal
                                                    Head</strong></label>
                                            <select id="zonal_name" name="vertical" dropzone="" ng-model="zonalHead"
                                                class="chosen-select form-control"
                                                tabindex="0" aria-label="State" aria-expanded="false" size="1"
                                                ng-disabled="true">
                                                <option value="">---Select Zonal Head---</option>
                                                <option data-ng-repeat="data in employee_list"
                                                    value="{{data.employee_gid}}">
                                                    {{data.employee_name}}
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-lg-1">
                                        </div>
                                        <div class="col-lg-5">
                                            <label class="col-form-label control-label"><strong>Business
                                                    Head</strong></label>
                                            <select id="businesshead_name" name="vertical" dropzone=""
                                                ng-model="businessHead"
                                                class="chosen-select form-control"
                                                tabindex="0" aria-label="State" aria-expanded="false" size="1"
                                                ng-disabled="true">
                                                <option value="">---Select Business Head---</option>
                                                <option data-ng-repeat="data in employee_list"
                                                    value="{{data.employee_gid}}">
                                                    {{data.employee_name}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12 ">
                                        <div class="col-lg-5">
                                            <label class="col-form-label control-label"><strong>Cluster
                                                    Manager</strong></label>
                                            <select id="cluster_manager_name" name="vertical" dropzone=""
                                                ng-model="clustermanager"
                                                class="chosen-select form-control"
                                                tabindex="0" aria-label="State" aria-expanded="false" size="1"
                                                ng-disabled="true">
                                                <option value="">---Select Cluster Manager---</option>
                                                <option data-ng-repeat="data in employee_list"
                                                    value="{{data.employee_gid}}">
                                                    {{data.employee_name}}
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-lg-1">
                                        </div>
                                        <div class="col-lg-5">
                                            <label class="col-form-label control-label"><strong>Relationship
                                                    Manager</strong></label>
                                            <select id="relationshipmgmt_name" name="vertical" dropzone=""
                                                ng-model="relationshipMgmt"
                                                class="chosen-select form-control"
                                                tabindex="0" aria-label="State" aria-expanded="false" size="1"
                                                ng-disabled="true">
                                                <option value="">---Select Relationship Manager---</option>
                                                <option data-ng-repeat="data in employee_list"
                                                    value="{{data.employee_gid}}">
                                                    {{data.employee_name}}
                                                </option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <br />
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12 ">
                                        <div class="col-lg-5">
                                            <label class="col-form-label control-label"><strong>Credit
                                                    Manager</strong></label>
                                            <select id="creditmgmt_name" name="creditmanager" dropzone=""
                                                ng-model="creditmgmt_gid"
                                                class="chosen-select form-control"
                                                tabindex="0" aria-label="State" aria-expanded="false" size="1"
                                                ng-disabled="true">
                                                <option value="">---Select Credit Manager---</option>
                                                <option data-ng-repeat="data in employee_list"
                                                    value="{{data.employee_gid}}">
                                                    {{data.employee_name}}
                                                </option>
                                            </select>
                                        </div>
                                        <div class="col-lg-1">
                                        </div>
                                        <div class="col-lg-5">

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 col-md-12 col-lg-12 ">
                                    <div class="col-lg-5">
                                        <br />
                                        <label class="col-form-label control-label"><strong>Category &nbsp;<span style="color:red;">*</span></strong></label>
                                        <select name="deferral" id="deferral" dropzone="" ng-model="deferralcategory"
                                            required=""
                                            class="chosen-select form-control"
                                            size="1">
                                            <option value="">-----Select Category----</option>
                                            <option value="Credit Deferral">Credit Deferral</option>
                                            <option value="Sanction Item">Sanction Item</option>
                                            <option value="CAD Internal">CAD Internal</option>
                                            <option value="RM Internal">RM Internal</option>
                                            <option value="CMD Internal">CMD Internal</option>
                                            <option value="Credit deferral – Others">Credit deferral – Others</option>
                                            <option value="Sanction Item – Others">Sanction Item – Others</option>
                                        </select>

                                    </div>
                                    <div class="col-lg-1">
                                    </div>
                                    <div class="col-lg-5">
                                        <br />
                                        <label class="col-form-label"><strong>Tracking Type &nbsp;<span style="color:red;">*</span></strong></label>
                                        <div class="col">
                                            <div class="radio c-radio">
                                                <label>
                                                    <input type="radio" id="trackingtype" required="def"
                                                        name="trackingtype" value="Deferral"
                                                        ng-click="isShowHide('hide')" ng-model="trackingtype" />
                                                    &nbsp;&nbsp;<span class="fa fa-circle"></span>Deferral
                                                </label>

                                                <label>
                                                    <input type="radio" id="trackingtype" required="cov"
                                                        name="trackingtype" value="Covenant"
                                                        ng-click="isShowHide('show')" ng-model="trackingtype" />
                                                    <span class="fa fa-circle"></span>Covenant
                                                </label>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 col-md-12 col-lg-12">
                                    <div class="col-lg-5">
                                    </div>
                                    <div class="col-lg-1">
                                    </div>
                                    <div class="col-lg-5">
                                        <div ng-show="hideval">
                                            <select id="deferralname" name="deferral_name" chosen=""
                                                ng-options="m.deferral_name for m in deferral_list"
                                                ng-model="deferralname" class="chosen-select form-control"
                                                ng-change="onselectedchangedeferral(deferralname)"">
                                        <option value=""> ---Select Deferral--- </option>
                                       </select>
                                 
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class=" row">
                                                <div class="col-sm-12 col-md-12 col-lg-12 ">
                                                    <div class="col-lg-5">
                                                    </div>
                                                    <div class="col-lg-1">
                                                    </div>
                                                    <div class="col-lg-5">
                                                        <div ng-show="showval">
                                                            <select id="covenanttype_name" name="covenanttype" chosen=""
                                                                ng-options="m.covenanttype_name for m in covenanttype_list"
                                                                ng-model="covenanttype"
                                                                class="chosen-select form-control"
                                                                ng-change="onselectedchangecovenant(covenanttype)">
                                                                <option value=""> ---Select Covenant Type--- </option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-sm-12 col-lg-12 col-md-12 ">
                                                <div class="col-lg-3">
                                                    <label class="col-form-label control-label"><strong>Due Date
                                                            &nbsp;<span style="color:red;"></span></strong></label>
                                                    <p class="input-group">
                                                        <input type="text" id="due_date" name="date" ng-model="due_date"
                                                            required="" datepicker-popup="{{dpick.format}}"
                                                            style="height:25px;" is-open="dpick.opened"
                                                            min-date="dpick.minDate"
                                                            datepicker-options="dpick.dateOptions" close-text="Close"
                                                            class="form-control" />
                                                        <span class="input-group-btn">
                                                            <button type="button" ng-click="dpick.open($event)"
                                                                style="height:25px;" class="btn btn-default">
                                                                <em class="fa fa-calendar"></em>
                                                            </button>
                                                        </span>
                                                    </p>

                                                </div>
                                                <div class="col-lg-3">
                                                </div>
                                                <div class="col-lg-5" ng-show="critical">
                                                    <label
                                                        class="col-form-label control-label"><strong>Criticality</strong></label>
                                                    <p ng-model="criticallity" id="criticallity">
                                                        {{MDLcriticallity.criticallity}}</p>
                                                </div>
                                            </div>
                                        </div>
                                        <br />
                                        <div class="row">
                                            <div class="col-sm-12 col-lg-12 col-md-12 ">
                                                <div class="col-lg-6">

                                                    <label>Internal Remarks </label>&nbsp;<span
                                                        style="color:Red;">*</span>
                                                    <textarea ng-model="remarks" placeholder="Internal Remarks" rows="4"
                                                        required="" class="form-control" id="input_13" ng-trim="false"
                                                        aria-multiline="true" tabindex="0"
                                                        aria-invalid="true"></textarea>


                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="col-lg-1">
                                                        <button type="button"
                                                            title="Copy Internal Remarks to Customer Remarks"
                                                            ng-click="btncopy()">
                                                            <em class="fa fa-copy text-primary fa-sm"></em>
                                                        </button>

                                                    </div>
                                                    <label>Customer Remarks </label>&nbsp;<span
                                                        style="color:Red;">*</span>
                                                    <textarea ng-model="customerremarks"  placeholder="Customer Remarks"
                                                        rows="4" required="" class="form-control" id="input_13"
                                                        ng-trim="false" aria-multiline="true" tabindex="0"
                                                        aria-invalid="true"></textarea>

                                                </div>
                                            </div>
                                        </div>
                                        <div id="panelDemo8" style="padding-left:0px ;padding-right:1px;">
                                            <div class="panel-body">
                                                <div class="row">
                                                    <div class="col-lg-12">
                                                        <strong>Upload Documents</strong>
                                                        <input type="file" id="addupload" ng-model="test_document"
                                                            onchange="angular.element(this).scope().upload(this.files, angular.element(this).scope().documentupload, this.name)"
                                                            data-classbutton="btn btn-default"
                                                            data-classinput="form-control inline"
                                                            data-button-text="Select" />
                                                    </div>
                                                </div>
                                                <br />
                                                <div class="table-responsive">
                                                    <div>
                                                        <table ng-table="usersTable"
                                                            class="table table-striped table-bordered table-success">
                                                            <thead style="background-color:#5a152f21;">
                                                                <tr class="text-center">
                                                                    <!--<td style="width:10%;"><strong>S.No</strong></td>-->
                                                                    <td style="width:75%;"><strong>Document
                                                                            Details</strong></td>

                                                                    <td style="width:25%"><strong>Download</strong></td>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                <tr ng-repeat="data in filename_list"
                                                                    style="background-color:white;">
                                                                    <!--<td class="text-center">{{$index +1}}</td>-->
                                                                    <td style="width:95px;">
                                                                        {{data.upload_by}}
                                                                    </td>

                                                                    <td class="text-center"><em class="fa fa-download"
                                                                            ng-click="downloads(data.path,data.filename)"><a download="" href="" id="btnpdf"></a></em>
                                                                    </td>
                                                                </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>

                                            </div>
                                        </div>


                                    </div>

                                    <div class="ng-scope">
                                        <div class="text-center">
                                            <button type="button" class="btn btn-success btn-md"
                                                ng-click="deferralSubmit()" ng-disabled="userform.$invalid"><i
                                                    class="fa fa-arrow-circle-right"></i> &nbsp;&nbsp;Submit</button>
                                            <button type="button" class="btn btn-green" ng-click="deferralSave()"
                                                ng-disabled="userform.$invalid"><i class="fa fa-arrow-circle-up"></i>
                                                &nbsp;&nbsp;Save & Next</button>
                                            <button ng-click="deferralback()" class="btn btn-info"><i
                                                    class="fa fa-arrow-circle-left"></i>&nbsp;&nbsp;Back</button>
                                        </div>
                                    </div>
                                </div>
                </form>
            </div>

        </div>

    </div>


</div>