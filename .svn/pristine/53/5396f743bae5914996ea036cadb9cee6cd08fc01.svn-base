!function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){t.trustAsHtml=function(e){return _.trustAsHtml(e)};var e="api/OsdTrnBankAlert/GetRMTempDelete";s.get(e).then(function(e){});var e="api/OsdTrnBankAlert/GetAllocatedDetail",a={bankalert2allocated_gid:y,customer_gid:h,customer_urn:T};s.getparams(e,a).then(function(e){if(unlockUI(),t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=T,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonal_riskmanagerName,t.lblriskmanager_name=e.data.riskmanager_name,t.lblriskMonitoring_Name=e.data.riskMonitoring_Name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.transfer_flag=e.data.transfer_flag,t.employee_gid=e.data.employee_gid,t.relationshipmanager_gid=e.data.relationshipmanager_gid,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,unlockUI(),"Completed"==t.lblallocated_status){var a="api/OsdTrnBankAlert/GetRMStatusDtl",n={bankalert2allocated_gid:y};s.getparams(a,n).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath});var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:t.servicerequest_gid};s.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var n={servicerequest_gid:t.servicerequest_gid},a="api/OsdTrnMyTicket/GetCompletedDetails";s.getparams(a,n).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,unlockUI()})}var a="api/OsdTrnBankAlert/GetOperationStatusDtl",n={bankalert2allocated_gid:y};s.getparams(a,n).then(function(e){t.lblassigned_remarks=e.data.assigned_remarks,t.lblassigned_date=e.data.assigned_date,t.lblassigned_toname=e.data.assigned_toname,t.lblassigned_by=e.data.assigned_by,t.document_list=e.data.rmdocument_list});var n={servicerequest_gid:t.servicerequest_gid},a="api/OsdTrnTicketManagement/GetTransferMemberlist";s.getparams(a,n).then(function(e){t.transferlistdtl=e.data.transferlistdtl,t.transferlistdtlreopen=e.data.transferlistdtlreopen,unlockUI()});var a="api/OsdTrnBankAlert/GetticketTransferLog",n={bankalert2allocated_gid:y};s.getparams(a,n).then(function(e){t.transferto_name=e.data.relationshipmanager_name,t.transferedinitiated_by=e.data.transferedinitiated_by,t.transferinitiated_date=e.data.transferinitiated_date,t.transfer_type=e.data.transfer_type,t.transfer_remarks=e.data.transfer_remarks})})}var k=this;k.title="osdBamAllocatedToAssignedViewController";var b=f.decryptURL(d.search().hash),y=b.lsbankalert2allocated_gid,h=b.lscustomer_gid,T=b.lscustomer_urn;t.lspage=b.lspage;var q=(t.lspage,b.lstab);v(),lockUI(),t.logdetails=function(){1==t.IsLogShow?t.IsLogShow=!1:t.IsLogShow=!0},t.uploadallocation=function(e,a,n){var r={name:e[0].name,file:e[0]},o=f.fnCheckValidDocType(e[0].name,"Default");if(0==o)return i.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var l=new FormData;l.append("fileupload",r.file),l.append("file_name",r.name),l.append("document_name",t.documentname),l.append("document_title",t.txtdocument_title),l.append("servicerequest_gid",t.servicerequest_gid),l.append("project_flag","Default"),t.uploadfrm=l;var d="api/OsdTrnMyTicket/ConversationDocUpload";lockUI(),s.postFile(d,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",1==e.data.status){unlockUI(),i.alert("Document Uploaded Successfully..!!","success");var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:t.servicerequest_gid};s.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})}else unlockUI(),i.alert("File Format Not Supported!","danger")})},t.download=function(e,t){g.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.sendrequestorclick=function(){var e={servicerequest_gid:t.servicerequest_gid,remarks:t.txtqueries};lockUI();var a="api/OsdTrnMyTicket/PostSendRequestor";s.post(a,e).then(function(e){if(unlockUI(),1==e.data.status){var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:t.servicerequest_gid};s.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()}),t.txtqueries=""}else i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})},t.Back=function(){d.url("app/osdBamAllocatedToRM?lstab="+q)},t.documentviewer=function(e,t){lockUI();var a=f.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(i.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void g.DocumentViewer(e,t)},t.BackHome=function(){d.url("app/osdBamAllocatedToRM?lstab="+q)}}angular.module("angle").controller("osdBamAllocatedToAssignedViewController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){t.tab={};var e=window.location.href,a=e.split("lstab="),n=a[1];void 0!=n?"requiredlist"==n?t.taballocatedlist=!0:"allocatedlist"==n?t.taballocatedlist=!0:"Unreconciliationlist"==n?t.tabUnreconciliationlist=!0:"assignlist"==n?t.tabassignlist=!0:"transferlist"==n&&(t.tabtransferlist=!0):void 0==t.tab.activeTabId?t.taballocatedlist=!0:"pending"==t.tab.activeTabId?t.taballocatedlist=!0:"allocatedlist"==t.tab.activeTabId?t.taballocatedlist=!0:"Unreconciliationlist"==t.tab.activeTabId?t.tabUnreconciliationlist=!0:"assignlist"==t.tab.activeTabId?t.tabassignlist=!0:"transferlist"==t.tab.activeTabId&&(t.tabtransferlist=!0),lockUI();var e="api/OsdTrnBankAlert/GetAllocatedSummary";lockUI(),i.get(e).then(function(e){t.BankAlertAllocated_list=e.data.BankAlertAllocated_list,unlockUI()});var e="api/OsdTrnBankAlert/GetAllocatedAssignedSummary";lockUI(),i.get(e).then(function(e){t.BankAlertAllocatedAssigned_list=e.data.BankAlertAllocatedAssigned_list,unlockUI()});var e="api/OsdTrnBankAlert/GetRMTransferSummary";lockUI(),i.get(e).then(function(e){t.BankAlerttransfer_list=e.data.BankAlerttransfer_list,unlockUI()});var e="api/OsdTrnBankAlert/GetAllocatedCount";lockUI(),i.get(e).then(function(e){t.allocated_count=e.data.allocated_count,t.allocatedassigned_count=e.data.allocatedassigned_count,t.transfer_count=e.data.transfer_count,unlockUI()});var e="api/OsdTrnBankAlert/GetUnReconciliationSummary";lockUI(),i.get(e).then(function(e){t.banktransc_gid=e.data.banktransc_gid,t.BankAlertUnreconciliation_list=e.data.BankAlertUnreconciliation_list,unlockUI()});var e="api/OsdTrnBankAlert/GetAllocatedCount";lockUI(),i.get(e).then(function(e){t.allocated_count=e.data.allocated_count,t.allocatedassigned_count=e.data.allocatedassigned_count,t.transfer_count=e.data.transfer_count,t.unreconciliation_count=e.data.unreconciliation_count,unlockUI()})}var f=this;f.title="osdBamAllocatedToRMController";c.search().lsbanktransc_gid;g(),t.BankalertView=function(e,t,a){c.url("app/osdBamAllocatedToRMView?lsbankalert2allocated_gid="+e+"&lscustomer_gid="+t+"&lscustomer_urn="+a+"&lspage=Allocatedsummary&lstab=allocatedlist")},t.transfer=function(e,t,a){c.url("app/osdBAMrmtransfer?hash="+_.encryptURL("lsbankalert2allocated_gid="+e+"&lscustomer_gid="+t+"&lscustomer_urn="+a+"&lstab=transferlist"))},t.BankalertAssignedView=function(e,t,a){c.url("app/osdBamAllocatedToAssignedView?hash="+_.encryptURL("lsbankalert2allocated_gid="+e+"&lscustomer_gid="+t+"&lscustomer_urn="+a+"&lstab=assignlist"))},t.UnreconciliationView=function(e){c.url("app/osdTrnUnreconciliationTransactionView?hash="+_.encryptURL("lsbanktransc_gid="+e+"&lstab=Unreconciliationlist"))},t.initiate_transfer=function(e){function t(t,a){t.tickettransfer=!1,t.rmtransfer=!1,t.warning=!1,t.ok=function(){a.close("closed")},t.transferstatus=function(){t.tickettransfer=!0,t.rmtransfer=!1},t.rmstatus=function(){t.rmtransfer=!0,t.tickettransfer=!1},t.changewarning=function(){t.warning=!1},t.transfer_submit=function(){if("Ticket Transfer"==t.rdbtransfer_type)if(""==t.txttickettransfer_remarks||void 0==t.txttickettransfer_remarks||null==t.txttickettransfer_remarks)t.warning=!0;else{var n={bankalert2allocated_gid:e,transfer_type:t.rdbtransfer_type,tickettransfer_remarks:t.txttickettransfer_remarks};console.log(n);var r="api/OsdTrnBankAlert/Posttransfer";i.post(r,n).then(function(e){1==e.data.status?(a.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),g()):(d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),g())})}else if(""==t.txtrmtransfer_remarks||void 0==t.txtrmtransfer_remarks||null==t.txtrmtransfer_remarks)t.warning=!0;else{var n={bankalert2allocated_gid:e,transfer_type:t.rdbtransfer_type,rmtransfer_remarks:t.txtrmtransfer_remarks};console.log(n);var r="api/OsdTrnBankAlert/Posttransfer";i.post(r,n).then(function(e){1==e.data.status?(a.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),g()):(d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),g())})}}}a.open({templateUrl:"/initiatetransfer.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t.Complete_list=function(){c.url("app/OsdBamRMCompletedSummary")}}angular.module("angle").controller("osdBamAllocatedToRMController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){t.trustAsHtml=function(e){return _.trustAsHtml(e)};var e="api/OsdTrnBankAlert/GetRMTempDelete";s.get(e).then(function(e){});var e="api/OsdTrnBankAlert/GetAllocatedDetail",a={bankalert2allocated_gid:y,customer_gid:h,customer_urn:T};s.getparams(e,a).then(function(e){if(unlockUI(),t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=T,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonal_riskmanagerName,t.lblriskmanager_name=e.data.riskmanager_name,t.lblriskMonitoring_Name=e.data.riskMonitoring_Name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.transfer_flag=e.data.transfer_flag,t.employee_gid=e.data.employee_gid,t.relationshipmanager_gid=e.data.relationshipmanager_gid,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,unlockUI(),"Completed"==t.lblallocated_status){var a="api/OsdTrnBankAlert/GetRMStatusDtl",n={bankalert2allocated_gid:y};s.getparams(a,n).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath});var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:t.servicerequest_gid};s.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var n={servicerequest_gid:t.servicerequest_gid},a="api/OsdTrnMyTicket/GetCompletedDetails";s.getparams(a,n).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.complefilename=e.data.complefilename,t.complefilepath=e.data.complefilepath,unlockUI()})}var a="api/OsdTrnBankAlert/GetOperationStatusDtl",n={bankalert2allocated_gid:y};s.getparams(a,n).then(function(e){t.lblassigned_remarks=e.data.assigned_remarks,t.lblassigned_date=e.data.assigned_date,t.lblassigned_toname=e.data.assigned_toname,t.lblassigned_by=e.data.assigned_by,t.document_list=e.data.rmdocument_list,t.lblrmfilename=e.data.rmfilename,t.lblrmfilepath=e.data.rmfilepath});var n={servicerequest_gid:t.servicerequest_gid},a="api/OsdTrnTicketManagement/GetTransferMemberlist";s.getparams(a,n).then(function(e){t.transferlistdtl=e.data.transferlistdtl,t.transferlistdtlreopen=e.data.transferlistdtlreopen,unlockUI()});var a="api/OsdTrnBankAlert/GetticketTransferLog",n={bankalert2allocated_gid:y};s.getparams(a,n).then(function(e){t.transferto_name=e.data.relationshipmanager_name,t.transferedinitiated_by=e.data.transferedinitiated_by,t.transferinitiated_date=e.data.transferinitiated_date,t.transfer_type=e.data.transfer_type,t.transfer_remarks=e.data.transfer_remarks})})}var k=this;k.title="osdBamAllocatedToRMViewController";var b=d.search(),y=b.lsbankalert2allocated_gid,h=b.lscustomer_gid,T=b.lscustomer_urn,q=b.lstab;t.lspage=b.lspage;var U=t.lspage;v(),lockUI(),t.logdetails=function(){1==t.IsLogShow?t.IsLogShow=!1:t.IsLogShow=!0},t.Back=function(){"Allocatedsummary"==U?d.url("app/osdBamAllocatedToRM?lstab="+q):"Completedsummary"==U&&a.go("app.OsdBamRMCompletedSummary")},t.download=function(e,t){g.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.RHdownloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.Adownloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.Cdownloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.Udownloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.uploadattachment=function(e,a,n){var r=document.getElementById("addupload");if(r.files.length>0)for(var o=new FormData,l=0;l<=r.files.length-1;l++){o.append(r.files[l].name,r.files[l]),t.uploadfrm=o;var d=r.files.item(l).name,c=(r.files.item(l).size,f.fnCheckValidDocType(d,"Default"));if(0==c)return i.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}o.append("project_flag","Default");var m="api/OsdTrnBankAlert/RMDocumentUpload";lockUI(),s.postFile(m,t.uploadfrm).then(function(e){if($("#addupload").val(""),1==e.data.status){var a="api/OsdTrnBankAlert/GetRMUploadedDoc";s.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath}),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()}else unlockUI(),i.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})})},t.UploadDocCancel=function(e){var a={fileupload_gid:e},n="api/OsdTrnBankAlert/DeleteRMUploadedDoc";lockUI(),s.getparams(n,a).then(function(e){if(1==e.data.status){unlockUI(),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3});var a="api/OsdTrnBankAlert/GetRMUploadedDoc";s.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath})}else unlockUI(),i.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})})},t.uploadallocation=function(e,a,n){var r={name:e[0].name,file:e[0]},o=f.fnCheckValidDocType(e[0].name,"");if(0==o)return i.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var l=new FormData;l.append("fileupload",r.file),l.append("file_name",r.name),l.append("document_name",t.documentname),l.append("document_title",t.txtdocument_title),l.append("servicerequest_gid",t.servicerequest_gid),l.append("project_flag","Default"),t.uploadfrm=l;var d="api/OsdTrnMyTicket/ConversationDocUpload";lockUI(),s.postFile(d,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",1==e.data.status){unlockUI(),i.alert("Document Uploaded Successfully..!!","success");var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:t.servicerequest_gid};s.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})}else unlockUI(),i.alert("File Format Not Supported!","danger")})},t.downloadsdocument=function(e,t){g.Downloaddocument(e,t)},t.Submit=function(){var e=t.cborm_status.replace("'","");if("Adjust against loan outstanding"==t.cborm_status){var n={bankalert2allocated_gid:y,customer_gid:h,rm_remarks:t.txtremarks,rm_status:t.cborm_status},r="api/OsdTrnBankAlert/PostRMStatus";lockUI(),s.post(r,n).then(function(e){1==e.data.status?(unlockUI(),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),i.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})),a.go("app.osdBamAllocatedToRM")})}else if("Refund to clients bank account"==e){var n={bankalert2allocated_gid:y,customer_gid:h,rm_remarks:t.txtremarks,rm_status:t.cborm_status},r="api/OsdTrnBankAlert/PostRHapproval";lockUI(),s.post(r,n).then(function(e){1==e.data.status?(unlockUI(),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),i.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})),a.go("app.osdBamAllocatedToRM")})}},t.sendrequestorclick=function(){var e={servicerequest_gid:t.servicerequest_gid,remarks:t.txtqueries};lockUI();var a="api/OsdTrnMyTicket/PostSendRequestor";s.post(a,e).then(function(e){if(unlockUI(),1==e.data.status){var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:t.servicerequest_gid};s.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()}),t.txtqueries=""}else i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})},t.documentviewer=function(e,t){lockUI();var a=f.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(i.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void g.DocumentViewer(e,t)}}angular.module("angle").controller("osdBamAllocatedToRMViewController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){t.trustAsHtml=function(e){return _.trustAsHtml(e)},t.lspagename=q;var e="api/OsdTrnBankAlert/GetAllocatedDetail",a={bankalert2allocated_gid:y,customer_gid:h,customer_urn:T};s.getparams(e,a).then(function(e){if(t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lbltransfer_flag=e.data.transfer_flag,t.lbltransfer_type=e.data.transfer_type,t.bankalert2allocated_gid=y,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,t.transferto_name=e.data.transferto_name,unlockUI(),"Completed"==t.lblallocated_status){var a="api/OsdTrnBankAlert/GetRMStatusDtl",n={bankalert2allocated_gid:y};s.getparams(a,n).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath})}});var e="api/OsdTrnBankAlert/GetticketTransferLog",a={bankalert2allocated_gid:y};s.getparams(e,a).then(function(e){t.relationshipmanager_name=e.data.relationshipmanager_name,t.transferedinitiated_by=e.data.transferedinitiated_by,t.transferinitiated_date=e.data.transferinitiated_date,t.transfer_type=e.data.transfer_type,t.transfer_remarks=e.data.transfer_remarks});var e="api/OsdTrnBankAlert/GetCustomer2RM";s.getparams(e,a).then(function(e){t.lblrmupdated_flag=e.data.rmupdated_flag})}var k=this;k.title="osdBamAllocatedViewController";var b=d.search(),y=b.lsbankalert2allocated_gid,h=b.lscustomer_gid,T=b.lscustomer_urn,q=b.lstab;v(),t.initiate_transfer=function(e){function t(t,a){t.ok=function(){a.close("closed")};var n="api/employee/Employee";s.get(n).then(function(e){t.employee_list=e.data.employee_list}),t.transfer_submit=function(){var n={bankalert2allocated_gid:e,assigned_to:t.cboassign_to,assigned_toname:$("#cboassign_to :selected").text()},r="api/OsdTrnBankAlert/Posttranasfe2Assign";s.post(r,n).then(function(e){1==e.data.status?(a.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),v(),d.url("app/OsdTrnBankAlertManagementSummary?hash="+f.encryptURL("lstab="+q))):(i.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),v())})}}r.open({templateUrl:"/initiatetransfer.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t.rm_update=function(e){function t(t,a){t.ok=function(){a.close("closed")};var n="api/OsdTrnBankAlert/GetCustomer2RM",r={bankalert2allocated_gid:e};s.getparams(n,r).then(function(e){t.lscustomerRM_name=e.data.relationshipmanager_name,t.lsbankRM_name=e.data.lsrelationshipmanager_name}),t.RM_submit=function(){var t={bankalert2allocated_gid:e},n="api/OsdTrnBankAlert/PostRM";s.post(n,t).then(function(e){1==e.data.status?(a.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),v(),d.url("app/OsdTrnBankAlertManagementSummary?hash="+f.encryptURL("lstab="+q))):(i.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),v())})}}r.open({templateUrl:"/rmtransfer.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t.Back=function(){d.url("app/OsdTrnBankAlertManagementSummary?lstab="+q)},t.download=function(e,t){g.Downloaddocument(e,t)}}angular.module("angle").controller("osdBamAllocatedViewController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){t.trustAsHtml=function(e){return _.trustAsHtml(e)};var e="api/OsdTrnBankAlert/GetEmployeeName";s.get(e).then(function(e){t.cboemployee=e.data.employee_gid,t.employee_name=e.data.user_name});var e="api/OsdTrnBankAlert/GetOperationTempDelete";s.get(e).then(function(e){});var e="api/OsdTrnBankAlert/GetAllocatedDetail",a={bankalert2allocated_gid:U,customer_gid:S,customer_urn:w};s.getparams(e,a).then(function(e){if(t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource_name=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonal_riskmanagerName,t.lblriskmanager_name=e.data.riskmanager_name,t.lblriskMonitoring_Name=e.data.riskMonitoring_Name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,
t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,t.transfer_flag=e.data.transfer_flag,"Completed"==e.data.operation_status||"Assigned"==e.data.operation_status){var a="api/OsdTrnBankAlert/GetOperationStatusDtl",n={bankalert2allocated_gid:U};s.getparams(a,n).then(function(e){t.lblassigned_remarks=e.data.assigned_remarks,t.lblassigned_date=e.data.assigned_date,t.lblassigned_toname=e.data.assigned_toname,t.lblassigned_by=e.data.assigned_by,t.document_list=e.data.rmdocument_list,t.lblrmfilename=e.data.rmfilename,t.lblrmfilepath=e.data.rmfilepath});var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:t.servicerequest_gid};s.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var n={servicerequest_gid:t.servicerequest_gid},a="api/OsdTrnMyTicket/GetCompletedDetails";s.getparams(a,n).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.lblcompfilename=e.data.compfilename,t.lblcompfilepath=e.data.compfilepath,unlockUI()})}var n={servicerequest_gid:t.servicerequest_gid},a="api/OsdTrnTicketManagement/GetTransferMemberlist";s.getparams(a,n).then(function(e){t.transferlistdtl=e.data.transferlistdtl,t.transferlistdtlreopen=e.data.transferlistdtlreopen,unlockUI()});var a="api/OsdTrnBankAlert/GetunreconAllocatedDetail",n={bankalert2allocated_gid:U,customer_gid:S,customer_urn:w};s.getparams(a,n).then(function(e){t.ticketref_no=e.data.ticketref_no,t.lblbank_name=e.data.bank_name,t.lblcustomer_refno=e.data.customer_urn,t.lblbranch_name=e.data.branch_name,t.lblcr_dr=e.data.cr_dr,t.lbltransc_value=e.data.transact_val,t.lblremarks=e.data.remarks,t.lbltransc_balance=e.data.transc_balance,t.lblacc_no=e.data.acc_no,t.lbltrn_date=e.data.trn_date,t.lblvalue_date=e.data.value_date,t.lblpayment_date=e.data.payment_date,t.lbltransact_particulars=e.data.transact_particulars,t.lbldebit_amt=e.data.debit_amt,t.lblcredit_amt=e.data.credit_amt,t.lblchq_no=e.data.chq_no,t.lblcreated_by=e.data.created_by,t.lblbrs_flag=e.data.brs_flag,t.lblsource=e.data.source,t.lblallocated_status=e.data.allocated_status,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblkotakAPI_flag=e.data.kotakAPI_flag});var n={banktransc_gid:I},a="api/OsdTrnBankAlert/GetUnReconUploadedDoc";if(s.getparams(a,n).then(function(e){t.uploaddocument=e.data.MdlDocDetails,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath}),"Completed"==e.data.operation_status||"Assigned"==e.data.operation_status){var a="api/OsdTrnBankAlert/GetOperationStatusDtl",n={bankalert2allocated_gid:U};s.getparams(a,n).then(function(e){t.lblassigned_remarks=e.data.assigned_remarks,t.lblassigned_date=e.data.assigned_date,t.lblassigned_toname=e.data.assigned_toname,t.lblassigned_by=e.data.assigned_by,t.document_list=e.data.rmdocument_list,t.lblrmfilename=e.data.rmfilename,t.lblrmfilepath=e.data.rmfilepath});var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:t.servicerequest_gid};s.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var n={servicerequest_gid:t.servicerequest_gid},a="api/OsdTrnMyTicket/GetCompletedDetails";s.getparams(a,n).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.lblcompfilename=e.data.compfilename,t.lblcompfilepath=e.data.compfilepath,unlockUI()})}unlockUI()});var e="api/OsdTrnBankAlert/GetRMStatusDtl",a={bankalert2allocated_gid:U};s.getparams(e,a).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath,t.refund=t.lblrm_status.replace("'","")});var e="api/OsdTrnBankAlert/Employee";s.get(e).then(function(e){t.employee_list=e.data.employee_list});var e="api/OsdTrnBankAlert/GetticketTransferLog",a={bankalert2allocated_gid:U};s.getparams(e,a).then(function(e){t.transferto_name=e.data.relationshipmanager_name,t.transferedinitiated_by=e.data.transferedinitiated_by,t.transferinitiated_date=e.data.transferinitiated_date,t.transfer_type=e.data.transfer_type,t.transfer_remarks=e.data.transfer_remarks});var e="api/OsdTrnRequestApproval/GetRHApprovalDtlsByToken";s.getparams(e,a).then(function(e){t.rhapprovaldetails=e.data.rhapprovaldetails,unlockUI()});var e="api/UnreconciliationManagement/GetAssignedHistory",a={banktransc_gid:I};s.getparams(e,a).then(function(e){t.assignedlist=e.data.assignedlist});var e="api/UnreconciliationManagement/GetTransferredHistory",a={banktransc_gid:I};s.getparams(e,a).then(function(e){t.transferlist=e.data.transferlist})}var k=this;k.title="osdBamAssign2operationController";var b,y,h,T,q=d.search(),U=q.lsbankalert2allocated_gid,S=q.lscustomer_gid,w=q.lscustomer_urn,I=q.lsticketref_no,M=q.lstab,A=q.lspage;v(),t.employee=function(e){for(var a=0;a<t.cboemployee.length;a++)e==t.cboemployee[a].employee_gid&&(t.cboemployee=t.cboemployee[a].employee_name.replace(" ","").toLowerCase())},t.AckComplete=function(){function e(e,n){e.ok=function(){t.close("closed"),v()};var r="api/OsdTrnBankAlert/GetEmployeeName";s.get(r).then(function(t){e.user_name=t.data.user_name,y=t.data.employee_gid}),e.ackcompletedSubmit=function(){var n={bankalert2allocated_gid:U,customer_gid:S,assigned_to:y,assigned_toname:e.user_name,assigned_remarks:e.completed_remarks},r="api/OsdTrnBankAlert/Post2OperationTeam";lockUI(),s.post(r,n).then(function(n){if(1==n.data.status){var r={bankalert2allocated_gid:U},o="api/OsdTrnBankAlert/GetServiceReqDtl";s.getparams(o,r).then(function(n){if(T=n.data.servicerequest_gid,null!=T||""!=T||void 0!=T){var r={completed_remarks:e.completed_remarks,servicerequest_gid:T};lockUI();var o="api/OsdTrnMyTicket/PostAckCompleteRequest";s.post(o,r).then(function(e){1==e.data.status?(t.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),a.go("app.OsdTrnBankAlertManagementSummary")):(t.close("closed"),i.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI(),a.go("app.OsdTrnBankAlertManagementSummary"))}),unlockUI(),i.alert(n.data.message,{status:"success",pos:"top-center",timeout:3e3})}})}else unlockUI(),i.alert(n.data.message,{status:"info",pos:"top-center",timeout:3e3})})},e.downloadsdoc=function(e,t){g.Downloaddocument(e,t)},e.Cdownloadall=function(){for(var e=0;e<b.length;e++)g.Downloaddocument(h,b[e])},e.CompleteRequestDocumentUpload=function(){var t=document.getElementById("file2");if(console.log(t),t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),e.uploadfrm=a;var r=t.files.item(n).name,o=(t.files.item(n).size,f.fnCheckValidDocType(r,""));if(0==o)return i.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("project_flag","Default"),lockUI();var l="api/OsdTrnMyTicket/CompleteDocumentUpload";s.postFile(l,e.uploadfrm).then(function(t){$("#file2").val(""),e.upload_list=t.data.upload_list,b=t.data.compfilename,h=t.data.compfilepath,unlockUI(),1==t.data.status?i.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):i.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file.")},e.uploaddocumentdelete=function(t){lockUI();var a={tmp_documentGid:t},n="api/OsdTrnMyTicket/GettmpCompleteDocDelete";s.getparams(n,a).then(function(t){e.upload_list=t.data.upload_list,1==t.data.status?i.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):i.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})},e.documentviewer=function(e,t){lockUI();var a=f.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(i.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void g.DocumentViewer(e,t)}}var t=r.open({templateUrl:"/Ackcompleterequestmodal.html",controller:e,size:"lg",backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},t.Back=function(){"BamCompletedList"==A?a.go("app.osdBamTicketCompletedSummary"):d.url("app/OsdTrnBankAlertManagementSummary?lstab="+M)},t.download=function(e,t){g.Downloaddocument(e,t)},t.documentviewer=function(e,t){lockUI();var a=f.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(i.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void g.DocumentViewer(e,t)},t.udownloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.COdownloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.logdetails=function(){1==t.IsLogShow?t.IsLogShow=!1:t.IsLogShow=!0},t.UploadDocCancel=function(e){var a={fileupload_gid:e},n="api/OsdTrnBankAlert/DeleteOperationUploadedDoc";lockUI(),s.getparams(n,a).then(function(e){unlockUI(),t.upload_list=e.data.upload_list,t.lblfilename=e.data.doufilename,t.lblfilepath=e.data.doufilepath})},t.ServiceRequestDocumentUpload=function(){var e=document.getElementById("file");if(e.files.length>0){for(var a=new FormData,n=0;n<=e.files.length-1;n++){a.append(e.files[n].name,e.files[n]),t.uploadfrm=a;var r=e.files.item(n).name,o=(e.files.item(n).size,f.fnCheckValidDocType(r,"Default"));if(0==o)return i.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("project_flag","Default"),lockUI();var l="api/OsdTrnServiceRequest/RequestDocumentUpload";s.postFile(l,t.uploadfrm).then(function(e){$("#file").val(""),t.upload_list=e.data.upload_list,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,unlockUI(),1==e.data.status?i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):i.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else i.alert("Please select a file.","info")},t.downloads=function(e,t){g.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.rmdownloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.Submit=function(){var e=$("#employeeList :selected").text(),a={bankalert2allocated_gid:U,customer_gid:S,assigned_to:t.cboemployee,assigned_toname:e,assigned_remarks:t.txtremarks},n="api/OsdTrnBankAlert/Post2OperationTeam";lockUI(),s.post(n,a).then(function(e){1==e.data.status?(unlockUI(),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),i.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})),d.url("app/OsdTrnBankAlertManagementSummary?lstab="+M)})},t.downloadsdocument=function(e,t){g.Downloaddocument(e,t)}}angular.module("angle").controller("osdBamAssign2operationController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){t.trustAsHtml=function(e){return _.trustAsHtml(e)};var e="api/OsdTrnBankAlert/GetNotAllocatedDtl",a={bankalert2notallocated_gid:y};s.getparams(e,a).then(function(e){t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblallocated_status=e.data.allocated_status,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,unlockUI()})}var k=this;k.title="osdBamnotAllocatedViewController";var b=f.decryptURL(d.search().hash),y=b.lsbankalert2notallocated_gid,h=b.lstab;v(),t.Back=function(){d.url("app/OsdTrnBankAlertManagementSummary?lstab="+h)},t.download=function(e,t){g.Downloaddocument(e,t)},t.Submit=function(){a.go("app.osdBamAllocatedToRM")},t.uploadattachment=function(e,a,n){var r=document.getElementById("addupload");if(r.files.length>0)for(var o=new FormData,l=0;l<=r.files.length-1;l++)o.append(r.files[l].name,r.files[l]),o.append("project_flag","Default"),t.uploadfrm=o;var d="api/OsdTrnBankAlert/RMDocumentUpload";lockUI(),s.postFile(d,t.uploadfrm).then(function(e){if($("#addupload").val(""),1==e.data.status){var a="api/OsdTrnBankAlert/GetRMUploadedDoc";s.get(a).then(function(e){t.uploaddocument=e.data.MdlDocDetails}),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()}else unlockUI(),i.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})})}}angular.module("angle").controller("osdBamnotAllocatedViewController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnBankAlert/GetCompletedSummary";lockUI(),i.get(e).then(function(e){t.BankAlertCompleted_list=e.data.BankAlertCompleted_list,unlockUI()})}var f=this;f.title="OsdBamRMCompletedSummaryController",g(),t.Back=function(){c.url("app/osdBamAllocatedToRM")},t.BankalertView=function(e,t,a){c.url("app/osdBamAllocatedToRMView?hash="+_.encryptURL("lsbankalert2allocated_gid="+e+"&lscustomer_gid="+t+"&lscustomer_urn="+a+"&lspage=Completedsummary"))}}angular.module("angle").controller("OsdBamRMCompletedSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){t.trustAsHtml=function(e){return _.trustAsHtml(e)};var e="api/OsdTrnBankAlert/GetAllocatedDetail",a={bankalert2allocated_gid:y,customer_gid:h,customer_urn:T};s.getparams(e,a).then(function(e){if(unlockUI(),t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonal_head,t.lblbusiness_head=e.data.business_head,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonal_riskmanagerName,t.lblriskmanager_name=e.data.riskmanager_name,t.lblriskMonitoring_Name=e.data.riskMonitoring_Name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.transferto_name=e.data.transferto_name,t.employee_gid=e.data.employee_gid,t.relationshipmanager_gid=e.data.relationshipmanager_gid,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,unlockUI(),"Completed"==t.lblallocated_status){var a="api/OsdTrnBankAlert/GetRMStatusDtl",n={bankalert2allocated_gid:y};s.getparams(a,n).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath});var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:t.servicerequest_gid};s.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var n={servicerequest_gid:t.servicerequest_gid},a="api/OsdTrnMyTicket/GetCompletedDetails";s.getparams(a,n).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.lblfilename=e.data.compfilename,t.lblfilepath=e.data.compfilepath,unlockUI()})}var a="api/OsdTrnBankAlert/GetOperationStatusDtl",n={bankalert2allocated_gid:y};s.getparams(a,n).then(function(e){t.lblassigned_remarks=e.data.assigned_remarks,t.lblassigned_date=e.data.assigned_date,t.lblassigned_toname=e.data.assigned_toname,t.lblassigned_by=e.data.assigned_by,t.document_list=e.data.rmdocument_list});var n={servicerequest_gid:t.servicerequest_gid},a="api/OsdTrnTicketManagement/GetTransferMemberlist";s.getparams(a,n).then(function(e){t.transferlistdtl=e.data.transferlistdtl,t.transferlistdtlreopen=e.data.transferlistdtlreopen,unlockUI()})});var e="api/OsdTrnBankAlert/GetticketTransferLog",a={bankalert2allocated_gid:y};s.getparams(e,a).then(function(e){t.relationshipmanager_name=e.data.relationshipmanager_name,t.transferedinitiated_by=e.data.transferedinitiated_by,t.transferinitiated_date=e.data.transferinitiated_date,t.transfer_type=e.data.transfer_type,t.transfer_remarks=e.data.transfer_remarks})}var k=this;k.title="osdBamAllocatedTotransferController";var b=f.decryptURL(d.search().hash),y=b.lsbankalert2allocated_gid,h=b.lscustomer_gid,T=b.lscustomer_urn,q=b.lstab;v(),lockUI(),t.logdetails=function(){1==t.IsLogShow?t.IsLogShow=!1:t.IsLogShow=!0},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.Back=function(){d.url("app/osdBamAllocatedToRM?lstab="+q)},t.download=function(e,t){g.Downloaddocument(e,t)},t.downloadsdocument=function(e,t){g.Downloaddocument(e,t)}}angular.module("angle").controller("osdBamAllocatedTotransferController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnBankAlert/GetBAMOperationCompletedSummary";lockUI(),i.get(e).then(function(e){unlockUI(),t.BankAlertCompleted_list=e.data.BankAlertAllocated_list})}var f=this;f.title="osdBamTicketCompletedSummary",g(),t.BankalertView=function(e,t){c.url("app/osdBamAssign2operation?hash="+_.encryptURL("lsbankalert2allocated_gid="+e+"&lscustomer_gid="+t+"&lspage=BamCompletedList"))},t.back=function(){n.go("app.OsdTrnBankAlertManagementSummary")}}angular.module("angle").controller("osdBamTicketCompletedSummary",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnBankAlertReport/BankReportSummary";lockUI(),i.get(e).then(function(e){t.BankReport_list=e.data.BankReportSummaryList,unlockUI()})}var f=this;f.title="osdBankAlertReportController",g(),t.Bankreport=function(){lockUI();var e="api/OsdTrnBankAlertReport/ExportBankReport";i.get(e).then(function(e){1==e.data.status?(unlockUI(),_.Downloaddocument(e.data.lscloudpath,e.data.lsname)):(unlockUI(),d.alert("Error Occurred While Export !","success"))})}}angular.module("angle").controller("osdBankAlertReportController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){a.email_gid=y,a.toMail=h,a.ccMail=T,a.bccMail=q,a.email_subject=U,a.message_id=S,a.reference_id=w,a.rmemployee_gid=I,a.rmemployee_name=M,a.decision=A,a.lspage=R,a.llspage=C;var e="api/OsdTrnCustomerQueryMgmt/GetEmailSignature";i.get(e).then(function(e){a.pushbackcontent=e.data.emailsignature});var e="api/OsdTrnCustomerQueryMgmt/Mailtempdelete";i.get(e).then(function(e){})}var k=this;k.title="osdComposeMailController";var b=f.decryptURL(c.search().hash),y=b.email_gid,h=b.toMail,T=b.ccMail,q=b.bccMail,U=b.email_subject,S=b.message_id,w=b.reference_id,I=b.rmemployee_gid,M=b.rmemployee_name,A=b.decision,R=b.lspage,C=b.llspage;a.lsShowBCC=!0,a.lsShowCC=!0,v(),a.uploadattachment=function(e,t,n){var r=document.getElementById("file");if(r.files.length>0){for(var o=new FormData,l=0;l<=r.files.length-1;l++){o.append(r.files[l].name,r.files[l]),a.uploadfrm=o;var s=r.files.item(l).name,c=(r.files.item(l).size,f.fnCheckValidDocType(s,"Default"));if(0==c)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}o.append("project_flag","Default"),lockUI();var m="api/OsdTrnCustomerQueryMgmt/MailAttachment";i.postFile(m,a.uploadfrm).then(function(e){if($("#file").val(""),a.upload_list=e.data.upload_list,unlockUI(),1==e.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var t="api/OsdTrnCustomerQueryMgmt/GetMailAttachment";i.get(t).then(function(e){a.uploaddocument=e.data.MdlDocDetails})}else unlockUI(),d.alert("File Format Not Supported!");unlockUI()})}else alert("Please select a file.")},a.updateDesicion=function(){if(void 0==a.pushbackcontent)return void d.alert("Write the body of the content","success");var e={email_gid:a.email_gid,decision:a.decision,employee_gid:a.rmemployee_gid,employee_name:a.rmemployee_name,remarks:"",mailcontent:a.pushbackcontent,subject:a.email_subject,tomail_id:a.toMail,ccmail_id:a.ccMail,bccmail_id:a.bcc_mail,message_id:a.message_id,reference_id:a.reference_id},t="api/OsdTrnCustomerQueryMgmt/PostDecision";lockUI(),i.post(t,e).then(function(e){unlockUI(),1==e.data.status?(d.alert(e.data.message,"success"),"forward"==a.llspage?c.url("app/osdCqmReplaySummary?hash="+f.encryptURL("email_gid="+y)):"reply"==a.llspage?c.url("app/osdCqmReplaySummary?hash="+f.encryptURL("email_gid="+y)):"transfer"==a.llspage&&c.url("app/osdCqmTransferSummary?hash="+f.encryptURL("email_gid="+y))):(d.alert(e.data.message,"warning"),"forward"==a.llspage?c.url("app/osdCqmReplaySummary?hash="+f.encryptURL("email_gid="+y)):"reply"==a.llspage?c.url("app/osdCqmReplaySummary?hash="+f.encryptURL("email_gid="+y)):"transfer"==a.llspage&&c.url("app/osdCqmTransferSummary?hash="+f.encryptURL("email_gid="+y)))})},a.UploadDocCancel=function(e){var t={mailattachment_gid:e},n="api/OsdTrnCustomerQueryMgmt/DeleteAttachment";lockUI(),i.getparams(n,t).then(function(e){if(1==e.data.status){unlockUI(),d.alert("Document deleted Successfully..!!","success");var t="api/OsdTrnCustomerQueryMgmt/GetMailAttachment";i.get(t).then(function(e){a.uploaddocument=e.data.MdlDocDetails})}else unlockUI(),d.alert("Error Occurred")})},a.closeDesicion=function(){g.close()},a.downloads=function(t,a){e.Downloaddocument(t,a)},a.back=function(){"forward"==a.lspage?c.url("app/osdCqmReplaySummary?hash="+f.encryptURL("email_gid="+y)):"reply"==a.lspage?c.url("app/osdCqmReplaySummary?hash="+f.encryptURL("email_gid="+y)):"transfer"==a.lspage?c.url("app/osdCqmTransferSummary?hash="+f.encryptURL("email_gid="+y)):"assignedquery360"==a.lspage?c.url("app/osdCqmAssignedQuery360?hash="+f.encryptURL("email_gid="+y)):"replyview"==a.lspage?c.url("app/osdCqmReplayView?hash="+f.encryptURL("email_gid="+y)):"forwardview"==a.lspage?c.url("app/osdCqmForwardView?hash="+f.encryptURL("email_gid="+y)):"transferview"==a.lspage&&c.url("app/osdCqmTransferView?hash="+f.encryptURL("email_gid="+y))}}angular.module("angle").controller("osdComposeMailController",e),e.$inject=["DownloaddocumentService","$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$timeout","$window","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnCustomerQueryMgmt/CustomerAssignQueryCloseSummary";lockUI(),i.get(e).then(function(e){t.QueryAssignedCloseList=e.data.QueryAssignedCloseList,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/AssignedQueryCount";i.get(e).then(function(e){t.assigned_count=e.data.assigned_count,t.reply_count=e.data.reply_count,t.forward_count=e.data.forward_count,t.transfer_count=e.data.transfer_count,t.close_count=e.data.close_count,unlockUI()})}var f=this;f.title="osdCqmAssignCloseSummaryController",g(),t.CloseView=function(e){c.url("app/osdCqmAssignCloseView?hash="+_.encryptURL("email_gid="+e))},t.Assigned=function(){n.go("app.osdCqmAssignedQuery")},t.Closed=function(){n.go("app.osdCqmAssignCloseSummary")},t.Transfer=function(){n.go("app.osdCqmTransferSummary")},t.Replay=function(){n.go("app.osdCqmReplaySummary")},t.Forward=function(){n.go("app.osdCqmForwardSummary")},t.ClosedView=function(){n.go("app.osdCqmAssignCloseView")}}angular.module("angle").controller("osdCqmAssignCloseSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g){function f(){a.trustAsHtml=function(e){return _.trustAsHtml(e)},a.IsLogShow=!1;var e="api/OsdTrnCustomerQueryMgmt/PostAuditView",t={email_gid:b};d.getparams(e,t).then(function(e){1==e.data.status});var t={email_gid:b},e="api/OsdTrnCustomerQueryMgmt/CustomerAssignQueryClose360";d.getparams(e,t).then(function(e){a.email_gid=e.data.email_gid,a.ticketref_no=e.data.ticketref_no,a.assigned_by=e.data.assigned_by,a.assigned_date=e.data.assigned_date,a.assigned_to=e.data.assigned_to,a.email_from=e.data.email_from,a.email_date=e.data.email_date,a.status=e.data.status,a.aging=e.data.aging,a.email_subject=e.data.email_subject,a.email_content=e.data.email_content,a.email_to=e.data.email_to,a.cc=e.data.cc,a.bcc=e.data.bcc,a.from_mailaddress=e.data.from_mailaddress,a.QueryAssignClose360list=e.data.QueryAssignClose360list,a.closed_remarks=e.data.closed_remarks,a.closed_by=e.data.closed_by,a.closed_date=e.data.closed_date,a.attch_list=e.data.MdlAttachmentList,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/CustomerQueryAttachments";d.getparams(e,t).then(function(e){a.QueryAttachmentsList=e.data.QueryAttachmentsList,unlockUI()});var t={email_gid:b},e="api/OsdTrnCustomerQueryMgmt/ComposeMail360";d.getparams(e,t).then(function(e){a.MdlComposeMaillist=e.data.MdlComposeMaillist,unlockUI()})}var v=this;v.title="osdCqmAssignCloseViewController";var k=g.decryptURL(m.search().hash),b=k.email_gid;f(),a.Back=function(){r.go("app.osdCqmAssignCloseSummary")},a.logdetails=function(){if(1==a.IsLogShow)a.IsLogShow=!1;else{a.IsLogShow=!0;var e="api/OsdTrnCustomerQueryMgmt/TransferLog",t={lsemail_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.MdlTransferLog=e.data.MdlTransferLog,null==a.MdlTransferLog?a.transfershow=!0:a.transfershow=!1)});var e="api/OsdTrnCustomerQueryMgmt/AuditLog",t={email_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.auditlog_list=e.data.MdlAuditLog)})}},a.Download=function(t,a){e.Downloaddocument(t,a)},a.transfer=function(e,t,a,r,o){function l(n,l,i,d,c,m,u,p,_,g,v,k,b){var y="api/employee/Employee";_.get(y).then(function(e){l.employee_list=e.data.employee_list,unlockUI()}),l.ticketref_no=t,l.subject=r,l.from=a,l.checkeremployee_name=o,l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void g.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),transfer_remarks:l.transfer_remarks},a="api/OsdTrnCustomerQueryMgmt/TicketTransfer";lockUI(),_.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?(s.close("closed"),g.alert(e.data.message,"success"),f()):(s.close("closed"),g.alert(e.data.message,"warning"),f())})},l.close=function(){s.close("closed")}}var s=n.open({templateUrl:"/transferContent.html",controller:l,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},a.signature=function(){function e(e,a){var n="api/OsdTrnCustomerQueryMgmt/GetEmailSignature";d.get(n).then(function(t){e.EmailSignature=t.data.emailsignature}),e.ok=function(){t.close("closed")},e.close=function(){t.close("closed")},e.submit=function(){lockUI();var t={emailsignature:e.EmailSignature},n="api/OsdTrnCustomerQueryMgmt/PostEmailSignature";d.post(n,t).then(function(e){unlockUI(),1==e.data.status?(c.alert(e.data.message,{status:"success",
pos:"top-center",timeout:3e3}),a.close("closed")):(c.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var t=n.open({templateUrl:"/signatureContent.html",controller:e,size:"lg"});e.$inject=["$scope","$modalInstance"]},a.close=function(e,t,a,r){function o(n,o,s,i,d,c,m,u,p,_,g,v,k){o.ticketref_no=t,o.subject=r,o.from=a,o.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:o.closed_remarks,mailcontent:"Close",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/OsdTrnCustomerQueryMgmt/PostDecision";lockUI(),p.post(a,t).then(function(e){unlockUI(),1==e.data.status?_.alert(e.data.message,"success"):_.alert(e.data.message,"warning"),l.close("closed"),f()})},o.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeContent.html",controller:o,size:"md"});o.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},a.forward=function(){var e="Forward",t="forward",n="forward";m.url("app/osdComposeMail?hash="+g.encryptURL("email_gid="+b+"&toMail="+a.from_mailaddress+"&ccMail="+a.cc+"&bccMail="+a.bcc+"&email_subject="+a.email_subject+"&message_id="+a.message_id+"&reference_id= "+a.reference_id+"&rmemployee_gid="+a.rmemployee_gid+"&rmemployee_name="+a.rmemployee_name+"&decision="+e+"&lspage="+t+"&llspage="+n))},a.Reply=function(){var e="Reply",t="reply",n="reply";m.url("app/osdComposeMail?hash="+g.encryptURL("email_gid="+b+"&toMail="+a.from_mailaddress+"&ccMail="+a.cc+"&bccMail="+a.bcc+"&email_subject="+a.email_subject+"&message_id="+a.message_id+"&reference_id= "+a.reference_id+"&rmemployee_gid="+a.rmemployee_gid+"&rmemployee_name="+a.rmemployee_name+"&decision="+e+"&lspage="+t+"&llspage="+n))}}angular.module("angle").controller("osdCqmAssignCloseViewController",e),e.$inject=["DownloaddocumentService","$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g){function f(){a.transfer_status=y,a.trustAsHtml=function(e){return _.trustAsHtml(e)},a.IsLogShow=!1,a.Transferlist=!0,"Transfer"==a.transfer_status?a.Transferlist=!1:a.Transferlist=!0;var e="api/employee/Employee";d.get(e).then(function(e){a.employee_list=e.data.employee_list,unlockUI()});var t={email_gid:b},e="api/OsdTrnCustomerQueryMgmt/CustomerAssignedQuery360";d.getparams(e,t).then(function(e){a.email_gid=e.data.email_gid,a.ticketref_no=e.data.ticketref_no,a.assigned_by=e.data.assigned_by,a.assigned_date=e.data.assigned_date,a.assigned_to=e.data.assigned_to,a.email_from=e.data.email_from,a.email_date=e.data.email_date,a.status=e.data.status,a.aging=e.data.aging,a.email_subject=e.data.email_subject,a.email_content=e.data.email_content,a.email_to=e.data.email_to,a.cc=e.data.cc,a.bcc=e.data.bcc,a.from_mailaddress=e.data.from_mailaddress,a.Query360list=e.data.Query360list,a.assigned_remarks=e.data.assigned_remarks,a.attch_list=e.data.MdlAttachmentList,unlockUI()});var t={email_gid:b},e="api/OsdTrnCustomerQueryMgmt/ComposeMail360";d.getparams(e,t).then(function(e){a.MdlComposeMaillist=e.data.MdlComposeMaillist,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/CustomerQueryAttachments";d.getparams(e,t).then(function(e){a.QueryAttachmentsList=e.data.QueryAttachmentsList,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/PostAuditView",t={email_gid:b};d.getparams(e,t).then(function(e){1==e.data.status});var e="api/OsdTrnCustomerQueryMgmt/TransferLog",t={lsemail_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.MdlTransferLog=e.data.MdlTransferLog,null==a.MdlTransferLog?a.transfershow=!0:a.transfershow=!1)})}var v=this;v.title="osdCqmAssignedQuery360Controller";var k=g.decryptURL(m.search().hash),b=k.email_gid,y=k.status;f(),a.Back=function(){r.go("app.osdCqmAssignedQuery")},a.Download=function(t,a){e.Downloaddocument(t,a)},a.logdetails=function(){if(1==a.IsLogShow)a.IsLogShow=!1;else{a.IsLogShow=!0;var e="api/OsdTrnCustomerQueryMgmt/TransferLog",t={lsemail_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.MdlTransferLog=e.data.MdlTransferLog,null==a.MdlTransferLog?a.transfershow=!0:a.transfershow=!1)});var e="api/OsdTrnCustomerQueryMgmt/AuditLog",t={email_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.auditlog_list=e.data.MdlAuditLog)})}},a.transfer=function(e,t,a,r,o){function l(n,l,i,d,c,m,u,p,_,g,v,k,b){var y="api/OsdTrnCustomerQueryMgmt/TransferEmployee";_.get(y).then(function(e){l.TransferEmployeeList=e.data.TransferEmployeeList,unlockUI()}),l.ticketref_no=t,l.subject=r,l.from=a,l.checkeremployee_name=o,l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void g.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),transfer_remarks:l.transfer_remarks},a="api/OsdTrnCustomerQueryMgmt/TicketTransfer";lockUI(),_.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?(s.close("closed"),g.alert(e.data.message,"success"),f(),d.go("app.osdCqmTransferSummary")):(s.close("closed"),g.alert(e.data.message,"warning"),f())})};var y="api/OsdTrnCustomerQueryMgmt/TransferLog",h={lsemail_gid:e};_.getparams(y,h).then(function(e){l.MdlTransferLog=e.data.MdlTransferLog}),l.close=function(){s.close("closed")}}var s=n.open({templateUrl:"/transferContent.html",controller:l,size:"md",backdrop:"static",keyboard:!1});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},a.signature=function(){function e(e,a){var n="api/OsdTrnCustomerQueryMgmt/GetEmailSignature";d.get(n).then(function(t){e.EmailSignature=t.data.emailsignature}),e.ok=function(){t.close("closed")},e.close=function(){t.close("closed")},e.submit=function(){lockUI();var t={emailsignature:e.EmailSignature},n="api/OsdTrnCustomerQueryMgmt/PostEmailSignature";d.post(n,t).then(function(e){unlockUI(),1==e.data.status?(c.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed")):(c.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var t=n.open({templateUrl:"/signatureContent.html",controller:e,size:"lg",backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},a.close=function(e,t,a,r){function o(n,o,s,i,d,c,m,u,p,_,g,v,k){o.ticketref_no=t,o.subject=r,o.from=a,o.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:o.close_remarks,mailcontent:"Close",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/OsdTrnCustomerQueryMgmt/PostDecision";lockUI(),p.post(a,t).then(function(e){unlockUI(),1==e.data.status?(_.alert(e.data.message,"success"),i.go("app.osdCqmAssignCloseSummary")):_.alert(e.data.message,"warning"),l.close("closed"),f()})},o.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeContent.html",controller:o,size:"md",backdrop:"static",keyboard:!1});o.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},a.forward=function(){var e="Forward",t="assignedquery360",n="forward";m.url("app/osdComposeMail?hash="+g.encryptURL("email_gid="+b+"&toMail="+a.from_mailaddress+"&ccMail="+a.cc+"&bccMail="+a.bcc+"&email_subject="+a.email_subject+"&message_id="+a.message_id+"&reference_id= "+a.reference_id+"&rmemployee_gid="+a.rmemployee_gid+"&rmemployee_name="+a.rmemployee_name+"&decision="+e+"&lspage="+t+"&llspage="+n))},a.Reply=function(){var e="Reply",t="assignedquery360",n="reply";m.url("app/osdComposeMail?hash="+g.encryptURL("email_gid="+b+"&toMail="+a.from_mailaddress+"&ccMail="+a.cc+"&bccMail="+a.bcc+"&email_subject="+a.email_subject+"&message_id="+a.message_id+"&reference_id= "+a.reference_id+"&rmemployee_gid="+a.rmemployee_gid+"&rmemployee_name="+a.rmemployee_name+"&decision="+e+"&lspage="+t+"&llspage="+n))}}angular.module("angle").controller("osdCqmAssignedQuery360Controller",e),e.$inject=["DownloaddocumentService","$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnCustomerQueryMgmt/CustomerAssignedQuerySummary";i.get(e).then(function(e){t.AssignedQueryList=e.data.AssignedQueryList,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/AssignedQueryCount";i.get(e).then(function(e){t.assigned_count=e.data.assigned_count,t.reply_count=e.data.reply_count,t.forward_count=e.data.forward_count,t.transfer_count=e.data.transfer_count,t.close_count=e.data.close_count,unlockUI()})}var f=this;f.title="osdCqmAssignedQueryController",g(),t.Assigned=function(){n.go("app.osdCqmAssignedQuery")},t.Closed=function(){n.go("app.osdCqmAssignCloseSummary")},t.Transfer=function(){n.go("app.osdCqmTransferSummary")},t.Replay=function(){n.go("app.osdCqmReplaySummary")},t.Forward=function(){n.go("app.osdCqmForwardSummary")},t.Replay=function(){n.go("app.osdCqmReplaySummary")},t.AssignedQuery360=function(e){c.url("app/osdCqmAssignedQuery360?hash="+_.encryptURL("email_gid="+e))},t.transfer=function(e,t,n,r,o){function l(a,l,i,d,c,m,u,p,_,f,v,k,b){var y="api/OsdTrnCustomerQueryMgmt/TransferEmployee";_.get(y).then(function(e){l.TransferEmployeeList=e.data.TransferEmployeeList,unlockUI()}),l.email_gid=e,l.ticketref_no=t,l.email_subject=r,l.from_mailaddress=n,l.assigned_to=o,l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void f.alert("Kindly Select the Assign to Person","warning");var e={email_gid:l.email_gid,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),transfer_remarks:l.transfer_remarks},t="api/OsdTrnCustomerQueryMgmt/TicketTransfer";lockUI(),_.post(t,e).then(function(e){unlockUI(),(e.data.status=!0)?(s.close("closed"),f.alert(e.data.message,"success"),g()):(s.close("closed"),f.alert(e.data.message,"warning"),g())})};var y="api/OsdTrnCustomerQueryMgmt/TransferLog",h={lsemail_gid:e};_.getparams(y,h).then(function(e){l.MdlTransferLog=e.data.MdlTransferLog}),l.close=function(){s.close("closed")}}var s=a.open({templateUrl:"/transferContent.html",controller:l,size:"md",backdrop:"static",keyboard:!1});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]}}angular.module("angle").controller("osdCqmAssignedQueryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnCustomerQueryMgmt/CustomerQueryAssignSummary";lockUI(),i.get(e).then(function(e){t.QueryAssignList=e.data.QueryAssignList,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/QueryAssignmentCount";i.get(e).then(function(e){t.pending_count=e.data.pending_count,t.assign_count=e.data.assign_count,t.close_count=e.data.close_count,unlockUI()})}var f=this;f.title="osdCqmAssignToQueryController";c.search().email_gid;g(),t.AssignedQuery360=function(e,t){c.url("app/osdCqmQueryAssign360?hash="+_.encryptURL("email_gid="+e+"&status="+t))},t.Pending=function(){n.go("app.osdCqmQueryAssignment")},t.Assigned=function(){n.go("app.osdCqmAssignToQuery")},t.Close=function(){n.go("app.osdCqmCloseSummary")},t.transfer=function(e,t,n,r,o){function l(a,l,i,d,c,m,u,p,_,f,v,k,b){var y="api/OsdTrnCustomerQueryMgmt/TransferEmployee";_.get(y).then(function(e){l.TransferEmployeeList=e.data.TransferEmployeeList,unlockUI()}),l.email_gid=e,l.ticketref_no=t,l.email_subject=r,l.from_mailaddress=n,l.assigned_to=o,l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void f.alert("Kindly Select the Assign to Person","warning");var e={email_gid:l.email_gid,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),transfer_remarks:l.transfer_remarks},t="api/OsdTrnCustomerQueryMgmt/TicketTransfer";lockUI(),_.post(t,e).then(function(e){unlockUI(),(e.data.status=!0)?(s.close("closed"),f.alert(e.data.message,"success"),g()):(s.close("closed"),f.alert(e.data.message,"warning"),g())})};var h={lsemail_gid:e},y="api/OsdTrnCustomerQueryMgmt/TransferLog";_.getparams(y,h).then(function(e){l.MdlTransferLog=e.data.MdlTransferLog}),l.close=function(){s.close("closed")}}var s=a.open({templateUrl:"/transferContent.html",controller:l,size:"md",backdrop:"static",keyboard:!1});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]}}angular.module("angle").controller("osdCqmAssignToQueryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnCustomerQueryMgmt/CustomerQueryCloseSummary";lockUI(),i.get(e).then(function(e){t.QueryCloseList=e.data.QueryCloseList,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/QueryAssignmentCount";i.get(e).then(function(e){t.pending_count=e.data.pending_count,t.assign_count=e.data.assign_count,t.close_count=e.data.close_count,unlockUI()})}var f=this;f.title="osdCqmCloseSummaryController",g(),t.Pending=function(){n.go("app.osdCqmQueryAssignment")},t.Assigned=function(){n.go("app.osdCqmAssignToQuery")},t.Close=function(){n.go("app.osdCqmCloseSummary")},t.CloseView=function(e){c.url("app/osdCqmCloseView?hash="+_.encryptURL("email_gid="+e))}}angular.module("angle").controller("osdCqmCloseSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f,v,k,b,y,h){function T(){lockUI(),t.RequestCompletedFlag=j,t.BankAlert_View=!1,"Y"==R?(t.BankAlert_View=!0,t.osd_View=!1):(t.BankAlert_View=!1,t.osd_View=!0),"N"==t.RequestCompletedFlag?t.remarkscommunication=!0:t.remarkscommunication=!1,t.servicerequest_gid=A;var e={servicerequest_gid:A},a="api/OsdTrnMyTicket/GetservicerequestactivityhistoryList";i.getparams(a,e).then(function(e){t.servicerequestactivityhistory_list=e.data.servicerequestactivityhistory_list});var a="api/OsdTrnTicketManagement/GetAllocateManagerlist";i.getparams(a,e).then(function(e){t.allocatelistdtl=e.data.allocatelistdtl});var a="api/OsdTrnTicketManagement/GetAllocateManagerlist";i.getparams(a,e).then(function(e){t.allocatelistdtlreopen=e.data.allocatelistdtlreopen});var n={servicerequest_gid:A},a="api/OsdTrnMyTicket/GetAllotted360";i.getparams(a,n).then(function(e){unlockUI(),t.request_refno=e.data.request_refno,t.raised_by=e.data.raised_by,t.raised_date=e.data.raised_date,t.raised_department=e.data.raised_department,t.activity_name=e.data.activity_name,t.request_title=e.data.request_title,t.request_status=e.data.request_status,t.request_description=e.data.request_description,t.alloteddocumentdtl=e.data.alloteddocumentdtl,S=e.data.assigned_status,t.transfer_flag=e.data.transfer_flag,t.assigned_team=e.data.assigned_team,t.assigned_member=e.data.assigned_member,t.employee_mobileno=e.data.employee_mobileno,t.level_one=e.data.level_one,t.employee_number=e.data.employee_number,t.baselocation_name=e.data.baselocation_name,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,t.lblallotfilename=e.data.allofilename,t.lblallotfilepath=e.data.allofilepath});var a="api/OsdTrnMyTicket/GetRequestorlist";i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var a="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityTempClear";i.get(a).then(function(e){});var a="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(a,n).then(function(e){t.transferlistdtl=e.data.transferlistdtl,unlockUI()});var a="api/OsdTrnMyTicket/GetBusinessunitStatusMyActivity";i.getparams(a,n).then(function(e){t.businessstatuslist=e.data.businessstatuslist});var a="api/OsdTrnMyTicket/GetApprovalDtls";i.getparams(a,n).then(function(e){t.approvaldetails=e.data.approvaldetails,t.employee_gid=e.data.employee_gid,unlockUI()});var a="api/OsdTrnMyTicket/GetAssetDtls";i.getparams(a,n).then(function(e){t.assetdetails=e.data.assetdetails,t.employee_gid=e.data.employee_gid});var e={servicerequest_gid:A},a="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(a,e).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl});var a="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityList";i.getparams(a,e).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list}),t.trustAsHtml=function(e){return b.trustAsHtml(e)};var a="api/OsdTrnBankAlert/GetAllocatedDetail",n={bankalert2allocated_gid:C,customer_gid:O,customer_urn:D};i.getparams(a,n).then(function(e){t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonal_head,t.lblbusiness_head=e.data.businesshead_name,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,unlockUI()});var a="api/OsdTrnBankAlert/GetRMStatusDtl",n={bankalert2allocated_gid:C};i.getparams(a,n).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath});var a="api/OsdTrnBankAlert/GetunreconAllocatedDetail",n={bankalert2allocated_gid:C,customer_gid:O,customer_urn:D};i.getparams(a,n).then(function(e){t.ticketref_no=e.data.ticketref_no,t.lblbank_name=e.data.bank_name,t.lblcustomer_refno=e.data.customer_urn,t.lblbranch_name=e.data.branch_name,t.lblcr_dr=e.data.cr_dr,t.lbltransc_value=e.data.transact_val,t.lblremarks=e.data.remarks,t.lbltransc_balance=e.data.transc_balance,t.lblacc_no=e.data.acc_no,t.lbltrn_date=e.data.trn_date,t.lblvalue_date=e.data.value_date,t.lblpayment_date=e.data.payment_date,t.lbltransact_particulars=e.data.transact_particulars,t.lbldebit_amt=e.data.debit_amt,t.lblcredit_amt=e.data.credit_amt,t.lblchq_no=e.data.chq_no,t.lblcreated_by=e.data.created_by,t.lblbrs_flag=e.data.brs_flag,t.lblsource=e.data.source,t.lblallocated_status=e.data.allocated_status,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblkotakAPI_flag=e.data.kotakAPI_flag});var n={banktransc_gid:G},a="api/OsdTrnBankAlert/GetUnReconUploadedDoc";i.getparams(a,n).then(function(e){t.uploaddocument1=e.data.MdlDocDetails,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath})}function q(){var e="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityDrop",a={user_gid:t.user_gid};i.getparams(e,a).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list})}var U=this;U.title="osdTrnMyActivityAllotted360";var S,w,I,M=h.decryptURL(c.search().hash),A=M.servicerequest_gid,R=M.bankalert_flag,C=M.bankalert2allocated_gid,O=M.customer_gid,D=M.lscustomer_urn,G=M.request_refno,j=(M.lspage,M.RequestCompletedFlag);T(),t.download=function(e,t){y.Downloaddocument(e,t)},t.uploadallocation=function(e,a,n){var r={name:e[0].name,file:e[0]},o=h.fnCheckValidDocType(e[0].name,"Default");if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var l=new FormData;l.append("fileupload",r.file),l.append("file_name",r.name),l.append("document_name",t.documentname),l.append("document_title",t.txtdocument_title),l.append("servicerequest_gid",A),l.append("project_flag","Default"),t.uploadfrm=l;var s="api/OsdTrnMyTicket/ConversationDocUpload";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",1==e.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:A};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})}else unlockUI(),d.alert("File Format Not Supported!")})},t.downloadsdocument=function(e,t){y.Downloaddocument(e,t)},t.sendrequestorclick=function(){var e={servicerequest_gid:A,remarks:t.txtqueries};lockUI();var a="api/OsdTrnMyTicket/PostSendRequestor";i.post(a,e).then(function(e){if(unlockUI(),1==e.data.status){var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:A};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()}),t.txtqueries=""}else d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})},t.downloads=function(e,t){y.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.COdownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.Udownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.ServiceRequestViewDocumentUpload=function(){lockUI();var e=document.getElementById("file");if(e.files.length>0){for(var a=new FormData,n=0;n<=e.files.length-1;n++){a.append(e.files[n].name,e.files[n]),t.uploadfrm=a;e.files.item(n).name,e.files.item(n).size}a.append("servicerequest_gid",A);var r="api/OsdTrnServiceRequest/RequestViewDocUpload";i.postFile(r,t.uploadfrm).then(function(e){$("#file").val(""),t.alloteddocumentdtl=e.data.servicerequestdocumentdtl,unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file.")},t.ackActivity=function(e){var t="api/OsdTrnMyTicket/PostUpdateAck";lockUI();var a={servicerequest_gid:A};i.post(t,a).then(function(e){1==e.data.status?(unlockUI(),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),n.go("app.OsdTrnAllotedMyTicket"),T()):(unlockUI(),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),n.go("app.OsdTrnAllotedMyTicket"),T())})},t.AckComplete=function(){function e(e,a){e.ok=function(){t.close("closed"),T()},e.ackcompletedSubmit=function(){var a={completed_remarks:e.completed_remarks,servicerequest_gid:A};lockUI();var r="api/OsdTrnMyTicket/PostAckCompleteRequest";i.post(r,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.OsdTrnAllotedMyTicket")):(t.close("closed"),d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.OsdTrnAllotedMyTicket"))})},e.downloadsdoc=function(e,t){y.Downloaddocument(e,t)},e.Cdownloadall=function(){for(var e=0;e<w.length;e++)y.Downloaddocument(I,w[e])},e.CompleteRequestDocumentUpload=function(){var t=document.getElementById("file2");if(console.log(t),t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),e.uploadfrm=a;var r=t.files.item(n).name,o=(t.files.item(n).size,h.fnCheckValidDocType(r,""));if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}lockUI();var l="api/OsdTrnMyTicket/CompleteDocumentUpload";i.postFile(l,e.uploadfrm).then(function(t){$("#file2").val(""),e.upload_list=t.data.upload_list,w=t.data.compfilename,I=t.data.compfilepath,unlockUI(),1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file.")},e.uploaddocumentdelete=function(t){lockUI();var a={tmp_documentGid:t},n="api/OsdTrnMyTicket/GettmpCompleteDocDelete";i.getparams(n,a).then(function(t){e.upload_list=t.data.upload_list,1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})},e.documentviewer=function(e,t){lockUI();var a=h.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void y.DocumentViewer(e,t)}}var t=a.open({templateUrl:"/Ackcompleterequestmodal.html",controller:e,size:"lg",backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},t.CancelApprovalPerson=function(e){function t(t,a){t.ok=function(){r.close("closed")},lockUI();var o={approval_token:e},l="api/OsdTrnRequestApproval/GetRequestDtl";lockUI(),i.getparams(l,o).then(function(e){t.request_title=e.data.request_title,t.request_refno=e.data.request_refno,t.activity_name=e.data.activity_name,t.assigned_dtl=e.data.assigned_dtl,t.getapproval_remarks=e.data.getapproval_remarks,t.hierary_level=e.data.hierary_level,t.servicerequest_gid=e.data.servicerequest_gid,t.approval_type=e.data.approval_type,unlockUI()}),t.CancelMemberSubmit=function(){var a=t.hierary_level,o=++a,l={approval_token:e,approval_remarks:t.txtremarks,hierary_level:o,servicerequest_gid:t.servicerequest_gid,approval_type:t.approval_type};lockUI();var s="api/OsdTrnRequestApproval/PostRequestCancelled";i.post(s,l).then(function(e){unlockUI(),1==e.data.status?(r.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.osdTrnMyActivityAllotted360"),T()):(r.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.osdTrnMyActivityAllotted360"),T())})}}var r=a.open({templateUrl:"/cancelmembermodal.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t.back=function(){n.go("app.OsdTrnAllotedMyTicket")},t.cancelclick=function(){t.txtqueries=""},t.RejectActivity=function(){function e(e,a){e.ok=function(){t.close("closed")},e.rejectSubmit=function(){var a={rejected_remarks:e.reject_remarks,servicerequest_gid:A};lockUI();var r="api/OsdTrnMyTicket/RejectRequest";i.post(r,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.OsdTrnAllotedMyTicket")):(t.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var t=a.open({templateUrl:"/rejectrequestmodal.html",controller:e,backdrop:"static",keyboard:!1,size:"md"});e.$inject=["$scope","$modalInstance"]},t.TagMemberChat=function(e){function t(e,t){e.ok=function(){n.close("closed")};var a={servicerequest_gid:A},r="api/OsdTrnServiceRequest/TagEmployee";i.getparams(r,a).then(function(t){e.employee_list=t.data.employee_list});var r="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(r,a).then(function(t){e.tagmemberdtl=t.data.tagmemberdtl,e.raised_date=t.data.raised_date}),e.TagMemberSubmit=function(){var t={servicerequest_gid:A,tagmemberdtl:e.tagmember_list};lockUI();var a="api/OsdTrnServiceRequest/PostTagMemberInChat";i.post(a,t).then(function(e){1==e.data.status?(n.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(n.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.ok=function(){n.close("closed")}}var n=a.open({templateUrl:"/tagmemberinchat.html",controller:t});t.$inject=["$scope","$modalInstance"]},t.businessstatus_add=function(){var e=$("#businessstatus :selected").text(),a={businessstatus_gid:t.cbobusinessstatus,business_status:e};if(null==e||" -----Select Business Unit Status-----"==e)d.alert("Enter Business Unit Status",{status:"warning",pos:"top-center",timeout:3e3});else{var n="api/OsdTrnMyTicket/PostBusinessUnitStatusMyActivity";lockUI(),i.post(n,a).then(function(e){unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),q()})}},t.businessstatus_delete=function(e){var t={businessstatusactivity_gid:e};console.log(t);var a="api/OsdTrnMyTicket/DeleteBusinessUnitStatusMyActivity";lockUI(),i.getparams(a,t).then(function(e){unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),q()})},t.request_remarks=function(e){function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),i.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}a.open({templateUrl:"/RequestRemarks.html",controller:t,
backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=h.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void y.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnMyActivityAllotted360",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e=localStorage.getItem("email_gid");t.trustAsHtml=function(e){return p.trustAsHtml(e)};var a="api/OsdTrnCustomerQueryMgmt/CustomerAssignQueryForwardSummary";lockUI(),i.get(a).then(function(e){t.QueryAssignedForwardList=e.data.QueryAssignedForwardList,unlockUI()});var n={email_gid:e},a="api/OsdTrnCustomerQueryMgmt/CustomerAssignedQuery360";i.getparams(a,n).then(function(e){t.email_gid=e.data.email_gid,t.ticketref_no=e.data.ticketref_no,t.assigned_by=e.data.assigned_by,t.assigned_date=e.data.assigned_date,t.assigned_to=e.data.assigned_to,t.email_from=e.data.email_from,t.email_date=e.data.email_date,t.status=e.data.status,t.aging=e.data.aging,t.email_subject=e.data.email_subject,t.email_content=e.data.email_content,t.email_to=e.data.email_to,t.cc=e.data.cc,t.bcc=e.data.bcc,t.from_mailaddress=e.data.from_mailaddress,t.Query360list=e.data.Query360list,t.assigned_remarks=e.data.assigned_remarks,unlockUI()});var a="api/OsdTrnCustomerQueryMgmt/AssignedQueryCount";i.get(a).then(function(e){t.assigned_count=e.data.assigned_count,t.reply_count=e.data.reply_count,t.forward_count=e.data.forward_count,t.transfer_count=e.data.transfer_count,t.close_count=e.data.close_count,unlockUI()})}var f=this;f.title="osdCqmForwardSummaryController",g(),t.Assigned=function(){n.go("app.osdCqmAssignedQuery")},t.Closed=function(){n.go("app.osdCqmAssignCloseSummary")},t.Transfer=function(){n.go("app.osdCqmTransferSummary")},t.Replay=function(){n.go("app.osdCqmReplaySummary")},t.Forward=function(){n.go("app.osdCqmForwardSummary")},t.ForwardView=function(e){t.email_gid=localStorage.setItem("email_gid",e),c.url("app/osdCqmForwardView")},t.transfer=function(e,t,n,r,o){function l(a,l,i,d,c,m,u,p,_,f,v,k,b){var y="api/OsdTrnCustomerQueryMgmt/TransferEmployee";_.get(y).then(function(e){l.TransferEmployeeList=e.data.TransferEmployeeList,unlockUI()}),l.email_gid=e,l.ticketref_no=t,l.email_subject=r,l.from_mailaddress=n,l.assigned_to=o,l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void f.alert("Kindly Select the Assign to Person","warning");var e={email_gid:l.email_gid,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),transfer_remarks:l.transfer_remarks},t="api/OsdTrnCustomerQueryMgmt/TicketTransfer";lockUI(),_.post(t,e).then(function(e){unlockUI(),(e.data.status=!0)?(s.close("closed"),f.alert(e.data.message,"success"),g()):(s.close("closed"),f.alert(e.data.message,"warning"),g())})};var y="api/OsdTrnCustomerQueryMgmt/TransferLog",h={lsemail_gid:e};_.getparams(y,h).then(function(e){l.MdlTransferLog=e.data.MdlTransferLog}),l.close=function(){s.close("closed")}}var s=a.open({templateUrl:"/transferContent.html",controller:l,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.forward=function(e){var a="Forward",n="forward",r="forward";c.url("app/osdComposeMail?hash="+_.encryptURL("email_gid="+e+"&toMail="+t.from_mailaddress+"&ccMail="+t.cc+"&bccMail="+t.bcc+"&email_subject="+t.email_subject+"&message_id="+t.message_id+"&reference_id= "+t.reference_id+"&rmemployee_gid="+t.rmemployee_gid+"&rmemployee_name="+t.rmemployee_name+"&decision="+a+"&lspage="+n+"&llspage="+r))}}angular.module("angle").controller("osdCqmForwardSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e=localStorage.getItem("email_gid");t.trustAsHtml=function(e){return p.trustAsHtml(e)},t.IsLogShow=!1;var a="api/OsdTrnCustomerQueryMgmt/PostAuditView",n={email_gid:localStorage.getItem("email_gid")};i.getparams(a,n).then(function(e){1==e.data.status});var n={email_gid:e},a="api/OsdTrnCustomerQueryMgmt/CustomerAssignQueryForward360";i.getparams(a,n).then(function(e){t.email_gid=e.data.email_gid,t.ticketref_no=e.data.ticketref_no,t.assigned_by=e.data.assigned_by,t.assigned_date=e.data.assigned_date,t.assigned_to=e.data.assigned_to,t.email_from=e.data.email_from,t.email_date=e.data.email_date,t.status=e.data.status,t.aging=e.data.aging,t.email_subject=e.data.email_subject,t.email_content=e.data.email_content,t.email_to=e.data.email_to,t.cc=e.data.cc,t.bcc=e.data.bcc,t.from_mailaddress=e.data.from_mailaddress,t.QueryAssignForward360list=e.data.QueryAssignForward360list,t.forward_by=e.data.forward_by,t.forward_date=e.data.forward_date,unlockUI()});var a="api/OsdTrnCustomerQueryMgmt/CustomerQueryAttachments";i.getparams(a,n).then(function(e){t.QueryAttachmentsList=e.data.QueryAttachmentsList,unlockUI()});var n={email_gid:e},a="api/OsdTrnCustomerQueryMgmt/ComposeMail360";i.getparams(a,n).then(function(e){t.MdlComposeMaillist=e.data.MdlComposeMaillist,t.MdlAttachmentList=e.data.MdlAttachmentList,unlockUI()})}var f=this;f.title="osdCqmForwardViewController",g(),t.Back=function(){n.go("app.osdCqmForwardSummary")},t.logdetails=function(){if(1==t.IsLogShow)t.IsLogShow=!1;else{t.IsLogShow=!0;var e="api/OsdTrnCustomerQueryMgmt/TransferLog",a={lsemail_gid:localStorage.getItem("email_gid")};i.getparams(e,a).then(function(e){1==e.data.status&&(t.MdlTransferLog=e.data.MdlTransferLog,null==t.MdlTransferLog?t.transfershow=!0:t.transfershow=!1)});var e="api/OsdTrnCustomerQueryMgmt/AuditLog",a={email_gid:localStorage.getItem("email_gid")};i.getparams(e,a).then(function(e){1==e.data.status&&(t.auditlog_list=e.data.MdlAuditLog)})}},t.Download=function(e,t){var a=e,n=a.split("EMS"),r=n[1].replace("\\","/"),o=window.location.host,l=location.protocol+"//",s=l.concat(o,r),i=document.createElement("a"),d=t.split(".");i.download=d[0];var c=s;i.href=c,i.click()},t.transfer=function(e,t,n,r,o){function l(a,l,i,d,c,m,u,p,_,f,v,k,b){var y="api/OsdTrnCustomerQueryMgmt/TransferEmployee";_.get(y).then(function(e){l.TransferEmployeeList=e.data.TransferEmployeeList,unlockUI()}),l.ticketref_no=t,l.subject=r,l.from=n,l.checkeremployee_name=o,l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void f.alert("Kindly Select the Assign to Person","warning");var e={email_gid:localStorage.getItem("email_gid"),employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),transfer_remarks:l.transfer_remarks},t="api/OsdTrnCustomerQueryMgmt/TicketTransfer";lockUI(),_.post(t,e).then(function(e){unlockUI(),(e.data.status=!0)?(s.close("closed"),f.alert(e.data.message,"success"),g(),d.go("app.osdCqmTransferSummary")):(s.close("closed"),f.alert(e.data.message,"warning"),g())})};var y="api/OsdTrnCustomerQueryMgmt/TransferLog",h={lsemail_gid:e};_.getparams(y,h).then(function(e){l.MdlTransferLog=e.data.MdlTransferLog}),l.close=function(){s.close("closed")}}var s=a.open({templateUrl:"/transferContent.html",controller:l,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.signature=function(){function e(e,a){var n="api/OsdTrnCustomerQueryMgmt/GetEmailSignature";i.get(n).then(function(t){e.EmailSignature=t.data.emailsignature}),e.ok=function(){t.close("closed")},e.close=function(){t.close("closed")},e.submit=function(){lockUI();var t={emailsignature:e.EmailSignature},n="api/OsdTrnCustomerQueryMgmt/PostEmailSignature";i.post(n,t).then(function(e){unlockUI(),1==e.data.status?(d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed")):(d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var t=a.open({templateUrl:"/signatureContent.html",controller:e,size:"lg"});e.$inject=["$scope","$modalInstance"]},t.close=function(e,t,n,r){function o(a,o,s,i,d,c,m,u,p,_,f,v,k){o.ticketref_no=t,o.subject=r,o.from=n,o.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:o.close_remarks,mailcontent:"Close",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/OsdTrnCustomerQueryMgmt/PostDecision";lockUI(),p.post(a,t).then(function(e){unlockUI(),1==e.data.status?(_.alert(e.data.message,"success"),i.go("app.osdCqmAssignCloseSummary")):_.alert(e.data.message,"warning"),l.close("closed"),g()})},o.close=function(){l.close("closed")}}var l=a.open({templateUrl:"/closeContent.html",controller:o,size:"md"});o.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.forward=function(){var e="Forward",a="forwardview",n="forward";c.url("app/osdComposeMail?hash="+_.encryptURL("email_gid="+email_gid+"&toMail="+t.from_mailaddress+"&ccMail="+t.cc+"&bccMail="+t.bcc+"&email_subject="+t.email_subject+"&message_id="+t.message_id+"&reference_id= "+t.reference_id+"&rmemployee_gid="+t.rmemployee_gid+"&rmemployee_name="+t.rmemployee_name+"&decision="+e+"&lspage="+a+"&llspage="+n))},t.Reply=function(){var e="Reply",a="forwardview",n="reply";c.url("app/osdComposeMail?hash="+_.encryptURL("email_gid="+email_gid+"&toMail="+t.from_mailaddress+"&ccMail="+t.cc+"&bccMail="+t.bcc+"&email_subject="+t.email_subject+"&message_id="+t.message_id+"&reference_id= "+t.reference_id+"&rmemployee_gid="+t.rmemployee_gid+"&rmemployee_name="+t.rmemployee_name+"&decision="+e+"&lspage="+a+"&llspage="+n))}}angular.module("angle").controller("osdCqmForwardViewController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g){function f(){a.transfer_status=y,a.trustAsHtml=function(e){return _.trustAsHtml(e)},a.IsLogShow=!1,a.Transferlist=!0,"Transfer"==a.transfer_status?a.Transferlist=!1:a.Transferlist=!0;var e={email_gid:b},t="api/OsdTrnCustomerQueryMgmt/CustomerAssignedQuery360";d.getparams(t,e).then(function(e){a.email_gid=e.data.email_gid,a.ticketref_no=e.data.ticketref_no,a.assigned_by=e.data.assigned_by,a.assigned_date=e.data.assigned_date,a.assigned_to=e.data.assigned_to,a.email_from=e.data.email_from,a.email_date=e.data.email_date,a.status=e.data.status,a.aging=e.data.aging,a.email_subject=e.data.email_subject,a.email_content=e.data.email_content,a.email_to=e.data.email_to,a.cc=e.data.cc,a.bcc=e.data.bcc,a.Query360list=e.data.Query360list,a.assigned_remarks=e.data.assigned_remarks,a.from_mailaddress=e.data.from_mailaddress,a.attch_list=e.data.MdlAttachmentList,unlockUI()});var t="api/OsdTrnCustomerQueryMgmt/CustomerQueryAttachments";d.getparams(t,e).then(function(e){a.QueryAttachmentsList=e.data.QueryAttachmentsList,unlockUI()});var t="api/OsdTrnCustomerQueryMgmt/PostAuditView",e={email_gid:b};d.getparams(t,e).then(function(e){1==e.data.status});var e={email_gid:b},t="api/OsdTrnCustomerQueryMgmt/ComposeMail360";d.getparams(t,e).then(function(e){a.MdlComposeMaillist=e.data.MdlComposeMaillist,unlockUI()});var t="api/OsdTrnCustomerQueryMgmt/TransferLog",e={lsemail_gid:b};d.getparams(t,e).then(function(e){1==e.data.status&&(a.MdlTransferLog=e.data.MdlTransferLog,null==a.MdlTransferLog?a.transfershow=!0:a.transfershow=!1)})}var v=this,k=g.decryptURL(m.search().hash),b=k.email_gid,y=k.status;v.title="osdCqmQueryAssign360Controller",f(),a.Back=function(){r.go("app.osdCqmAssignToQuery")},a.Download=function(t,a){e.Downloaddocument(t,a)},a.logdetails=function(){if(1==a.IsLogShow)a.IsLogShow=!1;else{a.IsLogShow=!0;var e="api/OsdTrnCustomerQueryMgmt/TransferLog",t={lsemail_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.MdlTransferLog=e.data.MdlTransferLog,null==a.MdlTransferLog?a.transfershow=!0:a.transfershow=!1)});var e="api/OsdTrnCustomerQueryMgmt/AuditLog",t={email_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.auditlog_list=e.data.MdlAuditLog)})}}}angular.module("angle").controller("osdCqmQueryAssign360Controller",e),e.$inject=["DownloaddocumentService","$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnCustomerQueryMgmt/CustomerQueryPendingSummary";lockUI(),i.get(e).then(function(e){t.CustomerQuerypending_list=e.data.QueryPendingList,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/QueryAssignmentCount";i.get(e).then(function(e){t.pending_count=e.data.pending_count,t.assign_count=e.data.assign_count,t.close_count=e.data.close_count,unlockUI()})}var f=this;f.title="osdCqmQueryAssignmentController",g(),t.Refresh=function(){g()},t.Assign=function(e){var t={email_gid:e},a="api/OsdTrnCustomerQueryMgmt/MailSeen";i.getparams(a,t).then(function(e){}),c.url("app/osdCqmQueryTicketAssignment?hash="+_.encryptURL("email_gid="+e))},t.Pending=function(){n.go("app.osdCqmQueryAssignment")},t.Assigned=function(){n.go("app.osdCqmAssignToQuery")},t.Close=function(){n.go("app.osdCqmCloseSummary")}}angular.module("angle").controller("osdCqmQueryAssignmentController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g){function f(){a.trustAsHtml=function(e){return _.trustAsHtml(e)};var e="api/employee/Employee";d.get(e).then(function(e){a.employee_list=e.data.employee_list,console.log(e.data.employee_list),unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/PostAuditView",t={email_gid:b};d.getparams(e,t).then(function(e){1==e.data.status});var t={email_gid:b},e="api/OsdTrnCustomerQueryMgmt/CustomerQueryView";d.getparams(e,t).then(function(e){a.email_gid=e.data.email_gid,a.ticketref_no=e.data.ticketref_no,a.email_from=e.data.email_from,a.from_mailaddress=e.data.from_mailaddress,a.email_to=e.data.email_to,a.email_date=e.data.email_date,a.email_subject=e.data.email_subject,a.email_content=e.data.email_content,a.aging=e.data.aging,a.cc=e.data.cc,a.bcc=e.data.bcc,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/CustomerQueryAttachments";d.getparams(e,t).then(function(e){a.QueryAttachmentsList=e.data.QueryAttachmentsList,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/ReferenceMail";d.getparams(e,t).then(function(e){a.frommail_id=e.data.frommail_id,a.tomail_id=e.data.tomail_id,a.ccmail_id=e.data.ccmail_id,a.bccmail_id=e.data.bccmail_id,a.mail_date=e.data.mail_date,a.mail_subject=e.data.mail_subject,a.mailcontent=e.data.mailcontent,unlockUI()})}var v=this;v.title="osdCqmQueryTicketAssignmentController";var k=g.decryptURL(m.search().hash),b=k.email_gid;f(),a.Back=function(){r.go("app.osdCqmQueryAssignment")},a.AssignTicket=function(){},a.Download=function(t,a){e.Downloaddocument(t,a)},a.assign_ticket=function(){var e={email_gid:b,employee_gid:a.cboemployee_list.employee_gid,employee_name:a.cboemployee_list.employee_name,assigned_remarks:a.assigned_remarks};lockUI();var t="api/OsdTrnCustomerQueryMgmt/PostTicketAssign";d.post(t,e).then(function(e){1==e.data.status?(r.go("app.osdCqmQueryAssignment"),c.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(c.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},a.logdetails=function(){if(1==a.IsLogShow)a.IsLogShow=!1;else{a.IsLogShow=!0;var e="api/OsdTrnCustomerQueryMgmt/AuditLog",t={email_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.auditlog_list=e.data.MdlAuditLog)})}}}angular.module("angle").controller("osdCqmQueryTicketAssignmentController",e),e.$inject=["DownloaddocumentService","$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){t.trustAsHtml=function(e){return p.trustAsHtml(e)},lockUI();var e="api/OsdTrnCustomerQueryMgmt/CustomerAssignQueryReplySummary";i.get(e).then(function(e){t.QueryAssignedReplyList=e.data.QueryAssignedReplyList,unlockUI()});var a={email_gid:v},e="api/OsdTrnCustomerQueryMgmt/CustomerAssignQueryReply360";i.getparams(e,a).then(function(e){t.email_gid=e.data.email_gid,t.ticketref_no=e.data.ticketref_no,t.assigned_by=e.data.assigned_by,t.assigned_date=e.data.assigned_date,t.assigned_to=e.data.assigned_to,t.email_from=e.data.email_from,t.email_date=e.data.email_date,t.status=e.data.status,t.aging=e.data.aging,t.email_subject=e.data.email_subject,t.email_content=e.data.email_content,t.email_to=e.data.email_to,t.cc=e.data.cc,t.bcc=e.data.bcc,t.from_mailaddress=e.data.from_mailaddress,t.QueryAssignReply360list=e.data.QueryAssignReply360list,t.reply_remarks=e.data.reply_remarks,t.reply_by=e.data.reply_by,t.reply_date=e.data.reply_date,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/AssignedQueryCount";i.get(e).then(function(e){t.assigned_count=e.data.assigned_count,t.reply_count=e.data.reply_count,t.forward_count=e.data.forward_count,t.transfer_count=e.data.transfer_count,t.close_count=e.data.close_count,unlockUI()})}var f=this;f.title="osdCqmReplaySummaryController";var v=c.search().email_gid;g(),t.Assigned=function(){n.go("app.osdCqmAssignedQuery")},t.Closed=function(){n.go("app.osdCqmAssignCloseSummary")},t.Transfer=function(){n.go("app.osdCqmTransferSummary")},t.Replay=function(){n.go("app.osdCqmReplaySummary")},t.Forward=function(){n.go("app.osdCqmForwardSummary")},t.Replayview=function(e){c.url("app/osdCqmReplayView?hash="+_.encryptURL("email_gid="+e))},t.transfer=function(e,t,n,r,o){function l(a,l,i,d,c,m,u,p,_,f,v,k,b){var y="api/OsdTrnCustomerQueryMgmt/TransferEmployee";_.get(y).then(function(e){l.TransferEmployeeList=e.data.TransferEmployeeList,unlockUI()}),l.ticketref_no=t,l.email_subject=r,l.from_mailaddress=n,l.assigned_to=o,l.email_gid=e,l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void f.alert("Kindly Select the Assign to Person","warning");var e={email_gid:l.email_gid,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),transfer_remarks:l.transfer_remarks},t="api/OsdTrnCustomerQueryMgmt/TicketTransfer";lockUI(),_.post(t,e).then(function(e){unlockUI(),(e.data.status=!0)?(s.close("closed"),f.alert(e.data.message,"success"),g()):(s.close("closed"),f.alert(e.data.message,"warning"),g())})};var y="api/OsdTrnCustomerQueryMgmt/TransferLog",h={lsemail_gid:e};_.getparams(y,h).then(function(e){l.MdlTransferLog=e.data.MdlTransferLog}),l.close=function(){s.close("closed")}}var s=a.open({templateUrl:"/transferContent.html",controller:l,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.forward=function(e){var a="Forward",n="reply",r="forward";c.url("app/osdComposeMail?hash="+_.encryptURL("email_gid="+e+"&toMail="+t.from_mailaddress+"&ccMail="+t.cc+"&bccMail="+t.bcc+"&email_subject="+t.email_subject+"&message_id="+t.message_id+"&reference_id= "+t.reference_id+"&rmemployee_gid="+t.rmemployee_gid+"&rmemployee_name="+t.rmemployee_name+"&decision="+a+"&lspage="+n+"&llspage="+r))}}angular.module("angle").controller("osdCqmReplaySummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g){function f(){a.trustAsHtml=function(e){return _.trustAsHtml(e)},a.IsLogShow=!1;var e="api/OsdTrnCustomerQueryMgmt/PostAuditView",t={email_gid:b};d.getparams(e,t).then(function(e){1==e.data.status});var t={email_gid:b},e="api/OsdTrnCustomerQueryMgmt/CustomerAssignQueryReply360";d.getparams(e,t).then(function(e){a.email_gid=e.data.email_gid,a.ticketref_no=e.data.ticketref_no,a.assigned_by=e.data.assigned_by,a.assigned_date=e.data.assigned_date,a.assigned_to=e.data.assigned_to,a.email_from=e.data.email_from,a.email_date=e.data.email_date,a.status=e.data.status,a.aging=e.data.aging,a.email_subject=e.data.email_subject,a.email_content=e.data.email_content,a.email_to=e.data.email_to,a.cc=e.data.cc,a.bcc=e.data.bcc,a.from_mailaddress=e.data.from_mailaddress,a.QueryAssignReply360list=e.data.QueryAssignReply360list,a.attch_list=e.data.MdlAttachmentList,a.reply_remarks=e.data.reply_remarks,a.reply_by=e.data.reply_by,a.reply_date=e.data.reply_date,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/CustomerQueryAttachments";d.getparams(e,t).then(function(e){a.QueryAttachmentsList=e.data.QueryAttachmentsList,unlockUI()});var t={email_gid:b},e="api/OsdTrnCustomerQueryMgmt/ComposeMail360";d.getparams(e,t).then(function(e){a.MdlComposeMaillist=e.data.MdlComposeMaillist,unlockUI()})}var v=this;v.title="osdCqmReplayViewController";var k=g.decryptURL(m.search().hash),b=k.email_gid;f(),a.logdetails=function(){if(1==a.IsLogShow)a.IsLogShow=!1;else{a.IsLogShow=!0;var e="api/OsdTrnCustomerQueryMgmt/TransferLog",t={lsemail_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.MdlTransferLog=e.data.MdlTransferLog,null==a.MdlTransferLog?a.transfershow=!0:a.transfershow=!1)});var e="api/OsdTrnCustomerQueryMgmt/AuditLog",t={email_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.auditlog_list=e.data.MdlAuditLog)})}},a.Back=function(){m.url("app/osdCqmReplaySummary")},a.Download=function(t,a){e.Downloaddocument(t,a)},a.transfer=function(e,t,a,r,o){function l(n,l,i,d,c,m,u,p,_,g,v,k,b){var y="api/OsdTrnCustomerQueryMgmt/TransferEmployee";_.get(y).then(function(e){l.TransferEmployeeList=e.data.TransferEmployeeList,unlockUI()}),l.ticketref_no=t,l.subject=r,l.from=a,l.checkeremployee_name=o,l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void g.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),transfer_remarks:l.transfer_remarks},a="api/OsdTrnCustomerQueryMgmt/TicketTransfer";lockUI(),_.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?(s.close("closed"),g.alert(e.data.message,"success"),f(),d.go("app.osdCqmTransferSummary")):(s.close("closed"),g.alert(e.data.message,"warning"),f())})};var y="api/OsdTrnCustomerQueryMgmt/TransferLog",h={lsemail_gid:e};_.getparams(y,h).then(function(e){l.MdlTransferLog=e.data.MdlTransferLog}),l.close=function(){s.close("closed")}}var s=n.open({templateUrl:"/transferContent.html",controller:l,size:"md",backdrop:"static",keyboard:!1});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},a.signature=function(){function e(e,a){var n="api/OsdTrnCustomerQueryMgmt/GetEmailSignature";d.get(n).then(function(t){e.EmailSignature=t.data.emailsignature}),e.ok=function(){t.close("closed")},e.close=function(){t.close("closed")},e.submit=function(){lockUI();var t={emailsignature:e.EmailSignature},n="api/OsdTrnCustomerQueryMgmt/PostEmailSignature";d.post(n,t).then(function(e){unlockUI(),1==e.data.status?(c.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed")):(c.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var t=n.open({templateUrl:"/signatureContent.html",controller:e,size:"lg",backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},a.close=function(e,t,a,r){function o(n,o,s,i,d,c,m,u,p,_,g,v,k){o.ticketref_no=t,o.subject=r,o.from=a,o.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:o.close_remarks,mailcontent:"Close",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/OsdTrnCustomerQueryMgmt/PostDecision";lockUI(),p.post(a,t).then(function(e){unlockUI(),1==e.data.status?(_.alert(e.data.message,"success"),i.go("app.osdCqmAssignCloseSummary")):_.alert(e.data.message,"warning"),l.close("closed"),f()})},o.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeContent.html",controller:o,size:"md",backdrop:"static",keyboard:!1});o.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},a.forward=function(){var e="Forward",t="replyview",n="forward";m.url("app/osdComposeMail?hash="+g.encryptURL("email_gid="+b+"&toMail="+a.from_mailaddress+"&ccMail="+a.cc+"&bccMail="+a.bcc+"&email_subject="+a.email_subject+"&message_id="+a.message_id+"&reference_id= "+a.reference_id+"&rmemployee_gid="+a.rmemployee_gid+"&rmemployee_name="+a.rmemployee_name+"&decision="+e+"&lspage="+t+"&llspage="+n))},a.Reply=function(){var e="Reply",t="replyview",n="reply";m.url("app/osdComposeMail?hash="+g.encryptURL("email_gid="+b+"&toMail="+a.from_mailaddress+"&ccMail="+a.cc+"&bccMail="+a.bcc+"&email_subject="+a.email_subject+"&message_id="+a.message_id+"&reference_id= "+a.reference_id+"&rmemployee_gid="+a.rmemployee_gid+"&rmemployee_name="+a.rmemployee_name+"&decision="+e+"&lspage="+t+"&llspage="+n))}}angular.module("angle").controller("osdCqmReplayViewController",e),e.$inject=["DownloaddocumentService","$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnCustomerQueryMgmt/CustomerAssignQueryTransferSummary";lockUI(),i.get(e).then(function(e){t.QueryAssignedTransferList=e.data.QueryAssignedTransferList,unlockUI()});var a={email_gid:v},e="api/OsdTrnCustomerQueryMgmt/CustomerAssignedQuery360";i.getparams(e,a).then(function(e){t.email_gid=e.data.email_gid,t.ticketref_no=e.data.ticketref_no,t.assigned_by=e.data.assigned_by,t.assigned_date=e.data.assigned_date,t.assigned_to=e.data.assigned_to,t.email_from=e.data.email_from,t.email_date=e.data.email_date,t.status=e.data.status,t.aging=e.data.aging,t.email_subject=e.data.email_subject,t.email_content=e.data.email_content,t.email_to=e.data.email_to,t.cc=e.data.cc,t.bcc=e.data.bcc,t.from_mailaddress=e.data.from_mailaddress,t.Query360list=e.data.Query360list,t.assigned_remarks=e.data.assigned_remarks,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/CustomerQueryAttachments";i.getparams(e,a).then(function(e){t.QueryAttachmentsList=e.data.QueryAttachmentsList,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/AssignedQueryCount";i.get(e).then(function(e){t.assigned_count=e.data.assigned_count,t.reply_count=e.data.reply_count,t.forward_count=e.data.forward_count,t.transfer_count=e.data.transfer_count,t.close_count=e.data.close_count,unlockUI()})}var f=this;f.title="osdCqmTransferSummaryController";var v=c.search().email_gid;g(),t.Assigned=function(){n.go("app.osdCqmAssignedQuery")},t.Closed=function(){n.go("app.osdCqmAssignCloseSummary")},t.Transfer=function(){n.go("app.osdCqmTransferSummary")},t.Replay=function(){n.go("app.osdCqmReplaySummary")},t.Forward=function(){n.go("app.osdCqmForwardSummary")},t.TransferView=function(e){c.url("app/osdCqmTransferView?hash="+_.encryptURL("email_gid="+e))}}angular.module("angle").controller("osdCqmTransferSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g){function f(){a.trustAsHtml=function(e){return _.trustAsHtml(e)},a.IsLogShow=!1;var e="api/OsdTrnCustomerQueryMgmt/PostAuditView",t={email_gid:b};d.getparams(e,t).then(function(e){1==e.data.status});var t={email_gid:b},e="api/OsdTrnCustomerQueryMgmt/CustomerAssignQueryTransfer360";d.getparams(e,t).then(function(e){a.email_gid=e.data.email_gid,a.ticketref_no=e.data.ticketref_no,a.assigned_by=e.data.assigned_by,a.assigned_date=e.data.assigned_date,a.assigned_to=e.data.assigned_to,a.email_from=e.data.email_from,a.email_date=e.data.email_date,a.status=e.data.status,a.aging=e.data.aging,a.email_subject=e.data.email_subject,a.email_content=e.data.email_content,a.email_to=e.data.email_to,a.cc=e.data.cc,a.bcc=e.data.bcc,a.from_mailaddress=e.data.from_mailaddress,a.QueryAssignTransferlist=e.data.QueryAssignTransferlist,a.transfer_remarks=e.data.transfer_remarks,a.transfer_by=e.data.transfer_by,a.transfer_date=e.data.transfer_date,a.attch_list=e.data.MdlAttachmentList,unlockUI()});var e="api/OsdTrnCustomerQueryMgmt/CustomerQueryAttachments";d.getparams(e,t).then(function(e){a.QueryAttachmentsList=e.data.QueryAttachmentsList,unlockUI()});var t={email_gid:b},e="api/OsdTrnCustomerQueryMgmt/ComposeMail360";d.getparams(e,t).then(function(e){a.MdlComposeMaillist=e.data.MdlComposeMaillist,unlockUI()})}var v=this;v.title="osdCqmTransferViewController";var k=g.decryptURL(m.search().hash),b=k.email_gid;f(),a.Back=function(){r.go("app.osdCqmTransferSummary")},a.logdetails=function(){if(1==a.IsLogShow)a.IsLogShow=!1;else{a.IsLogShow=!0;var e="api/OsdTrnCustomerQueryMgmt/TransferLog",t={lsemail_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.MdlTransferLog=e.data.MdlTransferLog,null==a.MdlTransferLog?a.transfershow=!0:a.transfershow=!1)});var e="api/OsdTrnCustomerQueryMgmt/AuditLog",t={email_gid:b};d.getparams(e,t).then(function(e){1==e.data.status&&(a.auditlog_list=e.data.MdlAuditLog)})}},a.Download=function(t,a){e.Downloaddocument(t,a)},a.transfer=function(e,t,a,r,o){function l(n,l,i,d,c,m,u,p,_,g,v,k,b){var y="api/OsdTrnCustomerQueryMgmt/TransferEmployee";_.get(y).then(function(e){l.TransferEmployeeList=e.data.TransferEmployeeList,unlockUI()}),l.ticketref_no=t,l.subject=r,l.from=a,l.checkeremployee_name=o,l.transferWIUpdate=function(){if(void 0==l.transfer_to)return s.close("closed"),void g.alert("Kindly Select the Assign to Person","warning");var t={email_gid:e,employee_gid:l.transfer_to,employee_name:$("#transfer_to :selected").text(),transfer_remarks:l.transfer_remarks},a="api/OsdTrnCustomerQueryMgmt/TicketTransfer";lockUI(),_.post(a,t).then(function(e){unlockUI(),(e.data.status=!0)?(s.close("closed"),g.alert(e.data.message,"success"),f(),d.go("app.osdCqmTransferSummary")):(s.close("closed"),g.alert(e.data.message,"warning"),f())})},l.close=function(){s.close("closed")}}var s=n.open({templateUrl:"/transferContent.html",controller:l,size:"md"});l.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},a.signature=function(){function e(e,a){var n="api/OsdTrnCustomerQueryMgmt/GetEmailSignature";d.get(n).then(function(t){e.EmailSignature=t.data.emailsignature}),e.ok=function(){t.close("closed")},e.close=function(){t.close("closed")},e.submit=function(){lockUI();var t={emailsignature:e.EmailSignature
},n="api/OsdTrnCustomerQueryMgmt/PostEmailSignature";d.post(n,t).then(function(e){unlockUI(),1==e.data.status?(c.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),a.close("closed")):(c.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var t=n.open({templateUrl:"/signatureContent.html",controller:e,size:"lg"});e.$inject=["$scope","$modalInstance"]},a.close=function(e,t,a,r){function o(n,o,s,i,d,c,m,u,p,_,g,v,k){o.ticketref_no=t,o.subject=r,o.from=a,o.CloseWIUpdate=function(){var t={email_gid:e,decision:"Close",employee_gid:"",employee_name:"",remarks:o.close_remarks,mailcontent:"Close",subject:"",tomail_id:"",ccmail_id:"",bccmail_id:""},a="api/OsdTrnCustomerQueryMgmt/PostDecision";lockUI(),p.post(a,t).then(function(e){unlockUI(),1==e.data.status?(_.alert(e.data.message,"success"),i.go("app.osdCqmAssignCloseSummary")):_.alert(e.data.message,"warning"),l.close("closed"),f()})},o.close=function(){l.close("closed")}}var l=n.open({templateUrl:"/closeContent.html",controller:o,size:"md"});o.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},a.forward=function(){var e="Forward",t="transferview",n="forward";m.url("app/osdComposeMail?hash="+g.encryptURL("email_gid="+b+"&toMail="+a.from_mailaddress+"&ccMail="+a.cc+"&bccMail="+a.bcc+"&email_subject="+a.email_subject+"&message_id="+a.message_id+"&reference_id= "+a.reference_id+"&rmemployee_gid="+a.rmemployee_gid+"&rmemployee_name="+a.rmemployee_name+"&decision="+e+"&lspage="+t+"&llspage="+n))},a.Reply=function(){var e="Reply",t="transferview",n="reply";m.url("app/osdComposeMail?hash="+g.encryptURL("email_gid="+b+"&toMail="+a.from_mailaddress+"&ccMail="+a.cc+"&bccMail="+a.bcc+"&email_subject="+a.email_subject+"&message_id="+a.message_id+"&reference_id= "+a.reference_id+"&rmemployee_gid="+a.rmemployee_gid+"&rmemployee_name="+a.rmemployee_name+"&decision="+e+"&lspage="+t+"&llspage="+n))}}angular.module("angle").controller("osdCqmTransferViewController",e),e.$inject=["DownloaddocumentService","$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){var e="api/osddashboard/osdprivilege",a=localStorage.getItem("user_gid");d.get(e+"?user_gid="+a).then(function(e){var a=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDMSTMBU"),n=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDMSTDPM"),r=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDMSTACM"),o=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDMSTTEM"),l=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDTRNSER"),s=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDTRNMYT"),i=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDTRNTIR"),d=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDRPTALT"),c=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDCQMQAT"),m=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDCQMASQ"),u=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDBAMARM"),p=e.data.osdprivilege_list.map(function(e){return e.osdprivilege}).indexOf("OSDBAMMAL");a!=-1&&(t.busineesunitmaster_show="Y"),n!=-1&&(t.activatebusineesunitmaster_show="Y"),r!=-1&&(t.activitymaster_show="Y"),o!=-1&&(t.teammaster_show="Y"),l!=-1&&(t.service_request_show="Y"),s!=-1&&(t.my_activity_show="Y"),i!=-1&&(t.activity_management_show="Y"),d!=-1&&(t.all_tickets_show="Y"),c!=-1&&(t.query_assignment="Y"),m!=-1&&(t.assigned_query="Y"),u!=-1&&(t.allocatedto_rm="Y"),p!=-1&&(t.bankalert_assignment="Y")}),k.pieOptions={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:0,animationSteps:100,animationEasing:"easeInOutBack",animateRotate:!0,animateScale:!1},k.pieData=[{value:14,color:r.byName("yellow"),highlight:r.byName("info"),label:"Allotted"},{value:17,color:r.byName("danger"),highlight:r.byName("info"),label:"Work-In-Progress"},{value:"2",color:r.byName("purple"),highlight:r.byName("info"),label:"Completed"},{value:"1",color:r.byName("success"),highlight:r.byName("info"),label:"Closed"}]}var k=this;k.title="osdDashboardcontroller",v()}angular.module("angle").controller("osdDashboardcontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","Colors","ChartData","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$timeout","SweetAlert","$cookies"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,d,c,m,u,p,_,g){function f(){t.totalDisplayed=100;var e="api/OsdMstActivity/GetActivitySummary";lockUI(),d.get(e).then(function(e){t.activitymasterlist=e.data.activitydtl,null==t.activitymasterlist?(t.total=0,t.totalDisplayed=0):(t.total=t.activitymasterlist.length,t.activitymasterlist.length<100&&(t.totalDisplayed=t.activitymasterlist.length)),unlockUI()})}var v=this;v.title="osdMstActivityController",f(),t.loadMore=function(e){if(void 0==e)return void c.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.activitymasterlist){if(!(e<t.activitymasterlist.length))return unlockUI(),void c.alert("TotalSummary"+t.activitymasterlist.length+"RecordsOnly","warning");t.totalDisplayed+=a,t.activitymasterlist.length<t.totalDisplayed&&(t.totalDisplayed=t.activitymasterlist.length,c.alert("TotalSummary"+t.activitymasterlist.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.popupactivity=function(){function e(e,t){var a="api/OsdMstDepartmentManagement/GetActivatedept";lockUI(),d.get(a).then(function(t){if(e.deptmasterlist=t.data.deptlist,unlockUI(),1==e.deptmasterlist.length){e.single=!0,e.lbldepartmentname=t.data.department_name,e.lbldepartmentgid=t.data.department_gid;var a={department_gid:t.data.department_gid},n="api/OsdMstActivity/GetDeptTeam";d.getparams(n,a).then(function(t){e.supportdtllist=t.data.supportdtl})}else e.multiple=!0,e.single=!1}),e.ok=function(){t.close("closed")},e.onselectdept=function(t){var a={department_gid:t.department_gid},n="api/OsdMstActivity/GetDeptTeam";d.getparams(n,a).then(function(t){e.supportdtllist=t.data.supportdtl})},e.activityname=function(t){t.length>=100?e.message="Maximum 100 characters Length":e.message=""},e.activitySubmit=function(){if(lockUI(),""==e.cbodepartment||null==e.cbodepartment||void 0==e.cbodepartment)if(""==e.lbldepartmentgid||null==e.lbldepartmentgid||void 0==e.lbldepartmentgid)alert("Select Department","warning");else{var a={activity_name:e.activity_name,supportteam_gid:e.cbosuppport_team.supportteam_gid,supportteam_name:e.cbosuppport_team.team_name,activity_tat:e.activity_tat,department_gid:e.lbldepartmentgid,department_name:e.lbldepartmentname},n="api/OsdMstActivity/PostActivityAdd";d.post(n,a).then(function(e){1==e.data.status?(t.close("closed"),c.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),f(),unlockUI()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),f(),unlockUI())})}else{var a={activity_name:e.activity_name,supportteam_gid:e.cbosuppport_team.supportteam_gid,supportteam_name:e.cbosuppport_team.team_name,activity_tat:e.activity_tat,department_gid:e.cbodepartment.department_gid,department_name:e.cbodepartment.department_name},n="api/OsdMstActivity/PostActivityAdd";d.post(n,a).then(function(e){1==e.data.status?(t.close("closed"),c.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),f(),unlockUI()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),f(),unlockUI())})}}}a.open({templateUrl:"/addActivityModalContent.html",controller:e,backdrop:"static",keyboard:!1,size:"md"});e.$inject=["$scope","$modalInstance"]},t.edit=function(e){function t(t,a){var r={activitymaster_gid:e},o="api/OsdMstActivity/GetActivityView";d.getparams(o,r).then(function(e){t.activitycodeedit=e.data.activity_code,t.activitynameedit=e.data.activity_name,t.supportteam_name=e.data.supportteam_name,t.activitytatedit=e.data.activity_tat,t.supportteam_gid=e.data.supportteam_gid,t.lbldepartmentnameedit=e.data.department_name,t.lbldepartmentgidedit=e.data.department_gid;var a={department_gid:e.data.department_gid},n="api/OsdMstActivity/GetTeamSummary";d.getparams(n,a).then(function(e){if(t.supportdtleditlist=e.data.supportdtl,null!=t.supportteam_gid){console.log(t.supportteam_gid);var a=t.supportdtleditlist.map(function(e){return e.supportteam_gid}).indexOf(e.data.supportdtleditlist[i].supportteam_gid);console.log(a),t.cbosuppport_teamedit=t.supportdtleditlist[a]}})}),t.onselectdeptedit=function(e){var a={department_gid:e.department_gid},n="api/OsdMstActivity/GetDeptTeam";d.getparams(n,a).then(function(e){t.supportdtllist=e.data.supportdtl})},t.ok=function(){n.close("closed")},t.activityUpdate=function(){var n={activitymaster_gid:e,activity_name:t.activitynameedit,activity_tat:t.activitytatedit,department_gid:t.lbldepartmentgidedit,department_name:t.lbldepartmentnameedit,supportteam_gid:t.cbosuppport_teamedit.supportteam_gid,supportteam_name:t.cbosuppport_teamedit.team_name},r="api/OsdMstActivity/GetActivityUpdate";d.post(r,n).then(function(e){1==e.data.status?(a.close("closed"),c.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),f()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),f())})}}var n=a.open({templateUrl:"/activityModaledit.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t["delete"]=function(e){var t={activitymaster_gid:e};o.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){lockUI();var a="api/OsdMstActivity/GetActivityDelete";d.getparams(a,t).then(function(e){1==e.data.status?(f(),o.swal("Deleted Successfully!"),unlockUI()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},t.activityreport=function(){lockUI();var e="api/OsdMstActivity/ExportActivityReport";d.get(e).then(function(e){1==e.data.status?(unlockUI(),g.Downloaddocument(e.data.lscloudpath,e.data.lsname)):(unlockUI(),c.alert("Error Occurred While Export !","success"))})}}angular.module("angle").controller("osdMstActivityController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdMstDepartmentManagement/GetBusinessUnitSummary";lockUI(),i.get(e).then(function(e){t.businessunit_list=e.data.businessunit_list,unlockUI()});var e="api/OsdMstDepartmentManagement/GetBusinessStatusTempClear";i.get(e).then(function(e){})}function f(){var e="api/OsdMstDepartmentManagement/GetBusinessstatusList",a={user_gid:t.user_gid};i.getparams(e,a).then(function(e){t.businessstatusunit_list=e.data.businessstatusunit_list})}var v=this;v.title="osdMstBusinessUnit";c.search().lstab;g(),t.addbusinessunit=function(){c.url("app/osdMstBusinessUnitAdd")},t.businessunitSubmit=function(){lockUI(),void 0==t.txtbusinessunit_emailaddress&&(t.txtbusinessunit_emailaddress="");var e={businessunit_prefix:t.txtbusinessunit_prefix,businessunit_name:t.txtbusinessunit_name,businessunit_emailaddress:t.txtbusinessunit_emailaddress},a="api/OsdMstDepartmentManagement/PostBusinessUnit";i.post(a,e).then(function(e){1==e.data.status?(d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.osdMstBusinessUnit")):(d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),$modalInstance.close("closed"),g(),unlockUI())})},t.businessstatus_add=function(){if(void 0==t.txtbusinessunit_status||""==t.txtbusinessunit_status)d.alert("Enter Business Unit Status",{status:"warning",pos:"top-center",timeout:3e3});else{var e={business_status:t.txtbusinessunit_status},a="api/OsdMstDepartmentManagement/PostBusinessUnitStatus";lockUI(),i.post(a,e).then(function(e){unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),t.txtbusinessunit_status="",f()})}},t.edit=function(e){c.url("app/osdMstBusinessUnitEdit?hash="+_.encryptURL("businessunit_gid="+e))},t["delete"]=function(e){var t={businessunit_gid:e};o.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){lockUI();var a="api/OsdMstDepartmentManagement/DeleteBusinessUnit";i.getparams(a,t).then(function(e){1==e.data.status?(g(),o.swal("Deleted Successfully!"),unlockUI()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},t.businessstatus_delete=function(e){var t={businessstatus_gid:e};console.log(t);var a="api/OsdMstDepartmentManagement/DeleteBusinessstatus";lockUI(),i.getparams(a,t).then(function(e){unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),f()})},t.Status_update=function(e){function t(t,a){var n={businessunit_gid:e},r="api/OsdMstDepartmentManagement/BusinessUnitView";i.getparams(r,n).then(function(e){t.rbo_status=e.data.businessunit_status,t.businessunit_name=e.data.businessunit_name}),t.ok=function(){a.close("closed")},t.update_status=function(){var n={businessunit_gid:e,businessunit_name:t.businessunit_name,remarks:t.txtremarks,businessunitstatus:t.rbo_status},r="api/OsdMstDepartmentManagement/Postbusinessunitstatusupdate";lockUI(),i.post(r,n).then(function(e){unlockUI(),1==e.data.status?(a.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})):(a.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})),g()})};var o={businessunit_gid:e},r="api/OsdMstDepartmentManagement/BusinessunitstatusHistory";lockUI(),i.getparams(r,o).then(function(e){t.businessunitstatusehistory=e.data.businessunitstatusHistory_list,unlockUI()})}a.open({templateUrl:"/businessunitstatus.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.cancel=function(){c.url("app/osdMstBusinessUnit")}}angular.module("angle").controller("osdMstBusinessUnit",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p){function _(){var e="api/OsdMstDepartmentManagement/GetBusinessStatusTempClear";s.get(e).then(function(e){});var a={businessunit_gid:k},e="api/OsdMstDepartmentManagement/BusinessUnitView";s.getparams(e,a).then(function(e){t.txtbusinessunit_codeedit=e.data.businessunit_code,t.txtbusinessunit_prefixedit=e.data.businessunit_prefix,t.txtbusinessunit_nameedit=e.data.businessunit_name,t.txtbusinessunit_emailaddressedit=e.data.businessunit_emailaddress,"Y"==e.data.sequence_flag?(t.label=!0,t.text=!1):(t.label=!1,t.text=!0)});var e="api/OsdMstDepartmentManagement/GetBusinessstatusEdit";lockUI(),s.getparams(e,a).then(function(e){t.businessstatusEdit_list=e.data.businessstatusEdit_list,unlockUI()})}function g(){var e="api/OsdMstDepartmentManagement/GetBusinessstatusList",a={user_gid:t.user_gid};s.getparams(e,a).then(function(e){t.businessstatusunit_list=e.data.businessstatusunit_list}),_()}var f=this;f.title="osdMstBusinessUnitEdit";var v=p.decryptURL(d.search().hash),k=v.businessunit_gid;_(),t.businessunitUpdate=function(){var e={businessunit_prefix:t.txtbusinessunit_prefixedit,businessunit_name:t.txtbusinessunit_nameedit,businessunit_emailaddress:t.txtbusinessunit_emailaddressedit,businessunit_gid:k},n="api/OsdMstDepartmentManagement/UpdateBusinessUnit";s.post(n,e).then(function(e){1==e.data.status?(i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),a.go("app.osdMstBusinessUnit")):(i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),$modalInstance.close("closed"),_(),unlockUI())})},t.businessstatus_add=function(){if(void 0==t.txtbusinessunit_status||""==t.txtbusinessunit_status)i.alert("Enter Business Unit Status",{status:"warning",pos:"top-center",timeout:3e3});else{var e=p.decryptURL(d.search().hash).businessunit_gid,a={business_status:t.txtbusinessunit_status,businessunit_gid:e},n="api/OsdMstDepartmentManagement/PostBusinessUnitStatusEdit";lockUI(),s.post(n,a).then(function(e){unlockUI(),1==e.data.status?i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):i.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),t.txtbusinessunit_status="",g()})}},t.businessstatus_delete=function(e){var t={businessstatus_gid:e};console.log(t);var a="api/OsdMstDepartmentManagement/DeleteBusinessstatus";lockUI(),s.getparams(a,t).then(function(e){unlockUI(),1==e.data.status?i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):i.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),_(),g()})},t.back=function(){d.url("app/osdMstBusinessUnit")}}angular.module("angle").controller("osdMstBusinessUnitEdit",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$modal","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p){function _(){var e="api/OsdMstDepartmentManagement/GetActivatedeptSummary";lockUI(),i.get(e).then(function(e){t.deptmasterlist=e.data.acivatedept,unlockUI()})}var g=this;g.title="osdMstDepartmentManagementController",_(),t.popupactivatedept=function(){function e(e,t){var a="api/OsdMstDepartmentManagement/GetDepartment";i.get(a).then(function(t){e.departmentList=t.data.department}),e.ok=function(){t.close("closed")},e.activityname=function(t){t.length>=100?e.message="Maximum 100 characters Length":e.message=""},e.activatedeptSubmit=function(){lockUI();var a={department_gid:e.cbodepartment.department_gid,department_name:e.cbodepartment.department_name},n="api/OsdMstDepartmentManagement/PostActivatedeptadd";i.post(n,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),_(),unlockUI()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),_(),unlockUI())})}}a.open({templateUrl:"/activatedepartmentModalContent.html",controller:e,backdrop:"static",keyboard:!1,size:"md"});e.$inject=["$scope","$modalInstance"]},t.edit=function(e){function t(t,a){var r={activedepartment_gid:e},o="api/OsdMstDepartmentManagement/GetDepartmentEdit";i.getparams(o,r).then(function(e){t.departmentList=e.data.department});var o="api/OsdMstDepartmentManagement/GetActivatedeptView";i.getparams(o,r).then(function(e){t.activatedeptcodeedit=e.data.department_code,t.cbodepartmentedit=e.data.department_gid}),t.ok=function(){n.close("closed")},t.activatedeptUpdate=function(){var n,r=t.departmentList.map(function(e){return e.department_gid}).indexOf(t.cbodepartmentedit);n=r==-1?"":t.departmentList[r].department_name;var o={activedepartment_gid:e,department_gid:t.cbodepartmentedit,department_name:n},l="api/OsdMstDepartmentManagement/GetActivatedeptUpdate";i.post(l,o).then(function(e){1==e.data.status?(a.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),_()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),_())})}}var n=a.open({templateUrl:"/activatemanagementModaledit.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t["delete"]=function(e){var t={activedepartment_gid:e};o.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){lockUI();var a="api/OsdMstDepartmentManagement/GetActivatedeptDelete";i.getparams(a,t).then(function(e){1==e.data.status?(_(),o.swal("Deleted Successfully!"),unlockUI()):(d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},t.Status_update=function(e){function t(t,a){var n={activedepartment_gid:e},r="api/OsdMstDepartmentManagement/GetActivatedeptView";i.getparams(r,n).then(function(e){t.rbo_status=e.data.department_status,t.department_name=e.data.department_name}),t.ok=function(){a.close("closed")},t.update_status=function(){var n={activedepartment_gid:e,remarks:t.txtremarks,departmentstatus:t.rbo_status},r="api/OsdMstDepartmentManagement/Postdepartmentstatusupdate";lockUI(),i.post(r,n).then(function(e){unlockUI(),1==e.data.status?(a.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})):(a.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})),_()})};var o={activedepartment_gid:e},r="api/OsdMstDepartmentManagement/DepartmentstatusHistory";lockUI(),i.getparams(r,o).then(function(e){t.departmentstatusehistory=e.data.departmentstatusehistory_list,unlockUI()})}a.open({templateUrl:"/departmentstatus.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.assignmanager=function(e){function t(t,a){var n={activedepartment_gid:e},r="api/OsdMstDepartmentManagement/GetActivatedeptView";i.getparams(r,n).then(function(e){t.rbo_status=e.data.department_status,t.department_name=e.data.department_name,t.department_gid=e.data.department_gid});var r="api/OsdMstDepartmentManagement/Employee";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeeasssign_list});var r="api/OsdMstDepartmentManagement/Assignedemplyee";i.getparams(r,n).then(function(e){unlockUI(),t.manager_list=e.data.managereasssigned_list}),t.ok=function(){a.close("closed")},t.checkall=function(e){angular.forEach(t.employee_list,function(t){t.checked=e})},t.assign=function(){lockUI();var a,n=[];angular.forEach(t.employee_list,function(e){if(1==e.checked){var t=e.employee_gid;a=e.employee_gid,n.push(t)}});var r={activedepartment_gid:e,employeelist_gid:n,department_gid:t.department_gid,department_name:t.department_name};if(unlockUI(),void 0!=a){var o="api/OsdMstDepartmentManagement/AssignDeptmanager";lockUI(),i.post(o,r).then(function(a){if(1==a.data.status){var n={activedepartment_gid:e},r="api/OsdMstDepartmentManagement/Employee";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeeasssign_list});var r="api/OsdMstDepartmentManagement/Assignedemplyee";i.getparams(r,n).then(function(e){t.manager_list=e.data.managereasssigned_list}),unlockUI(),d.alert("Manager Assigned Successfully!","success")}else unlockUI(),d.alert(a.data.message,"warning")})}else d.alert("Select Atleast One Employee!","warning")},t.unassign=function(a){lockUI();var n="api/OsdMstDepartmentManagement/GetAssignmangerDelete",r={activedepartment2manager_gid:a};i.getparams(n,r).then(function(a){if(1==a.data.status){var n={activedepartment_gid:e},r="api/OsdMstDepartmentManagement/Employee";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeeasssign_list});var r="api/OsdMstDepartmentManagement/Assignedemplyee";i.getparams(r,n).then(function(e){t.manager_list=e.data.managereasssigned_list}),unlockUI(),d.alert("Manager UnAssigned Successfully!","success")}else unlockUI(),d.alert(a.data.message,"warning")})}}lockUI();a.open({templateUrl:"/assignmanagermodal.html",controller:t,backdrop:"static",keyboard:!1,size:"lg"});t.$inject=["$scope","$modalInstance"]},t.assignmember=function(e){function t(t,a){var n={activedepartment_gid:e},r="api/OsdMstDepartmentManagement/GetActivatedeptView";i.getparams(r,n).then(function(e){t.rbo_status=e.data.department_status,t.department_name=e.data.department_name,t.department_gid=e.data.department_gid});var r="api/OsdMstDepartmentManagement/MemberEmployee";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeeasssign_list});var r="api/OsdMstDepartmentManagement/Assignedmemberemplyee";i.getparams(r,n).then(function(e){unlockUI(),t.member_list=e.data.membereasssigned_list}),t.ok=function(){a.close("closed")},t.checkall=function(e){angular.forEach(t.employee_list,function(t){t.checked=e})},t.assign=function(){lockUI();var a,n=[];angular.forEach(t.employee_list,function(e){if(1==e.checked){var t=e.employee_gid;a=e.employee_gid,n.push(t)}});var r={activedepartment_gid:e,employeelist_gid:n,department_gid:t.department_gid,department_name:t.department_name};if(unlockUI(),void 0!=a){var o="api/OsdMstDepartmentManagement/AssignDeptmember";lockUI(),i.post(o,r).then(function(a){if(1==a.data.status){var n={activedepartment_gid:e},r="api/OsdMstDepartmentManagement/MemberEmployee";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeeasssign_list});var r="api/OsdMstDepartmentManagement/Assignedmemberemplyee";i.getparams(r,n).then(function(e){t.member_list=e.data.membereasssigned_list}),unlockUI(),d.alert("Member Assigned Successfully!","success")}else unlockUI(),d.alert(a.data.message,"warning")})}else d.alert("Select Atleast One Employee!","warning")},t.unassign=function(a){lockUI();var n="api/OsdMstDepartmentManagement/GetAssignmemberDelete",r={activedepartment2member_gid:a};i.getparams(n,r).then(function(a){if(1==a.data.status){var n={activedepartment_gid:e},r="api/OsdMstDepartmentManagement/MemberEmployee";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeeasssign_list});var r="api/OsdMstDepartmentManagement/Assignedmemberemplyee";i.getparams(r,n).then(function(e){t.member_list=e.data.membereasssigned_list}),unlockUI(),d.alert("Member UnAssigned Successfully!","success")}else unlockUI(),d.alert(a.data.message,"warning")})}}lockUI();a.open({templateUrl:"/assignmembermodal.html",controller:t,backdrop:"static",keyboard:!1,size:"lg"});t.$inject=["$scope","$modalInstance"]},t.showPopovermanager=function(e){function t(t,a){var n={activedepartment_gid:e},r="api/OsdMstDepartmentManagement/Assignedemplyee";i.getparams(r,n).then(function(e){t.manager_list=e.data.managereasssigned_list});var r="api/OsdMstDepartmentManagement/GetActivatedeptView";i.getparams(r,n).then(function(e){unlockUI(),t.department_code=e.data.department_code,t.department_name=e.data.department_name}),t.ok=function(){a.close("closed")}}lockUI();a.open({templateUrl:"/showpopupmanagerModal.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.showPopovermember=function(e){function t(t,a){var n={activedepartment_gid:e},r="api/OsdMstDepartmentManagement/Assignedmemberemplyee";i.getparams(r,n).then(function(e){t.member_list=e.data.membereasssigned_list});var r="api/OsdMstDepartmentManagement/GetActivatedeptView";i.getparams(r,n).then(function(e){unlockUI(),t.department_code=e.data.department_code,t.department_name=e.data.department_name}),t.ok=function(){a.close("closed")}}lockUI();a.open({templateUrl:"/showpopupmemberModal.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("osdMstDepartmentManagementController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u){function p(){t.totalDisplayed=100;var e="api/OsdMstSupportTeam/GetSupportTeamSummary";lockUI(),i.get(e).then(function(e){t.teamlist=e.data.supportdtl,unlockUI(),null==t.teamlist?(t.total=0,t.totalDisplayed=0):(t.total=t.teamlist.length,t.teamlist.length<100&&(t.totalDisplayed=t.teamlist.length))})}var _=this;_.title="osdMstTeamController",p(),t.loadMore=function(e){if(void 0==e)return void d.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.teamlist){if(!(e<t.teamlist.length))return unlockUI(),void d.alert("TotalSummary"+t.teamlist.length+"RecordsOnly","warning");t.totalDisplayed+=a,t.teamlist.length<t.totalDisplayed&&(t.totalDisplayed=t.teamlist.length,d.alert("TotalSummary"+t.teamlist.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.addteam=function(){function e(e,a,n,r,o,l,s,i,d,c,m,u,_){a.ok=function(){t.close("closed")};var g="api/OsdMstDepartmentManagement/GetActivatedept";lockUI(),d.get(g).then(function(e){if(a.deptmasterlist=e.data.deptlist,unlockUI(),1==a.deptmasterlist.length){a.single=!0,a.lbldepartmentname=e.data.department_name,a.lbldepartmentgid=e.data.department_gid;var t={department_gid:e.data.department_gid},n="api/OsdMstDepartmentManagement/GetDeptEmployee";d.getparams(n,t).then(function(e){a.employee_list=e.data.employeeasssign_list})}else a.multiple=!0,a.single=!1}),a.onselectdept=function(e){var t={department_gid:e.department_gid},n="api/OsdMstDepartmentManagement/GetDeptEmployee";d.getparams(n,t).then(function(e){a.employee_list=e.data.employeeasssign_list})},a.teamname=function(e){e.length>=100?a.message="Maximum 100 characters Length":a.message=""},a.teamSubmit=function(){if(""==a.cbodepartment||null==a.cbodepartment||void 0==a.cbodepartment)if(""==a.lbldepartmentgid||null==a.lbldepartmentgid||void 0==a.lbldepartmentgid)alert("Select Department","warning");else{var e={team_name:a.team_name,team_description:a.team_description,teammembers:a.cboteam_member,department_gid:a.lbldepartmentgid,department_name:a.lbldepartmentname};lockUI();var n="api/OsdMstSupportTeam/PostSupportTeamAdd";d.post(n,e).then(function(e){1==e.data.status?(t.close("closed"),c.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),p()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),p())})}else{var e={team_name:a.team_name,team_description:a.team_description,teammembers:a.cboteam_member,department_gid:a.cbodepartment.department_gid,department_name:a.cbodepartment.department_name};lockUI();var n="api/OsdMstSupportTeam/PostSupportTeamAdd";d.post(n,e).then(function(e){1==e.data.status?(t.close("closed"),c.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),p()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),p())})}}}var t=a.open({templateUrl:"/addTeamModalContent.html",controller:e,backdrop:"static",keyboard:!1,size:"md"});e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]},t.editteam=function(e){function t(t,a){var r="api/OsdMstDepartmentManagement/GetActivatedept";lockUI(),i.get(r).then(function(e){t.deptmasterlist=e.data.deptlist,unlockUI(),1==t.deptmasterlist.length?(t.single=!0,t.lbldepartmentnameedit=e.data.department_name,t.lbldepartmentgidedit=e.data.department_gid):(t.multiple=!0,t.single=!1)}),t.onselectdeptedit=function(e){var a={department_gid:e},n="api/OsdMstDepartmentManagement/GetDeptEmployee";i.getparams(n,a).then(function(e){t.employee_listedit=e.data.employeeasssign_list})},t.ok=function(){n.close("closed")};var o={supportteam_gid:e},r="api/OsdMstSupportTeam/GetSupportTeamView";i.getparams(r,o).then(function(e){if(t.teamcodeedit=e.data.team_code,t.teamnameedit=e.data.team_name,t.teamdescriptionedit=e.data.team_description,t.cbodepartmentedit=e.data.department_gid,t.teammembers=e.data.teammembers,t.employee_listedit=e.data.employeelist,t.cboteam_member=[],null!=e.data.teammembers)for(var a=e.data.teammembers.length,n=0;n<a;n++){
var r=t.employee_listedit.map(function(e){return e.employee_gid}).indexOf(e.data.teammembers[n].employee_gid);t.cboteam_member.push(t.employee_listedit[r])}}),t.teamUpdate=function(){if(""==t.cbodepartmentedit||null==t.cbodepartmentedit||void 0==t.cbodepartmentedit)if(""==t.lbldepartmentgidedit||null==t.lbldepartmentgidedit||void 0==t.lbldepartmentgidedit)alert("Select Department","warning");else{var a,r=t.deptmasterlist.map(function(e){return e.department_gid}).indexOf(t.cbodepartmentedit);a=r==-1?"":t.deptmasterlist[r].department_name;var o={supportteam_gid:e,team_name:t.teamnameedit,team_description:t.teamdescriptionedit,teammembers:t.cboteam_member,department_gid:t.cbodepartmentedit,department_name:a};lockUI();var l="api/OsdMstSupportTeam/GetSupportTeamUpdate";i.post(l,o).then(function(e){1==e.data.status?(n.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),p(),unlockUI()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),p())})}else{var a,r=t.deptmasterlist.map(function(e){return e.department_gid}).indexOf(t.cbodepartmentedit);a=r==-1?"":t.deptmasterlist[r].department_name;var o={supportteam_gid:e,team_name:t.teamnameedit,team_description:t.teamdescriptionedit,teammembers:t.cboteam_member,department_gid:t.cbodepartmentedit,department_name:a};lockUI();var l="api/OsdMstSupportTeam/GetSupportTeamUpdate";i.post(l,o).then(function(e){1==e.data.status?(n.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),p(),unlockUI()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),p())})}}}var n=a.open({templateUrl:"/teamModaledit.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.deleteteam=function(e){var t={supportteam_gid:e};o.swal({title:"Are you sure?",text:"Do You Want To Delete the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(e){if(e){lockUI();var a="api/OsdMstSupportTeam/GetSupportTeamDelete";i.getparams(a,t).then(function(e){1==e.data.status?(p(),o.swal("Deleted Successfully!"),unlockUI()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}})},t.showPopover=function(e,t,n){function r(a,r){var o={supportteam_gid:e},l="api/OsdMstSupportTeam/GetTeamMember";i.getparams(l,o).then(function(e){a.teammembers_list=e.data.teammembers,a.team_name=t,a.team_description=n}),a.ok=function(){r.close("closed")}}a.open({templateUrl:"/showpopupModal.html",controller:r,backdrop:"static",keyboard:!1,size:"md"});r.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("osdMstTeamController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){t.limit=6e3,t.totalDisplayed=100,k.open=function(e){e.preventDefault(),e.stopPropagation(),k.opened=!0},k.close=function(e){e.preventDefault(),e.stopPropagation(),k.closed=!0},k.formats=["dd-MM-yyyy"],k.format=k.formats[0],k.dateOptions={formatYear:"yy",startingDay:1};var e="api/OsdMstDepartmentManagement/GetActivatedept";lockUI(),i.get(e).then(function(e){if(t.deptmasterlist=e.data.deptlist,unlockUI(),1==t.deptmasterlist.length){t.single=!0,t.lbldepartmentname=e.data.department_name,t.lbldepartmentgid=e.data.department_gid;var a={department_gid:e.data.department_gid},n="api/OsdMstActivity/GetDeptTeam";i.getparams(n,a).then(function(e){t.supportdtl=e.data.supportdtl});var n="api/OsdTrnServiceRequest/GetDeptActivity";i.getparams(n,a).then(function(e){t.activity_list=e.data.activitydtl});var n="api/OsdMstSupportTeam/GetAllTeamMember";i.get(n).then(function(e){t.employee_list=e.data.teammembers})}else t.supportteam_gid="",t.activitymaster_gid="",t.assignedmember_gid="",t.multiple=!0,t.single=!1});var e="api/OsdRptAllTickets/GetAllTicketsSummary";lockUI(),i.get(e).then(function(e){t.servicerequestsummary=e.data.servicerequestdtl,unlockUI(),null==t.servicerequestsummary?(t.total=0,t.totalDisplayed=0):(t.total=t.servicerequestsummary.length,t.servicerequestsummary.length<100&&(t.totalDisplayed=t.servicerequestsummary.length))})}var k=this;k.title="osdRptAllTicketsController",v(),t.onselectdept=function(e){lockUI();var a={department_gid:e.department_gid},n="api/OsdMstActivity/GetDeptTeam";i.getparams(n,a).then(function(e){t.supportdtl=e.data.supportdtl});var n="api/OsdTrnServiceRequest/GetDeptActivity";i.getparams(n,a).then(function(e){t.activity_list=e.data.activitydtl});var n="api/OsdMstSupportTeam/GetAllTeamMember";i.get(n).then(function(e){t.employee_list=e.data.teammembers}),unlockUI()},t.viewNew=function(e,t,a,n){c.url("app/osdRptAllTicketsView?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+t+"&bankalert2allocated_gid="+a+"&customer_gid="+n))};var b=6e3;t.incrementLimit=function(){t.limit+=b},t.decrementLimit=function(){t.limit-=b},t.loadMore=function(e){if(void 0==e)return void d.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.servicerequestsummary){if(!(e<t.servicerequestsummary.length))return unlockUI(),void d.alert("TotalSummary"+t.servicerequestsummary.length+"RecordsOnly","warning");t.totalDisplayed+=a,t.servicerequestsummary.length<t.totalDisplayed&&(t.totalDisplayed=t.servicerequestsummary.length,d.alert("TotalSummary"+t.servicerequestsummary.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.all=function(){t.supportteam_gid="",t.activitymaster_gid="",t.request_title="",t.raisedmember_gid="",t.assignedmember_gid="",t.ref_no="",t.raised_date="",t.ticket_status="",t.cbodepartment="",t.ticket_source="";var e="api/OsdRptAllTickets/GetAllTicketsSummary";lockUI(),i.get(e).then(function(e){t.servicerequestsummary=e.data.servicerequestdtl,unlockUI()})},t.search=function(){if(void 0==t.raised_date||""==t.raised_date)var e="null";else var a=t.raised_date,e=new Date(a.getTime()-6e4*a.getTimezoneOffset()).toISOString().split("T")[0];if(""==t.lbldepartmentgid||void 0==t.lbldepartmentgid)var n=t.cbodepartment.department_gid;else var n=t.lbldepartmentgid;var r={activitymaster_gid:t.activitymaster_gid,supportteam_gid:t.supportteam_gid,assignedmember_gid:t.assignedmember_gid,raisedmember_gid:t.raisedmember_gid,ticket_status:t.ticket_status,request_title:t.request_title,request_refno:t.ref_no,raised_date:e,department_gid:n,source:t.ticket_source},o="api/OsdRptAllTickets/PostAllTicketsSummarySearch";lockUI(),i.post(o,r).then(function(e){unlockUI(),t.servicerequestsummary=e.data.servicerequestdtl})},t.viewPDF=function(e){lockUI();var t={servicerequest_gid:e},a="api/OsdTrnTicketManagement/txtfile";i.post(a,t).then(function(e){1==e.data.status?(d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),v(),unlockUI()):(alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),v(),unlockUI())})},t["export"]=function(e,a){if(lockUI(),0!=t.single||""!=t.cbodepartment&&void 0!=t.cbodepartment){if(void 0==t.raised_date||""==t.raised_date)var n="null";else var r=t.raised_date,n=new Date(r.getTime()-6e4*r.getTimezoneOffset()).toISOString().split("T")[0];if(""==t.lbldepartmentgid||void 0==t.lbldepartmentgid)var o=t.cbodepartment.department_gid;else var o=t.lbldepartmentgid;var l={activitymaster_gid:t.activitymaster_gid,supportteam_gid:t.supportteam_gid,assignedmember_gid:t.assignedmember_gid,ticket_status:t.ticket_status,raised_date:n,department_gid:o,source:t.ticket_source},s="api/OsdRptAllTickets/TicketExport";i.post(s,l).then(function(e){1==e.data.status?(unlockUI(),g.Downloaddocument(e.data.lscloudpath,e.data.lsname)):(unlockUI(),d.alert("Error Occurred While Export !","success"),v())})}else d.alert("Kindly Select Business Unit Name","warning"),unlockUI()}}angular.module("angle").controller("osdRptAllTicketsController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$filter","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){lockUI();var e="api/OsdTrnMyTicket/GetActivityCount";i.get(e).then(function(e){t.alloted_count=e.data.lsallotedcount,t.workinprogress_count=e.data.lsworkinprogress_count,t.completed_count=e.data.completed_count,t.closed_count=e.data.closed_count,t.transfer_count=e.data.transfer_count,t.forward_count=e.data.lsforward_count,t.approvalpending_count=e.data.approvalpending_count,unlockUI()}),lockUI();var e="api/OsdTrnMyTicket/GetAllottedSummary";i.get(e).then(function(e){t.allotedactivity_list=e.data.allotteddtl,unlockUI()})}var k=this;k.title="OsdTrnAllotedMyTicketController",v(),t.Refresh=function(){v()},t.Allotted=function(){n.go("app.OsdTrnAllotedMyTicket")},t.Work=function(){n.go("app.OsdTrnWorkMyTicket")},t.Approval=function(){n.go("app.OsdTrnApprovalMyTicket")},t.External=function(){n.go("app.OsdTrnExternalMyTicket")},t.Internal=function(){n.go("app.OsdTrnInternalMyTicket")},t.Completed=function(){n.go("app.OsdTrnCompletedMyTicket")},t.Closed=function(){n.go("app.OsdTrnClosedMyTicket")},t.view360=function(e,a,n,r,o){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r,t.request_refno=o;var l=e,s=a,d=n,m=r,u={servicerequest_gid:l,bankalert_flag:s,bankalert2allocated_gid:d,customer_gid:m},p="api/OsdTrnMyTicket/GetServiceRequestForwardView360Update";lockUI(),i.getparams(p,u).then(function(e){1==e.data.status?unlockUI():unlockUI()});var _="N";c.url("app/osdTrnMyActivityAllotted360?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+_+"&lspage=Alloted&request_refno="+o))},t.TransferAllocation=function(e,t,a,n,r,l,s,c,m){function u(o,m){o.department_name=s,o.cboactivity=c;var u={department_gid:l,activitymaster_gid:c,servicerequest_gid:e},_="api/OsdMstActivity/GetTeamSummary";i.getparams(_,u).then(function(e){o.supportdtllist=e.data.supportdtl});var _="api/OsdMstActivity/GetActivity";i.getparams(_,u).then(function(e){o.activitylist=e.data.activitydtl});var _="api/OsdTrnTicketManagement/GetActivityEdit";i.getparams(_,u).then(function(e){o.cboactivity.activity_name=e.data.activity_name}),o.onselectedchangeteam=function(e){var t={supportteam_gid:o.cbosuppport_team.supportteam_gid},a="api/OsdMstSupportTeam/GetTeamMemberExcept";i.getparams(a,t).then(function(e){o.teammembers_list=e.data.teammembers})};var u={servicerequest_gid:e},_="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(_,u).then(function(e){o.transferlistdtllist=e.data.transferlistdtl;var t=e.data.transferlistdtl[0].transfer_flag;"Y"==t?o.transferlist=!0:o.transferlist=!1,unlockUI()}),o.teamSubmit=function(){lockUI();var l={servicerequest_gid:e,assigned_supportteam:t,assigned_member:a,assigned_membergid:n,activitymaster_gid:o.cboactivity,assigned_supportteamgid:r,transferteam_gid:o.cbosuppport_team.supportteam_gid,transferteam_name:o.cbosuppport_team.team_name,transferemployee_gid:o.cboemployee_name.employee_gid,transferemployee_name:o.cboemployee_name.employee_name,remarks:o.team_description},s="api/OsdTrnTicketManagement/PostTransferAllocation";i.post(s,l).then(function(e){1==e.data.status?(m.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),v(),unlockUI()):(m.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),v(),unlockUI())})},o.ok=function(){p.close("closed")}}var p=o.open({templateUrl:"/transferallocationmodal.html",controller:u,backdrop:"static",keyboard:!1,size:"md"}),e=e;u.$inject=["$scope","$modalInstance"]},t.Priority=function(e,t,a){function n(n,o){n.department_name=a;var l={department_gid:t},l={servicerequest_gid:e},s="api/OsdTrnTicketManagement/GetPrioritylist";i.getparams(s,l).then(function(e){n.prioritylistdtllist=e.data.prioritylistdtl,unlockUI()}),n.prioritySubmit=function(){var t;lockUI(),t=void 0==n.priority||""==n.priority?"None":n.priority;var a={servicerequest_gid:e,priority:t},r="api/OsdTrnTicketManagement/PostPriority";i.post(r,a).then(function(e){1==e.data.status?(o.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),v(),unlockUI()):(o.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),v(),unlockUI())})},n.ok=function(){r.close("closed")}}var r=o.open({templateUrl:"/prioritymodal.html",controller:n,backdrop:"static",keyboard:!1,size:"md"});n.$inject=["$scope","$modalInstance"]},t.getApprovalRequest=function(e,t){function a(t,a){var o="api/OsdTrnMyTicket/TmpAllMembersDelete";i.get(o).then(function(e){});var s={servicerequest_gid:e},o="api/OsdTrnMyTicket/TmpAllMembersDeleteFn";i.getparams(o,s).then(function(e){});var s={servicerequest_gid:e},o="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(o,s).then(function(e){t.employee_list=e.data.employeelist});var s={servicerequest_gid:e},o="api/OsdTrnMyTicket/TmpAllMembersDeleteFn";i.getparams(o,s).then(function(e){}),t.ok=function(){var t={servicerequest_gid:e},a="api/OsdTrnMyTicket/TmpAllMembersDeleteFn";i.getparams(a,t).then(function(e){}),r.close("closed")},t.ApprovalMembercancel=function(a){var n={tmpapprovalmember_gid:a,servicerequest_gid:e},r="api/OsdTrnMyTicket/TmpApprovalMembersDelete";i.post(r,n).then(function(a){t.approvalmember=a.data.approvalmember;var n={servicerequest_gid:e},r="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeelist})})},t.coreChanged=function(a){var r={approvalgid:t.cboapproval_member.employee_gid,approvalname:t.cboapproval_member.employee_name,servicerequest_gid:e};lockUI();var o="api/OsdTrnMyTicket/TempApprovalMember";i.post(o,r).then(function(a){if(1==a.data.status){d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),t.current=n.current.name,l.store("dataldCtrl",t),t.cboapproval_member="";var r={servicerequest_gid:e},o="api/OsdTrnMyTicket/TmpApprovalMembersView";i.getparams(o,r).then(function(e){t.approvalmember=e.data.approvalmember});var o="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(o,r).then(function(e){t.employee_list=e.data.employeelist})}else d.alert(a.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},t.getapprovalclick=function(){var a={approval_remarks:t.approval_remarks,approval_type:t.approval_type,approval_basedon:"HA",servicerequest_gid:e};lockUI();var n="api/OsdTrnMyTicket/PostApprovalGet";i.post(n,a).then(function(e){unlockUI(),1==e.data.status?(r.close("closed"),v(),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var r=o.open({templateUrl:"/getApprovalmodal.html",controller:a,backdrop:"static",keyboard:!1,size:"md"});a.$inject=["$scope","$modalInstance"]},t.getReApprovalRequest=function(e,t){function a(t,a){var r="api/employee/employee";i.get(r).then(function(e){t.employee_list=e.data.employee_list}),t.ok=function(){n.close("closed")},t.getreapprovalclick=function(){var a={approvalname:t.cboapproval_member.employee_name,approvalgid:t.cboapproval_member.employee_gid,approval_remarks:t.approval_remarks,approval_type:"Approval",approval_basedon:"RA",servicerequest_gid:e};lockUI();var r="api/OsdTrnMyTicket/PostApprovalGet";i.post(r,a).then(function(e){unlockUI(),1==e.data.status?(n.close("closed"),v(),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(n.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var n=o.open({templateUrl:"/getReApprovalmodal.html",controller:a,backdrop:"static",keyboard:!1,size:"md"});a.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("OsdTrnAllotedMyTicketController",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){lockUI();var e="api/OsdTrnMyTicket/GetActivityCount";i.get(e).then(function(e){t.alloted_count=e.data.lsallotedcount,t.workinprogress_count=e.data.lsworkinprogress_count,t.completed_count=e.data.completed_count,t.closed_count=e.data.closed_count,t.transfer_count=e.data.transfer_count,t.forward_count=e.data.lsforward_count,t.approvalpending_count=e.data.approvalpending_count,unlockUI()}),lockUI();var e="api/OsdTrnMyTicket/GetApprovalPendingSummary";i.get(e).then(function(e){t.allotedactivity_list=e.data.allotteddtl,unlockUI()})}var k=this;k.title="OsdTrnApprovalMyTicketController",v(),t.Refresh=function(){v()},t.Allotted=function(){n.go("app.OsdTrnAllotedMyTicket")},t.Work=function(){n.go("app.OsdTrnWorkMyTicket")},t.Approval=function(){n.go("app.OsdTrnApprovalMyTicket")},t.External=function(){n.go("app.OsdTrnExternalMyTicket")},t.Internal=function(){n.go("app.OsdTrnInternalMyTicket")},t.Completed=function(){n.go("app.OsdTrnCompletedMyTicket")},t.Closed=function(){n.go("app.OsdTrnClosedMyTicket")},t.view360=function(e,a,n,r,o,l){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r,t.request_refno=l,t.customer_urn=o;var s=e,d=a,m=n,u=r,p={servicerequest_gid:s,bankalert_flag:d,bankalert2allocated_gid:m,customer_gid:u},_="api/OsdTrnMyTicket/GetServiceRequestForwardView360Update";lockUI(),i.getparams(_,p).then(function(e){1==e.data.status?unlockUI():unlockUI()});var g="N";c.url("app/osdTrnApprovalPending360?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+g+"&lspage=Alloted&request_refno="+l))}}angular.module("angle").controller("OsdTrnApprovalMyTicketController",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f,v,k,b,y,h){function T(){lockUI(),t.RequestCompletedFlag=O,t.BankAlert_View=!1,t.tdshow=!1,"Y"==I?(t.BankAlert_View=!0,t.osd_View=!1):(t.BankAlert_View=!1,t.osd_View=!0),"N"==t.RequestCompletedFlag?t.remarkscommunication=!0:t.remarkscommunication=!1,t.servicerequest_gid=w;var e={servicerequest_gid:w},a="api/OsdTrnMyTicket/GetAllotted360";i.getparams(a,e).then(function(e){unlockUI(),t.request_refno=e.data.request_refno,t.raised_by=e.data.raised_by,t.raised_date=e.data.raised_date,t.raised_department=e.data.raised_department,t.activity_name=e.data.activity_name,t.request_title=e.data.request_title,t.request_status=e.data.request_status,t.request_description=e.data.request_description,t.alloteddocumentdtl=e.data.alloteddocumentdtl,U=e.data.assigned_status,t.transfer_flag=e.data.transfer_flag,t.assigned_team=e.data.assigned_team,t.assigned_member=e.data.assigned_member,t.employee_mobileno=e.data.employee_mobileno,t.level_one=e.data.level_one,t.employee_number=e.data.employee_number,t.baselocation_name=e.data.baselocation_name,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,t.lblallotfilename=e.data.allofilename,t.lblallotfilepath=e.data.allofilepath});var a="api/OsdTrnMyTicket/GetRequestorlist";i.getparams(a,e).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var a="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(a,e).then(function(e){t.transferlistdtl=e.data.transferlistdtl,unlockUI()});var a="api/OsdTrnMyTicket/GetAssetDtls";i.getparams(a,e).then(function(e){t.assetdetails=e.data.assetdetails,t.employee_gid=e.data.employee_gid});var a="api/OsdTrnMyTicket/GetApprovalDtls";i.getparams(a,e).then(function(e){t.approvaldetails=e.data.approvaldetails,t.employee_gid=e.data.employee_gid});var n={servicerequest_gid:w},a="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(a,n).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl});var a="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityList";i.getparams(a,n).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list});var a="api/OsdTrnMyTicket/GetservicerequestactivityhistoryList";i.getparams(a,n).then(function(e){t.servicerequestactivityhistory_list=e.data.servicerequestactivityhistory_list});var a="api/OsdTrnBankAlert/GetunreconAllocatedDetail",e={bankalert2allocated_gid:M,customer_gid:A,customer_urn:R};i.getparams(a,e).then(function(e){t.ticketref_no=e.data.ticketref_no,t.lblbank_name=e.data.bank_name,t.lblcustomer_refno=e.data.customer_urn,t.lblbranch_name=e.data.branch_name,t.lblcr_dr=e.data.cr_dr,t.lbltransc_value=e.data.transact_val,t.lblremarks=e.data.remarks,t.lbltransc_balance=e.data.transc_balance,t.lblacc_no=e.data.acc_no,t.lbltrn_date=e.data.trn_date,t.lblvalue_date=e.data.value_date,t.lblpayment_date=e.data.payment_date,t.lbltransact_particulars=e.data.transact_particulars,t.lbldebit_amt=e.data.debit_amt,t.lblcredit_amt=e.data.credit_amt,t.lblchq_no=e.data.chq_no,t.lblcreated_by=e.data.created_by,t.lblbrs_flag=e.data.brs_flag,t.lblsource=e.data.source,t.lblallocated_status=e.data.allocated_status,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblkotakAPI_flag=e.data.kotakAPI_flag});var e={banktransc_gid:C},a="api/OsdTrnBankAlert/GetUnReconUploadedDoc";i.getparams(a,e).then(function(e){t.uploaddocument1=e.data.MdlDocDetails,t.filename=e.data.filename,t.filepath=e.data.filepath}),t.trustAsHtml=function(e){return b.trustAsHtml(e)};var a="api/OsdTrnBankAlert/GetAllocatedDetail",e={bankalert2allocated_gid:M,customer_gid:A,customer_urn:R};i.getparams(a,e).then(function(e){t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonal_head,t.lblbusiness_head=e.data.business_head,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonal_riskmanagerName,t.lblriskmanager_name=e.data.riskmanager_name,t.lblriskMonitoring_Name=e.data.riskMonitoring_Name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,unlockUI()});var a="api/OsdTrnBankAlert/GetRMStatusDtl",e={bankalert2allocated_gid:M};i.getparams(a,e).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath,t.refund=t.lblrm_status.replace("'","")});var a="api/OsdTrnRequestApproval/GetRHApprovalDtlsByToken";i.getparams(a,e).then(function(e){t.rhapprovaldetails=e.data.rhapprovaldetails,unlockUI()});var a="api/UnreconciliationManagement/GetAssignedHistory",e={banktransc_gid:C};i.getparams(a,e).then(function(e){t.assignedlist=e.data.assignedlist});var a="api/UnreconciliationManagement/GetTransferredHistory",e={banktransc_gid:C};i.getparams(a,e).then(function(e){t.transferlist=e.data.transferlist})}var q=this;q.title="osdTrnApprovalPending360";var U,S=h.decryptURL(c.search().hash),w=S.servicerequest_gid,I=S.bankalert_flag,M=S.bankalert2allocated_gid,A=S.customer_gid,R=S.customer_urn,C=S.request_refno,O=(S.lspage,S.RequestCompletedFlag);T(),t.download=function(e,t){y.Downloaddocument(e,t)},t.uploadallocation=function(e,a,n){var r={name:e[0].name,file:e[0]},o=h.fnCheckValidDocType(e[0].name,"Default");if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var l=new FormData;l.append("fileupload",r.file),l.append("file_name",r.name),l.append("document_name",t.documentname),l.append("document_title",t.txtdocument_title),l.append("servicerequest_gid",w),l.append("project_flag","Default"),t.uploadfrm=l;var s="api/OsdTrnMyTicket/ConversationDocUpload";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",1==e.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:w};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})}else unlockUI(),d.alert("File Format Not Supported!","danger")})},t.downloadsdocument=function(e,t){y.Downloaddocument(e,t)},t.sendrequestorclick=function(){var e={servicerequest_gid:w,remarks:t.txtqueries};lockUI();var a="api/OsdTrnMyTicket/PostSendRequestor";i.post(a,e).then(function(e){if(unlockUI(),1==e.data.status){var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:w};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()}),t.txtqueries=""}else d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})},t.downloads=function(e,t){y.Downloaddocument(e,t)},t.ServiceRequestViewDocumentUpload=function(){lockUI();var e=document.getElementById("file");if(e.files.length>0){for(var a=new FormData,n=0;n<=e.files.length-1;n++){a.append(e.files[n].name,e.files[n]),t.uploadfrm=a;e.files.item(n).name,e.files.item(n).size}a.append("servicerequest_gid",w),a.append("project_flag","Default");var r="api/OsdTrnServiceRequest/RequestViewDocUpload";i.postFile(r,t.uploadfrm).then(function(e){$("#file").val(""),t.alloteddocumentdtl=e.data.servicerequestdocumentdtl,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else d.alert("Please select a file.","info")},t.Udownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.RHdownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.ackActivity=function(e){var t="api/OsdTrnMyTicket/PostUpdateAck";lockUI();var a={servicerequest_gid:w};i.post(t,a).then(function(e){1==e.data.status?(unlockUI(),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),n.go("app.OsdTrnAllotedMyTicket"),T()):(unlockUI(),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),n.go("app.OsdTrnAllotedMyTicket"),T())})},t.CancelApprovalPerson=function(e){function t(t,a){t.ok=function(){n.close("closed")},lockUI();var r={approval_token:e},o="api/OsdTrnRequestApproval/GetRequestDtl";lockUI(),i.getparams(o,r).then(function(e){t.request_title=e.data.request_title,t.request_refno=e.data.request_refno,t.activity_name=e.data.activity_name,t.assigned_dtl=e.data.assigned_dtl,t.getapproval_remarks=e.data.getapproval_remarks,t.hierary_level=e.data.hierary_level,t.servicerequest_gid=e.data.servicerequest_gid,t.approval_type=e.data.approval_type,unlockUI()}),t.CancelMemberSubmit=function(){var a=t.hierary_level,r=++a,o={approval_token:e,approval_remarks:t.txtremarks,hierary_level:r,servicerequest_gid:t.servicerequest_gid,approval_type:t.approval_type};lockUI();var l="api/OsdTrnRequestApproval/PostRequestCancelled";i.post(l,o).then(function(e){if(unlockUI(),1==e.data.status){n.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI();var t="N";c.url("app/osdTrnApprovalPending360?hash="+h.encryptURL("servicerequest_gid="+w+"&bankalert_flag="+I+"&bankalert2allocated_gid="+M+"&customer_gid="+A+"&RequestCompletedFlag="+t+"&lspage=Alloted&request_refno="+C)),T()}else n.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),c.url("app/osdTrnApprovalPending360?hash="+h.encryptURL("servicerequest_gid="+w+"&bankalert_flag="+I+"&bankalert2allocated_gid="+M+"&customer_gid="+A+"&RequestCompletedFlag="+t+"&lspage=Alloted&request_refno="+C)),T()})}}var n=a.open({templateUrl:"/cancelmembermodal.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.back=function(){n.go("app.OsdTrnApprovalMyTicket")},t.cancelclick=function(){t.txtqueries=""},t.RejectActivity=function(){function e(e,a){e.ok=function(){t.close("closed")},e.rejectSubmit=function(){var a={rejected_remarks:e.reject_remarks,servicerequest_gid:w};lockUI();var r="api/OsdTrnMyTicket/RejectRequest";i.post(r,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.OsdTrnAllotedMyTicket")):(t.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var t=a.open({templateUrl:"/rejectrequestmodal.html",controller:e,size:"md"});e.$inject=["$scope","$modalInstance"]},t.TagMemberChat=function(e){function t(e,t){e.ok=function(){n.close("closed")};var a={servicerequest_gid:w},r="api/OsdTrnServiceRequest/TagEmployee";i.getparams(r,a).then(function(t){e.employee_list=t.data.employee_list});var r="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(r,a).then(function(t){e.tagmemberdtl=t.data.tagmemberdtl,e.raised_date=t.data.raised_date}),e.TagMemberSubmit=function(){var t={servicerequest_gid:w,tagmemberdtl:e.tagmember_list};lockUI();var a="api/OsdTrnServiceRequest/PostTagMemberInChat";
i.post(a,t).then(function(e){1==e.data.status?(n.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(n.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.ok=function(){n.close("closed")}}var n=a.open({templateUrl:"/tagmemberinchat.html",controller:t});t.$inject=["$scope","$modalInstance"]},t.request_remarks=function(e){function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),i.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}a.open({templateUrl:"/RequestRemarks.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=h.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void y.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnApprovalPending360",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f,v){function k(){var e={requestapproval_gid:localStorage.getItem("requestapproval_gid")},a="api/OsdTrnRequestApproval/GetApprovaldetails";lockUI(),i.getparams(a,e).then(function(e){t.request_title=e.data.request_title,t.request_refno=e.data.request_refno,t.activity_name=e.data.activity_name,t.assigned_dtl=e.data.assigned_dtl,t.getapproval_remarks=e.data.getapproval_remarks,t.approval_token=e.data.approval_token,t.servicerequest_gid=e.data.servicerequest_gid,t.approval_type=e.data.approval_type,t.hierarylevel=e.data.hierary_level,t.approvalreq_by=e.data.approvalreq_by,t.approvalreqdate=e.data.approvalreqdate,t.created_by=e.data.created_by,t.created_date=e.data.created_date,t.requestapproval_remarks=e.data.requestapproval_remarks,t.request_description=e.data.request_description;var a={servicerequest_gid:t.servicerequest_gid},n="api/OsdTrnMyTicket/GetAllotted360";i.getparams(n,a).then(function(e){t.alloteddocumentdtl=e.data.alloteddocumentdtl,t.lblallotfilename=e.data.allofilename,t.lblallotfilepath=e.data.allofilepath}),unlockUI()});var a="api/OsdTrnMyTicket/GetApprovalDtlsByToken";i.getparams(a,e).then(function(e){t.approvaldetails=e.data.approvaldetails,unlockUI()})}var b=this;b.title="osdTrnApprovalViewController";var y=window.location.href,h=y.split("?id=");h[1];k(),t.downloads=function(e,t){f.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.approve_submit=function(){var e=t.hierarylevel,a=++e,r={approval_remarks:t.txtremarks,approval_token:t.approval_token,hierary_level:a,servicerequest_gid:t.servicerequest_gid,approval_type:t.approval_type};lockUI();var o="api/OsdTrnRequestApproval/PostRequestApproved";i.post(o,r).then(function(e){unlockUI(),1==e.data.status?(d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),n.go("app.myApproval"),k(),unlockUI(),t.showapproval=!1,t.hideapproval=!1):(d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),n.go("app.myApproval"),k(),unlockUI())})},t.reject_submit=function(){var e=t.hierarylevel,a=++e,r={approval_remarks:t.txtremarks,approval_token:t.approval_token,hierary_level:a,servicerequest_gid:t.servicerequest_gid,approval_type:t.approval_type};lockUI();var o="api/OsdTrnRequestApproval/PostRequestRejected";i.post(o,r).then(function(e){unlockUI(),1==e.data.status?(d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),n.go("app.myApproval"),k(),unlockUI()):(d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},t.back=function(){n.go("app.myApproval")},t.request_remarks=function(e){function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),i.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}o.open({templateUrl:"/RequestRemarks.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=v.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void f.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnApprovalViewController",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){lockUI();var e="api/OsdTrnBankAlert/GetServiceprivilege";i.get(e).then(function(e){"true"==e.data.privilege?t.privilege=!0:t.privilege=!1,unlockUI()}),t.tab={};var e=window.location.href,a=e.split("lstab="),n=a[1];void 0!=n?"requiredlist"==n?t.tabrequiredlist=!0:"allocatedlist"==n?t.taballocatedlist=!0:"rhApprovePendinglist"==n?t.tabrhApprovePendinglist=!0:"assignlist"==n?t.tabassignlist=!0:"transferlist"==n&&(t.tabtransferlist=!0):void 0==t.tab.activeTabId?t.tabrequiredlist=!0:"pending"==t.tab.activeTabId?t.tabrequiredlist=!0:"allocatedlist"==t.tab.activeTabId?t.taballocatedlist=!0:"rhApprovePendinglist"==t.tab.activeTabId?t.tabrhApprovePendinglist=!0:"assignlist"==t.tab.activeTabId?t.tabassignlist=!0:"transferlist"==t.tab.activeTabId&&(t.tabtransferlist=!0),lockUI();var e="api/OsdTrnBankAlert/GetSeenHistory";i.get(e).then(function(e){1==e.data.status&&unlockUI()});var e="api/OsdTrnBankAlert/GetBAMDtlpendingSummary";lockUI(),i.get(e).then(function(e){unlockUI(),t.BAMDtlpending=e.data.BankAlertAllocated_list});var e="api/OsdTrnBankAlert/GetBAMpendingSummary";lockUI(),i.get(e).then(function(e){unlockUI(),t.BAMpendingSummary=e.data.BankAlertAllocated_list});var e="api/OsdTrnBankAlert/GetBAMRHApprovalpendingSummary";lockUI(),i.get(e).then(function(e){unlockUI(),t.RhpendingSummary=e.data.BankAlertAllocated_list});var e="api/OsdTrnBankAlert/GetBAMOperationpendingSummary";lockUI(),i.get(e).then(function(e){unlockUI(),t.BAMOperationpending=e.data.BankAlertAllocated_list});var e="api/OsdTrnBankAlert/GetBAMtransferSummary";lockUI(),i.get(e).then(function(e){unlockUI(),t.BAMtransferSummary=e.data.BankAlerttransfer_list});var e="api/OsdTrnBankAlert/GetCount";lockUI(),i.get(e).then(function(e){unlockUI(),t.operation_count=e.data.operation_count,t.allocated_count=e.data.allocated_count,t.notallocated_count=e.data.notallocated_count,t.transfer_count=e.data.transfer_count,t.rhApprovePending_count=e.data.rhApprovePending_count})}var f=this;f.title="OsdTrnBAMSummary",g(),t.requiredlist=function(e,t){c.url("app/osdBamNotAllocatedView?hash="+_.encryptURL("lsbankalert2notallocated_gid="+e+"&lstab=requiredlist"))},t.allocatedtoRM=function(e,t,a){c.url("app/osdBamAllocatedView?lsbankalert2allocated_gid="+e+"&lscustomer_gid="+t+"&lstab=allocatedlist&lscustomer_urn="+a)},t.rhApprovePending=function(e,t,a){c.url("app/osdBamAllocatedView?lsbankalert2allocated_gid="+e+"&lscustomer_gid="+t+"&lstab=rhApprovePendinglist&lscustomer_urn="+a)},t.BankalertView=function(e,t,a,n){c.url("app/osdBamAssign2operation?lsbankalert2allocated_gid="+e+"&lscustomer_gid="+t+"&lstab=assignlist&lscustomer_urn="+a+"&lsticketref_no="+n)},t.transfer=function(e,t,a,n){c.url("app/osdBamAllocatedView?lsbankalert2allocated_gid="+e+"&lscustomer_gid="+t+"&lstab=transferlist&lscustomer_urn="+a+"&lsticketref_no="+n)}}angular.module("angle").controller("OsdTrnBAMSummary",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnServiceRequest/GetCancelledSummary";i.get(e).then(function(e){t.cancelledsummary=e.data.cancelledlist,unlockUI()});var e="api/OsdTrnServiceRequest/GetServiceRequestCount";i.get(e).then(function(e){t.request_count=e.data.request_count,t.tagged_count=e.data.tagged_count,t.forward_count=e.data.forward_count,t.reopen_count=e.data.reopen_count,t.close_count=e.data.close_count,t.Reject_count=e.data.reject_count,t.cancel_count=e.data.cancel_count,unlockUI()})}var f=this;f.title="osdTrnCancelledRequestSummaryController";c.search().lstab;g(),lockUI(),t.my_request=function(){n.go("app.osdTrnServiceRequestSummary")},t.tagged_request=function(){n.go("app.osdTrnTaggedRequestSummary")},t.forward_request=function(){n.go("app.osdTrnForwardTransferSummary")},t.Reopen_request=function(){n.go("app.osdTrnReopenRequestSummary")},t.Reject_request=function(){n.go("app.osdTrnRejectedRequestSummary")},t.Close_request=function(){n.go("app.osdTrnCloseRequestSummary")},t.raiserequest=function(){c.url("app/osdTrnServiceRequestAdd?hash="+_.encryptURL("lspage=myrequest"))},t.viewservicerequest=function(e,t){c.url("app/osdTrnServiceRequestView?hash="+_.encryptURL("servicerequest_gid="+e+"&lspage=cancelledrequest"))}}angular.module("angle").controller("osdTrnCancelledRequestSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){lockUI();var e="api/OsdTrnMyTicket/GetActivityCount";i.get(e).then(function(e){t.alloted_count=e.data.lsallotedcount,t.workinprogress_count=e.data.lsworkinprogress_count,t.completed_count=e.data.completed_count,t.closed_count=e.data.closed_count,t.transfer_count=e.data.transfer_count,t.forward_count=e.data.forward_count,t.approvalpending_count=e.data.approvalpending_count,unlockUI()}),lockUI();var e="api/OsdTrnMyTicket/GetClosedSummary";i.get(e).then(function(e){t.closedtickets_list=e.data.closeddtl,unlockUI()})}var k=this;k.title="OsdTrnClosedMyTicketController",v(),t.Refresh=function(){v()},t.Allotted=function(){n.go("app.OsdTrnAllotedMyTicket")},t.Work=function(){n.go("app.OsdTrnWorkMyTicket")},t.Approval=function(){n.go("app.OsdTrnApprovalMyTicket")},t.External=function(){n.go("app.OsdTrnExternalMyTicket")},t.Internal=function(){n.go("app.OsdTrnInternalMyTicket")},t.Completed=function(){n.go("app.OsdTrnCompletedMyTicket")},t.Closed=function(){n.go("app.OsdTrnClosedMyTicket")},t.closedview360=function(e,a,n,r,o){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r,t.request_refno=o;var l="Y";c.url("app/osdTrnMyActivityComplete?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+l+"&lspage=Closed&request_refno="+o))}}angular.module("angle").controller("OsdTrnClosedMyTicketController",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnServiceRequest/GetServiceRequestCount";i.get(e).then(function(e){t.request_count=e.data.request_count,t.tagged_count=e.data.tagged_count,t.forward_count=e.data.forward_count,t.reopen_count=e.data.reopen_count,t.Reject_count=e.data.reject_count,t.close_count=e.data.close_count,t.cancel_count=e.data.cancel_count,unlockUI()});var e="api/OsdTrnServiceRequest/GetCloseSummary";i.get(e).then(function(e){t.closeddtl=e.data.servicerequestdtl,unlockUI()})}var f=this;f.title="osdTrnCloseRequestSummaryController";c.search().lspage;g(),lockUI(),t.my_request=function(){n.go("app.osdTrnServiceRequestSummary")},t.tagged_request=function(){n.go("app.osdTrnTaggedRequestSummary")},t.forward_request=function(){n.go("app.osdTrnForwardTransferSummary")},t.Reopen_request=function(){n.go("app.osdTrnReopenRequestSummary")},t.Reject_request=function(){n.go("app.osdTrnRejectedRequestSummary")},t.Close_request=function(){n.go("app.osdTrnCloseRequestSummary")},t.Cancel_request=function(){n.go("app.osdTrnCancelledRequestSummary")},t.raiserequest=function(){c.url("app/osdTrnServiceRequestAdd?hash="+_.encryptURL("lspage=closerequest"))},t.viewservicerequest=function(e,t){c.url("app/osdTrnServiceRequestView?hash="+_.encryptURL("servicerequest_gid="+e+"&lspage=closeactivity"))}}angular.module("angle").controller("osdTrnCloseRequestSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){lockUI();var e="api/OsdTrnMyTicket/GetActivityCount";i.get(e).then(function(e){t.alloted_count=e.data.lsallotedcount,t.workinprogress_count=e.data.lsworkinprogress_count,t.completed_count=e.data.completed_count,t.closed_count=e.data.closed_count,t.transfer_count=e.data.transfer_count,t.forward_count=e.data.lsforward_count,t.approvalpending_count=e.data.approvalpending_count,unlockUI()}),lockUI();var e="api/OsdTrnMyTicket/GetCompletedSummary";i.get(e).then(function(e){t.completedticket_list=e.data.completeddtl,unlockUI()})}var k=this;k.title="OsdTrnCompletedMyTicketController",v(),t.Refresh=function(){v()},t.Allotted=function(){n.go("app.OsdTrnAllotedMyTicket")},t.Work=function(){n.go("app.OsdTrnWorkMyTicket")},t.Approval=function(){n.go("app.OsdTrnApprovalMyTicket")},t.External=function(){n.go("app.OsdTrnExternalMyTicket")},t.Internal=function(){n.go("app.OsdTrnInternalMyTicket")},t.Completed=function(){n.go("app.OsdTrnCompletedMyTicket")},t.Closed=function(){n.go("app.OsdTrnClosedMyTicket")},t.completedview360=function(e,a,n,r,o){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r,t.request_refno=o;var l="Y";c.url("app/osdTrnMyActivityComplete?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+l+"&lspage=Completed&request_refno="+o))}}angular.module("angle").controller("OsdTrnCompletedMyTicketController",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){lockUI();var e="api/OsdTrnMyTicket/GetActivityCount";i.get(e).then(function(e){t.alloted_count=e.data.lsallotedcount,t.workinprogress_count=e.data.lsworkinprogress_count,t.completed_count=e.data.completed_count,t.closed_count=e.data.closed_count,t.transfer_count=e.data.transfer_count,t.forward_count=e.data.lsforward_count,t.approvalpending_count=e.data.approvalpending_count,unlockUI()}),lockUI();var e="api/OsdTrnMyTicket/GetForwardSummary";i.get(e).then(function(e){t.forwarddtl=e.data.forwarddtl,unlockUI()})}var k=this;k.title="OsdTrnExternalMyTicketController",v(),t.Refresh=function(){v()},t.Allotted=function(){n.go("app.OsdTrnAllotedMyTicket")},t.Work=function(){n.go("app.OsdTrnWorkMyTicket")},t.Approval=function(){n.go("app.OsdTrnApprovalMyTicket")},t.External=function(){n.go("app.OsdTrnExternalMyTicket")},t.Internal=function(){n.go("app.OsdTrnInternalMyTicket")},t.Completed=function(){n.go("app.OsdTrnCompletedMyTicket")},t.Closed=function(){n.go("app.OsdTrnClosedMyTicket")},t.getApprovalRequest=function(e,t){function a(t,a){var o={servicerequest_gid:e},s="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(s,o).then(function(e){t.employee_list=e.data.employeelist});var s="api/OsdTrnMyTicket/TmpAllMembersDelete";i.get(s).then(function(e){}),t.ok=function(){r.close("closed")},t.ApprovalMembercancel=function(a){var n={tmpapprovalmember_gid:a,servicerequest_gid:e},r="api/OsdTrnMyTicket/TmpApprovalMembersDelete";i.post(r,n).then(function(a){t.approvalmember=a.data.approvalmember;var n={servicerequest_gid:e},r="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeelist})})},t.coreChanged=function(a){var r={approvalgid:t.cboapproval_member.employee_gid,approvalname:t.cboapproval_member.employee_name,servicerequest_gid:e};lockUI();var o="api/OsdTrnMyTicket/TempApprovalMember";i.post(o,r).then(function(a){if(1==a.data.status){d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),t.current=n.current.name,l.store("dataldCtrl",t),t.cboapproval_member="";var r={servicerequest_gid:e},o="api/OsdTrnMyTicket/TmpApprovalMembersView";i.getparams(o,r).then(function(e){t.approvalmember=e.data.approvalmember});var o="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(o,r).then(function(e){t.employee_list=e.data.employeelist})}else d.alert(a.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},t.getapprovalclick=function(){var a={approval_remarks:t.approval_remarks,approval_type:t.approval_type,approval_basedon:"HA",servicerequest_gid:e};lockUI();var n="api/OsdTrnMyTicket/PostApprovalGet";i.post(n,a).then(function(e){unlockUI(),1==e.data.status?(r.close("closed"),v(),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var r=o.open({templateUrl:"/getApprovalmodal.html",controller:a,backdrop:"static",keyboard:!1,size:"md"});a.$inject=["$scope","$modalInstance"]},t.getReApprovalRequest=function(e,t){function a(t,a){var r="api/employee/employee";i.get(r).then(function(e){t.employee_list=e.data.employee_list}),t.ok=function(){n.close("closed")},t.getreapprovalclick=function(){var a={approvalname:t.cboapproval_member.employee_name,approvalgid:t.cboapproval_member.employee_gid,approval_remarks:t.approval_remarks,approval_type:"Approval",approval_basedon:"RA",servicerequest_gid:e};lockUI();var r="api/OsdTrnMyTicket/PostApprovalGet";i.post(r,a).then(function(e){unlockUI(),1==e.data.status?(n.close("closed"),v(),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(n.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var n=o.open({templateUrl:"/getReApprovalmodal.html",controller:a,backdrop:"static",keyboard:!1,size:"md"});a.$inject=["$scope","$modalInstance"]},t.forwardview360=function(e,a,n,r,o,l){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r,t.request_refno=l;var s=e,d=a,m=n,u=r,p={servicerequest_gid:s,bankalert_flag:d,bankalert2allocated_gid:m,customer_gid:u},_="api/OsdTrnMyTicket/GetServiceRequestForwardView360Update";lockUI(),i.getparams(_,p).then(function(e){1==e.data.status?unlockUI():unlockUI()});var g="N";c.url("app/osdTrnMyActivityForward360?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+g+"&customer_urn="+o+"&lspage=Forward&request_refno="+l))}}angular.module("angle").controller("OsdTrnExternalMyTicketController",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnServiceRequest/GetServiceRequestCount";i.get(e).then(function(e){t.request_count=e.data.request_count,t.tagged_count=e.data.tagged_count,t.forward_count=e.data.forward_count,t.reopen_count=e.data.reopen_count,t.Reject_count=e.data.reject_count,t.close_count=e.data.close_count,t.cancel_count=e.data.cancel_count,unlockUI()});var e="api/OsdTrnServiceRequest/GetForwardRequestSummary";i.get(e).then(function(e){t.forwardactivitysummary=e.data.forwardrequestdtl,unlockUI()})}var f=this;f.title="osdTrnForwardTransferSummaryController";c.search().lstab;g(),lockUI(),t.my_request=function(){n.go("app.osdTrnServiceRequestSummary")},t.tagged_request=function(){n.go("app.osdTrnTaggedRequestSummary")},t.forward_request=function(){n.go("app.osdTrnForwardTransferSummary")},t.Reopen_request=function(){n.go("app.osdTrnReopenRequestSummary")},t.Reject_request=function(){n.go("app.osdTrnRejectedRequestSummary")},t.Close_request=function(){n.go("app.osdTrnCloseRequestSummary")},t.Cancel_request=function(){n.go("app.osdTrnCancelledRequestSummary")},t.raiserequest=function(){c.url("app/osdTrnServiceRequestAdd?hash="+_.encryptURL("lspage=forwardrequest"))},t.viewforwardrequest=function(e,a,n,r,o){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var l=e,s=a,d=n,m=r,u={servicerequest_gid:l,bankalert_flag:s,bankalert2allocated_gid:d,customer_gid:m},p="api/OsdTrnServiceRequest/GetServiceRequestForwardViewUpdate";if(lockUI(),i.getparams(p,u).then(function(e){1==e.data.status?unlockUI():unlockUI()}),"Completed"==o){var g="Y";c.url("app/osdTrnServiceRequestForwardView?hash="+_.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&CompletedFlag="+g))}else if("Closed"==o){var g="C";c.url("app/osdTrnServiceRequestForwardView?hash="+_.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&CompletedFlag="+g))}else{var g="N";c.url("app/osdTrnServiceRequestForwardView?hash="+_.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&CompletedFlag="+g))}},t.getApprovalRequest=function(e){function t(t,a){var o={servicerequest_gid:e},s="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(s,o).then(function(e){t.employee_list=e.data.employeelist});var s="api/OsdTrnMyTicket/TmpAllMembersDelete";i.get(s).then(function(e){}),t.ok=function(){r.close("closed")},t.ApprovalMembercancel=function(a){var n={tmpapprovalmember_gid:a,servicerequest_gid:e},r="api/OsdTrnMyTicket/TmpApprovalMembersDelete";i.post(r,n).then(function(a){t.approvalmember=a.data.approvalmember;var n={servicerequest_gid:e},r="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeelist})})},t.coreChanged=function(a){var r={approvalgid:t.cboapproval_member.employee_gid,approvalname:t.cboapproval_member.employee_name,servicerequest_gid:e};lockUI();var o="api/OsdTrnMyTicket/TempApprovalMember";i.post(o,r).then(function(a){if(1==a.data.status){d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),t.current=n.current.name,l.store("dataldCtrl",t),t.cboapproval_member="";var r={servicerequest_gid:e},o="api/OsdTrnMyTicket/TmpApprovalMembersView";i.getparams(o,r).then(function(e){t.approvalmember=e.data.approvalmember});var o="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(o,r).then(function(e){t.employee_list=e.data.employeelist})}else d.alert(a.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},t.getapprovalclick=function(){var a={approval_remarks:t.approval_remarks,approval_type:t.approval_type,approval_basedon:"HA",servicerequest_gid:e,approvalforward_flag:"Y"};lockUI();var n="api/OsdTrnMyTicket/PostApprovalGet";i.post(n,a).then(function(e){unlockUI(),1==e.data.status?(r.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),g()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var r=a.open({templateUrl:"/getApprovalmodal.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.getReApprovalRequest=function(e){function t(t,a){var r="api/employee/employee";i.get(r).then(function(e){t.employee_list=e.data.employee_list}),t.ok=function(){n.close("closed")},t.getreapprovalclick=function(){var a={approvalname:t.cboapproval_member.employee_name,approvalgid:t.cboapproval_member.employee_gid,approval_remarks:t.approval_remarks,approval_type:"Approval",approval_basedon:"RA",servicerequest_gid:e,approvalforward_flag:"Y"};lockUI();var r="api/OsdTrnMyTicket/PostApprovalGet";i.post(r,a).then(function(e){unlockUI(),1==e.data.status?(n.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),g()):(n.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var n=a.open({templateUrl:"/getReApprovalmodal.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("osdTrnForwardTransferSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){lockUI();var e="api/OsdTrnMyTicket/GetActivityCount";i.get(e).then(function(e){t.alloted_count=e.data.lsallotedcount,t.workinprogress_count=e.data.lsworkinprogress_count,t.completed_count=e.data.completed_count,t.closed_count=e.data.closed_count,t.transfer_count=e.data.transfer_count,t.forward_count=e.data.lsforward_count,t.approvalpending_count=e.data.approvalpending_count,unlockUI()}),lockUI();var e="api/OsdTrnMyTicket/GetTransferSummary";i.get(e).then(function(e){t.transferticket_list=e.data.transferlistdtl,unlockUI()})}var k=this;k.title="OsdTrnInternalMyTicketController",v(),t.Refresh=function(){v()},t.Allotted=function(){n.go("app.OsdTrnAllotedMyTicket")},t.Work=function(){n.go("app.OsdTrnWorkMyTicket")},t.Approval=function(){n.go("app.OsdTrnApprovalMyTicket")},t.External=function(){n.go("app.OsdTrnExternalMyTicket")},t.Internal=function(){n.go("app.OsdTrnInternalMyTicket")},t.Completed=function(){n.go("app.OsdTrnCompletedMyTicket")},t.Closed=function(){n.go("app.OsdTrnClosedMyTicket")},t.transferview360=function(e,a,n,r,o,l){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r,t.request_refno=l;var s=e,d=a,m=n,u=r,p={servicerequest_gid:s,bankalert_flag:d,bankalert2allocated_gid:m,customer_gid:u},_="api/OsdTrnMyTicket/GetServiceRequestTransferView360Update";lockUI(),i.getparams(_,p).then(function(e){1==e.data.status?unlockUI():unlockUI()});var g="N";c.url("app/osdTrnMyActivityTransfer?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+g+"&customer_urn="+o+"&lspage=Forward&request_refno="+l))}}angular.module("angle").controller("OsdTrnInternalMyTicketController",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f,v){function k(){lockUI(),t.BankAlert_View=!1,t.servicerequest_gid=I,"Y"==M?(t.BankAlert_View=!0,t.osd_View=!1):(t.BankAlert_View=!1,t.osd_View=!0),t.trustAsHtml=function(e){return a.trustAsHtml(e)};var e="api/OsdTrnBankAlert/GetAllocatedDetail",n={bankalert2allocated_gid:A,customer_gid:R,customer_urn:O};i.getparams(e,n).then(function(e){t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource_name=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonal_head,t.lblbusiness_head=e.data.business_head,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,unlockUI()});var e="api/OsdTrnBankAlert/GetRMStatusDtl",n={bankalert2allocated_gid:A};i.getparams(e,n).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath,t.refund=t.lblrm_status.replace("'","")}),t.RequestCompletedFlag=D,"Y"==t.RequestCompletedFlag?t.remarkscommunication=!1:t.remarkscommunication=!0;var n={servicerequest_gid:I},e="api/OsdTrnMyTicket/GetAllotted360";i.getparams(e,n).then(function(e){t.request_refno=e.data.request_refno,t.raised_date=e.data.raised_date,t.lblraised_date=e.data.raised_date,t.request_title=e.data.request_title,t.raised_by=e.data.raised_by,t.lblraised_by=e.data.raised_by,t.request_status=e.data.request_status,t.request_description=e.data.request_description,t.alloteddocumentdtl=e.data.alloteddocumentdtl,t.forwarddocumentdtl=e.data.forwarddocumentdtl,t.forward_remarks=e.data.forward_remarks,t.forward_date=e.data.forward_date,t.forward_to=e.data.forward_to,t.forward_flag=e.data.forward_flag,S=e.data.assigned_status,t.transfer_flag=e.data.transfer_flag,t.assigned_team=e.data.assigned_team,t.assigned_member=e.data.assigned_member,t.reopenrequestdocumentdtl=e.data.reopenrequestdocumentdtl,t.reopen_reason=e.data.reopen_reason,
t.reopened_date=e.data.reopened_date,t.reopen_flag=e.data.reopen_flag,t.completed_flag=e.data.completed_flag,t.rejected_flag=e.data.rejected_flag,t.rejected_by=e.data.rejected_by,t.rejected_date=e.data.rejected_date,t.rejected_remarks=e.data.rejected_remarks,t.cancel_flag=e.data.cancel_flag,t.cancel_date=e.data.cancel_date,t.forwardreopendocumentdtl=e.data.forwardreopendocumentdtl,t.reopendtl=e.data.reopendtl,t.employee_mobileno=e.data.employee_mobileno,t.level_one=e.data.level_one,t.employee_number=e.data.employee_number,t.baselocation_name=e.data.baselocation_name,t.lblallotfilename=e.data.allofilename,t.lblallotfilepath=e.data.allofilepath,t.frrofilepath=e.data.frrofilepath,t.frrofilename=e.data.frrofilename,t.frfilepath=e.data.frfilepath,t.frfilename=e.data.frfilename,t.fwdfilename=e.data.fwdfilename,t.fwdfilepath=e.data.fwdfilepath,t.rofilename=e.data.rofilename,t.rofilepath=e.data.rofilepath,"Y"==t.reopen_flag?(t.reopendetails=!0,t.reqdtls=!1):(t.reopendetails=!1,t.reqdtls=!0),"Y"==t.forward_flag?(t.forward=!1,t.forwarddtls=!0):(t.forward=!0,t.forwarddtls=!1),"Y"==t.rejected_flag||"Y"==t.cancel_flag?t.Completeddtls=!1:t.Completeddtls=!0,"Y"==t.rejected_flag?t.Rejectdtls=!0:t.Rejecteddtls=!1,"Y"==t.cancel_flag?(t.canceldtls=!0,t.cancelleddtlsback=!0):(t.canceldtls=!1,t.cancelleddtlsback=!1)});var e="api/OsdTrnMyTicket/GetApprovalDtls";i.getparams(e,n).then(function(e){t.approvaldetails=e.data.approvaldetails,t.employee_gid=e.data.employee_gid});var e="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityList",r={servicerequest_gid:t.servicerequest_gid};i.getparams(e,r).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list});var e="api/OsdTrnMyTicket/GetservicerequestactivityhistoryList";i.getparams(e,r).then(function(e){t.servicerequestactivityhistory_list=e.data.servicerequestactivityhistory_list});var e="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityComplete",r={servicerequest_gid:t.servicerequest_gid};i.getparams(e,r).then(function(e){t.businessstatusunitmyactivitycompleted_list=e.data.businessstatusunitmyactivity_list});var e="api/OsdTrnMyTicket/GetAssetDtls";i.getparams(e,n).then(function(e){t.assetdetails=e.data.assetdetails,t.employee_gid=e.data.employee_gid});var e="api/OsdTrnMyTicket/GetForwardDocumentUploadtempclear";i.getparams(e,r).then(function(e){});var e="api/OsdTrnMyTicket/GetCompleteDocumentUploadtempclear";i.getparams(e,r).then(function(e){});var e="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityTempClear";i.get(e).then(function(e){});var e="api/OsdTrnMyTicket/GetBusinessunitStatusMyActivity";i.getparams(e,n).then(function(e){t.businessstatuslist=e.data.businessstatuslist});var e="api/OsdTrnMyTicket/GetMultipleForward";i.getparams(e,n).then(function(e){t.forwarddtl=e.data.forwarddtl,t.forwardreopendtl=e.data.forwardreopendtl,unlockUI()});var e="api/OsdTrnTicketManagement/GetAllocateManagerlist";i.getparams(e,r).then(function(e){t.allocatelistdtl=e.data.allocatelistdtl});var e="api/OsdTrnTicketManagement/GetAllocateManagerlist";i.getparams(e,r).then(function(e){t.allocatelistdtlreopen=e.data.allocatelistdtlreopen});var e="api/OsdTrnBankAlert/GetunreconAllocatedDetail",n={bankalert2allocated_gid:A,customer_gid:R,customer_urn:O};i.getparams(e,n).then(function(e){t.ticketref_no=e.data.ticketref_no,t.lblbank_name=e.data.bank_name,t.lblcustomer_refno=e.data.customer_urn,t.lblbranch_name=e.data.branch_name,t.lblcr_dr=e.data.cr_dr,t.lbltransc_value=e.data.transact_val,t.lblremarks=e.data.remarks,t.lbltransc_balance=e.data.transc_balance,t.lblacc_no=e.data.acc_no,t.lbltrn_date=e.data.trn_date,t.lblvalue_date=e.data.value_date,t.lblpayment_date=e.data.payment_date,t.lbltransact_particulars=e.data.transact_particulars,t.lbldebit_amt=e.data.debit_amt,t.lblcredit_amt=e.data.credit_amt,t.lblchq_no=e.data.chq_no,t.lblcreated_by=e.data.created_by,t.lblbrs_flag=e.data.brs_flag,t.lblsource=e.data.source,t.lblallocated_status=e.data.allocated_status,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblkotakAPI_flag=e.data.kotakAPI_flag});var n={banktransc_gid:C},e="api/OsdTrnBankAlert/GetUnReconUploadedDoc";i.getparams(e,n).then(function(e){t.uploaddocument1=e.data.MdlDocDetails,t.filename=e.data.filename,t.filepath=e.data.filepath});var n={servicerequest_gid:I},e="api/OsdTrnMyTicket/GetRequestorlist";i.getparams(e,n).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var n={servicerequest_gid:I},e="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(e,n).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_flag=e.data.completed_flag,t.closed_by=e.data.closed_by,t.closed_date=e.data.closed_date,t.closed_flag=e.data.closed_flag,t.rejected_flag=e.data.rejected_flag,t.comfilename=e.data.comfilename,t.comfilepath=e.data.comfilepath,t.tagmemberdtl=e.data.tagmemberdtl,"Y"==t.completed_flag?(t.completeddtls=!0,t.completeddtlsback=!0):(t.completeddtls=!1,t.completeddtlsback=!1),"Y"==t.closed_flag?(t.closeddtls=!0,t.closeddtlsback=!0,t.completeddtlsback=!1,t.rejecteddtlsback=!1):(t.closeddtlsback=!1,t.closeddtls=!1),"Y"==t.rejected_flag?(t.Rejectdtls=!0,t.rejecteddtlsback=!0,t.closeddtlsback=!1,t.completeddtlsback=!1):(t.Rejectdtls=!1,t.rejecteddtlsback=!1),unlockUI()});var e="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(e,n).then(function(e){t.transferlistdtl=e.data.transferlistdtl,t.transferlistdtlreopen=e.data.transferlistdtlreopen,unlockUI()});var n={servicerequest_gid:I},e="api/OsdTrnMyTicket/GetCompletedDetails";i.getparams(e,n).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.compfilename=e.data.complefilename,t.compfilepath=e.data.complefilepath,unlockUI()});var n={requestreopen_gid:localStorage.getItem("requestreopen_gid")};if(null==localStorage.getItem("requestreopen_gid")||""==localStorage.getItem("requestreopen_gid"));else{var e="api/OsdTrnMyTicket/GetReopenHistory";i.getparams(e,n).then(function(e){t.forwardreopendtl=e.data.forwardreopendtl,t.forwarddocumentdtl=e.data.forwarddocumentdtl,t.transferlistdtlreopen=e.data.transferlistdtlreopen,t.completereopendocumentdtl=e.data.completereopendocumentdtl,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.completed_remarks=e.data.completed_remarks,t.raised_by=e.data.raised_by,t.raised_date=e.data.raised_date,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,t.fwdfilename=e.data.fwdfilename,t.fwdfilepath=e.data.fwdfilepath})}var n={bankalert2allocated_gid:A},e="api/OsdTrnRequestApproval/GetRHApprovalDtlsByToken";i.getparams(e,n).then(function(e){t.rhapprovaldetails=e.data.rhapprovaldetails,unlockUI()});var e="api/UnreconciliationManagement/GetAssignedHistory",n={banktransc_gid:C};i.getparams(e,n).then(function(e){t.assignedlist=e.data.assignedlist});var e="api/UnreconciliationManagement/GetTransferredHistory",n={banktransc_gid:C};i.getparams(e,n).then(function(e){t.transferlist=e.data.transferlist})}function b(){var e="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityList",a={servicerequest_gid:I};i.getparams(e,a).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list})}var y=this;y.title="osdTrnMyActivity360";var h,T,q,U,S,w=v.decryptURL(c.search().hash),I=w.servicerequest_gid,M=w.bankalert_flag,A=w.bankalert2allocated_gid,R=w.customer_gid,C=w.request_refno,O=w.customer_urn,D=(w.lspage,w.RequestCompletedFlag);k(),t.download=function(e,t){f.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.FORdownloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.FRDdownloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.Udownloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.Rdownloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.RHdownloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.fwddownloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.uploadallocation=function(e,a,n){var r={name:e[0].name,file:e[0]},o=v.fnCheckValidDocType(e[0].name,"Default");if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var l=new FormData;l.append("fileupload",r.file),l.append("file_name",r.name),l.append("document_name",t.documentname),l.append("document_title",t.txtdocument_title),l.append("servicerequest_gid",I),l.append("project_flag","Default"),t.uploadfrm=l;var s="api/OsdTrnMyTicket/ConversationDocUpload";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",1==e.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:I};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})}else unlockUI(),d.alert("File Format Not Supported!","warning")})},t.businessstatus_add=function(e){var e=v.decryptURL(c.search().hash).servicerequest_gid,t=$("#businessstatus :selected").text(),a={servicerequest_gid:e,business_status:t};if(null==t||" -----Select Business Unit Status-----"==t)d.alert("Enter Business Unit Status",{status:"warning",pos:"top-center",timeout:3e3});else{var n="api/OsdTrnMyTicket/PostBusinessUnitStatusWorkinProgress";lockUI(),i.post(n,a).then(function(e){unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),b()})}b()},t.businessstatus_delete=function(e){var t={businessstatusactivity_gid:e},a="api/OsdTrnMyTicket/DeleteBusinessUnitStatusMyActivity";lockUI(),i.getparams(a,t).then(function(e){unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),b()})},t.downloadsdocument=function(e,t){f.Downloaddocument(e,t)},t.sendrequestorclick=function(){var e={servicerequest_gid:I,remarks:t.txtqueries};lockUI();var a="api/OsdTrnMyTicket/PostSendRequestor";i.post(a,e).then(function(e){if(unlockUI(),1==e.data.status){var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:I};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()}),t.txtqueries=""}else d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3})})},t.isDisabled=!1,t.requestRejected=function(){function e(e,a){e.ok=function(){t.close("closed")},e.rejectSubmit=function(){var a={rejected_remarks:e.reject_remarks,servicerequest_gid:I};lockUI();var r="api/OsdTrnMyTicket/RejectRequest";i.post(r,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.OsdTrnWorkMyTicket")):(t.close("closed"),d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())})}}var t=o.open({templateUrl:"/rejectrequestmodal.html",controller:e,backdrop:"static",keyboard:!1,size:"md"});e.$inject=["$scope","$modalInstance"]},t.ForwardRequestDetails=function(){function e(e,a){var r="api/OsdTrnServiceRequest/GetEmployees";i.get(r).then(function(t){e.employee_list=t.data.employee_list}),e.ok=function(){t.close("closed"),k()},e.Fdownloadall=function(){for(var e=0;e<T.length;e++)f.Downloaddocument(U,T[e])},e.forwardSubmit=function(){var a={servicerequest_gid:I,forwardto_gid:e.cboteam_member.employee_gid,forward_to:e.cboteam_member.employee_name,forward_remarks:e.forward_remarks};lockUI();var r="api/OsdTrnMyTicket/ForwardTicket";i.post(r,a).then(function(a){1==a.data.status?(e.isDisabled=!0,t.close("closed"),d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3}),n.go("app.OsdTrnWorkMyTicket"),unlockUI()):(t.close("closed"),d.alert(a.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())}),k()},e.ForwardRequestDocumentUpload=function(){var t=document.getElementById("file");if(console.log(t),t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),e.uploadfrm=a;var r=t.files.item(n).name,o=(t.files.item(n).size,v.fnCheckValidDocType(r,"Default"));if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("project_flag","Default"),lockUI();var l="api/OsdTrnMyTicket/ForwardDocumentUpload";i.postFile(l,e.uploadfrm).then(function(t){$("#file").val(""),e.upload_list=t.data.upload_list,T=t.data.forwardfilename,U=t.data.forwardfilepath,console.log(e.upload_list),unlockUI(),1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else d.alert("Please select a file.")},e.downloads=function(e,t){f.Downloaddocument(e,t)},e.downloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},e.uploaddocumentcancel=function(t){lockUI();var a={tmp_documentGid:t},n="api/OsdTrnMyTicket/GetForwardtmpDocumentDelete";i.getparams(n,a).then(function(t){e.upload_list=t.data.upload_list,1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})},e.documentviewer=function(e,t){lockUI();var a=v.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void f.DocumentViewer(e,t)}}var t=o.open({templateUrl:"/forwardrequestmodal.html",controller:e,size:"lg",backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},t.downloadsdocs=function(e,t){f.Downloaddocument(e,t)},t.requestCompleted=function(){function e(e,a){e.ok=function(){t.close("closed"),k()},e.completedSubmit=function(){var a={completed_remarks:e.completed_remarks,servicerequest_gid:I};lockUI();var r="api/OsdTrnMyTicket/GetCompletedRequest";i.post(r,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.OsdTrnWorkMyTicket")):(t.close("closed"),d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())})},e.downloadsdoc=function(e,t){f.Downloaddocument(e,t)},e.Cdownloadall=function(){for(var e=0;e<h.length;e++)f.Downloaddocument(q,h[e])},e.CompleteRequestDocumentUpload=function(){var t=document.getElementById("file2");if(console.log(t),t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),e.uploadfrm=a;var r=t.files.item(n).name,o=(t.files.item(n).size,v.fnCheckValidDocType(r,""));if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("project_flag","Default"),lockUI();var l="api/OsdTrnMyTicket/CompleteDocumentUpload";i.postFile(l,e.uploadfrm).then(function(t){$("#file2").val(""),e.upload_list=t.data.upload_list,h=t.data.compfilename,q=t.data.compfilepath,unlockUI(),1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file.")},e.uploaddocumentdelete=function(t){lockUI();var a={tmp_documentGid:t},n="api/OsdTrnMyTicket/GettmpCompleteDocDelete";i.getparams(n,a).then(function(t){e.upload_list=t.data.upload_list,1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})},e.documentviewer=function(e,t){lockUI();var a=v.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void f.DocumentViewer(e,t)}}var t=o.open({templateUrl:"/completedrequestmodal.html",controller:e,size:"lg",backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},t.ServiceRequestViewDocumentUpload=function(){lockUI();var e=document.getElementById("file1");if(e.files.length>0){for(var a=new FormData,n=0;n<=e.files.length-1;n++){a.append(e.files[n].name,e.files[n]),t.uploadfrm=a;e.files.item(n).name,e.files.item(n).size}a.append("project_flag","Default"),a.append("servicerequest_gid",I);var r="api/OsdTrnServiceRequest/RequestViewDocUpload";i.postFile(r,t.uploadfrm).then(function(e){$("#file1").val(""),t.alloteddocumentdtl=e.data.servicerequestdocumentdtl,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file.")},t.downloads=function(e,t){f.Downloaddocument(e,t)},t.Back=function(){n.go("app.OsdTrnAllotedMyTicket")},t.WorkinProgressBack=function(){n.go("app.OsdTrnWorkMyTicket")},t.CompletedBack=function(){n.go("app.OsdTrnCompletedMyTicket")},t.ClosedBack=function(){n.go("app.OsdTrnClosedMyTicket")},t.cancelclick=function(){t.txtqueries=""},t.tickethistory=function(e){var t=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityHistory?hash="+v.encryptURL("servicerequest_gid="+e);window.open(t,"_blank")},t.ticketreopenhistory=function(e,t){var a=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityReopenHistory?hash="+v.encryptURL("servicerequest_gid="+t+" &requestreopen_gid="+e);window.open(a,"_blank")},t.CancelApprovalPerson=function(e){function t(t,n){t.ok=function(){a.close("closed")},lockUI();var r={approval_token:e},o="api/OsdTrnRequestApproval/GetRequestDtl";lockUI(),i.getparams(o,r).then(function(e){t.request_title=e.data.request_title,t.request_refno=e.data.request_refno,t.activity_name=e.data.activity_name,t.assigned_dtl=e.data.assigned_dtl,t.getapproval_remarks=e.data.getapproval_remarks,t.hierary_level=e.data.hierary_level,t.servicerequest_gid=e.data.servicerequest_gid,t.approval_type=e.data.approval_type,unlockUI()}),t.CancelMemberSubmit=function(){var n=t.hierary_level,r=++n,o={approval_token:e,approval_remarks:t.txtremarks,hierary_level:r,servicerequest_gid:t.servicerequest_gid,approval_type:t.approval_type};lockUI();var l="api/OsdTrnRequestApproval/PostRequestCancelled";i.post(l,o).then(function(e){unlockUI(),1==e.data.status?(a.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),k()):(a.close("closed"),d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI(),k())})}}var a=o.open({templateUrl:"/cancelmembermodal.html",controller:t,size:"md",backdrop:"static",keyboard:!1});t.$inject=["$scope","$modalInstance"]},t.TagMemberChat=function(){function e(e,a){e.ok=function(){t.close("closed")};var n={servicerequest_gid:I},r="api/OsdTrnServiceRequest/TagEmployee";i.getparams(r,n).then(function(t){e.employee_list=t.data.employee_list});var r="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(r,n).then(function(t){e.tagmemberdtl=t.data.tagmemberdtl,e.raised_date=t.data.raised_date}),e.TagMemberSubmit=function(){var a={servicerequest_gid:I,tagmemberdtl:e.tagmember_list};lockUI();var n="api/OsdTrnServiceRequest/PostTagMemberInChat";i.post(n,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),k()):(t.close("closed"),d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI())})},e.ok=function(){t.close("closed")}}var t=o.open({templateUrl:"/tagmemberinchat.html",controller:e,backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},t.request_remarks=function(e){function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),i.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}o.open({templateUrl:"/RequestRemarks.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=v.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void f.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnMyActivity360",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f,v,k,b,y,h){function T(){lockUI(),t.RequestCompletedFlag=j,t.BankAlert_View=!1,"Y"==R?(t.BankAlert_View=!0,t.osd_View=!1):(t.BankAlert_View=!1,t.osd_View=!0),"N"==t.RequestCompletedFlag?t.remarkscommunication=!0:t.remarkscommunication=!1,t.servicerequest_gid=A;var e={servicerequest_gid:A},a="api/OsdTrnMyTicket/GetservicerequestactivityhistoryList";i.getparams(a,e).then(function(e){t.servicerequestactivityhistory_list=e.data.servicerequestactivityhistory_list});var a="api/OsdTrnTicketManagement/GetAllocateManagerlist";i.getparams(a,e).then(function(e){t.allocatelistdtl=e.data.allocatelistdtl});var a="api/OsdTrnTicketManagement/GetAllocateManagerlist";i.getparams(a,e).then(function(e){t.allocatelistdtlreopen=e.data.allocatelistdtlreopen});var n={servicerequest_gid:A},a="api/OsdTrnMyTicket/GetAllotted360";i.getparams(a,n).then(function(e){unlockUI(),t.request_refno=e.data.request_refno,t.raised_by=e.data.raised_by,t.raised_date=e.data.raised_date,t.raised_department=e.data.raised_department,t.activity_name=e.data.activity_name,t.request_title=e.data.request_title,t.request_status=e.data.request_status,t.request_description=e.data.request_description,t.alloteddocumentdtl=e.data.alloteddocumentdtl,S=e.data.assigned_status,t.transfer_flag=e.data.transfer_flag,t.assigned_team=e.data.assigned_team,t.assigned_member=e.data.assigned_member,t.employee_mobileno=e.data.employee_mobileno,t.level_one=e.data.level_one,t.employee_number=e.data.employee_number,t.baselocation_name=e.data.baselocation_name,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,t.lblallotfilename=e.data.allofilename,t.lblallotfilepath=e.data.allofilepath});var a="api/OsdTrnMyTicket/GetRequestorlist";i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var a="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityTempClear";i.get(a).then(function(e){});var a="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(a,n).then(function(e){t.transferlistdtl=e.data.transferlistdtl,unlockUI()});var a="api/OsdTrnMyTicket/GetBusinessunitStatusMyActivity";i.getparams(a,n).then(function(e){t.businessstatuslist=e.data.businessstatuslist});var a="api/OsdTrnMyTicket/GetApprovalDtls";i.getparams(a,n).then(function(e){t.approvaldetails=e.data.approvaldetails,t.employee_gid=e.data.employee_gid,unlockUI()});var a="api/OsdTrnMyTicket/GetAssetDtls";i.getparams(a,n).then(function(e){t.assetdetails=e.data.assetdetails,t.employee_gid=e.data.employee_gid});var e={servicerequest_gid:A},a="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(a,e).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl});var a="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityList";i.getparams(a,e).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list}),t.trustAsHtml=function(e){return b.trustAsHtml(e)};var a="api/OsdTrnBankAlert/GetAllocatedDetail",n={bankalert2allocated_gid:C,customer_gid:O,customer_urn:D};i.getparams(a,n).then(function(e){t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonal_head,t.lblbusiness_head=e.data.businesshead_name,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,unlockUI()});var a="api/OsdTrnBankAlert/GetRMStatusDtl",n={bankalert2allocated_gid:C};i.getparams(a,n).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath,t.refund=t.lblrm_status.replace("'","")});var n={banktransc_gid:G},a="api/OsdTrnBankAlert/GetUnReconUploadedDoc";i.getparams(a,n).then(function(e){t.uploaddocument1=e.data.MdlDocDetails,t.filename=e.data.filename,t.filepath=e.data.filepath});var a="api/OsdTrnBankAlert/GetunreconAllocatedDetail",n={bankalert2allocated_gid:C,customer_gid:O,customer_urn:D};i.getparams(a,n).then(function(e){t.ticketref_no=e.data.ticketref_no,t.lblbank_name=e.data.bank_name,t.lblcustomer_refno=e.data.customer_urn,t.lblbranch_name=e.data.branch_name,t.lblcr_dr=e.data.cr_dr,t.lbltransc_value=e.data.transact_val,t.lblremarks=e.data.remarks,t.lbltransc_balance=e.data.transc_balance,t.lblacc_no=e.data.acc_no,t.lbltrn_date=e.data.trn_date,t.lblvalue_date=e.data.value_date,t.lblpayment_date=e.data.payment_date,t.lbltransact_particulars=e.data.transact_particulars,t.lbldebit_amt=e.data.debit_amt,t.lblcredit_amt=e.data.credit_amt,t.lblchq_no=e.data.chq_no,t.lblcreated_by=e.data.created_by,t.lblbrs_flag=e.data.brs_flag,t.source=e.data.source,t.lblallocated_status=e.data.allocated_status,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblkotakAPI_flag=e.data.kotakAPI_flag});var a="api/OsdTrnRequestApproval/GetRHApprovalDtlsByToken";i.getparams(a,n).then(function(e){t.rhapprovaldetails=e.data.rhapprovaldetails,unlockUI()});var a="api/UnreconciliationManagement/GetAssignedHistory",n={banktransc_gid:G};i.getparams(a,n).then(function(e){t.assignedlist=e.data.assignedlist});var a="api/UnreconciliationManagement/GetTransferredHistory",n={banktransc_gid:G};i.getparams(a,n).then(function(e){t.transferlist=e.data.transferlist})}function q(){var e="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityDrop",a={user_gid:t.user_gid};i.getparams(e,a).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list})}var U=this;U.title="osdTrnMyActivityAllotted360";var S,w,I,M=h.decryptURL(c.search().hash),A=M.servicerequest_gid,R=M.bankalert_flag,C=M.bankalert2allocated_gid,O=M.customer_gid,D=M.lscustomer_urn,G=M.request_refno,j=(M.lspage,M.RequestCompletedFlag);T(),t.download=function(e,t){y.Downloaddocument(e,t)},t.uploadallocation=function(e,a,n){var r={name:e[0].name,file:e[0]},o=h.fnCheckValidDocType(e[0].name,"Default");if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var l=new FormData;l.append("fileupload",r.file),l.append("file_name",r.name),l.append("document_name",t.documentname),l.append("document_title",t.txtdocument_title),l.append("servicerequest_gid",A),l.append("project_flag","Default"),t.uploadfrm=l;var s="api/OsdTrnMyTicket/ConversationDocUpload";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",1==e.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:A};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})}else unlockUI(),d.alert("File Format Not Supported!")})},t.downloadsdocument=function(e,t){y.Downloaddocument(e,t)},t.sendrequestorclick=function(){var e={servicerequest_gid:A,remarks:t.txtqueries};lockUI();var a="api/OsdTrnMyTicket/PostSendRequestor";i.post(a,e).then(function(e){if(unlockUI(),1==e.data.status){var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:A};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()}),t.txtqueries=""}else d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})},t.downloads=function(e,t){y.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.COdownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.Udownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.ServiceRequestViewDocumentUpload=function(){lockUI();var e=document.getElementById("file");if(e.files.length>0){for(var a=new FormData,n=0;n<=e.files.length-1;n++){a.append(e.files[n].name,e.files[n]),t.uploadfrm=a;e.files.item(n).name,e.files.item(n).size}a.append("servicerequest_gid",A),
a.append("project_flag","Default");var r="api/OsdTrnServiceRequest/RequestViewDocUpload";i.postFile(r,t.uploadfrm).then(function(e){$("#file").val(""),t.alloteddocumentdtl=e.data.servicerequestdocumentdtl,unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file.")},t.ackActivity=function(e){var t="api/OsdTrnMyTicket/PostUpdateAck";lockUI();var a={servicerequest_gid:A};i.post(t,a).then(function(e){1==e.data.status?(unlockUI(),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),n.go("app.OsdTrnAllotedMyTicket"),T()):(unlockUI(),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),n.go("app.OsdTrnAllotedMyTicket"),T())})},t.AckComplete=function(){function e(e,a){e.ok=function(){t.close("closed"),T()},e.ackcompletedSubmit=function(){var a={completed_remarks:e.completed_remarks,servicerequest_gid:A};lockUI();var r="api/OsdTrnMyTicket/PostAckCompleteRequest";i.post(r,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.OsdTrnAllotedMyTicket")):(t.close("closed"),d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.OsdTrnAllotedMyTicket"))})},e.downloadsdoc=function(e,t){y.Downloaddocument(e,t)},e.Cdownloadall=function(){for(var e=0;e<w.length;e++)y.Downloaddocument(I,w[e])},e.CompleteRequestDocumentUpload=function(){var t=document.getElementById("file2");if(console.log(t),t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),e.uploadfrm=a;var r=t.files.item(n).name,o=(t.files.item(n).size,h.fnCheckValidDocType(r,""));if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("project_flag","Default"),lockUI();var l="api/OsdTrnMyTicket/CompleteDocumentUpload";i.postFile(l,e.uploadfrm).then(function(t){$("#file2").val(""),e.upload_list=t.data.upload_list,w=t.data.compfilename,I=t.data.compfilepath,unlockUI(),1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file.")},e.uploaddocumentdelete=function(t){lockUI();var a={tmp_documentGid:t},n="api/OsdTrnMyTicket/GettmpCompleteDocDelete";i.getparams(n,a).then(function(t){e.upload_list=t.data.upload_list,1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"warning",pos:"top-center",timeout:3e3}),unlockUI()})},e.documentviewer=function(e,t){lockUI();var a=h.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void y.DocumentViewer(e,t)}}var t=a.open({templateUrl:"/Ackcompleterequestmodal.html",controller:e,size:"lg",backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},t.CancelApprovalPerson=function(e){function t(t,a){t.ok=function(){r.close("closed")},lockUI();var o={approval_token:e},l="api/OsdTrnRequestApproval/GetRequestDtl";lockUI(),i.getparams(l,o).then(function(e){t.request_title=e.data.request_title,t.request_refno=e.data.request_refno,t.activity_name=e.data.activity_name,t.assigned_dtl=e.data.assigned_dtl,t.getapproval_remarks=e.data.getapproval_remarks,t.hierary_level=e.data.hierary_level,t.servicerequest_gid=e.data.servicerequest_gid,t.approval_type=e.data.approval_type,unlockUI()}),t.CancelMemberSubmit=function(){var a=t.hierary_level,o=++a,l={approval_token:e,approval_remarks:t.txtremarks,hierary_level:o,servicerequest_gid:t.servicerequest_gid,approval_type:t.approval_type};lockUI();var s="api/OsdTrnRequestApproval/PostRequestCancelled";i.post(s,l).then(function(e){unlockUI(),1==e.data.status?(r.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.osdTrnMyActivityAllotted360"),T()):(r.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.osdTrnMyActivityAllotted360"),T())})}}var r=a.open({templateUrl:"/cancelmembermodal.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t.back=function(){n.go("app.OsdTrnAllotedMyTicket")},t.cancelclick=function(){t.txtqueries=""},t.RejectActivity=function(){function e(e,a){e.ok=function(){t.close("closed")},e.rejectSubmit=function(){var a={rejected_remarks:e.reject_remarks,servicerequest_gid:A};lockUI();var r="api/OsdTrnMyTicket/RejectRequest";i.post(r,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.OsdTrnAllotedMyTicket")):(t.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var t=a.open({templateUrl:"/rejectrequestmodal.html",controller:e,backdrop:"static",keyboard:!1,size:"md"});e.$inject=["$scope","$modalInstance"]},t.TagMemberChat=function(e){function t(e,t){e.ok=function(){n.close("closed")};var a={servicerequest_gid:A},r="api/OsdTrnServiceRequest/TagEmployee";i.getparams(r,a).then(function(t){e.employee_list=t.data.employee_list});var r="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(r,a).then(function(t){e.tagmemberdtl=t.data.tagmemberdtl,e.raised_date=t.data.raised_date}),e.TagMemberSubmit=function(){var t={servicerequest_gid:A,tagmemberdtl:e.tagmember_list};lockUI();var a="api/OsdTrnServiceRequest/PostTagMemberInChat";i.post(a,t).then(function(e){1==e.data.status?(n.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(n.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.ok=function(){n.close("closed")}}var n=a.open({templateUrl:"/tagmemberinchat.html",controller:t});t.$inject=["$scope","$modalInstance"]},t.businessstatus_add=function(){var e=$("#businessstatus :selected").text(),a={businessstatus_gid:t.cbobusinessstatus,business_status:e};if(null==e||" -----Select Business Unit Status-----"==e)d.alert("Enter Business Unit Status",{status:"warning",pos:"top-center",timeout:3e3});else{var n="api/OsdTrnMyTicket/PostBusinessUnitStatusMyActivity";lockUI(),i.post(n,a).then(function(e){unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),q()})}},t.businessstatus_delete=function(e){var t={businessstatusactivity_gid:e};console.log(t);var a="api/OsdTrnMyTicket/DeleteBusinessUnitStatusMyActivity";lockUI(),i.getparams(a,t).then(function(e){unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),q()})},t.request_remarks=function(e){function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),i.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}a.open({templateUrl:"/RequestRemarks.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=h.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void y.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnMyActivityAllotted360",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f,v){function k(){lockUI(),t.BankAlert_View=!1,t.servicerequest_gid=S,"Y"==w?(t.BankAlert_View=!0,t.osd_View=!1):(t.BankAlert_View=!1,t.osd_View=!0),t.trustAsHtml=function(e){return a.trustAsHtml(e)};var e={bankalert2allocated_gid:I,customer_gid:M,customer_urn:A},n="api/OsdTrnBankAlert/GetAllocatedDetail";i.getparams(n,e).then(function(e){t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonal_head,t.lblbusiness_head=e.data.business_head,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonal_riskmanagerName,t.lblriskmanager_name=e.data.riskmanager_name,t.lblriskMonitoring_Name=e.data.riskMonitoring_Name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,unlockUI()});var n="api/OsdTrnBankAlert/GetunreconAllocatedDetail",e={bankalert2allocated_gid:I,customer_gid:M,customer_urn:A};i.getparams(n,e).then(function(e){t.ticketref_no=e.data.ticketref_no,t.lblbank_name=e.data.bank_name,t.lblcustomer_refno=e.data.customer_urn,t.lblbranch_name=e.data.branch_name,t.lblcr_dr=e.data.cr_dr,t.lbltransc_value=e.data.transact_val,t.lblremarks=e.data.remarks,t.lbltransc_balance=e.data.transc_balance,t.lblacc_no=e.data.acc_no,t.lbltrn_date=e.data.trn_date,t.lblvalue_date=e.data.value_date,t.lblpayment_date=e.data.payment_date,t.lbltransact_particulars=e.data.transact_particulars,t.lbldebit_amt=e.data.debit_amt,t.lblcredit_amt=e.data.credit_amt,t.lblchq_no=e.data.chq_no,t.lblcreated_by=e.data.created_by,t.lblbrs_flag=e.data.brs_flag,t.lblsource=e.data.source,t.lblallocated_status=e.data.allocated_status,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblkotakAPI_flag=e.data.kotakAPI_flag});var n="api/OsdTrnBankAlert/GetUnReconUploadedDoc",e={banktransc_gid:C};i.getparams(n,e).then(function(e){t.uploaddocument1=e.data.MdlDocDetails,t.filename=e.data.filename,t.filepath=e.data.filepath});var n="api/OsdTrnBankAlert/GetRMStatusDtl",e={bankalert2allocated_gid:I};i.getparams(n,e).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath,t.refund=t.lblrm_status.replace("'","")});var e={servicerequest_gid:S},n="api/OsdTrnMyTicket/GetAllotted360";i.getparams(n,e).then(function(e){t.request_refno=e.data.request_refno,t.raised_date=e.data.raised_date,t.request_title=e.data.request_title,t.raised_by=e.data.raised_by,t.request_status=e.data.request_status,t.request_description=e.data.request_description,t.servicerequestdocumentdtl=e.data.servicerequestdocumentdtl,t.alloteddocumentdtl=e.data.alloteddocumentdtl,t.forwarddocumentdtl=e.data.forwarddocumentdtl,t.forward_remarks=e.data.forward_remarks,t.forward_date=e.data.forward_date,t.forward_to=e.data.forward_to,t.forward_flag=e.data.forward_flag,h=e.data.assigned_status,t.transfer_flag=e.data.transfer_flag,t.assigned_team=e.data.assigned_team,t.assigned_member=e.data.assigned_member,t.reopenrequestdocumentdtl=e.data.reopenrequestdocumentdtl,t.reopen_reason=e.data.reopen_reason,t.reopened_date=e.data.reopened_date,t.reopen_flag=e.data.reopen_flag,t.forwardreopendocumentdtl=e.data.forwardreopendocumentdtl,t.reopendtl=e.data.reopendtl,t.employee_mobileno=e.data.employee_mobileno,t.level_one=e.data.level_one,t.employee_number=e.data.employee_number,t.baselocation_name=e.data.baselocation_name,t.allofilename=e.data.allofilename,t.allofilepath=e.data.allofilepath,t.lblrofilename=e.data.rofilename,t.lblrofilepath=e.data.rofilepath,t.lblfrfilename=e.data.frfilename,t.lblfrfilepath=e.data.frfilepath,t.frrofilepath=e.data.frrofilepath,t.frrofilename=e.data.frrofilename,"Y"==t.reopen_flag?(t.reopendetails=!0,t.reqdtls=!1):(t.reopendetails=!1,t.reqdtls=!0),t.RequestCompletedFlag=R,"Y"==t.RequestCompletedFlag?t.remarkscommunication=!1:t.remarkscommunication=!0,"Y"==t.forward_flag?(t.forward=!1,t.forwarddtls=!0):(t.forward=!0,t.forwarddtls=!1)});var n="api/OsdTrnMyTicket/GetApprovalDtls";i.getparams(n,e).then(function(e){t.approvaldetails=e.data.approvaldetails,t.employee_gid=e.data.employee_gid});var n="api/OsdTrnMyTicket/GetCompleteDocumentUploadtempclear";i.getparams(n,e).then(function(e){});var n="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityList",r={servicerequest_gid:t.servicerequest_gid};i.getparams(n,r).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list});var n="api/OsdTrnMyTicket/GetservicerequestactivityhistoryList";i.getparams(n,r).then(function(e){t.servicerequestactivityhistory_list=e.data.servicerequestactivityhistory_list});var n="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityTempClear";i.get(n).then(function(e){});var n="api/OsdTrnMyTicket/GetBusinessunitStatusMyActivity";i.getparams(n,e).then(function(e){t.businessstatuslist=e.data.businessstatuslist});var n="api/OsdTrnMyTicket/GetRequestorlist";i.getparams(n,e).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var n="api/OsdTrnMyTicket/GetAssetDtls";i.getparams(n,e).then(function(e){t.assetdetails=e.data.assetdetails,t.employee_gid=e.data.employee_gid});var n="api/OsdTrnMyTicket/GetMultipleForward";i.getparams(n,e).then(function(e){t.forwarddtl=e.data.forwarddtl,t.forwardreopendtl=e.data.forwardreopendtl,unlockUI()});var n="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(n,e).then(function(e){t.transferlistdtl=e.data.transferlistdtl,t.transferlistdtlreopen=e.data.transferlistdtlreopen,unlockUI()});var n="api/OsdTrnMyTicket/GetCompletedDetails";i.getparams(n,e).then(function(e){t.completed_flag=e.data.completed_flag,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.compfilename=e.data.filename,t.compfilepath=e.data.filepath,unlockUI()});var r={servicerequest_gid:S},n="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(n,r).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl});var r={servicerequest_gid:S},n="api/OsdTrnTicketManagement/GetAllocateManagerlist";i.getparams(n,r).then(function(e){t.allocatelistdtl=e.data.allocatelistdtl});var r={servicerequest_gid:S},n="api/OsdTrnTicketManagement/GetAllocateManagerlist";i.getparams(n,r).then(function(e){t.allocatelistdtlreopen=e.data.allocatelistdtlreopen});var r={servicerequest_gid:S},n="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(n,r).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl,t.completed_flag=e.data.completed_flag,t.closed_by=e.data.closed_by,t.closed_date=e.data.closed_date,t.closed_flag=e.data.closed_flag,"Y"==t.closed_flag?t.closeddtls=!0:t.closeddtls=!1,"Y"==t.completed_flag?t.completeddtls=!0:t.completeddtls=!1});var r={servicerequest_gid:S},n="api/OsdTrnMyTicket/GetCompletedDetails";i.getparams(n,e).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,unlockUI()});var e={bankalert2allocated_gid:I},n="api/OsdTrnRequestApproval/GetRHApprovalDtlsByToken";i.getparams(n,e).then(function(e){t.rhapprovaldetails=e.data.rhapprovaldetails,unlockUI()});var n="api/UnreconciliationManagement/GetAssignedHistory",e={banktransc_gid:C};i.getparams(n,e).then(function(e){t.assignedlist=e.data.assignedlist});var n="api/UnreconciliationManagement/GetTransferredHistory",e={banktransc_gid:C};i.getparams(n,e).then(function(e){t.transferlist=e.data.transferlist})}function b(){var e="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityList",a={servicerequest_gid:t.servicerequest_gid};i.getparams(e,a).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list})}var y=this;y.title="osdTrnMyActivityForward360";var h,T,q,U=v.decryptURL(c.search().hash),S=U.servicerequest_gid,w=U.bankalert_flag,I=U.bankalert2allocated_gid,M=U.customer_gid,A=U.customer_urn,R=U.RequestCompletedFlag,C=U.request_refno;k(),t.fdownloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.RHdownloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.FWdownloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.Udownloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.FROdownloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)f.Downloaddocument(e,t[a])},t.download=function(e,t){f.Downloaddocument(e,t)},t.uploadallocation=function(e,a,n){var r={name:e[0].name,file:e[0]},o=v.fnCheckValidDocType(e[0].name,"Default");if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var l=new FormData;l.append("fileupload",r.file),l.append("file_name",r.name),l.append("document_name",t.documentname),l.append("document_title",t.txtdocument_title),l.append("servicerequest_gid",S),l.append("project_flag","Default"),t.uploadfrm=l;var s="api/OsdTrnMyTicket/ConversationDocUpload";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",1==e.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:S};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})}else unlockUI(),d.alert("File Format Not Supported!")})},t.downloadsdocument=function(e,t){f.Downloaddocument(e,t)},t.sendrequestorclick=function(){var e={servicerequest_gid:S,remarks:t.txtqueries};lockUI();var a="api/OsdTrnMyTicket/PostSendRequestor";i.post(a,e).then(function(e){if(unlockUI(),1==e.data.status){var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:S};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()}),t.txtqueries=""}else d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})},t.isDisabled=!1,t.requestCompleted=function(){function e(e,a){e.ok=function(){t.close("closed"),k()},e.CompletedSubmit=function(){var a={completed_remarks:e.complete_remarks,servicerequest_gid:S};lockUI();var r="api/OsdTrnMyTicket/GetCompletedRequest";i.post(r,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.OsdTrnExternalMyTicket")):(t.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.Cdownloadall=function(){for(var e=0;e<T.length;e++)f.Downloaddocument(q,T[e])},e.CompleteRequestDocumentUpload=function(){var t=document.getElementById("file");if(console.log(t),t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),e.uploadfrm=a;var r=t.files.item(n).name,o=(t.files.item(n).size,v.fnCheckValidDocType(r,"Default"));if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("project_flag","Default"),lockUI();var l="api/OsdTrnMyTicket/CompleteDocumentUpload";i.postFile(l,e.uploadfrm).then(function(t){$("#file").val(""),e.upload_list=t.data.upload_list,T=t.data.compfilename,q=t.data.compfilepath,unlockUI(),1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else d.alert("Please select a file.","info")},e.downloads=function(e,t){f.Downloaddocument(e,t)},e.uploaddocumentcancel=function(t){lockUI();var a={tmp_documentGid:t},n="api/OsdTrnMyTicket/GettmpCompleteDocDelete";i.getparams(n,a).then(function(t){e.upload_list=t.data.upload_list,e.lblfilename=t.data.filename,e.lblfilepath=t.data.filepath,1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},e.documentviewer=function(e,t){lockUI();var a=v.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void f.DocumentViewer(e,t)}}var t=o.open({templateUrl:"/completedrequestmodal.html",controller:e,backdrop:"static",keyboard:!1,size:"lg"});e.$inject=["$scope","$modalInstance"]},t.ServiceRequestForwardDocUpload=function(){lockUI();var e=document.getElementById("file1");if(e.files.length>0){for(var a=new FormData,n=0;n<=e.files.length-1;n++){a.append(e.files[n].name,e.files[n]),t.uploadfrm=a;e.files.item(n).name,e.files.item(n).size}a.append("servicerequest_gid",S),a.append("project_flag","Default");var r="api/OsdTrnServiceRequest/ForwardViewDocUpload";i.postFile(r,t.uploadfrm).then(function(e){$("#file1").val(""),t.forwarddocumentdtl=e.data.forwarddocumentdtl,t.fwdfilename=e.data.fwdfilename,t.fwdfilepath=e.data.fwdfilepath,unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else d.alert("Please select a file.","info")},t.downloads=function(e,t){f.Downloaddocument(e,t)},t.ServiceRequestViewDocumentUpload=function(){lockUI();var e=document.getElementById("file");if(e.files.length>0){for(var a=new FormData,n=0;n<=e.files.length-1;n++){a.append(e.files[n].name,e.files[n]),t.uploadfrm=a;e.files.item(n).name,e.files.item(n).size}a.append("servicerequest_gid",S),a.append("project_flag","Default");var r="api/OsdTrnServiceRequest/RequestViewDocUpload";i.postFile(r,t.uploadfrm).then(function(e){$("#file").val(""),t.servicerequestdocumentdtl=e.data.servicerequestdocumentdtl,unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else d.alert("Please select a file.","info")},t.cancelclick=function(){t.txtqueries=""},t.ForwardBack=function(){n.go("app.OsdTrnExternalMyTicket")},t.tickethistory=function(e){var t=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityHistory?hash="+v.encryptURL("servicerequest_gid="+e);window.open(t,"_blank")},t.ticketreopenhistory=function(e,t){var a=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityReopenHistory?hash="+v.encryptURL("requestreopen_gid="+e+" &servicerequest_gid="+t);window.open(a,"_blank")},t.businessstatus_add=function(e){var e=v.decryptURL(c.search().hash).servicerequest_gid,t=$("#businessstatus :selected").text(),a={servicerequest_gid:e,business_status:t};if(null==t||" -----Select Business Unit Status-----"==t)d.alert("Enter Business Unit Status",{status:"warning",pos:"top-center",timeout:3e3});else{var n="api/OsdTrnMyTicket/PostBusinessUnitStatusWorkinProgress";lockUI(),i.post(n,a).then(function(e){unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),b()})}},t.businessstatus_delete=function(e){var t={businessstatusactivity_gid:e},a="api/OsdTrnMyTicket/DeleteBusinessUnitStatusMyActivity";lockUI(),i.getparams(a,t).then(function(e){unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),b()})},t.CancelApprovalPerson=function(e){function t(t,r){t.ok=function(){a.close("closed")},lockUI();var o={approval_token:e},l="api/OsdTrnRequestApproval/GetRequestDtl";lockUI(),i.getparams(l,o).then(function(e){t.request_title=e.data.request_title,t.request_refno=e.data.request_refno,t.activity_name=e.data.activity_name,t.assigned_dtl=e.data.assigned_dtl,t.getapproval_remarks=e.data.getapproval_remarks,t.hierary_level=e.data.hierary_level,t.servicerequest_gid=e.data.servicerequest_gid,t.approval_type=e.data.approval_type,unlockUI()}),t.CancelMemberSubmit=function(){var r=t.hierary_level,o=++r,l={approval_token:e,approval_remarks:t.txtremarks,hierary_level:o,servicerequest_gid:t.servicerequest_gid,approval_type:t.approval_type};lockUI();var s="api/OsdTrnRequestApproval/PostRequestCancelled";i.post(s,l).then(function(e){unlockUI(),1==e.data.status?(a.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.osdTrnMyActivityForward360"),k()):(a.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.osdTrnMyActivityForward360"),k())})}}var a=o.open({templateUrl:"/cancelmembermodal.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t.TagMemberChat=function(){function e(e,a){e.ok=function(){t.close("closed")};var n={servicerequest_gid:S},r="api/OsdTrnServiceRequest/TagEmployee";i.getparams(r,n).then(function(t){e.employee_list=t.data.employee_list});var r="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(r,n).then(function(t){e.tagmemberdtl=t.data.tagmemberdtl,e.raised_date=t.data.raised_date}),e.TagMemberSubmit=function(){var a={servicerequest_gid:S,tagmemberdtl:e.tagmember_list};lockUI();var n="api/OsdTrnServiceRequest/PostTagMemberInChat";i.post(n,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),k()):(t.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.ok=function(){t.close("closed")}}var t=o.open({templateUrl:"/tagmemberinchat.html",controller:e});e.$inject=["$scope","$modalInstance"]},t.request_remarks=function(e){function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),i.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}o.open({templateUrl:"/RequestRemarks.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=v.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void f.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnMyActivityForward360",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){var e={servicerequest_gid:y},a="api/OsdTrnMyTicket/GetAllotted360";s.getparams(a,e).then(function(e){t.request_refno=e.data.request_refno,t.raised_date=e.data.raised_date,t.request_title=e.data.request_title,t.raised_by=e.data.raised_by,t.request_status=e.data.request_status,t.request_description=e.data.request_description,t.alloteddocumentdtl=e.data.alloteddocumentdtl,t.forwarddocumentdtl=e.data.forwarddocumentdtl,t.forward_remarks=e.data.forward_remarks,t.forward_date=e.data.forward_date,t.forward_to=e.data.forward_to,t.forward_flag=e.data.forward_flag,t.transfer_flag=e.data.transfer_flag,t.assigned_team=e.data.assigned_team,t.assigned_member=e.data.assigned_member,t.reopenrequestdocumentdtl=e.data.reopenrequestdocumentdtl,t.reopen_reason=e.data.reopen_reason,t.reopened_date=e.data.reopened_date,t.reopen_flag=e.data.reopen_flag,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,t.reopendtl=e.data.reopendtl});var a="api/OsdTrnTicketManagement/GetTransferMemberlist";s.getparams(a,e).then(function(e){t.transferlistdtl=e.data.transferlistdtl,unlockUI()});var a="api/OsdTrnMyTicket/GetApprovalDtls";s.getparams(a,e).then(function(e){t.approvaldetails=e.data.approvaldetails,t.approvaldetailshistory=e.data.approvaldetailshistory});var a="api/OsdTrnMyTicket/GetMultipleForward";s.getparams(a,e).then(function(e){t.forwarddtl=e.data.forwarddtl,unlockUI()});var a="api/OsdTrnMyTicket/GetCompletedDetails";s.getparams(a,e).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,unlockUI()});var a="api/OsdTrnMyTicket/GetRequestorlist";s.getparams(a,e).then(function(e){t.requestorlist=e.data.requestordtl,t.requestordtlhistory=e.data.requestordtlhistory,unlockUI()});var n={servicerequest_gid:y},a="api/OsdTrnServiceRequest/GetServiceRequestView";s.getparams(a,n).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl});var n={servicerequest_gid:y},a="api/OsdTrnTicketManagement/GetAllocateManagerlist";s.getparams(a,n).then(function(e){t.allocatelistdtl=e.data.allocatelistdtl})}var k=this;k.title="osdTrnMyActivityHistory";var b=f.decryptURL(d.search().hash),y=b.servicerequest_gid;v(),t.close=function(){window.close()},t.downloads=function(e,t){g.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.request_remarks=function(e){
function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),s.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}o.open({templateUrl:"/RequestRemarks.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=f.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(i.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void g.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnMyActivityHistory",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$modal","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){t.requestreopen_gid=h,t.servicerequest_gid=y;var e={requestreopen_gid:h},a="api/OsdTrnMyTicket/GetReopenHistory";s.getparams(a,e).then(function(e){t.forwardreopendtl=e.data.forwardreopendtl,t.forwarddocumentdtl=e.data.forwarddocumentdtl,t.transferlistdtlreopen=e.data.transferlistdtlreopen,t.completereopendocumentdtl=e.data.completereopendocumentdtl,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.completed_remarks=e.data.completed_remarks,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,t.raised_by=e.data.raised_by,t.raised_date=e.data.raised_date,t.reopencompleted_flag=e.data.reopencompleted_flag,"Y"==t.reopencompleted_flag?t.reopencompleteddtls=!0:t.reopencompleteddtls=!1});var n={servicerequest_gid:y},a="api/OsdTrnMyTicket/GetApprovalDtls";s.getparams(a,n).then(function(e){t.approvaldetails=e.data.approvaldetails});var n={servicerequest_gid:y},a="api/OsdTrnServiceRequest/GetServiceRequestView";s.getparams(a,n).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl,t.closed_by=e.data.closed_by,t.closed_date=e.data.closed_date,t.closed_flag=e.data.closed_flag,"Y"==t.closed_flag?t.closeddtls=!0:t.closeddtls=!1});var a="api/OsdTrnTicketManagement/GetAllocateManagerlist";s.getparams(a,n).then(function(e){t.allocatelistdtlreopen=e.data.allocatelistdtlreopen})}var k=this;k.title="osdTrnMyActivityReopenHistory";var b=f.decryptURL(d.search().hash),y=b.servicerequest_gid,h=b.requestreopen_gid;v(),t.close=function(){window.close()},t.CancelApprovalPerson=function(e){function t(t,n){t.ok=function(){a.close("closed")},lockUI();var r={approval_token:e},o="api/OsdTrnRequestApproval/GetRequestDtl";lockUI(),s.getparams(o,r).then(function(e){t.request_title=e.data.request_title,t.request_refno=e.data.request_refno,t.activity_name=e.data.activity_name,t.assigned_dtl=e.data.assigned_dtl,t.getapproval_remarks=e.data.getapproval_remarks,t.hierary_level=e.data.hierary_level,t.servicerequest_gid=e.data.servicerequest_gid,t.approval_type=e.data.approval_type,unlockUI()}),t.CancelMemberSubmit=function(){var n=t.hierary_level,r=++n,o={approval_token:e,approval_remarks:t.txtremarks,hierary_level:r,servicerequest_gid:t.servicerequest_gid,approval_type:t.approval_type};lockUI();var l="api/OsdTrnRequestApproval/PostRequestCancelled";s.post(l,o).then(function(e){unlockUI(),1==e.data.status?(a.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),v()):(a.close("closed"),i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),v())})}}var a=o.open({templateUrl:"/cancelmembermodal.html",controller:t,size:"md"});t.$inject=["$scope","$modalInstance"]},t.downloads=function(e,t){var a=e,n=a.split("StoryboardAPI"),r=n[1].replace("\\","/"),o=window.location.host,l=location.protocol+"//",s=l.concat(o,r),i=document.createElement("a");i.download=t;var d=s;i.href=d,i.click()},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.request_remarks=function(e){function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),s.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}o.open({templateUrl:"/RequestRemarks.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=f.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(i.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void g.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnMyActivityReopenHistory",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","ScopeValueService","$modal","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){lockUI(),t.servicerequest_gid=k,t.BankAlert_View=!1,"Y"==b?(t.BankAlert_View=!0,t.osd_View=!1):(t.BankAlert_View=!1,t.osd_View=!0),t.trustAsHtml=function(e){return u.trustAsHtml(e)};var e="api/OsdTrnBankAlert/GetAllocatedDetail",a={bankalert2allocated_gid:y,customer_gid:h,customer_urn:T};s.getparams(e,a).then(function(e){t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonal_head,t.lblbusiness_head=e.data.business_head,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonal_riskmanagerName,t.lblriskmanager_name=e.data.riskmanager_name,t.lblriskMonitoring_Name=e.data.riskMonitoring_Name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,unlockUI()});var e="api/OsdTrnBankAlert/GetunreconAllocatedDetail",a={bankalert2allocated_gid:y,customer_gid:h,customer_urn:T};s.getparams(e,a).then(function(e){t.ticketref_no=e.data.ticketref_no,t.lblbank_name=e.data.bank_name,t.lblcustomer_refno=e.data.customer_urn,t.lblbranch_name=e.data.branch_name,t.lblcr_dr=e.data.cr_dr,t.lbltransc_value=e.data.transact_val,t.lblremarks=e.data.remarks,t.lbltransc_balance=e.data.transc_balance,t.lblacc_no=e.data.acc_no,t.lbltrn_date=e.data.trn_date,t.lblvalue_date=e.data.value_date,t.lblpayment_date=e.data.payment_date,t.lbltransact_particulars=e.data.transact_particulars,t.lbldebit_amt=e.data.debit_amt,t.lblcredit_amt=e.data.credit_amt,t.lblchq_no=e.data.chq_no,t.lblcreated_by=e.data.created_by,t.lblbrs_flag=e.data.brs_flag,t.lblsource=e.data.source,t.lblallocated_status=e.data.allocated_status,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblkotakAPI_flag=e.data.kotakAPI_flag});var a={banktransc_gid:q},e="api/OsdTrnBankAlert/GetUnReconUploadedDoc";s.getparams(e,a).then(function(e){t.uploaddocument1=e.data.MdlDocDetails,t.filename=e.data.filename,t.filepath=e.data.filepath});var e="api/OsdTrnBankAlert/GetRMStatusDtl",a={bankalert2allocated_gid:y};s.getparams(e,a).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath,t.refund=t.lblrm_status.replace("'","")}),t.RequestCompletedFlag=U,"N"==t.RequestCompletedFlag?t.remarkscommunication=!0:t.remarkscommunication=!1,t.servicerequest_gid=k;var a={servicerequest_gid:k},e="api/OsdTrnMyTicket/GetAllotted360";s.getparams(e,a).then(function(e){unlockUI(),t.request_refno=e.data.request_refno,t.raised_by=e.data.raised_by,t.raised_date=e.data.raised_date,t.raised_department=e.data.raised_department,t.activity_name=e.data.activity_name,t.request_title=e.data.request_title,t.assigned_team=e.data.assigned_team,t.request_status=e.data.request_status,t.request_description=e.data.request_description,t.alloteddocumentdtl=e.data.alloteddocumentdtl,t.forwarddocumentdtl=e.data.forwarddocumentdtl,t.transfer_flag=e.data.transfer_flag,t.assigned_team=e.data.assigned_team,t.assigned_member=e.data.assigned_member,t.reopenrequestdocumentdtl=e.data.reopenrequestdocumentdtl,t.reopen_reason=e.data.reopen_reason,t.reopened_date=e.data.reopened_date,t.reopen_flag=e.data.reopen_flag,t.reopendtl=e.data.reopendtl,t.employee_mobileno=e.data.employee_mobileno,t.level_one=e.data.level_one,t.employee_number=e.data.employee_number,t.baselocation_name=e.data.baselocation_name,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,t.lblallotfilename=e.data.allofilename,t.lblallotfilepath=e.data.allofilepath,"Y"==t.reopen_flag?(t.reopendetails=!0,t.reqdtls=!1):(t.reopendetails=!1,t.reqdtls=!0)});var e="api/OsdTrnMyTicket/GetApprovalDtls";s.getparams(e,a).then(function(e){t.approvaldetails=e.data.approvaldetails,unlockUI()});var e="api/OsdTrnMyTicket/GetAssetDtls";s.getparams(e,a).then(function(e){t.assetdetails=e.data.assetdetails,t.employee_gid=e.data.employee_gid});var n={servicerequest_gid:k},e="api/OsdTrnTicketManagement/GetAllocateManagerlist";s.getparams(e,n).then(function(e){t.allocatelistdtl=e.data.allocatelistdtl});var n={servicerequest_gid:k},e="api/OsdTrnTicketManagement/GetAllocateManagerlist";s.getparams(e,n).then(function(e){t.allocatelistdtlreopen=e.data.allocatelistdtlreopen});var e="api/OsdTrnMyTicket/GetRequestorlist";s.getparams(e,a).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var e="api/OsdTrnTicketManagement/GetTransferMemberlist";s.getparams(e,a).then(function(e){t.transferlistdtl=e.data.transferlistdtl,t.transferlistdtlreopen=e.data.transferlistdtlreopen,unlockUI()});var e="api/OsdTrnServiceRequest/GetServiceRequestView";s.getparams(e,a).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.closed_by=e.data.closed_by,t.closed_date=e.data.closed_date,t.closed_flag=e.data.closed_flag,unlockUI()});var n={servicerequest_gid:k},e="api/OsdTrnServiceRequest/GetServiceRequestView";s.getparams(e,n).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl});var n={servicerequest_gid:k},e="api/OsdTrnServiceRequest/GetServiceRequestView";s.getparams(e,n).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl,t.completed_flag=e.data.completed_flag,t.closed_by=e.data.closed_by,t.closed_date=e.data.closed_date,t.closed_flag=e.data.closed_flag,"Y"==t.closed_flag?t.closeddtls=!0:t.closeddtls=!1,"Y"==t.completed_flag?t.completeddtls=!0:t.completeddtls=!1});var n={servicerequest_gid:k},e="api/OsdTrnMyTicket/GetCompletedDetails";s.getparams(e,a).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,unlockUI()});var e="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityList";s.getparams(e,n).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list});var e="api/OsdTrnMyTicket/GetservicerequestactivityhistoryList";s.getparams(e,n).then(function(e){t.servicerequestactivityhistory_list=e.data.servicerequestactivityhistory_list});var a={bankalert2allocated_gid:y},e="api/OsdTrnRequestApproval/GetRHApprovalDtlsByToken";s.getparams(e,a).then(function(e){t.rhapprovaldetails=e.data.rhapprovaldetails,unlockUI()});var e="api/UnreconciliationManagement/GetAssignedHistory",a={banktransc_gid:q};s.getparams(e,a).then(function(e){t.assignedlist=e.data.assignedlist});var e="api/UnreconciliationManagement/GetTransferredHistory",a={banktransc_gid:q};s.getparams(e,a).then(function(e){t.transferlist=e.data.transferlist})}var f=this;f.title="osdTrnMyActivityTransfer";var v=_.decryptURL(d.search().hash),k=v.servicerequest_gid,b=v.bankalert_flag,y=v.bankalert2allocated_gid,h=v.customer_gid,T=v.customer_urn,q=v.request_refno,U=v.RequestCompletedFlag;g(),t.download=function(e,t){p.Downloaddocument(e,t)},t.downloadsdocument=function(e,t){p.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)p.Downloaddocument(e,t[a])},t.Udownloadall=function(e,t){for(var a=0;a<t.length;a++)p.Downloaddocument(e,t[a])},t.sendrequestorclick=function(){var e={servicerequest_gid:k,remarks:t.txtqueries};lockUI();var a="api/OsdTrnMyTicket/PostSendRequestor";s.post(a,e).then(function(e){if(unlockUI(),1==e.data.status){var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:k};s.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()}),t.txtqueries=""}else i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})},t.downloads=function(e,t){p.Downloaddocument(e,t)},t.requestCompleted=function(){var e={servicerequest_gid:k};lockUI();var t="api/OsdTrnMyTicket/GetCompletedRequest";s.getparams(t,e).then(function(e){1==e.data.status?(i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.OsdTrnInternalMyTicket")):(i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},t.back=function(){n.go("app.OsdTrnInternalMyTicket")},t.tickethistory=function(e){var t=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityHistory?hash="+_.encryptURL("servicerequest_gid="+e);window.open(t,"_blank")},t.ticketreopenhistory=function(e,t){var a=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityReopenHistory?hash="+_.encryptURL("requestreopen_gid="+e+" &servicerequest_gid="+t);window.open(a,"_blank")},t.TagMemberChat=function(){function e(e,a){e.ok=function(){t.close("closed")};var n={servicerequest_gid:k},r="api/OsdTrnServiceRequest/TagEmployee";s.getparams(r,n).then(function(t){e.employee_list=t.data.employee_list});var r="api/OsdTrnServiceRequest/GetServiceRequestView";s.getparams(r,n).then(function(t){e.tagmemberdtl=t.data.tagmemberdtl,e.raised_date=t.data.raised_date}),e.TagMemberSubmit=function(){var a={servicerequest_gid:k,tagmemberdtl:e.tagmember_list};lockUI();var n="api/OsdTrnServiceRequest/PostTagMemberInChat";s.post(n,a).then(function(e){1==e.data.status?(t.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),g()):(t.close("closed"),i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.ok=function(){t.close("closed")}}var t=a.open({templateUrl:"/tagmemberinchat.html",controller:e});e.$inject=["$scope","$modalInstance"]},t.uploadallocation=function(e,a,n){var r={name:e[0].name,file:e[0]},o=_.fnCheckValidDocType(e[0].name,"Default");if(0==o)return i.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var l=new FormData;l.append("fileupload",r.file),l.append("file_name",r.name),l.append("document_name",t.documentname),l.append("document_title",t.txtdocument_title),l.append("servicerequest_gid",k),l.append("project_flag","Default"),t.uploadfrm=l;var d="api/OsdTrnMyTicket/ConversationDocUpload";lockUI(),s.postFile(d,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",1==e.data.status){unlockUI(),i.alert("Document Uploaded Successfully..!!","success");var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:k};s.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})}else unlockUI(),i.alert("File Format Not Supported!","danger")})},t.request_remarks=function(e){function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),s.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}a.open({templateUrl:"/RequestRemarks.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=_.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(i.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void p.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnMyActivityTransfer",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){lockUI();var e="api/OsdTrnMyTicket/GetActivityCount";i.get(e).then(function(e){t.alloted_count=e.data.alloted_count,t.workinprogress_count=e.data.workinprogress_count,t.completed_count=e.data.completed_count,t.closed_count=e.data.closed_count,t.transfer_count=e.data.transfer_count,t.forward_count=e.data.forward_count,unlockUI()}),t.tab={};var e=window.location.href,a=e.split("lstab=");a[1];void 0!=y?"Alloted"==y?t.taballoted=!0:"Work-InProgress"==y?t.tabworkinprogress=!0:"Forward"==y?t.tabforward=!0:"Tagged-Ticket"==y?t.tabtaggedticket=!0:"Transfer-Ticket"==y?t.tabtransferticket=!0:"Completed"==y?t.tabcompleted=!0:"Closed"==y&&(t.tabclosed=!0):void 0==t.tab.activeTabId?t.taballoted=!0:"Alloted"==t.tab.activeTabId?t.taballoted=!0:"Work-InProgress"==t.tab.activeTabId?t.tabworkinprogress=!0:"Forward"==t.tab.activeTabId?t.tabforward=!0:"Tagged-Ticket"==t.tab.activeTabId?t.tabtaggedticket=!0:"Transfer-Ticket"==t.tab.activeTabId?t.tabtransferticket=!0:"Completed"==t.tab.activeTabId?t.tabcompleted=!0:"Closed"==t.tab.activeTabId&&(t.tabclosed=!0),t.totalDisplayednew=100;var e="api/OsdTrnMyTicket/GetAllottedSummary";i.get(e).then(function(e){t.allotedactivity_list=e.data.allotteddtl,null==t.allotedactivity_list?(t.totalnew=0,t.totalDisplayednew=0):(t.totalnew=t.allotedactivity_list.length,t.allotedactivity_list.length<100&&(t.totalDisplayednew=t.allotedactivity_list.length)),unlockUI()}),lockUI(),t.totaldisplayedtransferticket=100;var e="api/OsdTrnMyTicket/GetTransferSummary";i.get(e).then(function(e){t.transferticket_list=e.data.transferlistdtl,null==t.transferticket_list?(t.totaltransferticket=0,t.totaldisplayedtransferticket=0):(t.totaltransferticket=t.transferticket_list.length,t.transferticket_list.length<100&&(t.totaldisplayedtransferticket=t.transferticket_list.length)),unlockUI()}),lockUI(),t.totalDisplayedworkinprogress=100;var e="api/OsdTrnMyTicket/GetWorkInProgressSummary";i.get(e).then(function(e){t.workinprogress_list=e.data.workinprogressdtl,null==t.workinprogress_list?(t.workinprogressCount=0,t.totalDisplayedworkinprogress=0):(t.workinprogressCount=t.workinprogress_list.length,t.workinprogress_list.length<100&&(t.totalDisplayedworkinprogress=t.workinprogress_list.length)),unlockUI()}),lockUI(),t.totalDisplayedforward=100;var e="api/OsdTrnMyTicket/GetForwardSummary";i.get(e).then(function(e){t.forwarddtl=e.data.forwarddtl,null==t.forwarddtl?(t.forwardCount=0,t.totalDisplayedforward=0):(t.forwardCount=t.forwarddtl.length,t.forwarddtl.length<100&&(t.totalDisplayedforward=t.forwarddtl.length)),unlockUI()}),lockUI(),t.totalDisplayedcompleted=100;var e="api/OsdTrnMyTicket/GetCompletedSummary";i.get(e).then(function(e){t.completedticket_list=e.data.completeddtl,null==t.completedticket_list?(t.totalcompleted=0,t.totalDisplayedcompleted=0):(t.totalcompleted=t.completedticket_list.length,t.completedticket_list.length<100&&(t.totalDisplayedcompleted=t.completedticket_list.length)),unlockUI()}),lockUI(),t.totalDisplayedclosed=100;var e="api/OsdTrnMyTicket/GetClosedSummary";i.get(e).then(function(e){t.closedtickets_list=e.data.closeddtl,null==t.closedtickets_list?(t.totalclosed=0,t.totalDisplayedclosed=0):(t.totalclosed=t.closedtickets_list.length,t.closedtickets_list.length<100&&(t.totalDisplayedclosed=t.closedtickets_list.length)),unlockUI()})}var k=this;k.title="osdTrnMyTicketcontroller";var b=f.decryptURL(c.search().hash),y=b.lstab;v(),t.loadMorenew=function(e){if(void 0==e)return void d.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.allotedactivity_list){if(!(e<t.allotedactivity_list.length))return unlockUI(),void d.alert("TotalSummary"+t.allotedactivity_list.length+"RecordsOnly","warning");t.totalDisplayednew+=a,t.allotedactivity_list.length<t.totalDisplayednew&&(t.totalDisplayednew=t.allotedactivity_list.length,d.alert("TotalSummary"+t.allotedactivity_list.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.work_inprogress=function(){lockUI(),t.totalDisplayedworkinprogress=100;var e="api/OsdTrnMyTicket/GetWorkInProgressSummary";i.get(e).then(function(e){t.workinprogress_list=e.data.workinprogressdtl,null==t.workinprogress_list?(t.workinprogressCount=0,t.totalDisplayedworkinprogress=0):(t.workinprogressCount=t.workinprogress_list.length,t.workinprogress_list.length<100&&(t.totalDisplayedworkinprogress=t.workinprogress_list.length)),unlockUI()})},t.loadMoreworkinprogress=function(e){if(void 0==e)return void d.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.workinprogress_list){if(!(e<t.workinprogress_list.length))return unlockUI(),void d.alert("TotalSummary"+t.workinprogress_list.length+"RecordsOnly","warning");t.totalDisplayedworkinprogress+=a,t.workinprogress_list.length<t.totalDisplayedworkinprogress&&(t.totalDisplayedworkinprogress=t.workinprogress_list.length,d.alert("TotalSummary"+t.workinprogress_list.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.forward_request=function(){lockUI(),t.totalDisplayedforward=100;var e="api/OsdTrnMyTicket/GetForwardSummary";i.get(e).then(function(e){t.forwarddtl=e.data.forwarddtl,null==t.forwarddtl?(t.forwardCount=0,t.totalDisplayedforward=0):(t.forwardCount=t.forwarddtl.length,t.forwarddtl.length<100&&(t.totalDisplayedforward=t.forwarddtl.length)),unlockUI()})},t.loadMoreforward=function(e){if(void 0==e)return void d.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.forwarddtl){if(!(e<t.forwarddtl.length))return unlockUI(),void d.alert("TotalSummary"+t.forwarddtl.length+"RecordsOnly","warning");t.totalDisplayedforward+=a,t.forwarddtl.length<t.totalDisplayedforward&&(t.totalDisplayedforward=t.forwarddtl.length,d.alert("TotalSummary"+t.forwarddtl.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.transfer_ticket=function(){lockUI(),t.totaldisplayedtransferticket=100;var e="api/OsdTrnMyTicket/GetTransferSummary";i.get(e).then(function(e){t.transferticket_list=e.data.transferlistdtl,null==t.transferticket_list?(t.totaltransferticket=0,t.totaldisplayedtransferticket=0):(t.totaltransferticket=t.transferticket_list.length,t.transferticket_list.length<100&&(t.totaldisplayedtransferticket=t.transferticket_list.length)),unlockUI()})},t.loadmoretransferticket=function(e){if(void 0==e)return void d.alert("enter the total summary count","warning");lockUI();var a=parseInt(e);if(null!=t.transferticket_list){if(!(e<t.transferticket_list.length))return unlockUI(),void d.alert("totalsummary"+t.transferticket_list.length+"recordsonly","warning");t.totaldisplayedtransferticket+=a,t.transferticket_list.length<t.totaldisplayedtransferticket&&(t.totaldisplayedtransferticket=t.transferticket_list.length,d.alert("totalsummary"+t.transferticket_list.length+"recordsonly","warning")),unlockUI()}unlockUI()},t.completed_ticket=function(){lockUI(),t.totalDisplayedcompleted=100;var e="api/OsdTrnMyTicket/GetCompletedSummary";i.get(e).then(function(e){t.completedticket_list=e.data.completeddtl,null==t.completedticket_list?(t.totalcompleted=0,t.totalDisplayedcompleted=0):(t.totalcompleted=t.completedticket_list.length,t.completedticket_list.length<100&&(t.totalDisplayedcompleted=t.completedticket_list.length)),unlockUI()})},t.loadMorecompleted=function(e){if(void 0==e)return void d.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.completedticket_list){if(!(e<t.completedticket_list.length))return unlockUI(),void d.alert("TotalSummary"+t.completedticket_list.length+"RecordsOnly","warning");t.totalDisplayedcompleted+=a,t.completedticket_list.length<t.totalDisplayedcompleted&&(t.totalDisplayedcompleted=t.completedticket_list.length,d.alert("TotalSummary"+t.completedticket_list.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.closed_ticket=function(){lockUI(),t.totalDisplayedclosed=100;var e="api/OsdTrnMyTicket/GetClosedSummary";i.get(e).then(function(e){t.closedtickets_list=e.data.closeddtl,null==t.closedtickets_list?(t.totalclosed=0,t.totalDisplayedclosed=0):(t.totalclosed=t.closedtickets_list.length,t.closedtickets_list.length<100&&(t.totalDisplayedclosed=t.closedtickets_list.length)),unlockUI()})},t.loadMoreclosed=function(e){if(void 0==e)return void d.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.closedtickets_list){if(!(e<t.closedtickets_list.length))return unlockUI(),void d.alert("TotalSummary"+t.closedtickets_list.length+"RecordsOnly","warning");t.totalDisplayedclosed+=a,t.closedtickets_list.length<t.totalDisplayedclosed&&(t.totalDisplayedclosed=t.closedtickets_list.length,d.alert("TotalSummary"+t.closedtickets_list.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.view360=function(e,a,n,r){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var o=e,l=a,s=n,d=r,m={servicerequest_gid:o,bankalert_flag:l,bankalert2allocated_gid:s,customer_gid:d},u="api/OsdTrnMyTicket/GetServiceRequestForwardView360Update";lockUI(),i.getparams(u,m).then(function(e){1==e.data.status?unlockUI():unlockUI()});var p="N";c.url("app/osdTrnMyActivityAllotted360?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+p+"&lstab=Alloted"))},t.workinprogressview360=function(e,a,n,r){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var o=e,l=a,s=n,d=r,m={servicerequest_gid:o,bankalert_flag:l,bankalert2allocated_gid:s,customer_gid:d},u="api/OsdTrnMyTicket/GetServiceRequestForwardView360Update";lockUI(),i.getparams(u,m).then(function(e){1==e.data.status?unlockUI():unlockUI()});var p="N";c.url("app/osdTrnMyActivity360?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+p+"&lstab=Work-InProgress"))},t.forwardview360=function(e,a,n,r){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var o=e,l=a,s=n,d=r,m={servicerequest_gid:o,bankalert_flag:l,bankalert2allocated_gid:s,customer_gid:d},u="api/OsdTrnMyTicket/GetServiceRequestForwardView360Update";lockUI(),i.getparams(u,m).then(function(e){1==e.data.status?unlockUI():unlockUI()});var p="N";c.url("app/osdTrnMyActivityForward360?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+p+"&lstab=Forward"))},t.taggedticketview360=function(e){t.servicerequest_gid=e;var a="N";c.url("app/osdTrnMyTicketTag?hash="+f.encryptURL("servicerequest_gid="+e+"&RequestCompletedFlag="+a+"&lstab=Tagged-Ticket"))},t.transferview360=function(e,a,n,r){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var o=e,l=a,s=n,d=r,m={servicerequest_gid:o,bankalert_flag:l,bankalert2allocated_gid:s,customer_gid:d},u="api/OsdTrnMyTicket/GetServiceRequestTransferView360Update";lockUI(),i.getparams(u,m).then(function(e){1==e.data.status?unlockUI():unlockUI()});var p="N";c.url("app/osdTrnMyActivityTransfer?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+p+"&lstab=Transfer-Ticket"))},t.completedview360=function(e,a,n,r){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var o="Y";c.url("app/osdTrnMyActivityComplete?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+o+"&lstab=Completed"))},t.closedview360=function(e,a,n,r){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var o="Y";c.url("app/osdTrnMyActivityComplete?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+o+"&lstab=Closed"))},t.getApprovalRequest=function(e,t){function a(a,o){var s={servicerequest_gid:e},m="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(m,s).then(function(e){a.employee_list=e.data.employeelist});var m="api/OsdMstActivity/GetTeamSummary";i.get(m).then(function(e){a.supportdtllist=e.data.supportdtl});var m="api/OsdTrnMyTicket/TmpAllMembersDelete";i.get(m).then(function(e){}),a.ok=function(){r.close("closed")},a.ApprovalMembercancel=function(t){var n={tmpapprovalmember_gid:t,servicerequest_gid:e},r="api/OsdTrnMyTicket/TmpApprovalMembersDelete";i.post(r,n).then(function(t){a.approvalmember=t.data.approvalmember;var n={servicerequest_gid:e},r="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(r,n).then(function(e){a.employee_list=e.data.employeelist})})},a.coreChanged=function(t){var r={approvalgid:a.cboapproval_member.employee_gid,approvalname:a.cboapproval_member.employee_name,servicerequest_gid:e};lockUI();var o="api/OsdTrnMyTicket/TempApprovalMember";
i.post(o,r).then(function(t){if(1==t.data.status){d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),a.current=n.current.name,l.store("dataldCtrl",a),a.cboapproval_member="";var r={servicerequest_gid:e},o="api/OsdTrnMyTicket/TmpApprovalMembersView";i.getparams(o,r).then(function(e){a.approvalmember=e.data.approvalmember});var o="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(o,r).then(function(e){a.employee_list=e.data.employeelist})}else d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},a.getapprovalclick=function(){var n={approval_remarks:a.approval_remarks,approval_type:a.approval_type,approval_basedon:"HA",servicerequest_gid:e};lockUI();var o="api/OsdTrnMyTicket/PostApprovalGet";i.post(o,n).then(function(e){unlockUI(),1==e.data.status?(r.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),"alloted"==t?(v(),c.url("app/osdTrnMyTicket?hash="+f.encryptURL("lstab=Alloted"))):"work"==t?(v(),work_inprogress(),c.url("app/osdTrnMyTicket?hash="+f.encryptURL("lstab=Work-InProgress"))):"forward"==t&&(v(),forward_request(),c.url("app/osdTrnMyTicket?hash="+f.encryptURL("lstab=Forward")))):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var r=o.open({templateUrl:"/getApprovalmodal.html",controller:a,size:"md"}),t=t;a.$inject=["$scope","$modalInstance"]},t.getReApprovalRequest=function(e,t){function a(a,r){var o="api/employee/employee";i.get(o).then(function(e){a.employee_list=e.data.employee_list});var o="api/OsdMstActivity/GetTeamSummary";i.get(o).then(function(e){a.supportdtllist=e.data.supportdtl}),a.ok=function(){n.close("closed")},a.getreapprovalclick=function(){var r={approvalname:a.cboapproval_member.employee_name,approvalgid:a.cboapproval_member.employee_gid,approval_remarks:a.approval_remarks,approval_type:"Approval",approval_basedon:"RA",servicerequest_gid:e};lockUI();var o="api/OsdTrnMyTicket/PostApprovalGet";i.post(o,r).then(function(e){unlockUI(),1==e.data.status?(n.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),"alloted"==t?(v(),c.url("app/osdTrnMyTicket?hash="+f.encryptURL("lstab=Alloted"))):"work"==t?(v(),work_inprogress(),c.url("app/osdTrnMyTicket?hash="+f.encryptURL("lstab=Work-InProgress"))):"forward"==t&&(v(),forward_request(),c.url("app/osdTrnMyTicket?hash="+f.encryptURL("lstab=Forward")))):(n.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var n=o.open({templateUrl:"/getReApprovalmodal.html",controller:a,size:"md"}),t=t;a.$inject=["$scope","$modalInstance"]},t.TransferAllocation=function(e,t,a,n,r){function l(o,l){var c="api/OsdMstActivity/GetTeamSummary";i.get(c).then(function(e){o.supportdtllist=e.data.supportdtl}),o.onselectedchangeteam=function(e){var t={supportteam_gid:o.cbosuppport_team.supportteam_gid},a="api/OsdMstSupportTeam/GetTeamMemberExcept";i.getparams(a,t).then(function(e){o.teammembers_list=e.data.teammembers})};var m={servicerequest_gid:e},c="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(c,m).then(function(e){o.transferlistdtllist=e.data.transferlistdtl;var t=e.data.transferlistdtl[0].transfer_flag;"Y"==t?o.transferlist=!0:o.transferlist=!1,unlockUI()}),o.teamSubmit=function(){lockUI();var s={servicerequest_gid:e,assigned_supportteam:t,assigned_member:a,assigned_membergid:n,assigned_supportteamgid:r,transferteam_gid:o.cbosuppport_team.supportteam_gid,transferteam_name:o.cbosuppport_team.team_name,transferemployee_gid:o.cboemployee_name.employee_gid,transferemployee_name:o.cboemployee_name.employee_name},c="api/OsdTrnTicketManagement/PostTransferAllocation";i.post(c,s).then(function(e){1==e.data.status?(l.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),v(),unlockUI()):(l.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),v(),unlockUI())})},o.ok=function(){s.close("closed")}}var s=o.open({templateUrl:"/transferallocationmodal.html",controller:l,size:"md"}),e=e;l.$inject=["$scope","$modalInstance"]},t.TransferAllocationwithRemarks=function(e,t,a,n,r){function l(o,l){var m="api/OsdMstActivity/GetTeamSummary";i.get(m).then(function(e){o.supportdtllist=e.data.supportdtl}),o.onselectedchangeteam=function(e){var t={supportteam_gid:o.cbosuppport_team.supportteam_gid},a="api/OsdMstSupportTeam/GetTeamMemberExcept";i.getparams(a,t).then(function(e){o.teammembers_list=e.data.teammembers})};var u={servicerequest_gid:e},m="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(m,u).then(function(e){o.transferlistdtllist=e.data.transferlistdtl;var t=e.data.transferlistdtl[0].transfer_flag;"Y"==t?o.transferlist=!0:o.transferlist=!1,unlockUI()}),o.teamSubmitremarks=function(){lockUI();var s={servicerequest_gid:e,assigned_supportteam:t,assigned_member:a,assigned_membergid:n,assigned_supportteamgid:r,transferteam_gid:o.cbosuppport_team.supportteam_gid,transferteam_name:o.cbosuppport_team.team_name,transferemployee_gid:o.cboemployee_name.employee_gid,transferemployee_name:o.cboemployee_name.employee_name,remarks:o.team_description},m="api/OsdTrnTicketManagement/PostTransferAllocation";i.post(m,s).then(function(e){1==e.data.status?(l.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),v(),c.url("app/osdTrnMyTicket?hash="+f.encryptURL("lstab=Work-InProgress")),unlockUI()):(l.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),l.close("closed"),unlockUI())})},o.ok=function(){s.close("closed")}}var s=o.open({templateUrl:"/transferallocationwithremarksmodal.html",controller:l,size:"md"}),e=e;l.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("osdTrnMyTicketcontroller",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f,v,k,b){function y(){lockUI();var e=window.location.href,a=e.split("lstab=");t.relpath1=a[1],unlockUI()}var h=this;h.title="osdTrnMyTicketWorkinprogress360",y(),t.back=function(e){c.url("app/osdTrnMyTicket?hash="+b.encryptURL("lstab="+e))}}angular.module("angle").controller("osdTrnMyTicketWorkinprogress360",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnServiceRequest/GetServiceRequestCount";i.get(e).then(function(e){t.request_count=e.data.request_count,t.tagged_count=e.data.tagged_count,t.forward_count=e.data.forward_count,t.reopen_count=e.data.reopen_count,t.Reject_count=e.data.reject_count,t.close_count=e.data.close_count,t.cancel_count=e.data.cancel_count,unlockUI()});var e="api/OsdTrnServiceRequest/GetRejectedSummary";i.get(e).then(function(e){t.rejectedsummary=e.data.rejectedlist,unlockUI()})}var f=this;f.title="osdTrnRejectedRequestSummaryController";c.search().lstab;g(),lockUI(),t.my_request=function(){n.go("app.osdTrnServiceRequestSummary")},t.tagged_request=function(){n.go("app.osdTrnTaggedRequestSummary")},t.forward_request=function(){n.go("app.osdTrnForwardTransferSummary")},t.Reopen_request=function(){n.go("app.osdTrnReopenRequestSummary")},t.Reject_request=function(){n.go("app.osdTrnRejectedRequestSummary")},t.Close_request=function(){n.go("app.osdTrnCloseRequestSummary")},t.Cancel_request=function(){n.go("app.osdTrnCancelledRequestSummary")},t.raiserequest=function(){c.url("app/osdTrnServiceRequestAdd?hash="+_.encryptURL("lspage=rejectrequest"))},t.viewservicerequest=function(e,t){c.url("app/osdTrnServiceRequestView?hash="+_.encryptURL("servicerequest_gid="+e+"&lspage=rejectedrequest"))}}angular.module("angle").controller("osdTrnRejectedRequestSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnServiceRequest/GetServiceRequestCount";i.get(e).then(function(e){t.request_count=e.data.request_count,t.tagged_count=e.data.tagged_count,t.forward_count=e.data.forward_count,t.reopen_count=e.data.reopen_count,t.Reject_count=e.data.reject_count,t.close_count=e.data.close_count,t.cancel_count=e.data.cancel_count,unlockUI()});var e="api/OsdTrnServiceRequest/GetReopenSummary";i.get(e).then(function(e){t.reopenactivitysummary=e.data.reopendtl,unlockUI()})}var f=this;f.title="osdTrnReopenRequestSummaryController";c.search().lstab;g(),lockUI(),t.my_request=function(){n.go("app.osdTrnServiceRequestSummary")},t.tagged_request=function(){n.go("app.osdTrnTaggedRequestSummary")},t.forward_request=function(){n.go("app.osdTrnForwardTransferSummary")},t.Reopen_request=function(){n.go("app.osdTrnReopenRequestSummary")},t.Reject_request=function(){n.go("app.osdTrnRejectedRequestSummary")},t.Close_request=function(){n.go("app.osdTrnCloseRequestSummary")},t.Cancel_request=function(){n.go("app.osdTrnCancelledRequestSummary")},t.raiserequest=function(){c.url("app/osdTrnServiceRequestAdd?hash="+_.encryptURL("lspage=reopenactivity"))},t.viewreopenrequest=function(e,t){var a={servicerequest_gid:e},n="api/OsdTrnServiceRequest/GetServiceRequestViewUpdate";if(lockUI(),i.getparams(n,a).then(function(e){1==e.data.status?unlockUI():unlockUI()}),"Completed"==t){var r="Y";c.url("app/osdTrnServiceRequestReopenView?hash="+_.encryptURL("servicerequest_gid="+e+"&CompletedFlag="+r+"&lspage=reopenactivity"))}else if("Closed"==t){var r="C";c.url("app/osdTrnServiceRequestReopenView?hash="+_.encryptURL("servicerequest_gid="+e+"&CompletedFlag="+r+"&lspage=reopenactivity"))}else{var r="N";c.url("app/osdTrnServiceRequestReopenView?hash="+_.encryptURL("servicerequest_gid="+e+"&CompletedFlag="+r+"&lspage=reopenactivity"))}},t.getApprovalRequest=function(e){function t(t,a){var o={servicerequest_gid:e},s="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(s,o).then(function(e){t.employee_list=e.data.employeelist});var s="api/OsdTrnMyTicket/TmpAllMembersDelete";i.get(s).then(function(e){}),t.ok=function(){r.close("closed")},t.ApprovalMembercancel=function(a){var n={tmpapprovalmember_gid:a,servicerequest_gid:e},r="api/OsdTrnMyTicket/TmpApprovalMembersDelete";i.post(r,n).then(function(a){t.approvalmember=a.data.approvalmember;var n={servicerequest_gid:e},r="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeelist})})},t.coreChanged=function(a){var r={approvalgid:t.cboapproval_member.employee_gid,approvalname:t.cboapproval_member.employee_name,servicerequest_gid:e};lockUI();var o="api/OsdTrnMyTicket/TempApprovalMember";i.post(o,r).then(function(a){if(1==a.data.status){d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),t.current=n.current.name,l.store("dataldCtrl",t),t.cboapproval_member="";var r={servicerequest_gid:e},o="api/OsdTrnMyTicket/TmpApprovalMembersView";i.getparams(o,r).then(function(e){t.approvalmember=e.data.approvalmember});var o="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(o,r).then(function(e){t.employee_list=e.data.employeelist})}else d.alert(a.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},t.getapprovalclick=function(){var a={approval_remarks:t.approval_remarks,approval_type:t.approval_type,approval_basedon:"HA",servicerequest_gid:e,approvalreopen_flag:"Y"};lockUI();var n="api/OsdTrnMyTicket/PostApprovalGet";i.post(n,a).then(function(e){unlockUI(),1==e.data.status?(r.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),g()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var r=a.open({templateUrl:"/getApprovalmodal.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.getReApprovalRequest=function(e){function t(t,a){var r="api/employee/employee";i.get(r).then(function(e){t.employee_list=e.data.employee_list}),t.ok=function(){n.close("closed")},t.getreapprovalclick=function(){var a={approvalname:t.cboapproval_member.employee_name,approvalgid:t.cboapproval_member.employee_gid,approval_remarks:t.approval_remarks,approval_type:"Approval",approval_basedon:"RA",servicerequest_gid:e,approvalreopen_flag:"Y"};lockUI();var r="api/OsdTrnMyTicket/PostApprovalGet";i.post(r,a).then(function(e){unlockUI(),1==e.data.status?(n.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),g()):(n.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var n=a.open({templateUrl:"/getReApprovalmodal.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("osdTrnReopenRequestSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f,v){function k(){var e={bankalertrefundapprl_gid:localStorage.getItem("bankalertrefundapprl_gid")},a="api/OsdTrnRequestApproval/GetRHApprovaldetails";lockUI(),i.getparams(a,e).then(function(e){t.ref_no=e.data.ref_no,t.customerurn=e.data.customerurn,t.customername=e.data.customername,t.assignedrmname=e.data.assignedrmname,t.bankalertrefundapprl_gid=e.data.bankalertrefundapprl_gid,unlockUI()});var e={bankalert2allocated_gid:localStorage.getItem("bankalert2allocated_gid"),customer_gid:localStorage.getItem("customername"),customer_urn:localStorage.getItem("customerurn")},a="api/OsdTrnBankAlert/GetAllocatedDetail";i.getparams(a,e).then(function(e){unlockUI(),t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.transfer_flag=e.data.transfer_flag,t.employee_gid=e.data.employee_gid,t.relationshipmanager_gid=e.data.relationshipmanager_gid,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,unlockUI()});var e={bankalert2allocated_gid:localStorage.getItem("bankalert2allocated_gid")},a="api/OsdTrnRequestApproval/GetRHApprovalDtlsByToken";i.getparams(a,e).then(function(e){t.rhapprovaldetails=e.data.rhapprovaldetails,unlockUI()})}var b=this;b.title="osdTrnRHApprovalViewController";var y=window.location.href,h=y.split("?id=");h[1];k(),t.rh_approve=function(){var e={rh_remarks:t.rh_txtremarks,bankalertrefundapprl_gid:t.bankalertrefundapprl_gid},a="api/OsdTrnRequestApproval/PostRHApprovalUpdate";lockUI(),i.post(a,e).then(function(e){unlockUI(),1==e.data.status?(d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),n.go("app.myApproval"),k()):d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3})})},t.rh_reject=function(){var e={rh_remarks:t.rh_txtremarks,bankalertrefundapprl_gid:t.bankalertrefundapprl_gid},a="api/OsdTrnRequestApproval/PostRHApprovalReject";lockUI(),i.post(a,e).then(function(e){unlockUI(),1==e.data.status?(d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),n.go("app.myApproval"),k()):d.alert(e.data.message,{status:"warning",pos:"top-center",timeout:3e3})})},t.back=function(){n.go("app.myApproval")}}angular.module("angle").controller("osdTrnRHApprovalViewController",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g){function f(){var e="api/OsdTrnServiceRequest/GetEmployees";i.get(e).then(function(e){t.employee_list=e.data.employee_list,unlockUI()});var e="api/OsdTrnServiceRequest/tempdelete";i.get(e).then(function(e){});var e="api/OsdMstDepartmentManagement/GetActivaterequestdept";lockUI(),i.get(e).then(function(e){t.deptmasterlist=e.data.deptlist,unlockUI()})}var v=this;v.title="osdTrnServiceRequestAdd";var k=g.decryptURL(c.search().hash),b=k.lspage;f(),t.titlename=function(e){e.length>=150?t.message="Maximum 150 characters Length":t.message=""},t.onselectdept=function(e){var a={department_gid:e.department_gid},n="api/OsdMstDepartmentManagement/GetDeptActivityList";lockUI(),i.getparams(n,a).then(function(e){unlockUI(),t.activity_list=e.data.activitydtl})},t.submitserviceRequest=function(){var e={activitymaster_gid:t.cboactivity.activitymaster_gid,activity_name:t.cboactivity.activity_name,request_title:t.request_title,request_description:t.request_description,tagmemberdtl:t.tagmember_list,department_gid:t.cbodepartment.department_gid,department_name:t.cbodepartment.department_name};lockUI();var a="api/OsdTrnServiceRequest/PostServiceRequest";i.post(a,e).then(function(e){1==e.data.status?(d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),n.go("app.osdTrnServiceRequestSummary")):(d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},t.ServiceRequestDocumentUpload=function(){var e=document.getElementById("file");if(e.files.length>0){for(var a=new FormData,n=0;n<=e.files.length-1;n++){a.append(e.files[n].name,e.files[n]),t.uploadfrm=a;var r=e.files.item(n).name,o=(e.files.item(n).size,g.fnCheckValidDocType(r,"Default"));if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("project_flag","Default"),lockUI();var l="api/OsdTrnServiceRequest/RequestDocumentUpload";i.postFile(l,t.uploadfrm).then(function(e){$("#file").val(""),t.upload_list=e.data.upload_list,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else d.alert("Please select a file.","info")},t.uploaddocumentcancel=function(e){lockUI();var a={tmp_documentGid:e},n="api/OsdTrnServiceRequest/GettmpDocumentDelete";i.getparams(n,a).then(function(e){t.upload_list=e.data.upload_list,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},t.downloads=function(e,t){_.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)_.Downloaddocument(e,t[a])},t.cancel=function(){"myrequest"==b?c.url("app/osdTrnServiceRequestSummary"):"taggedrequest"==b?c.url("app/osdTrnTaggedRequestSummary"):"forwardrequest"==b?c.url("app/osdTrnForwardTransferSummary"):"reopenactivity"==b?c.url("app/osdTrnReopenRequestSummary"):"rejectrequest"==b?c.url("app/osdTrnReopenRequestSummary"):"closerequest"==b&&c.url("app/osdTrnCloseRequestSummary")},t.documentviewer=function(e,t){lockUI();var a=g.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void _.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnServiceRequestAdd",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){t.BankAlert_View=!1,t.servicerequest_gid=y,"Y"==h?(t.BankAlert_View=!0,t.osd_View=!1):(t.BankAlert_View=!1,t.osd_View=!0),t.trustAsHtml=function(e){return _.trustAsHtml(e)};var e="api/OsdTrnBankAlert/GetAllocatedDtl",a={bankalert2allocated_gid:T,customer_gid:q};i.getparams(e,a).then(function(e){t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urn,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonal_head,t.lblbusiness_head=e.data.business_head,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonal_riskmanagerName,t.lblriskmanager_name=e.data.riskmanager_name,t.lblriskMonitoring_Name=e.data.riskMonitoring_Name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,unlockUI()});var e="api/OsdTrnBankAlert/GetunreconAllocatedDetail",a={bankalert2allocated_gid:T,customer_gid:q,customer_urn:U};i.getparams(e,a).then(function(e){t.ticketref_no=e.data.ticketref_no,t.lblbank_name=e.data.bank_name,t.lblcustomer_refno=e.data.customer_urn,t.lblbranch_name=e.data.branch_name,t.lblcr_dr=e.data.cr_dr,t.lbltransc_value=e.data.transact_val,t.lblremarks=e.data.remarks,t.lbltransc_balance=e.data.transc_balance,t.lblacc_no=e.data.acc_no,t.lbltrn_date=e.data.trn_date,t.lblvalue_date=e.data.value_date,t.lblpayment_date=e.data.payment_date,t.lbltransact_particulars=e.data.transact_particulars,t.lbldebit_amt=e.data.debit_amt,t.lblcredit_amt=e.data.credit_amt,t.lblchq_no=e.data.chq_no,t.lblcreated_by=e.data.created_by,t.lblbrs_flag=e.data.brs_flag,t.lblsource=e.data.source,t.lblallocated_status=e.data.allocated_status,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblkotakAPI_flag=e.data.kotakAPI_flag});var a={banktransc_gid:t.ticketref_no},e="api/OsdTrnBankAlert/GetUnReconUploadedDoc";i.getparams(e,a).then(function(e){t.uploaddocument1=e.data.MdlDocDetails,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath});var e="api/OsdTrnBankAlert/GetRMStatusDtl",a={bankalert2allocated_gid:T};i.getparams(e,a).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath}),t.completedflag=S,t.servicerequest_gid=y,lockUI();var n={servicerequest_gid:y},e="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(e,n).then(function(e){t.request_refno=e.data.request_refno,t.raised_date=e.data.raised_date,t.raised_by=e.data.raised_by,t.raised_department=e.data.raised_department,t.activity_name=e.data.activity_name,t.request_title=e.data.request_title,t.request_description=e.data.request_description,t.request_status=e.data.request_status,t.servicerequestdocumentdtl=e.data.servicerequestdocumentdtl,t.tagmemberdtl=e.data.tagmemberdtl,t.assigned_team=e.data.assigned_team,t.assigned_to=e.data.assigned_to,t.rejected_flag=e.data.rejected_flag,t.cancel_flag=e.data.cancel_flag,t.closed_flag=e.data.closed_flag,"Y"==t.rejected_flag||"Y"==t.cancel_flag||"Y"==t.completedflag||"Y"==t.closed_flag?t.fileuploaddtls=!1:t.fileuploaddtls=!0,"Y"==t.rejected_flag||"Y"==t.cancel_flag?t.communicationdtls=!1:t.communicationdtls=!0});var e="api/OsdTrnMyTicket/GetApprovalDtls";i.getparams(e,n).then(function(e){t.approvaldetails=e.data.approvaldetails,t.employee_gid=e.data.employee_gid});var e="api/OsdTrnMyTicket/GetAllotted360";i.getparams(e,n).then(function(e){t.forwarddocumentdtl=e.data.forwarddocumentdtl,t.forward_remarks=e.data.forward_remarks,t.forward_date=e.data.forward_date,t.forward_to=e.data.forward_to,t.forward_flag=e.data.forward_flag,t.reopen_flag=e.data.reopen_flag,t.alloteddocumentdtl=e.data.alloteddocumentdtl,t.reopenrequestdocumentdtl=e.data.reopenrequestdocumentdtl,t.forwardreopendocumentdtl=e.data.forwardreopendocumentdtl,t.reopendtl=e.data.reopendtl,t.reopened_date=e.data.reopened_date,t.reopen_reason=e.data.reopen_reason,t.employee_mobileno=e.data.employee_mobileno,t.level_one=e.data.level_one,t.employee_number=e.data.employee_number,t.lblallotfilename=e.data.allofilename,t.lblallotfilepath=e.data.allofilepath,t.lblrofilename=e.data.rofilename,t.lblrofilepath=e.data.rofilepath,t.lblfrfilename=e.data.frfilename,t.lblfrfilepath=e.data.frfilepath,"Y"==t.reopen_flag?(t.reopendetails=!0,t.reqdtls=!1):(t.reopendetails=!1,t.reqdtls=!0),"Y"==t.forward_flag?(t.forward=!1,t.forwarddtls=!0):(t.forward=!0,t.forwarddtls=!1)});var e="api/OsdTrnMyTicket/GetRequestorlist";i.getparams(e,n).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var e="api/OsdTrnMyTicket/GetMultipleForward";i.getparams(e,n).then(function(e){t.forwarddtl=e.data.forwarddtl,t.forwardreopendtl=e.data.forwardreopendtl,unlockUI()});var n={servicerequest_gid:y},e="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(e,n).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl,t.completed_flag=e.data.completed_flag,t.closed_by=e.data.closed_by,t.closed_date=e.data.closed_date,t.closed_flag=e.data.closed_flag,"Y"==t.closed_flag?t.closeddtls=!0:t.closeddtls=!1,"Y"==t.completed_flag?t.completeddtls=!0:t.completeddtls=!1});var n={servicerequest_gid:y},e="api/OsdTrnMyTicket/GetCompletedDetails";i.getparams(e,n).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.complefilename=e.data.complefilename,t.complefilepath=e.data.complefilepath,unlockUI()});var e="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityList";i.getparams(e,n).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list});var e="api/OsdTrnMyTicket/GetservicerequestactivityhistoryList";i.getparams(e,n).then(function(e){t.servicerequestactivityhistory_list=e.data.servicerequestactivityhistory_list});var e="api/OsdTrnTicketManagement/GetAllocateManagerlist";i.getparams(e,n).then(function(e){t.allocatelistdtl=e.data.allocatelistdtl})}var k=this;k.title="osdTrnServiceRequestForwardView";var b=f.decryptURL(c.search().hash),y=b.servicerequest_gid,h=b.bankalert_flag,T=b.bankalert2allocated_gid,q=b.customer_gid,U=b.customer_urn,S=(b.lstab,b.CompletedFlag);v(),t.download=function(e,t){g.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.Udownloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.COMdownloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.uploadallocation=function(e,a,n){var r={name:e[0].name,file:e[0]},o=f.fnCheckValidDocType(e[0].name,"Default");if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var l=new FormData;l.append("fileupload",r.file),l.append("file_name",r.name),l.append("document_name",t.documentname),l.append("document_title",t.txtdocument_title),l.append("servicerequest_gid",y),l.append("project_flag","Default"),t.uploadfrm=l;var s="api/OsdTrnMyTicket/ConversationDocUpload";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",1==e.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:y};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})}else unlockUI(),d.alert("File Format Not Supported!")})},t.downloadsdocument=function(e,t){g.Downloaddocument(e,t)},t.sendrequestorclick=function(){var e={servicerequest_gid:y,remarks:t.txtqueries};lockUI();var a="api/OsdTrnServiceRequest/PostSendRequestorForward";i.post(a,e).then(function(e){if(unlockUI(),1==e.data.status){var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:y};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()}),t.txtqueries="";
}else d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})},t.downloads=function(e,t){g.Downloaddocument(e,t)},t.ServiceRequestForwardDocUpload=function(){lockUI();var e=document.getElementById("file");if(e.files.length>0){for(var a=new FormData,n=0;n<=e.files.length-1;n++){a.append(e.files[n].name,e.files[n]),t.uploadfrm=a;e.files.item(n).name,e.files.item(n).size}a.append("servicerequest_gid",y),a.append("project_flag","Default");var r="api/OsdTrnServiceRequest/ForwardViewDocUpload";i.postFile(r,t.uploadfrm).then(function(e){$("#file").val(""),t.forwarddocumentdtl=e.data.forwarddocumentdtl,fwdfilename=e.data.fwdfilename,fwdfilepath=e.data.fwdfilepath,unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else d.alert("Please select a file.","info")},t.uploaddocumentdelete=function(e){lockUI();var a={forwardreqdocument_gid:e},n="api/OsdTrnServiceRequest/GetTrnForwardDocDelete";i.getparams(n,a).then(function(e){t.forwarddocumentdtl=e.data.forwarddocumentdtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},t.requestClosed=function(){var e={servicerequest_gid:y};lockUI();var t="api/OsdTrnServiceRequest/GetClosedRequest";i.getparams(t,e).then(function(e){1==e.data.status?(d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),c.url("app/osdTrnServiceRequestSummary")):(d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},t.requestback=function(){c.url("app/osdTrnForwardTransferSummary")},t.cancelclick=function(){t.txtqueries=""},t.tickethistory=function(e){var t=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityHistory?hash="+f.encryptURL("servicerequest_gid="+e);window.open(t,"_blank")},t.ticketreopenhistory=function(e,t){var a=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityReopenHistory?hash="+f.encryptURL("requestreopen_gid="+e+"&servicerequest_gid="+t);window.open(a,"_blank")},t.TagMemberChat=function(){function e(e,a){e.ok=function(){t.close("closed")};var n={servicerequest_gid:y},r="api/OsdTrnServiceRequest/TagEmployee";i.getparams(r,n).then(function(t){e.employee_list=t.data.employee_list});var r="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(r,n).then(function(t){e.tagmemberdtl=t.data.tagmemberdtl,e.raised_date=t.data.raised_date}),e.TagMemberSubmit=function(){var a={servicerequest_gid:y,tagmemberdtl:e.tagmember_list};lockUI();var n="api/OsdTrnServiceRequest/PostTagMemberInChat";i.post(n,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),v(),unlockUI()):(t.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),v(),unlockUI())})},e.ok=function(){t.close("closed")}}var t=a.open({templateUrl:"/tagmemberinchat.html",controller:e,backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},t.request_remarks=function(e){function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),i.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}a.open({templateUrl:"/RequestRemarks.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=f.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void g.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnServiceRequestForwardView",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnServiceRequest/GetServiceRequestSummary";i.get(e).then(function(e){t.servicerequestsummary=e.data.servicerequestdtl,unlockUI()});var e="api/OsdTrnServiceRequest/GetServiceRequestCount";i.get(e).then(function(e){t.request_count=e.data.request_count,t.tagged_count=e.data.tagged_count,t.forward_count=e.data.forward_count,t.reopen_count=e.data.reopen_count,t.close_count=e.data.close_count,t.Reject_count=e.data.reject_count,t.cancel_count=e.data.cancel_count,unlockUI()})}var f=this;f.title="osdTrnServiceRequestSummary";c.search().lstab;g(),lockUI(),t.my_request=function(){n.go("app.osdTrnServiceRequestSummary")},t.tagged_request=function(){n.go("app.osdTrnTaggedRequestSummary")},t.forward_request=function(){n.go("app.osdTrnForwardTransferSummary")},t.Reopen_request=function(){n.go("app.osdTrnReopenRequestSummary")},t.Reject_request=function(){n.go("app.osdTrnRejectedRequestSummary")},t.Close_request=function(){n.go("app.osdTrnCloseRequestSummary")},t.Cancel_request=function(){n.go("app.osdTrnCancelledRequestSummary")},t.raiserequest=function(){c.url("app/osdTrnServiceRequestAdd?hash="+_.encryptURL("lspage=myrequest"))},t.viewservicerequest=function(e,t){var a={servicerequest_gid:e},n="api/OsdTrnServiceRequest/GetServiceRequestViewUpdate";if(lockUI(),i.getparams(n,a).then(function(e){1==e.data.status?unlockUI():unlockUI()}),"Completed"==t){var r="Y";c.url("app/osdTrnServiceRequestView?hash="+_.encryptURL("servicerequest_gid="+e+"&CompletedFlag="+r+"&lspage=myactivity"))}else if("Closed"==t){var r="C";c.url("app/osdTrnServiceRequestView?hash="+_.encryptURL("servicerequest_gid="+e+"&CompletedFlag="+r+"&lspage=myactivity"))}else{var r="N";c.url("app/osdTrnServiceRequestView?hash="+_.encryptURL("servicerequest_gid="+e+"&CompletedFlag="+r+"&lspage=myactivity"))}},t.cancelservicerequest=function(e){var t={servicerequest_gid:e};o.swal({title:"Are you sure?",text:"Do You Want To Cancel the Record ?",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, Cancel it!",closeOnConfirm:!1},function(e){if(e){var a="api/OsdTrnServiceRequest/ServiceRequestDelete";i.getparams(a,t).then(function(e){1==e.data.status?(unlockUI(),g(),n.go("app.osdTrnCancelledRequestSummary")):(d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),g())}),o.swal("Cancelled Successfully!")}})},t.getApprovalRequest=function(e){function t(t,a){var o={servicerequest_gid:e},s="api/OsdTrnMyTicket/TmpAllMembersDeleteFn";i.getparams(s,o).then(function(e){});var o={servicerequest_gid:e},s="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(s,o).then(function(e){t.employee_list=e.data.employeelist});var o={servicerequest_gid:e},s="api/OsdTrnMyTicket/TmpAllMembersDeleteFn";i.getparams(s,o).then(function(e){}),t.ok=function(){var t={servicerequest_gid:e},a="api/OsdTrnMyTicket/TmpAllMembersDeleteFn";i.getparams(a,t).then(function(e){}),r.close("closed")},t.ApprovalMembercancel=function(a){var n={tmpapprovalmember_gid:a,servicerequest_gid:e},r="api/OsdTrnMyTicket/TmpApprovalMembersDelete";i.post(r,n).then(function(a){t.approvalmember=a.data.approvalmember;var n={servicerequest_gid:e},r="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeelist})})},t.coreChanged=function(a){var r={approvalgid:t.cboapproval_member.employee_gid,approvalname:t.cboapproval_member.employee_name,servicerequest_gid:e};lockUI();var o="api/OsdTrnMyTicket/TempApprovalMember";i.post(o,r).then(function(a){if(1==a.data.status){d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),t.current=n.current.name,l.store("dataldCtrl",t),t.cboapproval_member="";var r={servicerequest_gid:e},o="api/OsdTrnMyTicket/TmpApprovalMembersView";i.getparams(o,r).then(function(e){t.approvalmember=e.data.approvalmember});var o="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(o,r).then(function(e){t.employee_list=e.data.employeelist})}else d.alert(a.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},t.getapprovalclick=function(){var a={approval_remarks:t.approval_remarks,approval_type:t.approval_type,approval_basedon:"HA",servicerequest_gid:e,approvalrequest_flag:"Y"};lockUI();var n="api/OsdTrnMyTicket/PostApprovalGet";i.post(n,a).then(function(e){unlockUI(),1==e.data.status?(r.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),g()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var r=a.open({templateUrl:"/getApprovalmodal.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.getReApprovalRequest=function(e){function t(t,a){var r="api/employee/employee";i.get(r).then(function(e){t.employee_list=e.data.employee_list}),t.ok=function(){n.close("closed")},t.getreapprovalclick=function(){var a={approvalname:t.cboapproval_member.employee_name,approvalgid:t.cboapproval_member.employee_gid,approval_remarks:t.approval_remarks,approval_type:"Approval",approval_basedon:"RA",servicerequest_gid:e,approvalrequest_flag:"Y"};lockUI();var r="api/OsdTrnMyTicket/PostApprovalGet";i.post(r,a).then(function(e){unlockUI(),1==e.data.status?(n.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),g()):(n.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var n=a.open({templateUrl:"/getReApprovalmodal.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("osdTrnServiceRequestSummary",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g){function f(){t.completedflag=y,t.servicerequest_gid=b,lockUI();var e={servicerequest_gid:b},a="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(a,e).then(function(e){t.request_refno=e.data.request_refno,t.raised_date=e.data.raised_date,t.raised_by=e.data.raised_by,t.raised_department=e.data.raised_department,t.activity_name=e.data.activity_name,t.request_title=e.data.request_title,t.request_description=e.data.request_description,t.request_status=e.data.request_status,t.servicerequestdocumentdtl=e.data.servicerequestdocumentdtl,t.reopenrequestdocumentdtl=e.data.reopenrequestdocumentdtl,t.tagmemberdtl=e.data.tagmemberdtl,t.transfer_flag=e.data.transfer_flag,t.assigned_team=e.data.assigned_team,t.assigned_to=e.data.assigned_to,t.employee_mobileno=e.data.employee_mobileno,t.employee_number=e.data.employee_number,t.level_one=e.data.level_one,t.lblsrfilename=e.data.srfilename,t.lblsrfilepath=e.data.srfilepath,t.reopenfilename=e.data.reopenfilename,t.reopenfilepath=e.data.reopenfilepath});var a="api/OsdTrnBankAlert/GetunreconAllocatedDetail",n={bankalert2allocated_gid:h,customer_gid:T,customer_urn:q};i.getparams(a,n).then(function(e){t.ticketref_no=e.data.ticketref_no,t.lblbank_name=e.data.bank_name,t.lblcustomer_refno=e.data.customer_urn,t.lblbranch_name=e.data.branch_name,t.lblcr_dr=e.data.cr_dr,t.lbltransc_value=e.data.transact_val,t.lblremarks=e.data.remarks,t.lbltransc_balance=e.data.transc_balance,t.lblacc_no=e.data.acc_no,t.lbltrn_date=e.data.trn_date,t.lblvalue_date=e.data.value_date,t.lblpayment_date=e.data.payment_date,t.lbltransact_particulars=e.data.transact_particulars,t.lbldebit_amt=e.data.debit_amt,t.lblcredit_amt=e.data.credit_amt,t.lblchq_no=e.data.chq_no,t.lblcreated_by=e.data.created_by,t.lblbrs_flag=e.data.brs_flag,t.lblsource=e.data.source,t.lblallocated_status=e.data.allocated_status,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblkotakAPI_flag=e.data.kotakAPI_flag});var n={banktransc_gid:t.ticketref_no},a="api/OsdTrnBankAlert/GetUnReconUploadedDoc";i.getparams(a,n).then(function(e){t.uploaddocument1=e.data.MdlDocDetails,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath});var a="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(a,e).then(function(e){t.rejected_flag=e.data.rejected_flag,t.reopenrequestdocumentdtl=e.data.reopenrequestdocumentdtl,t.cancel_flag=e.data.cancel_flag,t.closed_flag=e.data.closed_flag,t.cancel_date=e.data.cancel_date,t.rejected_date=e.data.rejected_date,t.rejected_by=e.data.rejected_by,t.rejected_remarks=e.data.rejected_remarks,t.reopen_flag=e.data.reopen_flag,"Y"==t.reopen_flag?(t.reopendetails=!0,t.reqdtls=!1):(t.reopendetails=!1,t.reqdtls=!0),t.completed_flag=e.data.completed_flag,"Y"==t.completed_flag?t.completeddtls=!1:t.completeddtls=!0,"Y"==t.cancel_flag?t.canceldtls=!0:t.canceldtls=!1,"Y"==t.rejected_flag?t.Rejectdtls=!0:t.Rejecteddtls=!1,"Y"==t.rejected_flag||"Y"==t.cancel_flag||"Y"==t.completedflag||"Y"==t.closed_flag?t.fileuploaddtls=!1:t.fileuploaddtls=!0,"Y"==t.rejected_flag||"Y"==t.cancel_flag?t.communicationdtls=!1:t.communicationdtls=!0});var a="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityList";i.getparams(a,e).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list});var a="api/OsdTrnMyTicket/GetservicerequestactivityhistoryList";i.getparams(a,e).then(function(e){t.servicerequestactivityhistory_list=e.data.servicerequestactivityhistory_list});var a="api/OsdTrnMyTicket/GetAllotted360";i.getparams(a,e).then(function(e){t.reopenrequestdocumentdtl=e.data.reopenrequestdocumentdtl,t.forwarddocumentdtl=e.data.forwarddocumentdtl,t.forward_remarks=e.data.forward_remarks,t.forward_date=e.data.forward_date,t.forward_to=e.data.forward_to,t.forward_flag=e.data.forward_flag,t.reopendtl=e.data.reopendtl});var a="api/OsdTrnMyTicket/GetApprovalDtls";i.getparams(a,e).then(function(e){t.approvaldetails=e.data.approvaldetails});var a="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(a,e).then(function(e){t.transferlistdtl=e.data.transferlistdtl,unlockUI()});var a="api/OsdTrnMyTicket/GetRequestorlist";i.getparams(a,e).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var e={servicerequest_gid:b},a="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(a,e).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl,t.completed_flag=e.data.completed_flag,t.closed_by=e.data.closed_by,t.closed_date=e.data.closed_date,t.closed_flag=e.data.closed_flag,"Y"==t.closed_flag?t.closeddtls=!0:t.closeddtls=!1,"Y"==t.completed_flag?t.completeddtls=!0:t.completeddtls=!1});var a="api/OsdTrnBankAlert/GetAllocatedDetail",n={bankalert2allocated_gid:h,customer_gid:T,customer_urn:q};i.getparams(a,n).then(function(e){if(t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonal_riskmanagerName,t.lblriskmanager_name=e.data.riskmanager_name,t.lblriskMonitoring_Name=e.data.riskMonitoring_Name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,t.transfer_flag=e.data.transfer_flag,"Completed"==e.data.operation_status||"Assigned"==e.data.operation_status){var a="api/OsdTrnBankAlert/GetOperationStatusDtl",n={bankalert2allocated_gid:h};i.getparams(a,n).then(function(e){t.lblassigned_remarks=e.data.assigned_remarks,t.lblassigned_date=e.data.assigned_date,t.lblassigned_toname=e.data.assigned_toname,t.lblassigned_by=e.data.assigned_by,t.document_list=e.data.rmdocument_list});var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:t.servicerequest_gid};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,unlockUI()});var n={servicerequest_gid:t.servicerequest_gid},a="api/OsdTrnMyTicket/GetCompletedDetails";i.getparams(a,n).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.complefilename=e.data.complefilename,t.complefilepath=e.data.complefilepath,unlockUI()})}var n={servicerequest_gid:t.servicerequest_gid},a="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(a,n).then(function(e){t.transferlistdtl=e.data.transferlistdtl,t.transferlistdtlreopen=e.data.transferlistdtlreopen,unlockUI()}),unlockUI()});var a="api/OsdTrnBankAlert/GetRMStatusDtl",n={bankalert2allocated_gid:h};i.getparams(a,n).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath});var a="api/employee/Employee";i.get(a).then(function(e){t.employee_list=e.data.employee_list});var a="api/OsdTrnBankAlert/GetticketTransferLog",n={bankalert2allocated_gid:h};i.getparams(a,n).then(function(e){t.transferto_name=e.data.relationshipmanager_name,t.transferedinitiated_by=e.data.transferedinitiated_by,t.transferinitiated_date=e.data.transferinitiated_date,t.transfer_type=e.data.transfer_type,t.transfer_remarks=e.data.transfer_remarks});var e={servicerequest_gid:b},a="api/OsdTrnMyTicket/GetCompletedDetails";i.getparams(a,e).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.complefilename=e.data.complefilename,t.complefilepath=e.data.complefilepath,unlockUI()});var e={servicerequest_gid:b},a="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(a,e).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl,t.completed_flag=e.data.completed_flag,t.closed_by=e.data.closed_by,t.closed_date=e.data.closed_date,t.closed_flag=e.data.closed_flag,t.bankalert_flag=e.data.bankalert_flag,"Y"==t.closed_flag?t.closeddtls=!0:t.closeddtls=!1,"Y"==t.completed_flag?t.completeddtls=!0:t.completeddtls=!1})}var v=this;v.title="osdTrnServiceRequestTaggedView";var k=g.decryptURL(c.search().hash),b=k.servicerequest_gid,y=(k.lstab,k.CompletedFlag),h=(k.bankalert_flag,k.bankalert2allocated_gid),T=k.customer_gid,q=k.customer_urn;f(),t.uploadallocation=function(e,a,n){var r={name:e[0].name,file:e[0]},o=g.fnCheckValidDocType(e[0].name,"Default");if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var l=new FormData;l.append("fileupload",r.file),l.append("file_name",r.name),l.append("document_name",t.documentname),l.append("document_title",t.txtdocument_title),l.append("servicerequest_gid",b),l.append("project_flag","Default"),t.uploadfrm=l;var s="api/OsdTrnMyTicket/ConversationDocUpload";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",1==e.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:b};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})}else unlockUI(),d.alert("File Format Not Supported!","danger")})},t.downloadsdocument=function(e,t){_.Downloaddocument(e,t)},t.sendrequestorclick=function(){var e={servicerequest_gid:b,remarks:t.txtqueries};lockUI();var a="api/OsdTrnMyTicket/PostSendRequestor";i.post(a,e).then(function(e){if(unlockUI(),1==e.data.status){var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:b};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()}),t.txtqueries=""}else d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})},t.downloads=function(e,t){_.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)_.Downloaddocument(e,t[a])},t.COMdownloadall=function(e,t){for(var a=0;a<t.length;a++)_.Downloaddocument(e,t[a])},t.requestClosed=function(){var e={servicerequest_gid:b};lockUI();var t="api/OsdTrnServiceRequest/GetClosedRequest";i.getparams(t,e).then(function(e){1==e.data.status?(d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),c.url("app/osdTrnServiceRequestSummary")):(d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},t.TaggedBack=function(){c.url("app/osdTrnTaggedRequestSummary")},t.cancelclick=function(){t.txtqueries=""},t.TagMemberChat=function(){function e(e,a){e.ok=function(){t.close("closed")};var n={servicerequest_gid:b},r="api/OsdTrnServiceRequest/TagEmployee";i.getparams(r,n).then(function(t){e.employee_list=t.data.employee_list});var r="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(r,n).then(function(t){e.tagmemberdtl=t.data.tagmemberdtl,e.raised_date=t.data.raised_date}),e.TagMemberSubmit=function(){var a={servicerequest_gid:b,tagmemberdtl:e.tagmember_list};lockUI();var n="api/OsdTrnServiceRequest/PostTagMemberInChat";i.post(n,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),f(),unlockUI()):(t.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.ok=function(){t.close("closed")}}var t=a.open({templateUrl:"/tagmemberinchat.html",controller:e,backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},t.tickethistory=function(e){var t=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityHistory?hash="+g.encryptURL("servicerequest_gid="+e);window.open(t,"_blank")},t.ticketreopenhistory=function(e,t){var a=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityReopenHistory?hash="+g.encryptURL("requestreopen_gid="+e+"&servicerequest_gid="+t);window.open(a,"_blank")},t.request_remarks=function(e){function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),i.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}a.open({templateUrl:"/RequestRemarks.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=g.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void _.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnServiceRequestTaggedView",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f,v,k,b,y,h){function T(){t.tdshow=!1,t.servicerequest_gid=h.decryptURL(c.search().hash).servicerequest_gid,t.completedflag=h.decryptURL(c.search().hash).CompletedFlag,t.BankAlert_View=!1,t.trustAsHtml=function(e){return b.trustAsHtml(e)},"Y"==w?(t.BankAlert_View=!0,t.osd_View=!1):(t.BankAlert_View=!1,t.osd_View=!0);var e="api/OsdTrnBankAlert/GetunreconAllocatedDetail",a={bankalert2allocated_gid:I,customer_gid:M,customer_urn:A};i.getparams(e,a).then(function(e){t.ticketref_no=e.data.ticketref_no,t.lblbank_name=e.data.bank_name,t.lblcustomer_refno=e.data.customer_urn,t.lblbranch_name=e.data.branch_name,t.lblcr_dr=e.data.cr_dr,t.lbltransc_value=e.data.transact_val,t.lblremarks=e.data.remarks,t.lbltransc_balance=e.data.transc_balance,t.lblacc_no=e.data.acc_no,t.lbltrn_date=e.data.trn_date,t.lblvalue_date=e.data.value_date,t.lblpayment_date=e.data.payment_date,t.lbltransact_particulars=e.data.transact_particulars,t.lbldebit_amt=e.data.debit_amt,t.lblcredit_amt=e.data.credit_amt,t.lblchq_no=e.data.chq_no,t.lblcreated_by=e.data.created_by,t.lblbrs_flag=e.data.brs_flag,t.source=e.data.source,t.lblallocated_status=e.data.allocated_status,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblkotakAPI_flag=e.data.kotakAPI_flag});var e="api/OsdTrnBankAlert/GetAllocatedDetail",a={bankalert2allocated_gid:I,customer_gid:M,customer_urn:A};i.getparams(e,a).then(function(e){t.lblkotakAPI_flag=e.data.kotakAPI_flag,t.lbldetailsreceived_at=e.data.detailsreceived_at,t.lblsource=e.data.source,t.lblMaster_Acc_No=e.data.Master_Acc_No,t.lblRemitt_Info=e.data.Remitt_Info,t.lblRemit_Name=e.data.Remit_Name,t.lblRemit_Ifsc=e.data.Remit_Ifsc,t.lblAmount=e.data.Amount,t.lblTxn_Ref_No=e.data.Txn_Ref_No,t.lblUtr_No=e.data.Utr_No,t.lblPay_Mode=e.data.Pay_Mode,t.lblE_Coll_Acc_No=e.data.E_Coll_Acc_No,t.lblRemit_Ac_Nmbr=e.data.Remit_Ac_Nmbr,t.lblCreditdateandtime=e.data.Creditdateandtime,t.lblTxn_Date=e.data.Txn_Date,t.lblBene_Cust_Acname=e.data.Bene_Cust_Acname,t.lblREF1=e.data.REF1,t.lblREF2=e.data.REF2,t.lblREF3=e.data.REF3,t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urnname,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonalhead_name,t.lblbusiness_head=e.data.businesshead_name,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonal_riskmanagerName,t.lblriskmanager_name=e.data.riskmanager_name,t.lblriskMonitoring_Name=e.data.riskMonitoring_Name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,t.lbloperation_status=e.data.operation_status,t.servicerequest_gid=e.data.servicerequest_gid,t.lblcustomer_name=e.data.customername_application,t.lblvertical=e.data.vertical_name,t.lblconstitution=e.data.constitution_name,t.lblcontact_person=e.data.contactpersonfirst_name,t.lblrm_name=e.data.drm_name,t.lblrelationshipmanager_name=e.data.relationship_managername,t.lblcluster_manager=e.data.clustermanager_name,t.lblcredit_manager=e.data.creditmanager_name,t.lblzonal_riskmanagerName=e.data.zonalriskmanager_name,t.lblriskmanager_name=e.data.risk_managername,t.lblriskMonitoring_Name=e.data.headriskmonitoring_name,t.lblregional_head=e.data.regionalhead_name,t.lblcredithead_name=e.data.credithead_name,t.lblcreditnationalmanager_name=e.data.creditnationalmanager_name,t.lblcreditregionalmanager_name=e.data.creditregionalmanager_name,t.transfer_flag=e.data.transfer_flag});var e="api/OsdTrnBankAlert/GetAllocatedDtl",a={bankalert2allocated_gid:I,customer_gid:M};lockUI(),i.getparams(e,a).then(function(e){t.lblticketref_no=e.data.ticketref_no,t.lblemail_from=e.data.email_from,t.lblemail_date=e.data.email_date,t.lblemail_subject=e.data.email_subject,t.lblemail_content=e.data.email_content,t.lblaging=e.data.aging,t.lblrelationshipmanager_name=e.data.relationshipmanager_name,t.lblallocated_status=e.data.allocated_status,t.lblcustomer_urn=e.data.customer_urn,t.lblcustomer_name=e.data.customer_name,t.lblvertical=e.data.vertical,t.lblconstitution=e.data.constitution,t.lblcontact_person=e.data.contact_person,t.lblzonal_head=e.data.zonal_head,t.lblbusiness_head=e.data.business_head,t.lblrm_name=e.data.rm_name,t.lblcluster_manager=e.data.cluster_manager,t.lblcredit_manager=e.data.credit_manager,t.lblzonal_riskmanagerName=e.data.zonal_riskmanagerName,t.lblriskmanager_name=e.data.riskmanager_name,t.lblriskMonitoring_Name=e.data.riskMonitoring_Name,t.lblmobile_no=e.data.mobile_no,t.lbladdress_type=e.data.address_type,t.lbladdressline1=e.data.addressline1,t.lbladdressline2=e.data.addressline2,t.lblcity=e.data.city,t.lblstate=e.data.state,t.lbltaluka=e.data.taluka,t.lbldistrict=e.data.district,t.lblpostal_code=e.data.postal_code,t.lblcountry=e.data.country,t.lblemail_cc=e.data.email_cc,t.lblemail_bcc=e.data.email_bcc,t.lbldocument_path=e.data.document_path,t.lbldocument_name=e.data.document_name,t.lblemail_to=e.data.email_to,t.lblfrom_mailaddress=e.data.from_mailaddress,unlockUI()});var a={banktransc_gid:R},e="api/OsdTrnBankAlert/GetUnReconUploadedDoc";i.getparams(e,a).then(function(e){t.uploaddocument1=e.data.MdlDocDetails,t.filename=e.data.filename,t.filepath=e.data.filepath});var e="api/OsdTrnBankAlert/GetRMStatusDtl",a={bankalert2allocated_gid:I};i.getparams(e,a).then(function(e){t.lblrm_remarks=e.data.rm_remarks,t.lblrm_status=e.data.rm_status,t.lblupdated_date=e.data.updated_date,t.lblupdated_by=e.data.updated_by,t.rmdocument_list=e.data.rmdocument_list,
t.lblrmhfilename=e.data.rmhfilename,t.lblrmhfilepath=e.data.rmhfilepath,t.refund=t.lblrm_status.replace("'","")});var n={servicerequest_gid:S};lockUI();var e="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(e,n).then(function(e){unlockUI(),t.request_refno=e.data.request_refno,t.raised_date=e.data.raised_date,t.raised_department=e.data.raised_department,t.raised_by=e.data.raised_by,t.activity_name=e.data.activity_name,t.request_title=e.data.request_title,t.request_description=e.data.request_description,t.request_status=e.data.request_status,t.servicerequestdocumentdtl=e.data.servicerequestdocumentdtl,t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.tagmemberdtl=e.data.tagmemberdtl,t.transfer_flag=e.data.transfer_flag,t.assigned_team=e.data.assigned_team,t.assigned_to=e.data.assigned_to,t.assigned_status=e.data.assigned_status,t.reopenrequestdocumentdtl=e.data.reopenrequestdocumentdtl,t.reopen_reason=e.data.reopen_reason,t.reopened_date=e.data.reopened_date,t.reopen_flag=e.data.reopen_flag,t.reopen_flag=e.data.reopen_flag,t.forward_flag=e.data.forward_flag,t.forward_remarks=e.data.forward_remarks,t.forward_to=e.data.forward_to,t.forward_date=e.data.forward_date,t.closed_by=e.data.closed_by,t.closed_date=e.data.closed_date,t.closed_flag=e.data.closed_flag,t.rejected_flag=e.data.rejected_flag,t.cancel_flag=e.data.cancel_flag,t.cancel_date=e.data.cancel_date,t.rejected_date=e.data.rejected_date,t.rejected_by=e.data.rejected_by,t.rejected_remarks=e.data.rejected_remarks,t.employee_mobileno=e.data.employee_mobileno,t.level_one=e.data.level_one,t.employee_number=e.data.employee_number,t.baselocation_name=e.data.baselocation_name,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,t.reopen1filename=e.data.reopenfilename,t.reopen1filepath=e.data.reopenfilepath,t.comfilename=e.data.comfilename,t.comfilepath=e.data.comfilepath,"Y"==t.reopen_flag?(t.reopendetails=!0,t.reqdtls=!1):(t.reopendetails=!1,t.reqdtls=!0),t.completed_flag=e.data.completed_flag,"Y"==t.completed_flag?t.completeddtls=!1:t.completeddtls=!0,"Y"==t.forward_flag?t.forwarddtls=!0:t.forwarddtls=!1,"Y"==t.closed_flag?t.closeddtls=!1:t.closeddtls=!0,"Y"==t.cancel_flag?t.canceldtls=!0:t.canceldtls=!1,"Y"==t.rejected_flag?t.Rejectdtls=!0:t.Rejecteddtls=!1,"Y"==t.rejected_flag||"Y"==t.cancel_flag||"Y"==t.completed_flag&&"Y"!=t.reopen_flag||"Y"==t.closed_flag?t.fileuploaddtls=!1:t.fileuploaddtls=!0,"Y"==t.rejected_flag||"Y"==t.cancel_flag?t.communicationdtls=!1:t.communicationdtls=!0});var e="api/OsdTrnMyTicket/GetBusinessUnitStatusMyActivityList";i.getparams(e,n).then(function(e){t.businessstatusunitmyactivity_list=e.data.businessstatusunitmyactivity_list});var e="api/OsdTrnMyTicket/GetservicerequestactivityhistoryList";i.getparams(e,n).then(function(e){t.servicerequestactivityhistory_list=e.data.servicerequestactivityhistory_list});var e="api/OsdTrnMyTicket/GetAllotted360";i.getparams(e,n).then(function(e){t.reopenrequestdocumentdtl=e.data.reopenrequestdocumentdtl,t.reopendtl=e.data.reopendtl,t.alloteddocumentdtl=e.data.alloteddocumentdtl,t.forwarddocumentdtl=e.data.forwarddocumentdtl,t.lblallotfilename=e.data.allofilename,t.lblallotfilepath=e.data.allofilepath,t.reopenfilename=e.data.reopenfilename,t.reopenfilepath=e.data.reopenfilepath,t.fwdfilename=e.data.fwdfilename,t.fwdfilepath=e.data.fwdfilepath,t.frfilename=e.data.frfilename,t.frfilepath=e.data.frfilepath});var e="api/OsdTrnMyTicket/GetApprovalDtls";i.getparams(e,n).then(function(e){t.approvaldetails=e.data.approvaldetails,t.employee_gid=e.data.employee_gid});var e="api/OsdTrnMyTicket/GetAssetDtls";i.getparams(e,n).then(function(e){t.assetdetails=e.data.assetdetails,t.employee_gid=e.data.employee_gid});var e="api/OsdTrnMyTicket/Gettempclear";i.getparams(e,n).then(function(e){});var e="api/OsdTrnMyTicket/GetRequestorlist";i.getparams(e,n).then(function(e){t.requestorlist=e.data.requestordtl,t.requestordtlhistory=e.data.requestordtlhistory,unlockUI()});var e="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(e,n).then(function(e){t.transferlistdtl=e.data.transferlistdtl});var e="api/OsdTrnMyTicket/GetMultipleForward";i.getparams(e,n).then(function(e){t.forwarddtl=e.data.forwarddtl,unlockUI()});var e="api/employee/employee";i.get(e).then(function(e){t.employee_list=e.data.employee_list,unlockUI()});var e="api/OsdTrnTicketManagement/GetAllocateManagerlist";i.getparams(e,n).then(function(e){t.allocatelistdtl=e.data.allocatelistdtl});var e="api/OsdTrnTicketManagement/GetAllocateManagerlist";i.getparams(e,n).then(function(e){t.allocatelistdtlreopen=e.data.allocatelistdtlreopen});var e="api/OsdTrnMyTicket/GetCompletedDetails";i.getparams(e,n).then(function(e){t.completed_flag=e.data.completed_flag,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,unlockUI()});var n={servicerequest_gid:S},e="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(e,n).then(function(e){t.tagmemberdtl=e.data.tagmemberdtl,t.completed_flag=e.data.completed_flag,t.closed_by=e.data.closed_by,t.closed_date=e.data.closed_date,t.closed_flag=e.data.closed_flag,"Y"==t.closed_flag?t.closeddtls=!0:t.closeddtls=!1,"Y"==t.completed_flag?t.completeddtls=!0:t.completeddtls=!1});var n={servicerequest_gid:S},e="api/OsdTrnMyTicket/GetCompletedDetails";i.getparams(e,n).then(function(e){t.completerequestdocumentdtl=e.data.completerequestdocumentdtl,t.completed_remarks=e.data.completed_remarks,t.completed_by=e.data.completed_by,t.completed_date=e.data.completed_date,t.lblcompfilename=e.data.compfilename,t.lblcompfilepath=e.data.compfilepath,unlockUI()});var a={bankalert2allocated_gid:I},e="api/OsdTrnRequestApproval/GetRHApprovalDtlsByToken";i.getparams(e,a).then(function(e){t.rhapprovaldetails=e.data.rhapprovaldetails,unlockUI()});var e="api/UnreconciliationManagement/GetAssignedHistory",a={banktransc_gid:R};i.getparams(e,a).then(function(e){t.assignedlist=e.data.assignedlist});var e="api/UnreconciliationManagement/GetTransferredHistory",a={banktransc_gid:R};i.getparams(e,a).then(function(e){t.transferlist=e.data.transferlist})}var q=this;q.title="osdTrnServiceRequestView";var U=h.decryptURL(c.search().hash),S=U.servicerequest_gid,w=U.bankalert_flag,I=U.bankalert2allocated_gid,M=U.customer_gid,A=U.lscustomer_urn,R=U.request_refno,C=U.lspage;U.brs_flag,U.CompletedFlag;T(),t.CancelApprovalPerson=function(e){function n(t,a){t.ok=function(){r.close("closed")},lockUI();var n={approval_token:e},o="api/OsdTrnRequestApproval/GetRequestDtl";lockUI(),i.getparams(o,n).then(function(e){t.request_title=e.data.request_title,t.request_refno=e.data.request_refno,t.activity_name=e.data.activity_name,t.assigned_dtl=e.data.assigned_dtl,t.getapproval_remarks=e.data.getapproval_remarks,t.hierary_level=e.data.hierary_level,t.servicerequest_gid=e.data.servicerequest_gid,t.approval_type=e.data.approval_type,unlockUI()}),t.CancelMemberSubmit=function(){var a=t.hierary_level,n=++a,o={approval_token:e,approval_remarks:t.txtremarks,hierary_level:n,servicerequest_gid:t.servicerequest_gid,approval_type:t.approval_type};lockUI();var l="api/OsdTrnRequestApproval/PostRequestCancelled";i.post(l,o).then(function(e){unlockUI(),1==e.data.status?(r.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),T()):(r.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),T())})}}var r=a.open({templateUrl:"/cancelmembermodal.html",controller:n,backdrop:"static",keyboard:!1,size:"md"});n.$inject=["$scope","$modalInstance"],t.tdshow=!1},t.download=function(e,t){y.Downloaddocument(e,t)},t.downloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.REOPdownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.COdownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.COMdownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.FWdownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.FREdownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.downloadall1=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.downloadall2=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.rmdownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},t.uploadallocation=function(e,a,n){var r={name:e[0].name,file:e[0]},o=h.fnCheckValidDocType(e[0].name,"Default");if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1;var l=new FormData;l.append("fileupload",r.file),l.append("file_name",r.name),l.append("document_name",t.documentname),l.append("document_title",t.txtdocument_title),l.append("servicerequest_gid",S),l.append("project_flag","Default"),t.uploadfrm=l;var s="api/OsdTrnMyTicket/ConversationDocUpload";lockUI(),i.postFile(s,t.uploadfrm).then(function(e){if($("#addupload").val(""),t.txtdocument_title="",1==e.data.status){unlockUI(),d.alert("Document Uploaded Successfully..!!","success");var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:S};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})}else unlockUI(),d.alert("File Format is Not Supported!","danger")})},t.downloadsdocument=function(e,t){y.Downloaddocument(e,t)},t.sendrequestorclick=function(){var e={servicerequest_gid:S,remarks:t.txtqueries};lockUI();var a="api/OsdTrnServiceRequest/PostSendRequestorCreate";i.post(a,e).then(function(e){if(unlockUI(),1==e.data.status){var a="api/OsdTrnMyTicket/GetRequestorlist",n={servicerequest_gid:S};i.getparams(a,n).then(function(e){t.requestorlist=e.data.requestordtl,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()}),t.txtqueries=""}else d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3})})},t.downloads=function(e,t){y.Downloaddocument(e,t)},t.uploaddocumentdelete=function(e){lockUI();var a={servicereqdocument_gid:e},n="api/OsdTrnServiceRequest/GetTrnDocumentDelete";i.getparams(n,a).then(function(e){t.servicerequestdocumentdtl=e.data.servicerequestdocumentdtl,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},t.ServiceRequestViewDocumentUpload=function(){lockUI();var e=document.getElementById("file");if(e.files.length>0){for(var a=new FormData,n=0;n<=e.files.length-1;n++){a.append(e.files[n].name,e.files[n]),t.uploadfrm=a;e.files.item(n).name,e.files.item(n).size}a.append("servicerequest_gid",S),a.append("project_flag","Default");var r="api/OsdTrnServiceRequest/RequestViewDocUpload";i.postFile(r,t.uploadfrm).then(function(e){$("#file").val(""),t.servicerequestdocumentdtl=e.data.servicerequestdocumentdtl,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath,unlockUI(),1==e.data.status?d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3}),unlockUI()})}else d.alert("Please select a file.","info")},t.requestClosed=function(){var e={servicerequest_gid:S};lockUI();var t="api/OsdTrnServiceRequest/GetClosedRequest";i.getparams(t,e).then(function(e){1==e.data.status?(d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),c.url("app/osdTrnServiceRequestSummary")):(d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},t.requestback=function(){"reopenactivity"==C?c.url("app/osdTrnReopenRequestSummary"):"closeactivity"==C?c.url("app/osdTrnCloseRequestSummary"):"rejectedrequest"==C?c.url("app/osdTrnRejectedRequestSummary"):"cancelledrequest"==C?c.url("app/osdTrnCancelledRequestSummary"):c.url("app/osdTrnServiceRequestSummary")},t.allActivityBack=function(){"New"==C?c.url("app/osdTrnTicketAllotedSummary"):"Workin-Progress"==C?c.url("app/osdTrnTicketWorkSummary"):"Approval-pending"==C?c.url("app/osdTrnTicketApprovalSummary"):"Forward-Ticket"==C?c.url("app/osdTrnTicketForwardSummary"):"Completed"==C?c.url("app/osdTrnTicketCompletedSummary"):"Closed"==C?c.url("app/osdTrnTicketClosedSummary"):"RejectCancel"==C&&c.url("app/osdTrnTicketRejectCancelSummary")},t.allTicketViewBack=function(){n.go("app.osdRptAllTickets")},t.requestReopen=function(){function e(e,a){e.ok=function(){t.close("closed"),T()};var n={servicerequest_gid:S},r="api/OsdTrnServiceRequest/TagEmployee";i.getparams(r,n).then(function(t){e.employee_list=t.data.employee_list});var r="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(r,n).then(function(t){e.tagmemberdtl=t.data.tagmemberdtl,e.raised_date=t.data.raised_date}),e.reopenSubmit=function(){var a={servicerequest_gid:S,reopen_reason:e.reopen_reason,tagmemberdtl:e.tagmember_list};lockUI();var n="api/OsdTrnServiceRequest/PostReopenRequest";i.post(n,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),c.url("app/osdTrnServiceRequestSummary"),unlockUI()):(t.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.ok=function(){t.close("closed"),T()},e.ReopenRequestDocumentUpload=function(){var t=document.getElementById("file");if(t.files.length>0){for(var a=new FormData,n=0;n<=t.files.length-1;n++){a.append(t.files[n].name,t.files[n]),e.uploadfrm=a;var r=t.files.item(n).name,o=(t.files.item(n).size,h.fnCheckValidDocType(r,""));if(0==o)return d.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),!1}a.append("project_flag","Default"),lockUI();var l="api/OsdTrnServiceRequest/PostReopenDocumentUpload";i.postFile(l,e.uploadfrm).then(function(t){$("#file").val(""),e.upload_list=t.data.reopenrequestdocumentdtl,e.reopfilename=t.data.reopfilename,e.reopfilepath=t.data.reopfilepath,unlockUI(),1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})}else alert("Please select a file.")},e.downloads=function(e,t){y.Downloaddocument(e,t)},e.Rdownloadall=function(e,t){for(var a=0;a<t.length;a++)y.Downloaddocument(e,t[a])},e.documentcancel=function(t){lockUI();var a={tmp_documentGid:t},n="api/OsdTrnServiceRequest/GetReopenDocumentDelete";i.getparams(n,a).then(function(t){e.upload_list=t.data.servicerequestdocumentdtl,e.lblfilename=t.data.filename,e.lblfilepath=t.data.filepath,1==t.data.status?d.alert(t.data.message,{status:"success",pos:"top-center",timeout:3e3}):d.alert(t.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},e.documentviewer=function(e,t){lockUI();var a=h.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void y.DocumentViewer(e,t)}}var t=a.open({templateUrl:"/reopenrequestmodal.html",controller:e,backdrop:"static",keyboard:!1,size:"md"});e.$inject=["$scope","$modalInstance"]},t.cancelclick=function(){t.txtqueries=""},t.tickethistory=function(e){var t=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityHistory?hash="+h.encryptURL("servicerequest_gid="+S);window.open(t,"_blank")},t.ticketreopenhistory=function(e,t){var a=location.protocol+"//"+location.hostname+"/v1/#/app/osdTrnMyActivityReopenHistory?hash="+h.encryptURL("servicerequest_gid="+t+" &requestreopen_gid="+e);window.open(a,"_blank")},t.TagMemberChat=function(){function e(e,a){e.ok=function(){t.close("closed")};var n={servicerequest_gid:S},r="api/OsdTrnServiceRequest/TagEmployee";i.getparams(r,n).then(function(t){e.employee_list=t.data.employee_list});var r="api/OsdTrnServiceRequest/GetServiceRequestView";i.getparams(r,n).then(function(t){e.tagmemberdtl=t.data.tagmemberdtl,e.raised_date=t.data.raised_date}),e.TagMemberSubmit=function(){var a={servicerequest_gid:S,tagmemberdtl:e.tagmember_list};lockUI();var n="api/OsdTrnServiceRequest/PostTagMemberInChat";i.post(n,a).then(function(e){1==e.data.status?(t.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),T()):(t.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},e.ok=function(){t.close("closed")}}var t=a.open({templateUrl:"/tagmemberinchat.html",controller:e,backdrop:"static",keyboard:!1});e.$inject=["$scope","$modalInstance"]},t.request_remarks=function(e){function t(t,a){var n={requestapproval_gid:e},r="api/osdTrnMyTicket/GetRequestRemarks";lockUI(),i.getparams(r,n).then(function(e){unlockUI(),t.txtrequestapproval_remarks=e.data.requestapproval_remarks}),t.ok=function(){a.close("closed")}}a.open({templateUrl:"/RequestRemarks.html",controller:t,backdrop:"static",keyboard:!1,size:"md"});t.$inject=["$scope","$modalInstance"]},t.documentviewer=function(e,t){lockUI();var a=h.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(d.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void y.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnServiceRequestView",e),e.$inject=["$rootScope","$scope","$modal","$state","SweetAlert","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","$cookies","$filter","ngTableParams","$resource","$timeout","ngTableDataService","$sce","DownloaddocumentService","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_){function g(){var e="api/OsdTrnServiceRequest/GetServiceRequestCount";i.get(e).then(function(e){t.request_count=e.data.request_count,t.tagged_count=e.data.tagged_count,t.forward_count=e.data.forward_count,t.reopen_count=e.data.reopen_count,t.Reject_count=e.data.reject_count,t.close_count=e.data.close_count,t.cancel_count=e.data.cancel_count,unlockUI()});var e="api/OsdTrnServiceRequest/GetTaggedSummary";i.get(e).then(function(e){t.taggedactivitysummary=e.data.taggeddtl,unlockUI()});var e="api/OsdTrnBankAlert/GetCompletedSummary";lockUI(),i.get(e).then(function(e){t.BankAlertCompleted_list=e.data.BankAlertCompleted_list,unlockUI()})}var f=this;f.title="osdTrnTaggedRequestSummaryController";c.search().lstab;g(),lockUI(),t.raiserequest=function(){c.url("app/osdTrnServiceRequestAdd?hash="+_.encryptURL("lspage=taggedrequest"))},t.my_request=function(){n.go("app.osdTrnServiceRequestSummary")},t.tagged_request=function(){n.go("app.osdTrnTaggedRequestSummary")},t.forward_request=function(){n.go("app.osdTrnForwardTransferSummary")},t.Reopen_request=function(){n.go("app.osdTrnReopenRequestSummary")},t.Reject_request=function(){n.go("app.osdTrnRejectedRequestSummary")},t.Close_request=function(){n.go("app.osdTrnCloseRequestSummary")},t.Cancel_request=function(){n.go("app.osdTrnCancelledRequestSummary")},t.viewtaggedrequest=function(e,t,a,n,r){var o={servicerequest_gid:e},l="api/OsdTrnServiceRequest/GetServiceRequestTagViewUpdate";if(lockUI(),i.getparams(l,o).then(function(e){1==e.data.status?unlockUI():unlockUI()}),"Completed"==t){var s="Y";c.url("app/osdTrnServiceRequestTaggedView?hash="+_.encryptURL("servicerequest_gid="+e+"&CompletedFlag="+s+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&lspage=New"))}else if("Closed"==t){var s="C";c.url("app/osdTrnServiceRequestTaggedView?hash="+_.encryptURL("servicerequest_gid="+e+"&CompletedFlag="+s+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&lspage=New"))}else{var s="N";c.url("app/osdTrnServiceRequestTaggedView?hash="+_.encryptURL("servicerequest_gid="+e+"&CompletedFlag="+s+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&lspage=New"))}}}angular.module("angle").controller("osdTrnTaggedRequestSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","SweetAlert","ScopeValueService","$http","SocketService","Notify","$location","apiManage","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u){function p(){lockUI();var e="api/OsdTrnTicketManagement/GetCountSummary";s.get(e).then(function(e){t.count_completedticket=e.data.completed_count,t.count_closedticket=e.data.closed_count,t.forward_count=e.data.forward_count,t.rejectcancel_count=e.data.rejectcancel_count,t.approvalpending_count=e.data.approvalpending_count});var e="api/OsdTrnTicketManagement/GetMyWorkInProgressSummary";s.get(e).then(function(e){t.count_transferticket=e.data.lsworkinprogress_count});var e="api/OsdTrnTicketManagement/GetServiceRequestSummary";s.get(e).then(function(e){t.servicerequestdtl=e.data.servicerequestdtl,t.count_newticket=e.data.lsallotted_count,unlockUI()});var e="api/OsdTrnBankAlert/GetBankalertNotification";s.get(e).then(function(e){"true"==e.data.display?"true"==e.data.allocated_new||"true"==e.data.notallocated_new||"true"==e.data.allocatedtransfer_new?"true"==e.data.privilege?(t["new"]=!0,t.old=!1):(t["new"]=!1,t.old=!1):"true"==e.data.privilege?(t["new"]=!1,t.old=!0):(t["new"]=!1,t.old=!1):(t["new"]=!1,t.old=!1)})}var _=this;_.title="osdTrnTicketAllotedSummaryController",p(),t.Refresh=function(){p()},t.Alloted=function(){n.go("app.osdTrnTicketAllotedSummary")},t.Workinprogress=function(){n.go("app.osdTrnTicketWorkSummary")},t.approvalpending=function(){n.go("app.osdTrnTicketApprovalSummary")},t.Forward=function(){n.go("app.osdTrnTicketForwardSummary")},t.Completed=function(){n.go("app.osdTrnTicketCompletedSummary")},t.Close=function(){n.go("app.osdTrnTicketClosedSummary")},t.RejectCancel=function(){n.go("app.osdTrnTicketRejectCancelSummary")},t.BankAlert=function(){n.go("app.OsdTrnBankAlertManagementSummary")},t.viewNew=function(e,t,a,n,r){d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+t+"&bankalert2allocated_gid="+a+"&customer_gid="+n+"&lspage=New&request_refno="+r))},t.TransferAllocation=function(e,t,n,r,o,l,d,c,m){function u(a,m){a.department_name=d,a.cboactivity=c;var u={department_gid:l,activitymaster_gid:c,servicerequest_gid:e},g="api/OsdMstActivity/GetTeamSummary";s.getparams(g,u).then(function(e){a.supportdtllist=e.data.supportdtl});var g="api/OsdMstActivity/GetActivity";s.getparams(g,u).then(function(e){a.activitylist=e.data.activitydtl});var g="api/OsdTrnTicketManagement/GetActivityEdit";s.getparams(g,u).then(function(e){a.cboactivity.activity_name=e.data.activity_name}),a.onselectedchangeteam=function(t){var n={supportteam_gid:a.cbosuppport_team.supportteam_gid,servicerequest_gid:e},r="api/OsdMstSupportTeam/PostTeamMemberExceptAssigned";s.post(r,n).then(function(e){a.teammembers_list=e.data.teammembers})};var u={servicerequest_gid:e},g="api/OsdTrnTicketManagement/GetTransferMemberlist";s.getparams(g,u).then(function(e){a.transferlistdtllist=e.data.transferlistdtl;var t=e.data.transferlistdtl[0].transfer_flag;"Y"==t?a.transferlist=!0:a.transferlist=!1,unlockUI()}),a.teamSubmit=function(){lockUI();var l={servicerequest_gid:e,assigned_supportteam:t,assigned_member:n,assigned_membergid:r,activitymaster_gid:a.cboactivity,assigned_supportteamgid:o,transferteam_gid:a.cbosuppport_team.supportteam_gid,transferteam_name:a.cbosuppport_team.team_name,transferemployee_gid:a.cboemployee_name.employee_gid,transferemployee_name:a.cboemployee_name.employee_name,remarks:a.team_description},d="api/OsdTrnTicketManagement/PostTransferAllocation";s.post(d,l).then(function(e){1==e.data.status?(m.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),p(),unlockUI()):(m.close("closed"),i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),p(),unlockUI())})},a.ok=function(){_.close("closed")}}var _=a.open({templateUrl:"/transferallocationmodal.html",controller:u,backdrop:"static",keyboard:!1,size:"md"}),e=e;u.$inject=["$scope","$modalInstance"]},t.Priority=function(e,t,n){function r(a,r){a.department_name=n;var l={department_gid:t},l={servicerequest_gid:e},d="api/OsdTrnTicketManagement/GetPrioritylist";s.getparams(d,l).then(function(e){a.prioritylistdtllist=e.data.prioritylistdtl,unlockUI()}),a.prioritySubmit=function(){var t;lockUI(),t=void 0==a.priority||""==a.priority?"None":a.priority;var n={servicerequest_gid:e,priority:t},o="api/OsdTrnTicketManagement/PostPriority";s.post(o,n).then(function(e){1==e.data.status?(r.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),p(),unlockUI()):(r.close("closed"),i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),p(),unlockUI())})},a.ok=function(){o.close("closed")}}var o=a.open({templateUrl:"/prioritymodal.html",controller:r,backdrop:"static",keyboard:!1,size:"md"});r.$inject=["$scope","$modalInstance"]},t.SelfAllocation=function(e,t,n,r,o,l,d,c,m){function u(t,a){t.department_name=d,t.cboactivity=c;var o={department_gid:l},m="api/OsdTrnTicketManagement/GetManagerSummary";s.getparams(m,o).then(function(e){t.managerdtllist=e.data.managerdtl});var o={servicerequest_gid:e},m="api/OsdTrnTicketManagement/GetAllocateManagerlist";s.getparams(m,o).then(function(e){t.allocatedlist=e.data.allocatelistdtl;var a=e.data.allocatelistdtl[0].transfer_flag;"Y"==a?t.transferlist=!0:t.transferlist=!1,unlockUI()}),t.allocateSubmit=function(){lockUI();var o={servicerequest_gid:e,assigned_membername:n,assigned_membergid:r,allocate_managergid:t.cbomanager.manager_gid,allocate_managername:t.cbomanager.manager_name,remarks:t.manager_description},l="api/OsdTrnTicketManagement/PostSelfAllocation";s.post(l,o).then(function(e){1==e.data.status?(a.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),p(),unlockUI()):(a.close("closed"),i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),p(),unlockUI())})},t.ok=function(){_.close("closed")}}var _=a.open({templateUrl:"/selfallocatemodal.html",controller:u,backdrop:"static",keyboard:!1,size:"md"}),e=e;u.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("osdTrnTicketAllotedSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u){function p(){lockUI();var e="api/OsdTrnTicketManagement/GetCountSummary";s.get(e).then(function(e){t.count_completedticket=e.data.completed_count,t.count_closedticket=e.data.closed_count,t.forward_count=e.data.forward_count,t.rejectcancel_count=e.data.rejectcancel_count,t.approvalpending_count=e.data.approvalpending_count});var e="api/OsdTrnTicketManagement/GetMyWorkInProgressSummary";s.get(e).then(function(e){t.count_transferticket=e.data.lsworkinprogress_count,unlockUI()});var e="api/OsdTrnTicketManagement/GetServiceRequestSummary";s.get(e).then(function(e){t.count_newticket=e.data.lsallotted_count,unlockUI()});var e="api/OsdTrnTicketManagement/GetApprovalPendingSummary";s.get(e).then(function(e){t.servicerequestdtl=e.data.servicerequestdtl,unlockUI()});var e="api/OsdTrnBankAlert/GetBankalertNotification";s.get(e).then(function(e){"true"==e.data.display?"true"==e.data.allocated_new||"true"==e.data.notallocated_new||"true"==e.data.allocatedtransfer_new?"true"==e.data.privilege?(t["new"]=!0,t.old=!1):(t["new"]=!1,t.old=!1):"true"==e.data.privilege?(t["new"]=!1,t.old=!0):(t["new"]=!1,t.old=!1):(t["new"]=!1,t.old=!1)})}var _=this;_.title="osdTrnTicketApprovalSummaryController",p(),t.Refresh=function(){p()},t.Alloted=function(){n.go("app.osdTrnTicketAllotedSummary")},t.Workinprogress=function(){n.go("app.osdTrnTicketWorkSummary")},t.Forward=function(){n.go("app.osdTrnTicketForwardSummary")},t.Completed=function(){n.go("app.osdTrnTicketCompletedSummary")},t.Close=function(){n.go("app.osdTrnTicketClosedSummary")},t.RejectCancel=function(){n.go("app.osdTrnTicketRejectCancelSummary")},t.BankAlert=function(){n.go("app.OsdTrnBankAlertManagementSummary")},t.viewNew=function(e,t,a,n,r){d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+t+"&bankalert2allocated_gid="+a+"&customer_gid="+n+"&lspage=Approval-pending&request_refno="+r))},t.TransferAllocation=function(e,t,n,r,o,l,d){function c(a,c){a.department_name=d;var u={department_gid:l},_="api/OsdMstActivity/GetTeamSummary";s.getparams(_,u).then(function(e){a.supportdtllist=e.data.supportdtl}),a.onselectedchangeteam=function(t){var n={supportteam_gid:a.cbosuppport_team.supportteam_gid,servicerequest_gid:e},r="api/OsdMstSupportTeam/PostTeamMemberExceptAssigned";s.post(r,n).then(function(e){a.teammembers_list=e.data.teammembers})};var u={servicerequest_gid:e},_="api/OsdTrnTicketManagement/GetTransferMemberlist";s.getparams(_,u).then(function(e){a.transferlistdtllist=e.data.transferlistdtl;var t=e.data.transferlistdtl[0].transfer_flag;"Y"==t?a.transferlist=!0:a.transferlist=!1,unlockUI()}),a.teamSubmit=function(){lockUI();var l={servicerequest_gid:e,assigned_supportteam:t,assigned_member:n,assigned_membergid:r,assigned_supportteamgid:o,transferteam_gid:a.cbosuppport_team.supportteam_gid,transferteam_name:a.cbosuppport_team.team_name,transferemployee_gid:a.cboemployee_name.employee_gid,transferemployee_name:a.cboemployee_name.employee_name},d="api/OsdTrnTicketManagement/PostTransferAllocation";s.post(d,l).then(function(e){1==e.data.status?(c.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),p(),unlockUI()):(c.close("closed"),i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),p(),unlockUI())})},a.ok=function(){m.close("closed")}}var m=a.open({templateUrl:"/transferallocationmodal.html",controller:c,size:"md"}),e=e;c.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("osdTrnTicketApprovalSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u){function p(){lockUI(),t.limit=6e3;var e="api/OsdTrnTicketManagement/GetCountSummary";s.get(e).then(function(e){t.count_completedticket=e.data.completed_count,t.count_closedticket=e.data.closed_count,t.forward_count=e.data.forward_count,t.rejectcancel_count=e.data.rejectcancel_count,t.approvalpending_count=e.data.approvalpending_count});var e="api/OsdTrnTicketManagement/GetMyWorkInProgressSummary";s.get(e).then(function(e){t.count_transferticket=e.data.lsworkinprogress_count});var e="api/OsdTrnTicketManagement/GetServiceRequestSummary";s.get(e).then(function(e){t.count_newticket=e.data.lsallotted_count});var e="api/OsdTrnTicketManagement/GetMyClosedSummary";s.get(e).then(function(e){t.closeddtl=e.data.closeddtl,unlockUI()});var e="api/OsdTrnBankAlert/GetBankalertNotification";s.get(e).then(function(e){"true"==e.data.display?"true"==e.data.allocated_new||"true"==e.data.notallocated_new||"true"==e.data.allocatedtransfer_new?"true"==e.data.privilege?(t["new"]=!0,t.old=!1):(t["new"]=!1,t.old=!1):"true"==e.data.privilege?(t["new"]=!1,t.old=!0):(t["new"]=!1,t.old=!1):(t["new"]=!1,t.old=!1)})}var _=this;_.title="osdTrnTicketClosedSummaryController";var g;p(),t.Refresh=function(){p()};var g=6e3;t.incrementLimit=function(){t.limit+=g},t.decrementLimit=function(){t.limit-=g},t.Alloted=function(){n.go("app.osdTrnTicketAllotedSummary")},t.Workinprogress=function(){n.go("app.osdTrnTicketWorkSummary")},t.approvalpending=function(){n.go("app.osdTrnTicketApprovalSummary")},t.Forward=function(){n.go("app.osdTrnTicketForwardSummary")},t.Completed=function(){
n.go("app.osdTrnTicketCompletedSummary")},t.Close=function(){n.go("app.osdTrnTicketClosedSummary")},t.RejectCancel=function(){n.go("app.osdTrnTicketRejectCancelSummary")},t.BankAlert=function(){n.go("app.OsdTrnBankAlertManagementSummary")},t.viewClosed=function(e,t,a,n,r){d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+t+"&bankalert2allocated_gid="+a+"&customer_gid="+n+"&lspage=Closed&request_refno="+r))}}angular.module("angle").controller("osdTrnTicketClosedSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u){function p(){lockUI();var e="api/OsdTrnTicketManagement/GetCountSummary";s.get(e).then(function(e){t.count_completedticket=e.data.completed_count,t.count_closedticket=e.data.closed_count,t.forward_count=e.data.forward_count,t.rejectcancel_count=e.data.rejectcancel_count,t.approvalpending_count=e.data.approvalpending_count});var e="api/OsdTrnTicketManagement/GetMyWorkInProgressSummary";s.get(e).then(function(e){t.count_transferticket=e.data.lsworkinprogress_count,unlockUI()});var e="api/OsdTrnTicketManagement/GetServiceRequestSummary";s.get(e).then(function(e){t.count_newticket=e.data.lsallotted_count,unlockUI()});var e="api/OsdTrnTicketManagement/GetMyCompletedSummary";s.get(e).then(function(e){unlockUI(),t.completeddtl=e.data.completeddtl});var e="api/OsdTrnBankAlert/GetBankalertNotification";s.get(e).then(function(e){"true"==e.data.display?"true"==e.data.allocated_new||"true"==e.data.notallocated_new||"true"==e.data.allocatedtransfer_new?"true"==e.data.privilege?(t["new"]=!0,t.old=!1):(t["new"]=!1,t.old=!1):"true"==e.data.privilege?(t["new"]=!1,t.old=!0):(t["new"]=!1,t.old=!1):(t["new"]=!1,t.old=!1)})}var _=this;_.title="osdTrnTicketCompletedSummaryController",p(),t.Refresh=function(){p()},t.Alloted=function(){n.go("app.osdTrnTicketAllotedSummary")},t.Workinprogress=function(){n.go("app.osdTrnTicketWorkSummary")},t.approvalpending=function(){n.go("app.osdTrnTicketApprovalSummary")},t.Forward=function(){n.go("app.osdTrnTicketForwardSummary")},t.Completed=function(){n.go("app.osdTrnTicketCompletedSummary")},t.RejectCancel=function(){n.go("app.osdTrnTicketRejectCancelSummary")},t.Close=function(){n.go("app.osdTrnTicketClosedSummary")},t.BankAlert=function(){n.go("app.OsdTrnBankAlertManagementSummary")},t.viewCompleted=function(e,t,a,n,r){d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+t+"&bankalert2allocated_gid="+a+"&customer_gid="+n+"&lspage=Completed&request_refno="+r))}}angular.module("angle").controller("osdTrnTicketCompletedSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u){function p(){lockUI();var e="api/OsdTrnTicketManagement/GetCountSummary";s.get(e).then(function(e){t.count_completedticket=e.data.completed_count,t.count_closedticket=e.data.closed_count,t.forward_count=e.data.forward_count,t.rejectcancel_count=e.data.rejectcancel_count,t.approvalpending_count=e.data.approvalpending_count});var e="api/OsdTrnTicketManagement/GetMyWorkInProgressSummary";s.get(e).then(function(e){t.count_transferticket=e.data.lsworkinprogress_count,unlockUI()});var e="api/OsdTrnTicketManagement/GetServiceRequestSummary";s.get(e).then(function(e){t.count_newticket=e.data.lsallotted_count,unlockUI()});var e="api/OsdTrnTicketManagement/GetAllForwardSummary";s.get(e).then(function(e){t.forwardactivitysummary=e.data.forwarddtl,unlockUI()});var e="api/OsdTrnBankAlert/GetBankalertNotification";s.get(e).then(function(e){"true"==e.data.display?"true"==e.data.allocated_new||"true"==e.data.notallocated_new||"true"==e.data.allocatedtransfer_new?"true"==e.data.privilege?(t["new"]=!0,t.old=!1):(t["new"]=!1,t.old=!1):"true"==e.data.privilege?(t["new"]=!1,t.old=!0):(t["new"]=!1,t.old=!1):(t["new"]=!1,t.old=!1)})}var _=this;_.title="osdTrnTicketForwardSummaryController",p(),t.Refresh=function(){p()},t.Alloted=function(){n.go("app.osdTrnTicketAllotedSummary")},t.Workinprogress=function(){n.go("app.osdTrnTicketWorkSummary")},t.approvalpending=function(){n.go("app.osdTrnTicketApprovalSummary")},t.Forward=function(){n.go("app.osdTrnTicketForwardSummary")},t.Completed=function(){n.go("app.osdTrnTicketCompletedSummary")},t.RejectCancel=function(){n.go("app.osdTrnTicketRejectCancelSummary")},t.Close=function(){n.go("app.osdTrnTicketClosedSummary")},t.BankAlert=function(){n.go("app.OsdTrnBankAlertManagementSummary")},t.viewforward=function(e,t,a,n,r){d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+t+"&bankalert2allocated_gid="+a+"&customer_gid="+n+"&lspage=Forward-Ticket&request_refno="+r))}}angular.module("angle").controller("osdTrnTicketForwardSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u){function p(){lockUI();var e="api/OsdTrnTicketManagement/GetCountSummary";s.get(e).then(function(e){t.count_newticket=e.data.alloted_count,t.count_transferticket=e.data.workinprogress_count,t.count_completedticket=e.data.completed_count,t.count_closedticket=e.data.closed_count,t.forward_count=e.data.forward_count,unlockUI()}),lockUI();var e="api/OsdTrnBankAlert/GetBankalertNotification";s.get(e).then(function(e){"true"==e.data.allocated_new||"true"==e.data.notallocated_new?"true"==e.data.privilege?(t["new"]=!0,t.old=!1):(t["new"]=!1,t.old=!1):"true"==e.data.privilege?(t["new"]=!1,t.old=!0):(t["new"]=!1,t.old=!1),unlockUI()}),t.tab={};var e=window.location.href,a=e.split("lstab="),n=a[1];void 0!=n?"New"==n?t.tabnew=!0:"Workin-Progress"==n?t.tabworkinprogressticket=!0:"Forward-Ticket"==n?t.tabforwardticket=!0:"Completed"==n?t.tabcompleted=!0:"Closed"==n&&(t.tabclosed=!0):void 0==t.tab.activeTabId?t.tabnew=!0:"New"==t.tab.activeTabId?t.tabnew=!0:"Workin-Progress"==t.tab.activeTabId?t.tabworkinprogressticket=!0:"Forward-Ticket"==t.tab.activeTabId?t.tabforwardticket=!0:"Completed"==t.tab.activeTabId?t.tabcompleted=!0:"Closed"==t.tab.activeTabId&&(t.tabclosed=!0),t.totalDisplayednew=100;var e="api/OsdTrnTicketManagement/GetServiceRequestSummary";s.get(e).then(function(e){t.servicerequestdtl=e.data.servicerequestdtl,null==t.servicerequestdtl?(t.totalDisplayednew=0,t.totalnew=0):(t.totalDisplayednew=t.servicerequestdtl.length,t.servicerequestdtl.length<100&&(t.totalnew=t.servicerequestdtl.length)),unlockUI()}),lockUI(),t.totalDisplayedworkinprogress=100;var e="api/OsdTrnTicketManagement/GetMyWorkInProgressSummary";s.get(e).then(function(e){t.workinprogressdtl=e.data.workinprogressdtl,null==t.workinprogressdtl?(t.totalworkinprogress=0,t.totalDisplayedworkinprogress=0):(t.totalworkinprogress=t.workinprogressdtl.length,t.workinprogressdtl.length<100&&(t.totalDisplayedworkinprogress=t.workinprogressdtl.length)),unlockUI()}),lockUI(),t.totalDisplayedforwardacivity=100;var e="api/OsdTrnTicketManagement/GetAllForwardSummary";s.get(e).then(function(e){t.forwardactivitysummary=e.data.forwarddtl,null==t.forwardactivitysummary?(t.totalforwardactivity=0,t.totalDisplayedforwardacivity=0):(t.totalforwardactivity=t.forwardactivitysummary.length,t.forwardactivitysummary.length<100&&(t.totalDisplayedforwardacivity=t.forwardactivitysummary.length)),unlockUI()}),lockUI(),t.totalDisplayedcompleted=100;var e="api/OsdTrnTicketManagement/GetMyCompletedSummary";s.get(e).then(function(e){t.completeddtl=e.data.completeddtl,null==t.completeddtl?(t.totalcompleted=0,t.totalDisplayedcompleted=0):(t.totalcompleted=t.completeddtl.length,t.completeddtl.length<100&&(t.totalDisplayedcompleted=t.completeddtl.length)),unlockUI()}),lockUI(),t.totalDisplayedclosed=100;var e="api/OsdTrnTicketManagement/GetMyClosedSummary";s.get(e).then(function(e){t.closeddtl=e.data.closeddtl,null==t.closeddtl?(t.totalclosed=0,t.totalDisplayedclosed=0):(t.totalclosed=t.closeddtl.length,t.closeddtl.length<100&&(t.totalDisplayedclosed=t.closeddtl.length)),unlockUI()})}var _=this;_.title="osdTrnTicketManagement";p(),t.viewNew=function(e,a,n,r){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var o=e;t.servicerequest_gid=localStorage.setItem("servicerequest_gid",e),t.bankalert_flag=localStorage.setItem("bankalert_flag",a),t.bankalert2allocated_gid=localStorage.setItem("bankalert2allocated_gid",n),t.customer_gid=localStorage.setItem("customer_gid",r),d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("lstab=New")),localStorage.setItem("servicerequest_gid",o)},t.viewWorking=function(e,a,n,r){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var o=e;t.servicerequest_gid=localStorage.setItem("servicerequest_gid",e),t.bankalert_flag=localStorage.setItem("bankalert_flag",a),t.bankalert2allocated_gid=localStorage.setItem("bankalert2allocated_gid",n),t.customer_gid=localStorage.setItem("customer_gid",r),d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("lstab=Workin-Progress")),localStorage.setItem("servicerequest_gid",o)},t.viewforward=function(e,a,n,r){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var o=e;t.servicerequest_gid=localStorage.setItem("servicerequest_gid",e),t.bankalert_flag=localStorage.setItem("bankalert_flag",a),t.bankalert2allocated_gid=localStorage.setItem("bankalert2allocated_gid",n),t.customer_gid=localStorage.setItem("customer_gid",r),d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("lstab=Forward-Ticket")),localStorage.setItem("servicerequest_gid",o)},t.viewCompleted=function(e,a,n,r){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var o=e;t.servicerequest_gid=localStorage.setItem("servicerequest_gid",e),t.bankalert_flag=localStorage.setItem("bankalert_flag",a),t.bankalert2allocated_gid=localStorage.setItem("bankalert2allocated_gid",n),t.customer_gid=localStorage.setItem("customer_gid",r),d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("lstab=Completed")),localStorage.setItem("servicerequest_gid",o)},t.viewClosed=function(e,a,n,r){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r;var o=e;t.servicerequest_gid=localStorage.setItem("servicerequest_gid",e),t.bankalert_flag=localStorage.setItem("bankalert_flag",a),t.bankalert2allocated_gid=localStorage.setItem("bankalert2allocated_gid",n),t.customer_gid=localStorage.setItem("customer_gid",r),d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("lstab=Closed")),localStorage.setItem("servicerequest_gid",o)},t.loadMorenew=function(e){if(void 0==e)return void i.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.servicerequestdtl){if(!(e<t.servicerequestdtl.length))return unlockUI(),void i.alert("TotalSummary"+t.servicerequestdtl.length+"RecordsOnly","warning");t.totalDisplayednew+=a,t.servicerequestdtl.length<t.totalDisplayednew&&(t.totalDisplayednew=t.servicerequestdtl.length,i.alert("TotalSummary"+t.servicerequestdtl.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.workinprogress_ticket=function(){lockUI(),t.totalDisplayedworkinprogress=100;var e="api/OsdTrnTicketManagement/GetMyWorkInProgressSummary";s.get(e).then(function(e){t.workinprogressdtl=e.data.workinprogressdtl,null==t.workinprogressdtl?(t.totalworkinprogress=0,t.totalDisplayedworkinprogress=0):(t.totalworkinprogress=t.workinprogressdtl.length,t.workinprogressdtl.length<100&&(t.totalDisplayedworkinprogress=t.workinprogressdtl.length)),unlockUI()})},t.loadmoreworkinprogress=function(e){if(void 0==e)return void i.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.workinprogressdtl){if(!(e<t.workinprogressdtl.length))return unlockUI(),void i.alert("TotalSummary"+t.workinprogressdtl.length+"RecordsOnly","warning");t.totalDisplayedworkinprogress+=a,t.workinprogressdtl.length<t.totalDisplayedworkinprogress&&(t.totalDisplayedworkinprogress=t.workinprogressdtl.length,i.alert("TotalSummary"+t.workinprogressdtl.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.transfer_ticket=function(){lockUI(),t.totalDisplayedtransferticket=100;var e="api/OsdTrnTicketManagement/GetMyWorkInProgressSummary";s.get(e).then(function(e){t.transferticket_list=e.data.workinprogressdtl,null==t.transferticket_list?(t.totaltransferticket=0,t.totalDisplayedtransferticket=0):(t.totaltransferticket=t.transferticket_list.length,t.transferticket_list.length<100&&(t.totalDisplayedtransferticket=t.transferticket_list.length)),unlockUI()})},t.loadMoretransferticket=function(e){if(void 0==e)return void i.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.transferticket_list){if(!(e<t.transferticket_list.length))return unlockUI(),void i.alert("TotalSummary"+t.transferticket_list.length+"RecordsOnly","warning");t.totalDisplayedtransferticket+=a,t.transferticket_list.length<t.totalDisplayedtransferticket&&(t.totalDisplayedtransferticket=t.transferticket_list.length,i.alert("TotalSummary"+t.transferticket_list.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.forward_ticket=function(){lockUI(),t.totalDisplayedforwardacivity=100;var e="api/OsdTrnTicketManagement/GetAllForwardSummary";s.get(e).then(function(e){t.forwardactivitysummary=e.data.forwarddtl,null==t.forwardactivitysummary?(t.totalforwardactivity=0,t.totalDisplayedforwardacivity=0):(t.totalforwardactivity=t.forwardactivitysummary.length,t.forwardactivitysummary.length<100&&(t.totalDisplayedforwardacivity=t.forwardactivitysummary.length)),unlockUI()})},t.loadMoreforwardactivity=function(e){if(void 0==e)return void i.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.forwardactivitysummary){if(!(e<t.forwardactivitysummary.length))return unlockUI(),void i.alert("TotalSummary"+t.forwardactivitysummary.length+"RecordsOnly","warning");t.totalDisplayedforwardacivity+=a,t.forwardactivitysummary.length<t.totalDisplayedforwardacivity&&(t.totalDisplayedforwardacivity=t.forwardactivitysummary.length,i.alert("TotalSummary"+t.forwardactivitysummary.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.completed_ticket=function(){lockUI(),t.totalDisplayedcompleted=100;var e="api/OsdTrnTicketManagement/GetMyCompletedSummary";s.get(e).then(function(e){t.completeddtl=e.data.completeddtl,null==t.completeddtl?(t.totalcompleted=0,t.totalDisplayedcompleted=0):(t.totalcompleted=t.completeddtl.length,t.completeddtl.length<100&&(t.totalDisplayedcompleted=t.completeddtl.length)),unlockUI()})},t.loadMorecompleted=function(e){if(void 0==e)return void i.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.completeddtl){if(!(e<t.completeddtl.length))return unlockUI(),void i.alert("TotalSummary"+t.completeddtl.length+"RecordsOnly","warning");t.totalDisplayedcompleted+=a,t.completeddtl.length<t.totalDisplayedcompleted&&(t.totalDisplayedcompleted=t.completeddtl.length,i.alert("TotalSummary"+t.completeddtl.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.closed_ticket=function(e){lockUI();var a="api/OsdTrnTicketManagement/GetMyClosedSummary";s.get(a).then(function(e){t.closeddtl=e.data.closeddtl,unlockUI()})},t.closed_ticket=function(){lockUI(),t.totalDisplayedclosed=100;var e="api/OsdTrnTicketManagement/GetMyClosedSummary";s.get(e).then(function(e){t.closeddtl=e.data.closeddtl,null==t.closeddtl?(t.totalclosed=0,t.totalDisplayedclosed=0):(t.totalclosed=t.closeddtl.length,t.closeddtl.length<100&&(t.totalDisplayedclosed=t.closeddtl.length)),unlockUI()})},t.loadMoreclosed=function(e){if(void 0==e)return void i.alert("Enter the Total Summary Count","warning");lockUI();var a=parseInt(e);if(null!=t.closeddtl){if(!(e<t.closeddtl.length))return unlockUI(),void i.alert("TotalSummary"+t.closeddtl.length+"RecordsOnly","warning");t.totalDisplayedclosed+=a,t.closeddtl.length<t.totalDisplayedclosed&&(t.totalDisplayedclosed=t.closeddtl.length,i.alert("TotalSummary"+t.closeddtl.length+"RecordsOnly","warning")),unlockUI()}unlockUI()},t.TransferAllocation=function(e,t,n,r,o){function l(a,l){var c="api/OsdMstActivity/GetTeamSummary";s.get(c).then(function(e){a.supportdtllist=e.data.supportdtl}),a.onselectedchangeteam=function(e){a.supportteam_gid=localStorage.setItem("onchangesupportteam_gid",e);var t={supportteam_gid:a.cbosuppport_team.supportteam_gid,servicerequest_gid:localStorage.getItem("servicerequest_gid")},n="api/OsdMstSupportTeam/PostTeamMemberExceptAssigned";s.post(n,t).then(function(e){a.teammembers_list=e.data.teammembers})};var m={servicerequest_gid:localStorage.getItem("servicerequest_gid")},c="api/OsdTrnTicketManagement/GetTransferMemberlist";s.getparams(c,m).then(function(e){a.transferlistdtllist=e.data.transferlistdtl;var t=e.data.transferlistdtl[0].transfer_flag;"Y"==t?a.transferlist=!0:a.transferlist=!1,unlockUI()}),a.teamSubmit=function(){lockUI();var d={servicerequest_gid:e,assigned_supportteam:t,assigned_member:n,assigned_membergid:r,assigned_supportteamgid:o,transferteam_gid:a.cbosuppport_team.supportteam_gid,transferteam_name:a.cbosuppport_team.team_name,transferemployee_gid:a.cboemployee_name.employee_gid,transferemployee_name:a.cboemployee_name.employee_name},c="api/OsdTrnTicketManagement/PostTransferAllocation";s.post(c,d).then(function(e){1==e.data.status?(l.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),p(),unlockUI()):(l.close("closed"),i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),p(),unlockUI())})},a.ok=function(){d.close("closed")}}localStorage.setItem("servicerequest_gid",e);var d=a.open({templateUrl:"/transferallocationmodal.html",controller:l,size:"md"});l.$inject=["$scope","$modalInstance"]},t.TransferAllocationwithRemarks=function(e,t,r,l,d){function c(a,c){var u="api/OsdMstActivity/GetTeamSummary";s.get(u).then(function(e){a.supportdtllist=e.data.supportdtl}),a.onselectedchangeteam=function(e){a.supportteam_gid=localStorage.setItem("onchangesupportteam_gid",e);var t={supportteam_gid:a.cbosuppport_team.supportteam_gid,servicerequest_gid:localStorage.getItem("servicerequest_gid")},n="api/OsdMstSupportTeam/PostTeamMemberExceptAssigned";s.post(n,t).then(function(e){a.teammembers_list=e.data.teammembers})};var p={servicerequest_gid:localStorage.getItem("servicerequest_gid")},u="api/OsdTrnTicketManagement/GetTransferMemberlist";s.getparams(u,p).then(function(e){a.transferlistdtllist=e.data.transferlistdtl;var t=e.data.transferlistdtl[0].transfer_flag;"Y"==t?a.transferlist=!0:a.transferlist=!1,unlockUI()}),a.teamSubmitremarks=function(){lockUI();var m={servicerequest_gid:e,assigned_supportteam:t,assigned_member:r,assigned_membergid:l,assigned_supportteamgid:d,transferteam_gid:a.cbosuppport_team.supportteam_gid,transferteam_name:a.cbosuppport_team.team_name,transferemployee_gid:a.cboemployee_name.employee_gid,transferemployee_name:a.cboemployee_name.employee_name,remarks:a.team_description},u="api/OsdTrnTicketManagement/PostTransferAllocation";s.post(u,m).then(function(e){1==e.data.status?(c.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),c.close("closed"),a.current=n.current.name,o.store("dataldCtrl",a),n.go("app.pageredirect"),unlockUI()):(c.close("closed"),i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),c.close("closed"),unlockUI())})},a.ok=function(){m.close("closed")}}localStorage.setItem("servicerequest_gid",e);var m=a.open({templateUrl:"/transferallocationwithremarksmodal.html",controller:c,size:"md"});c.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("osdTrnTicketManagement",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u){function p(){lockUI();var e="api/OsdTrnTicketManagement/GetCountSummary";s.get(e).then(function(e){t.count_completedticket=e.data.completed_count,t.count_closedticket=e.data.closed_count,t.forward_count=e.data.forward_count,t.rejectcancel_count=e.data.rejectcancel_count,t.approvalpending_count=e.data.approvalpending_count});var e="api/OsdTrnTicketManagement/GetMyWorkInProgressSummary";s.get(e).then(function(e){t.count_transferticket=e.data.lsworkinprogress_count,unlockUI()});var e="api/OsdTrnTicketManagement/GetServiceRequestSummary";s.get(e).then(function(e){t.count_newticket=e.data.lsallotted_count,unlockUI()});var e="api/OsdTrnTicketManagement/GetRejectCancelSummary";s.get(e).then(function(e){t.rejectcanceldtl=e.data.rejectcanceldtl,unlockUI()});var e="api/OsdTrnBankAlert/GetBankalertNotification";s.get(e).then(function(e){"true"==e.data.display?"true"==e.data.allocated_new||"true"==e.data.notallocated_new||"true"==e.data.allocatedtransfer_new?"true"==e.data.privilege?(t["new"]=!0,t.old=!1):(t["new"]=!1,t.old=!1):"true"==e.data.privilege?(t["new"]=!1,t.old=!0):(t["new"]=!1,t.old=!1):(t["new"]=!1,t.old=!1)})}var _=this;_.title="osdTrnTicketRejectCancelSummary",p(),t.Refresh=function(){p()},t.Alloted=function(){n.go("app.osdTrnTicketAllotedSummary")},t.Workinprogress=function(){n.go("app.osdTrnTicketWorkSummary")},t.approvalpending=function(){n.go("app.osdTrnTicketApprovalSummary")},t.Forward=function(){n.go("app.osdTrnTicketForwardSummary")},t.Completed=function(){n.go("app.osdTrnTicketCompletedSummary")},t.RejectCancel=function(){n.go("app.osdTrnTicketRejectCancelSummary")},t.Close=function(){n.go("app.osdTrnTicketClosedSummary")},t.BankAlert=function(){n.go("app.OsdTrnBankAlertManagementSummary")},t.viewrejectcancel=function(e,t,a,n,r){d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+t+"&bankalert2allocated_gid="+a+"&customer_gid="+n+"&lspage=RejectCancel&request_refno="+r))}}angular.module("angle").controller("osdTrnTicketRejectCancelSummary",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u){function p(){lockUI();var e="api/OsdTrnTicketManagement/GetCountSummary";s.get(e).then(function(e){t.count_completedticket=e.data.completed_count,t.count_closedticket=e.data.closed_count,t.forward_count=e.data.forward_count,t.rejectcancel_count=e.data.rejectcancel_count,t.approvalpending_count=e.data.approvalpending_count});var e="api/OsdTrnTicketManagement/GetMyWorkInProgressSummary";s.get(e).then(function(e){t.workinprogressdtl=e.data.workinprogressdtl,t.count_transferticket=e.data.lsworkinprogress_count,unlockUI()});var e="api/OsdTrnTicketManagement/GetServiceRequestSummary";s.get(e).then(function(e){t.count_newticket=e.data.lsallotted_count,unlockUI()});var e="api/OsdTrnBankAlert/GetBankalertNotification";s.get(e).then(function(e){"true"==e.data.display?"true"==e.data.allocated_new||"true"==e.data.notallocated_new||"true"==e.data.allocatedtransfer_new?"true"==e.data.privilege?(t["new"]=!0,t.old=!1):(t["new"]=!1,t.old=!1):"true"==e.data.privilege?(t["new"]=!1,t.old=!0):(t["new"]=!1,t.old=!1):(t["new"]=!1,t.old=!1)})}var _=this;_.title="osdTrnTicketWorkSummaryController",p(),t.Refresh=function(){p()},t.Alloted=function(){n.go("app.osdTrnTicketAllotedSummary")},t.Workinprogress=function(){n.go("app.osdTrnTicketWorkSummary")},t.approvalpending=function(){n.go("app.osdTrnTicketApprovalSummary")},t.Forward=function(){n.go("app.osdTrnTicketForwardSummary")},t.Completed=function(){n.go("app.osdTrnTicketCompletedSummary")},t.RejectCancel=function(){n.go("app.osdTrnTicketRejectCancelSummary")},t.Close=function(){n.go("app.osdTrnTicketClosedSummary")},t.BankAlert=function(){n.go("app.OsdTrnBankAlertManagementSummary")},t.viewWorking=function(e,t,a,n,r,o){d.url("app/osdTrnActivityManagement360?hash="+u.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+t+"&bankalert2allocated_gid="+a+"&customer_gid="+n+"&lspage=Workin-Progress&request_refno="+r+"&brs_flag="+o))},t.TransferAllocationwithRemarks=function(e,t,n,r,o,l,d,c,m){function u(a,m){a.department_name=d,a.cboactivity=c;var u={department_gid:l,activitymaster_gid:c,servicerequest_gid:e},g="api/OsdMstActivity/GetTeamSummary";s.getparams(g,u).then(function(e){a.supportdtllist=e.data.supportdtl});var g="api/OsdMstActivity/GetActivity";s.getparams(g,u).then(function(e){a.activitylist=e.data.activitydtl});var g="api/OsdTrnTicketManagement/GetActivityEdit";s.getparams(g,u).then(function(e){a.cboactivity.activity_name=e.data.activity_name}),a.onselectedchangeteam=function(t){var n={supportteam_gid:a.cbosuppport_team.supportteam_gid,servicerequest_gid:e},r="api/OsdMstSupportTeam/PostTeamMemberExceptAssigned";s.post(r,n).then(function(e){a.teammembers_list=e.data.teammembers})};var u={servicerequest_gid:e},g="api/OsdTrnTicketManagement/GetTransferMemberlist";s.getparams(g,u).then(function(e){a.transferlistdtllist=e.data.transferlistdtl;var t=e.data.transferlistdtl[0].transfer_flag;"Y"==t?a.transferlist=!0:a.transferlist=!1,unlockUI()}),a.teamSubmitremarks=function(){lockUI();var l={servicerequest_gid:e,assigned_supportteam:t,assigned_member:n,assigned_membergid:r,activitymaster_gid:a.cboactivity,assigned_supportteamgid:o,transferteam_gid:a.cbosuppport_team.supportteam_gid,transferteam_name:a.cbosuppport_team.team_name,transferemployee_gid:a.cboemployee_name.employee_gid,transferemployee_name:a.cboemployee_name.employee_name,remarks:a.team_description},d="api/OsdTrnTicketManagement/PostTransferAllocation";s.post(d,l).then(function(e){1==e.data.status?(m.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),m.close("closed"),p(),unlockUI()):(m.close("closed"),i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),m.close("closed"),p(),unlockUI())})},a.ok=function(){_.close("closed")}}var _=a.open({templateUrl:"/transferallocationwithremarksmodal.html",controller:u,backdrop:"static",keyboard:!1,size:"md"}),e=e;u.$inject=["$scope","$modalInstance"]},t.Priority=function(e,t,n){function r(a,r){a.department_name=n;var l={department_gid:t},l={servicerequest_gid:e},d="api/OsdTrnTicketManagement/GetPrioritylist";s.getparams(d,l).then(function(e){a.prioritylistdtllist=e.data.prioritylistdtl,unlockUI()}),a.prioritySubmit=function(){var t;lockUI(),t=void 0==a.priority||""==a.priority?"None":a.priority;var n={servicerequest_gid:e,priority:t},o="api/OsdTrnTicketManagement/PostPriority";s.post(o,n).then(function(e){1==e.data.status?(r.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),p(),unlockUI()):(r.close("closed"),i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),p(),unlockUI())})},a.ok=function(){o.close("closed")}}var o=a.open({templateUrl:"/prioritymodal.html",controller:r,backdrop:"static",keyboard:!1,size:"md"});r.$inject=["$scope","$modalInstance"]},t.SelfAllocation=function(e,t,n,r,o,l,d,c,m){function u(t,a){t.department_name=d,t.cboactivity=c;var o={department_gid:l},m="api/OsdTrnTicketManagement/GetManagerSummary";s.getparams(m,o).then(function(e){t.managerdtllist=e.data.managerdtl});var o={servicerequest_gid:e},m="api/OsdTrnTicketManagement/GetAllocateManagerlist";s.getparams(m,o).then(function(e){t.allocatedlist=e.data.allocatelistdtl;var a=e.data.allocatelistdtl[0].transfer_flag;"Y"==a?t.transferlist=!0:t.transferlist=!1,unlockUI()}),t.allocateSubmit=function(){lockUI();var o={servicerequest_gid:e,assigned_membername:n,assigned_membergid:r,allocate_managergid:t.cbomanager.manager_gid,allocate_managername:t.cbomanager.manager_name,remarks:t.manager_description},l="api/OsdTrnTicketManagement/PostSelfAllocation";s.post(l,o).then(function(e){1==e.data.status?(a.close("closed"),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),p(),unlockUI()):(a.close("closed"),i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),p(),unlockUI())})},t.ok=function(){_.close("closed")}}var _=a.open({templateUrl:"/selfallocatemodal.html",controller:u,backdrop:"static",keyboard:!1,size:"md"}),e=e;u.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("osdTrnTicketWorkSummaryController",e),e.$inject=["$rootScope","$scope","$modal","$state","AuthenticationService","ScopeValueService","$http","SocketService","Notify","$location","$route","ngTableParams","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g){function f(){var e="api/UnreconciliationManagement/GetAllocatedDetail",a={banktransc_gid:b};s.getparams(e,a).then(function(e){t.lblbanktransc_gid=b,t.lblbank_name=e.data.bank_name,t.lblcustomer_refno=e.data.custref_no,t.lblbranch_name=e.data.branch_name,t.lblcr_dr=e.data.cr_dr,t.lbltransc_value=e.data.transact_val,t.lblremarks=e.data.transact_particulars,t.lbltransc_balance=e.data.transc_balance,t.lblacc_no=e.data.acc_no,t.lblallocated_status=e.data.allocated_status,t.lbltrn_date=e.data.trn_date,t.lblrm_status=e.data.rm_status,t.lblrm_remarks=e.data.rm_remarks});var e="api/employee/Employee";s.get(e).then(function(e){t.employee_list=e.data.employee_list});var a={banktransc_gid:b},e="api/OsdTrnBankAlert/GetUnReconUploadedDoc";s.getparams(e,a).then(function(e){t.uploaddocument=e.data.MdlDocDetails,t.filename=e.data.filename,t.filepath=e.data.filepath});var e="api/UnreconciliationManagement/GetAssignedHistory",a={banktransc_gid:b};s.getparams(e,a).then(function(e){t.assignedlist=e.data.assignedlist});var e="api/UnreconciliationManagement/GetTransferredHistory",a={banktransc_gid:b};s.getparams(e,a).then(function(e){t.transferlist=e.data.transferlist})}var v=this;v.title="osdTrnUnreconciliationTransactionViewController";var k=_.decryptURL(d.search().hash),b=k.lsbanktransc_gid,y=k.lstab;f(),t.UploadDocCancel=function(e){var a={fileupload_gid:e},n="api/OsdTrnBankAlert/DeleteUnReconUploadedDoc";lockUI(),s.getparams(n,a).then(function(e){if(1==e.data.status){unlockUI(),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3});var a={banktransc_gid:b},n="api/OsdTrnBankAlert/GetUnReconUploadedDoc";s.getparams(n,a).then(function(e){t.uploaddocument=e.data.MdlDocDetails,t.filename=e.data.filename,t.filepath=e.data.filepath})}else unlockUI(),i.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})})},t.download=function(e,t){g.Downloaddocument(e,t)},t.Udownloadall=function(e,t){for(var a=0;a<t.length;a++)g.Downloaddocument(e,t[a])},t.uploadattachment=function(){var e=document.getElementById("file");if(e.files.length>0){lockUI();for(var a=new FormData,n=0;n<e.files.length;n++){a.append(e.files[n].name,e.files[n]);var r=e.files.item(n).name,o=(e.files.item(n).size,_.fnCheckValidDocType(e.files[n].name,"documentformatonly"));if(0==o)return i.alert("File format is not supported..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1}a.append("project_flag","documentformatonly"),a.append("banktransc_gid",b),a.append("document_name",r),t.uploadfrm=a;var l="api/OsdTrnBankAlert/UnReconDocumentUpload";s.postFile(l,t.uploadfrm).then(function(e){if($("#file").val(""),unlockUI(),1==e.data.status){var a={banktransc_gid:b},n="api/OsdTrnBankAlert/GetUnReconUploadedDoc";s.getparams(n,a).then(function(e){t.uploaddocument=e.data.MdlDocDetails,t.lblfilename=e.data.filename,t.lblfilepath=e.data.filepath}),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})}else i.alert(e.data.message,{status:"warning",pos:"top-center",
timeout:3e3});unlockUI()})}else i.alert("Please select a file.","warning")},t.Submit=function(){var e={banktransc_gid:b,cbounreconciliation_status:t.cborm_status,updation_remarks:t.txtremarks},a="api/OsdTrnBankAlert/PostUnconciliationStatusUpdation";lockUI(),s.post(a,e).then(function(e){1==e.data.status?(unlockUI(),i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3})):(unlockUI(),i.alert(e.data.message,{status:"info",pos:"top-center",timeout:3e3})),d.url("app/osdBamAllocatedToRM")})},t.Back=function(){d.url("app/osdBamAllocatedToRM?lstab="+y)},t.documentviewer=function(e,t){lockUI();var a=_.fnCheckValidDocType(t,"DocumentViewerFormat");return 0==a?(i.alert("View is not supported for this format..!",{status:"danger",pos:"top-center",timeout:3e3}),unlockUI(),!1):void g.DocumentViewer(e,t)}}angular.module("angle").controller("osdTrnUnreconciliationTransactionViewController",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","apiManage","SweetAlert","$route","ngTableParams","cmnfunctionService","DownloaddocumentService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p,_,g,f){function v(){lockUI();var e="api/OsdTrnMyTicket/GetActivityCount";i.get(e).then(function(e){t.alloted_count=e.data.lsallotedcount,t.workinprogress_count=e.data.lsworkinprogress_count,t.completed_count=e.data.completed_count,t.closed_count=e.data.closed_count,t.transfer_count=e.data.transfer_count,t.forward_count=e.data.lsforward_count,t.approvalpending_count=e.data.approvalpending_count,unlockUI()}),lockUI();var e="api/OsdTrnMyTicket/GetWorkInProgressSummary";i.get(e).then(function(e){t.workinprogress_list=e.data.workinprogressdtl,unlockUI()})}var k=this;k.title="OsdTrnWorkMyTicketController",v(),t.Refresh=function(){v()},t.Allotted=function(){n.go("app.OsdTrnAllotedMyTicket")},t.Work=function(){n.go("app.OsdTrnWorkMyTicket")},t.Approval=function(){n.go("app.OsdTrnApprovalMyTicket")},t.External=function(){n.go("app.OsdTrnExternalMyTicket")},t.Internal=function(){n.go("app.OsdTrnInternalMyTicket")},t.Completed=function(){n.go("app.OsdTrnCompletedMyTicket")},t.Closed=function(){n.go("app.OsdTrnClosedMyTicket")},t.workinprogressview360=function(e,a,n,r,o,l){t.servicerequest_gid=e,t.bankalert_flag=a,t.bankalert2allocated_gid=n,t.customer_gid=r,t.customer_urn=o,t.request_refno=l;var s=e,d=a,m=n,u=r,p={servicerequest_gid:s,bankalert_flag:d,bankalert2allocated_gid:m,customer_gid:u},_="api/OsdTrnMyTicket/GetServiceRequestForwardView360Update";lockUI(),i.getparams(_,p).then(function(e){1==e.data.status?unlockUI():unlockUI()});var g="N";c.url("app/osdTrnMyActivity360?hash="+f.encryptURL("servicerequest_gid="+e+"&bankalert_flag="+a+"&bankalert2allocated_gid="+n+"&customer_gid="+r+"&RequestCompletedFlag="+g+"&lspage=Work-InProgress&customer_urn="+o+"&request_refno="+l))},t.TransferAllocationwithRemarks=function(e,t,a,n,r,l,s,c,m){function u(o,m){o.department_name=s,o.cboactivity=c;var u={department_gid:l,activitymaster_gid:c,servicerequest_gid:e},_="api/OsdMstActivity/GetTeamSummary";i.getparams(_,u).then(function(e){o.supportdtllist=e.data.supportdtl});var _="api/OsdMstActivity/GetActivity";i.getparams(_,u).then(function(e){o.activitylist=e.data.activitydtl});var _="api/OsdTrnTicketManagement/GetActivityEdit";i.getparams(_,u).then(function(e){o.cboactivity.activity_name=e.data.activity_name}),o.onselectedchangeteam=function(e){var t={supportteam_gid:o.cbosuppport_team.supportteam_gid},a="api/OsdMstSupportTeam/GetTeamMemberExcept";i.getparams(a,t).then(function(e){o.teammembers_list=e.data.teammembers})};var u={servicerequest_gid:e},_="api/OsdTrnTicketManagement/GetTransferMemberlist";i.getparams(_,u).then(function(e){o.transferlistdtllist=e.data.transferlistdtl;var t=e.data.transferlistdtl[0].transfer_flag;"Y"==t?o.transferlist=!0:o.transferlist=!1,unlockUI()}),o.teamSubmitremarks=function(){lockUI();var l={servicerequest_gid:e,assigned_supportteam:t,assigned_member:a,assigned_membergid:n,activitymaster_gid:o.cboactivity,assigned_supportteamgid:r,transferteam_gid:o.cbosuppport_team.supportteam_gid,transferteam_name:o.cbosuppport_team.team_name,transferemployee_gid:o.cboemployee_name.employee_gid,transferemployee_name:o.cboemployee_name.employee_name,remarks:o.team_description},s="api/OsdTrnTicketManagement/PostTransferAllocation";i.post(s,l).then(function(e){1==e.data.status?(m.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),v(),unlockUI()):(m.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),m.close("closed"),unlockUI())})},o.ok=function(){p.close("closed")}}var p=o.open({templateUrl:"/transferallocationwithremarksmodal.html",controller:u,backdrop:"static",keyboard:!1,size:"md"}),e=e;u.$inject=["$scope","$modalInstance"]},t.Priority=function(e,t,a){function n(n,o){n.department_name=a;var l={department_gid:t},l={servicerequest_gid:e},s="api/OsdTrnTicketManagement/GetPrioritylist";i.getparams(s,l).then(function(e){n.prioritylistdtllist=e.data.prioritylistdtl,unlockUI()}),n.prioritySubmit=function(){var t;lockUI(),t=void 0==n.priority||""==n.priority?"None":n.priority;var a={servicerequest_gid:e,priority:t},r="api/OsdTrnTicketManagement/PostPriority";i.post(r,a).then(function(e){1==e.data.status?(o.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),v(),unlockUI()):(o.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),v(),unlockUI())})},n.ok=function(){r.close("closed")}}var r=o.open({templateUrl:"/prioritymodal.html",controller:n,backdrop:"static",keyboard:!1,size:"md"});n.$inject=["$scope","$modalInstance"]},t.getApprovalRequest=function(e,t){function a(t,a){var o={servicerequest_gid:e},s="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(s,o).then(function(e){t.employee_list=e.data.employeelist});var s="api/OsdTrnMyTicket/TmpAllMembersDelete";i.get(s).then(function(e){}),t.ok=function(){r.close("closed")},t.ApprovalMembercancel=function(a){var n={tmpapprovalmember_gid:a,servicerequest_gid:e},r="api/OsdTrnMyTicket/TmpApprovalMembersDelete";i.post(r,n).then(function(a){t.approvalmember=a.data.approvalmember;var n={servicerequest_gid:e},r="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(r,n).then(function(e){t.employee_list=e.data.employeelist})})},t.coreChanged=function(a){var r={approvalgid:t.cboapproval_member.employee_gid,approvalname:t.cboapproval_member.employee_name,servicerequest_gid:e};lockUI();var o="api/OsdTrnMyTicket/TempApprovalMember";i.post(o,r).then(function(a){if(1==a.data.status){d.alert(a.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),t.current=n.current.name,l.store("dataldCtrl",t),t.cboapproval_member="";var r={servicerequest_gid:e},o="api/OsdTrnMyTicket/TmpApprovalMembersView";i.getparams(o,r).then(function(e){t.approvalmember=e.data.approvalmember});var o="api/OsdTrnMyTicket/EmployeeNotIn";i.getparams(o,r).then(function(e){t.employee_list=e.data.employeelist})}else d.alert(a.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI()})},t.getapprovalclick=function(){var a={approval_remarks:t.approval_remarks,approval_type:t.approval_type,approval_basedon:"HA",servicerequest_gid:e};lockUI();var n="api/OsdTrnMyTicket/PostApprovalGet";i.post(n,a).then(function(e){unlockUI(),1==e.data.status?(r.close("closed"),v(),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var r=o.open({templateUrl:"/getApprovalmodal.html",controller:a,backdrop:"static",keyboard:!1,size:"md"});a.$inject=["$scope","$modalInstance"]},t.getReApprovalRequest=function(e,t){function a(t,a){var r="api/employee/employee";i.get(r).then(function(e){t.employee_list=e.data.employee_list}),t.ok=function(){n.close("closed")},t.getreapprovalclick=function(){var a={approvalname:t.cboapproval_member.employee_name,approvalgid:t.cboapproval_member.employee_gid,approval_remarks:t.approval_remarks,approval_type:"Approval",approval_basedon:"RA",servicerequest_gid:e};lockUI();var r="api/OsdTrnMyTicket/PostApprovalGet";i.post(r,a).then(function(e){unlockUI(),1==e.data.status?(v(),n.close("closed"),d.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI()):(n.close("closed"),d.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}var n=o.open({templateUrl:"/getReApprovalmodal.html",controller:a,backdrop:"static",keyboard:!1,size:"md"});a.$inject=["$scope","$modalInstance"]}}angular.module("angle").controller("OsdTrnWorkMyTicketController",e),e.$inject=["$rootScope","$scope","$sce","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$filter","ngTableParams","$timeout","cmnfunctionService"]}(),function(){"use strict";function e(e,t,a,n,r,o,l,s,i,d,c,m,u,p){function _(){t.showapproval=!0,t.hideapproval=!0;var e={approval_token:k},a="api/OsdTrnRequestApproval/GetRequestDtl";lockUI(),s.getparams(a,e).then(function(e){t.request_title=e.data.request_title,t.request_refno=e.data.request_refno,t.activity_name=e.data.activity_name,t.assigned_dtl=e.data.assigned_dtl,t.getapproval_remarks=e.data.getapproval_remarks,t.hierary_level=e.data.hierary_level,t.servicerequest_gid=e.data.servicerequest_gid,t.approval_type=e.data.approval_type,unlockUI(),1==e.data.status?(t.hideapproval=!0,t.showapproval=!0):(i.alert(e.data.message,{status:"warning",pos:"top-center",timeout:4e3}),t.showapproval=!1,t.hideapproval=!1)})}var g=this;g.title="serviceRequestApprovalcontroller";var f=window.location.href,v=f.split("?id="),k=v[1];_(),t.approve_submit=function(){var e=t.hierary_level,a=++e,n={approval_remarks:t.txtremarks,approval_token:k,hierary_level:a,servicerequest_gid:t.servicerequest_gid,approval_type:t.approval_type};lockUI();var r="api/OsdTrnRequestApproval/PostRequestApproved";s.post(r,n).then(function(e){unlockUI(),1==e.data.status?(i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),t.showapproval=!1,t.hideapproval=!1):(i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})},t.reject_submit=function(){var e=t.hierary_level,a=++e,n={approval_remarks:t.txtremarks,approval_token:k,hierary_level:a,servicerequest_gid:t.servicerequest_gid,approval_type:t.approval_type};lockUI();var r="api/OsdTrnRequestApproval/PostRequestRejected";s.post(r,n).then(function(e){unlockUI(),1==e.data.status?(i.alert(e.data.message,{status:"success",pos:"top-center",timeout:3e3}),unlockUI(),t.showapproval=!1,t.hideapproval=!1):(i.alert(e.data.message,{status:"danger",pos:"top-center",timeout:3e3}),unlockUI())})}}angular.module("angle").controller("serviceRequestApprovalcontroller",e),e.$inject=["$rootScope","$scope","$state","AuthenticationService","$modal","ScopeValueService","$http","SocketService","Notify","$location","$route","$cookies","$timeout"]}();