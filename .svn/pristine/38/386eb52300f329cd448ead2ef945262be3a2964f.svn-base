<h3>
    Retrieval Request
</h3>
<div ng-controller="idasTrnRetrievalReqCreate as dp">

    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="col-lg-8 col-md-8 col-sm-8">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <em class="fa fa-plus"></em>&nbsp; Retrieval Request
                    </div>
                    <div class="panel-body">
                        <form name="Retrievalform" id="Retrievalform" novalidate="" class="form-validate mb-lg"
                            autocomplete="off">
                            <div class="row">

                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label">Requested Date &nbsp;<span
                                                style="color:red">*</span></label>
                                        <p class="input-group">
                                            <input type="text" datepicker-popup="{{dp.format}}" ng-model="requestDate"
                                                is-open="dp.openreq" datepicker-options="dp.dateOptions"
                                                ng-required="true" close-text="Close" class="form-control" />
                                            <span class="input-group-btn">
                                                <button type="button" ng-click="dp.calenderreq($event)"
                                                    class="btn btn-default">
                                                    <em class="fa fa-calendar"></em>
                                                </button>
                                            </span>
                                        </p>
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2">

                                    </div>
                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <label class="col-form-label control-label"><strong>Requested By &nbsp;<span
                                                    style="color:red">*</span></strong></label>
                                        <input ng-model="requested_by" tabindex="0" maxlength="128" required
                                            aria-required="true" aria-invalid="true"
                                            class="form-control ng-pristine ng-invalid ng-invalid-required ng-touched"
                                           >

                                    </div>
                                    <div class="col-lg-1 col-md-1 col-sm-1">

                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12 col-sm-12 col-md-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label">Approved Date &nbsp;<span
                                                style="color:red">*</span></label>
                                        <p class="input-group">
                                            <input type="text" datepicker-popup="{{dp.format}}" ng-model="approvalDate"
                                                is-open="dp.openapp" datepicker-options="dp.dateOptions"
                                                ng-required="true" close-text="Close" class="form-control" />
                                            <span class="input-group-btn">
                                                <button type="button" ng-click="dp.calenderapp($event)"
                                                    class="btn btn-default">
                                                    <em class="fa fa-calendar"></em>
                                                </button>
                                            </span>
                                        </p>
                                    </div>
                                    <div class="col-lg-2 col-sm-2 col-md-2">

                                    </div>
                                    <div class="col-lg-5 col-md-5 col-s-5">
                                        <label class="col-form-label control-label"><strong>Approved By &nbsp;<span
                                                    style="color:red"> *</span></strong></label>
                                        <input ng-model="approved_by" tabindex="0" maxlength="128" required
                                            aria-required="true" aria-invalid="true"
                                            class="form-control ng-pristine ng-invalid ng-invalid-required ng-touched">

                                    </div>
                                    <div class="col-lg-1 col-sm-1 col-md-1">

                                    </div>
                                </div>

                            </div>
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">

                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <label class="col-form-label control-label"><strong> Retrieval Type &nbsp;
                                            </strong><span style="color:red">*</span></label><br />
                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" required name="retrieval_type" value="Temporary"
                                                    ng-model="retrieval_type" />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Temporary
                                            </label>
                                            <label>
                                                <input type="radio" required name="retrieval_type" value="Permanent"
                                                    ng-model="retrieval_type" />
                                                <span class="fa fa-circle"></span>Permanent
                                            </label>

                                        </div>


                                    </div>
                                    <div class="col-lg-1 col-sm-1 col-md-1">

                                    </div>
                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <label class="col-form-label control-label">
                                            <strong>
                                                Retrieval Reason &nbsp;<span style="color:red">*</span>
                                            </strong>
                                        </label>
                                        <select name="reason" id="reason" dropzone="" ng-model="reason" required=""
                                            class="chosen-select form-control" size="1">
                                            <option value="">-----Select Retrieval Reason----</option>
                                            <option value="Account Closed">Account Closed</option>
                                            <option value="Audit Purpose">Audit Purpose</option>
                                            <option value="Permanent Retrieval">Permanent Retrieval</option>
                                            <option value="Retrieval for Legal">Retrieval for Legal</option>
                                            <option value="Retrieval for Document Changes">Retrieval for Document Changes</option>
                                            <option values="Others">Others</option>
                                        </select>

                                    </div>
                                    <div class="col-lg-1 col-sm-1 col-md-1">

                                    </div>

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <label class="col-form-label control-label">
                                            <strong>
                                                Remarks &nbsp;<span style="color:red">*</span>
                                            </strong>
                                        </label>
                                        <br>
                                        <textarea ng-model="remarks" placeholder="Remarks" required rows="4"
                                            maxlength="1000" class="form-control" aria-required="true" id="input_13"
                                            ng-trim="false" aria-multiline="true" tabindex="0"
                                            aria-invalid="true"></textarea>

                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <em class="icon icon-cloud-upload"></em>&nbsp;Upload Document
                    </div>
                    <div  ui-scroll-viewport="" style="height:360px; overflow-y: auto;">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-12 col-lg-12 col-sm-12">
                                <div class="col-lg-2 col-md-2 col-sm-2">
                                    <button type="button" ng-click="FileShow()" class="btn btn-info btn-xs">
                                        <span class="icon icon-cloud-upload"></span>&nbsp;&nbsp;Upload File
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div  ng-show="DivFile"">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <label>Document Title</label>&nbsp;<span style="color:red">*</span>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                        <input type="text" ng-model="txtdocument_title" rows="1" tabindex="0" min="0" aria-required="true"
                                               aria-invalid="true" class="form-control" maxlength="256" />
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-5 col-md-5 col-sm-5">
                                        <label>File Upload</label>
                                    </div>
    
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <input type="file" id="commonupload" ng-model="commonupload" ng-disabled="!txtdocument_title"
                                            onchange="angular.element(this).scope().commonupload(this.files, angular.element(this).scope().despatchdocumentupload, this.name)"
                                            data-classbutton="btn btn-default" multiple
                                            data-classinput="form-control inline" data-button-text="Select"
                                            accept="images/jpg,images/jpeg,images/tif,images/tiff,images/pdf" />
                                    </div>
                                </div>
                            </div>
                        </div>
                       
                    <br/>
                        <div class="row">
                            <div class="col-lg-12 col-sm-12 col-md-12">
                                <div class="col-lg-12 col-sm-12 col-md-12">
                                    <div class="row">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-secondary table-bordered">

                                                <tbody>
                                                    <tr ng-repeat="data in uploaddocument" width="100%">
                                                        <td scope="col" title="'S.No'">{{$index+1}}</td>
                                                        <td><label>{{data.document_title}}</label>
                                                        <br/>
                                                            <a download="" href="" id="btnpdf" ng-click="downloadsdocument(data.document_path,data.document_name)">{{data.document_name}}</a></td>
                                                       
                                                        <td align="center" scope="col" data-title="'Action'">

                                                            <button title="Delete Document"
                                                                ng-click="deletedocument(data.uploaddocument_gid)"
                                                                class="btn btn-danger">
                                                                <em class="fa fa-close"></em>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="col-lg-12 col-md-12 col-sm-12">


                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <em class="fa fa-plus"></em>&nbsp; Retrieval Request - File Details
                    </div>
                   
                        <div class="panel-body">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                   
                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                        <strong> Retrieval Mode </strong>
                                            <div class="radio c-radio">
                                                <label>
                                                    <input type="radio" required name="retrieval_mode" value="Customer" ng-change="onchangemodecustomer()" ng-model="retrieval_mode" />
                                                    &nbsp;&nbsp;<span class="fa fa-circle"></span>Customer
                                                </label>
                                                <label>
                                                    <input type="radio" required name="retrieval_mode" ng-change="onchangemodebox()" value="Box" ng-model="retrieval_mode" />
                                                    <span class="fa fa-circle"></span>Box
                                                </label>
                                                <label>
                                                    <input type="radio" required name="retrieval_mode" ng-change="onchangemodefile()" value="File" ng-model="retrieval_mode" />
                                                    <span class="fa fa-circle"></span>File
                                                </label>
                                             
                                            </div>
                                       
                
                                    </div> 
                                </div>
                                
                            </div>
                            <div class="row" ng-show="customer_mode">
                                <div class="col-lg-12 col-md-12 col-sm-12">

                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                       
                                        <!-- <select id="customer" name="customer" chosen=""
                                            ng-options="m.customername for m in customer_list" ng-change="onSelectChangeCustomer(customer)"  ng-model="customer"
                                            class="chosen-select form-control">
                                            <option value=""> ---Select Customer--- </option>
                                        </select> -->

                                        <select name="customer" chosen="" multiple="multiple" ng-change="onSelectChangeCustomer(customer)"
                                         ng-options="m.customername for m in customer_list" 
                                         ng-model="customer" class="chosen-select form-control" required>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="row" ng-show="box_mode">
                                <div class="col-lg-12 col-md-12 col-sm-12">

                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                       
                                        <!-- <select id="box" name="box" chosen=""
                                            ng-options="m.boxref_no for m in box_list" ng-change="onSelectChangeBox(box)" ng-model="box"
                                            class="chosen-select form-control">
                                            <option value=""> ---Select Box--- </option>
                                        </select> -->

                                        <select name="box" chosen="" multiple="multiple" ng-change="onSelectChangeBox(box)"
                                        ng-options="m.boxref_no for m in box_list" 
                                        ng-model="box" class="chosen-select form-control" required>
                                       </select>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="row" ng-show="reconciliationmode">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                   <div class="panel widget">
                                      <div class="row row-table">
                                         
                                         <div class="col-md-2 col-sm-3 col-xs-6 pv br">
                                            <div class="h4 m0 text-bold">Reconciliation</div>
                                            <div class="text-uppercase">{{retrieval_mode}}</div>
                                         </div>
                                         <div class="col-md-2 col-sm-3 hidden-xs pv text-center br">
                                            <div class="text-info text-sm">In Crown</div>
                                            <div class="text-muted text-md">
                                               <em class="wi wi-day-cloudy"></em>
                                            </div>
                                          
                                            <div class="text-muted">{{total}}</div>
                                         </div>
                                         <div class="col-md-2 col-sm-3 hidden-xs pv text-center br">
                                            <div class="text-info text-sm">In Samunnati</div>
                                            <div class="text-muted text-md">
                                               <em class="wi wi-day-cloudy"></em>
                                            </div>
                                            <div class="text-info">
                                                <em class="wi wi-sprinkles"></em>
                                                <span class="text-muted">(Permanent + Temporary)</span>
                                             </div>
                                            <div class="text-muted">{{permanet_count}} + {{temporary_count}}</div>
                                         </div>
                                         <div class="col-md-2 hidden-sm hidden-xs pv text-center br">
                                            <div class="text-info text-sm">Despatched</div>
                                            <div class="text-muted text-md">
                                               <em class="wi wi-day-cloudy"></em>
                                            </div>
                                           
                                            <div class="text-muted">{{despatched_count}}</div>
                                         </div>
                                         <div class="col-md-2 hidden-sm hidden-xs pv text-center">
                                            <div class="text-info text-sm">Total Cases</div>
                                            <div class="text-muted text-md">
                                               <em class="wi wi-day-sunny-overcast"></em>
                                            </div>
                                           
                                            <div class="text-muted">{{file_count}}</div>
                                         </div>
                                      </div>
                                   </div>
                                </div>
                                </div>
                             </div>
                            <br>
                            <div class="row" ng-show="file_mode">
                                <div class="col-md-12 col-lg-12 col-sm-12">
                                    <div class="col-md-12 col-lg-12 col-sm-12">
                                       
                                            <div >
                                                <table  datatable="ng" class="row-border hover table-responsive">
    
                                                    <thead>
                                                        <tr width="100%" class="bg-primary-light text-white">
                                                            <th width="8%">
                                                                Check All <br>
                                                                <input type="checkbox" id="c2" ng-model="all" ng-change="checkallBatch(all);"></th>
                                                            <th width="5%" style="display:none;">
                                                              S.No
                                                            </th>
                                                            <th width="10%">URN/Customer Name </th>
                                                            <th width="10%">File Ref No.</th>
                                                            <th width="14%">File Stamp Ref No.</th>
                                                            <th width="14%">Box Stamp Ref No.</th>
                                                            <th width="10%">Boxed On </th>
                                                            <th width="18%">Despatch Details</th>
                                                        </tr>
                                                    </thead>
                                                   
                                                        <tbody>
                                                            <tr ng-repeat="data in batch_list">
                                                                <td align="center">
                                                                    <input type="checkbox" id="c1"
                                                                           value={{data.checked}}  ng-model="data.checked">
                                                                </td>
                                                                <td width="5%" style="display:none;">
                                                                    {{$index+1}}
    
                                                                </td>
                                                                <td>
                                                                    {{data.customername}}
                                                                </td>
                                                              <td>
                                                                {{data.fileref_no}}
                                                              </td>
                                                              <td>
                                                                  {{data.filestampref_no}}
                                                              </td>
                                                              <td>
                                                                  {{data.boxstampref_no}}
                                                              </td>
                                                              <td>
                                                                  {{data.cartonbox_date}}
                                                              </td>
                                                              <td>
                                                                  <span>
                                                                     <strong>Despatched by</strong>  {{data.despatched_by}} <strong>On</strong> {{data.despatch_date}}<br>
                                                                     <strong>Despatched to</strong>  {{data.contact_person}}
                                                                  </span>
                                                              </td>
                                                                
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                                </div>
                                        </div>
                                    </div>
                                </div>
                        </div>
                  
                    <div>
                        <div align="center">   
                            <button ng-click="requestSubmit()" ng-disabled="Retrievalform.$invalid"
                                class="btn btn-success"><i class="fa fa-arrow-circle-right"></i>&nbsp;&nbsp;Submit</button>
                            <button ng-click="back()" class="btn btn-info"><i
                                    class="fa fa-arrow-circle-left"></i>&nbsp;&nbsp;Back</button>
    
                        </div>
                    </div>
                    <br>
                </div>
               
              
            </div>
        </div>
    </div>
</div>


