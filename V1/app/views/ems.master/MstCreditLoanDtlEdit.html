<style>
    .nav.nav-pills .active > a {
        background-color: rgb(19,14,89);
        background: linear-gradient(90deg, rgba(19,14,89,1) 0%, rgba(65,65,185,1) 35%, rgba(0,212,255,1) 100%);
        color: #ffffff;
    }
</style>

<h3>
    Application Creation
</h3>
<div ng-controller="MstCreditLoanDtlEditController as dp">
    <div class="panel">
        <div class="panel-heading" style="background-color:rgb(19,14,89);background: linear-gradient(90deg, rgba(19,14,89,1) 0%, rgba(65,65,185,1) 35%, rgba(0,212,255,1) 100%);color:#ffffff">
            <h5> Edit Loan </h5>
        </div>
        <div class="panel">
            <div class="panel-body">
                <div>
                    <form name="loan" ng-submit="form.submitForm2()" novalidate="" autocomplete="off" class="form-validate form-horizontal">
                        <div class="dd-handle ng-scope">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp; Loan Details </b></p>
                                    <hr />
                                    <label>Overall Limit Amount: </label>
                                    <label class="label label-primary" style="font-size:14px;"> {{lbloveralllimit_amount}}</label>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <br />
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Facility Requested On <span style="color:red"> *</span> </label>
                                        <br />
                                        <p class="input-group">
                                            <input type="text" id="txteditfacilityreqon_date" name="txteditfacilityreqon_date" ng-model="txteditfacilityreqon_date" datepicker-popup="{{dp.format}}"
                                                   style="height:36px;" is-open="dp.open1" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                   close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                            <span class="input-group-btn">
                                                <button type="button" ng-click="dp.calender1($event)" style="height:36px;" class="btn btn-default">
                                                    <em class="fa fa-calendar"></em>
                                                </button>
                                            </span>
                                        </p>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label">Product Type <span style="color:red"> *</span> </label>
                                        <br />
                                        <select name="loanproduct_name" ng-options="m.loanproduct_gid as m.loanproduct_name  for m in loanproductlist"
                                                id="loanproduct_name" ng-model="cboProductTypelist" class="form-control" style="height:37px;" chosen=""
                                                size="1" ng-change="producttype()">
                                            <option value=""> -----Select Product Type -----</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label">Product Sub Type  <span style="color:red"> *</span></label>
                                        <br />
                                        <select name="loansubproduct_name" ng-options="m.loansubproduct_gid as m.loansubproduct_name for m in loansubproductlist"
                                                id="loansubproduct_name" ng-model="cboProductSubTypelist" class="form-control" style="height:37px;" chosen=""
                                                size="1">
                                            <option value=""> -----Select Product Sub Type -----</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label">Loan Type  <span style="color:red"> *</span></label>
                                        <br />
                                        <select name="loan_type" ng-options="m.loantype_gid as m.loan_type for m in loantypelist" ng-change="loantypechange()"
                                                id="loan_type" ng-model="cboLoanTypelist" class="form-control" style="height:37px;" chosen=""
                                                size="1">
                                            <option value=""> -----Select Loan Type -----</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Facility Loan Amount <span style="color:red"> *</span> </label>
                                        <br />
                                        <input id="valueamount" ng-model="txtloanfaility_amount" class="form-control ng-pristine ng-valid ng-touched"
                                               ng-change="txtfacility()"  pattern="^[\d,]+$" style="text-align:right;">
                                        <span style="font-style:italic;">Number in words:</span>
                                        <span id="words_totalamount1" style="color:#003c96fc;" class="text-bold"></span>
                                        <div ng-hide="amount_validation">
                                            <label style="color:red;">Amount Exceeded From Overall Limit </label>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Remaining </label>
                                        <br />
                                        <input type="text" ng-disabled="true" style="text-align:right;" class="form-control ng-pristine ng-valid ng-touched"
                                               ng-model="txtremaining" />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Rate of Interest  <span style="color:red"> *</span></label>
                                        <br />
                                        <input type="text" ng-model="txteditrate_interest" tabindex="0" class="form-control" maxlength="10" />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Margin  </label> <span style="color:red">*</span>
                                        <br />
                                        <input ng-model="txtedit_margin" maxlength="10" required class="form-control ng-pristine ng-valid ng-touched" step="0.01">
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Penal Interest <span style="color:red"> *</span> </label>
                                        <br />
                                        <input type="text" ng-model="txteditpanel_interest" tabindex="0" class="form-control" maxlength="10" />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Validity of the facility (years)   </label>
                                        <br />
                                        <input type="text" ng-model="txteditvalidity_years" tabindex="0" class="form-control" ng-change="calculatefacility()" ng-pattern="/^[0-9]+$/" />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Validity of the facility (months) </label>
                                        <br />
                                        <input type="text" ng-model="txteditvalidity_months" tabindex="0" class="form-control" ng-change="calculatefacility()" ng-pattern="/^[0-9]+$/" />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Validity of the facility (days) </label>
                                        <br />
                                        <input type="text" ng-model="txteditvalidity_days" tabindex="0" class="form-control" ng-change="calculatefacility()" ng-pattern="/^[0-9]+$/" />
                                    </div>
                                   
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Calculation of overall limit validity </label>
                                        <br />
                                        <input type="text" ng-model="txtoverallfacilityvalidity_limit" tabindex="0" class="form-control" disabled />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Tenure of the product / Credit Period (years) <span style="color:red">*</span></label>
                                        <br />
                                        <input type="text" ng-model="txtedittenure_years" tabindex="0" class="form-control" ng-change="calculatetenure()" ng-pattern="/^[0-9]+$/" />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Tenure of the product / Credit Period (months) <span style="color:red">*</span></label>
                                        <br />
                                        <input type="text" ng-model="txtedittenure_months" tabindex="0" class="form-control" ng-change="calculatetenure()" ng-pattern="/^[0-9]+$/" />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Tenure of the product / Credit Period (days) <span style="color:red">*</span></label>
                                        <br />
                                        <input type="text" ng-model="txtedittenure_days" tabindex="0" class="form-control" ng-change="calculatetenure()" ng-pattern="/^[0-9]+$/" />
                                    </div>
                                    
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Calculation of overall limit validity <span style="color:red">*</span></label>
                                        <br />
                                        <input type="text" ng-model="txteditoveralllimit_validity" tabindex="0" class="form-control" disabled />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Scheme Type </label>
                                        <br />
                                        <p style="font-size:14px;">Financial statement method</p>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Facility Type  <span style="color:red">*</span></label>
                                        <br />
                                        <select name="FacilityType"
                                                ng-model="cboFacilityTypelist" class="form-control ng-valid ng-touched ng-valid-parse" style="height:37px;"
                                                size="1">
                                            <option value=""> ----- Select Facility Type  -----</option>
                                            <option value="New"> New </option>
                                            <option value="Existing"> Existing</option>

                                        </select>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Facility mode <span style="color:red">*</span></label>
                                        <br />
                                        <select name="Facilitymode"
                                                ng-model="cboFacilitymodelist" class="form-control ng-valid ng-touched ng-valid-parse" style="height:37px;"
                                                size="1">
                                            <option value=""> ----- Select Facility mode -----</option>
                                            <option value="Revolving"> Revolving </option>
                                            <option value="Non Revolving">Non Revolving </option>
                                            <option value="Not Applicable"> Not Applicable</option>
                                        </select>
                                    </div>
                                  
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label>Principal Frequency </label>
                                        <br />
                                        <select name="principalfrequency_name" ng-options="m.principalfrequency_gid as m.principalfrequency_name for m in principalfrequencylist"
                                                id="principalfrequency_name" ng-model="cboprincipalfrequency" class="form-control" style="height:37px;" chosen=""
                                                size="1">
                                            <option value=""> -----Select Principal Frequency -----</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Interest Frequency  </label>
                                        <br />
                                        <select name="interestfrequency_name" ng-options="m.interestfrequency_gid as m.interestfrequency_name  for m in interestfrequencylist"
                                                id="interestfrequency_name" ng-model="cboInterestFrequency " class="form-control " style="height:37px;" chosen=""
                                                size="1">
                                            <option value=""> -----Select Interest Frequency -----</option>
                                        </select>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <!--ng-show="ARF_condition"-->
                                        <label>Interest to be deducted upfront  <span style="color:red"> *</span></label>
                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" id="Interest" name="Interest" value="Yes" ng-model="rdbinterest_status" required />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Yes
                                            </label>
                                            <label>
                                                <input type="radio" id="Interest" name="Interest" value="No" ng-model="rdbinterest_status" required />
                                                <span class="fa fa-circle"></span>No
                                            </label>
                                        </div>
                                    </div>
                                    <!--<div class="col-lg-2 col-md-2 col-sm-2" ng-show="ARF_condition">
        <label>Interest to be deducted upfront </label>
        <input type="text" ng-model="test" tabindex="0" class="form-control" disabled />
    </div>-->
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Moratorium Applicable </label>
                                        <br />
                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" id="MoratoriumApplicable" name="Moratorium Applicable" value="Yes"
                                                       ng-model="rdbmoratorium_status" ng-change="onselectedmoratoriumyes();" />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Yes
                                            </label>
                                            <label>
                                                <input type="radio" id="MoratoriumApplicable" name="Moratorium Applicable" value="No"
                                                       ng-model="rdbmoratorium_status" ng-change="onselectedmoratoriumyes();" />
                                                <span class="fa fa-circle"></span>No
                                            </label>
                                        </div>

                                    </div>

                                    <!--<div class="col-lg-2 col-md-2 col-sm-2" ng-show="txtedittenure_days=='0'">
        <label class="col-form-label"> Moratorium Applicable </label>
        <br />
        <input type="text" ng-model="test1" tabindex="0" class="form-control" disabled />
    </div>-->

                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Program <span style="color:red">*</span> </label>
                                        <br />
                                        <select name="program" id="program" required="" ng-options="m.program_gid as m.program  for m in programlist"
                                                ng-model="cboProgram" class="form-control" chosen="" style="height:37px;"
                                                size="1">
                                            <option value=""></option>
                                        </select>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3" ng-show="rdbmoratorium_status=='Yes'">
                                        <label class="col-form-label"> Moratorium Type  </label> <span style="color:red">*</span>
                                        <br />
                                        <select name="Moratoriumtype"
                                                ng-model="cbomoratorium_type" class="form-control  ng-valid ng-touched ng-valid-parse" style="height:37px;"
                                                size="1">
                                            <option value=""> ----- Select Moratorium Type -----</option>
                                            <option value="Principal"> Principal </option>
                                            <option value="Interest"> Interest </option>
                                            <option value="Principal and interest"> Principal and interest </option>
                                        </select>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3" ng-show="rdbmoratorium_status=='Yes'">
                                        <label class="col-form-label"> Moratorium Start Date <span style="color:red"> *</span></label>
                                        <br />
                                        <p class="input-group">
                                            <input type="text" id="txtmoratorium_startdate" name="txtmoratorium_startdate" ng-model="txtmoratorium_startdate" datepicker-popup="{{dp.format}}"
                                                   style="height:36px;" is-open="dp.open2" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                   close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                            <span class="input-group-btn">
                                                <button type="button" ng-click="dp.calender2($event)" style="height:36px;" class="btn btn-default">
                                                    <em class="fa fa-calendar"></em>
                                                </button>
                                            </span>
                                        </p>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3" ng-show="rdbmoratorium_status=='Yes'">
                                        <label class="col-form-label"> Moratorium End Date <span style="color:red"> *</span></label>
                                        <br />
                                        <p class="input-group">
                                            <input type="text" id="txtmoratorium_enddate" name="txtmoratorium_enddate" ng-model="txtmoratorium_enddate" datepicker-popup="{{dp.format}}"
                                                   style="height:36px;" is-open="dp.open3" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                   close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                            <span class="input-group-btn">
                                                <button type="button" ng-click="dp.calender3($event)" style="height:36px;" class="btn btn-default">
                                                    <em class="fa fa-calendar"></em>
                                                </button>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    
                                    <!--<div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Product <span style="color:red"> *</span></label>
                                        <br />
                                        <select name="ProductName" id="ProductName" chosen="" ng-options="m.product_gid as m.product_name for m in productname_list"
                                                ng-model="cboproduct_name" class="chosen-select form-control" required ng-change="productname_change(cboproduct_name)">
                                            <option value=""></option>
                                        </select>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"><strong> Sector / Strategic Business Unit </strong></label>
                                        <input type="text" ng-model="txtsector_name" tabindex="0" disabled class="form-control" />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"><strong> Category </strong> </label>
                                        <input type="text" ng-model="txtcategory_name" tabindex="0" disabled class="form-control" />
                                    </div>-->
                                    <!--<div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"><strong>Primary Value Chain</strong> <span style="color:red">*</span></label>
                                        <select name="primaryvalue_chain" id="primaryvalue_chain" required="" chosen="" multiple ng-options="m.valuechain_name for m in valuechainlist"
                                                ng-model="cboPrimaryValueChain" class="form-control ng-valid ng-touched ng-valid-parse"></select>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"><strong>Secondary Value Chain</strong><span style="color:red">*</span></label>
                                        <select name="secondaryvalue_chain" id="secondaryvalue_chain" required="" chosen="" multiple ng-options="m.valuechain_name for m in valuechainlist"
                                                ng-model="cboSecondaryValueChain" class="form-control ng-valid ng-touched ng-valid-parse"></select>
                                    </div>-->
                                </div>
                            </div>
                            <!--<div class="row">
                                <div class="col-md-12 col-lg-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label"> Variety <span style="color:red"> *</span> </label>
                                        <br />
                                        <select name="Variety" id="Variety" chosen="" ng-options="m.variety_gid as m.variety_name for m in varietyname_list" required
                                                ng-model="cbovariety_name" class="chosen-select form-control" ng-change="Variety_change(cbovariety_name)">
                                            <option value=""></option>
                                        </select>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label"><strong> Botanical Name </strong></label>
                                        <input type="text" ng-model="txtbotanical_name" tabindex="0" disabled class="form-control" />
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label"><strong> Alternative Names</strong></label>
                                        <input type="text" ng-model="txtalternative_name" tabindex="0" disabled class="form-control" />
                                    </div>
                                    <br />
                                </div>
                            </div>-->
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <label class="col-form-label"> Purpose of Loan </label> <span style="color:red">*</span>
                                        <textarea ng-model="txtenduse_purpose" rows="4" class="form-control" style="resize:vertical;"
                                                  required id="input_13" ng-trim="false" aria-multiline="true" tabindex="0" aria-invalid="true"></textarea>

                                    </div>
                                </div>
                            </div>
                            <br/>
                            <div class="dd-handle ng-scope">
                                <div class="row">
                                    <div class="col-md-12 col-lg-12 col-sm-12">
                                        <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp; Product Details </b></p>
                                        <hr />
                                        <div class="row">
                                            <div class="col-md-12 col-lg-12 col-sm-12">
                                                <div class="col-lg-4 col-md-4 col-sm-4">
                                                    <label class="col-form-label"> Product <span style="color:red"> *</span></label>
                                                    <br />
                                                    <select name="ProductName" id="ProductName" chosen="" ng-options="m.product_name for m in productname_list"
                                                            ng-model="cboproduct_name" class="chosen-select form-control" ng-change="productname_change(cboproduct_name)">
                                                        <option value=""></option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4">
                                                    <label class="col-form-label"><strong> Sector / Strategic Business Unit </strong></label>
                                                    <input type="text" ng-model="txtsector_name" tabindex="0" disabled class="form-control" />
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4">
                                                    <label class="col-form-label"><strong> Category </strong> </label>
                                                    <input type="text" ng-model="txtcategory_name" tabindex="0" disabled class="form-control" />
                                                </div>
                                                <br />
                                            </div>
                                        </div>
                                        <br />
                                        <div class="row">
                                            <div class="col-md-12 col-lg-12 col-sm-12">
                                                <div class="col-lg-4 col-md-4 col-sm-4">
                                                    <label class="col-form-label"> Variety <span style="color:red"> *</span> </label>
                                                    <br />
                                                    <select name="Variety" id="Variety" chosen="" ng-options="m.variety_name for m in varietyname_list"
                                                            ng-model="cbovariety_name" class="chosen-select form-control" ng-change="Variety_change(cbovariety_name)">
                                                        <option value=""></option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4">
                                                    <label class="col-form-label"><strong> Botanical Name </strong></label>
                                                    <input type="text" ng-model="txtbotanical_name" tabindex="0" disabled class="form-control" />
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4">
                                                    <label class="col-form-label"><strong> Alternative Names</strong></label>
                                                    <input type="text" ng-model="txtalternative_name" tabindex="0" disabled class="form-control" />
                                                </div>
                                                <br />
                                            </div>
                                        </div>
                                        <br />
                                        <div class="row">
                                            <div class="col-md-12 col-lg-12 col-sm-12">
                                                <div class="col-lg-4 col-md-4 col-sm-4">
                                                    <label class="col-form-label"> CSA - Commodity Average <span style="color:red"> *</span> </label>
                                                    <br />
                                                    <input type="text" ng-model="txtcsacommodity_average" tabindex="0" class="form-control" />
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4">
                                                    <label class="col-form-label"> CSA - Percentage of the total limit <span style="color:red"> *</span></label>
                                                    <input type="text" ng-model="txtcsapercentage_limit" tabindex="0" class="form-control" />
                                                </div>
                                                <div class="col-lg-4 col-md-4 col-sm-4">

                                                </div>
                                                <br />
                                            </div>
                                        </div>
                                        <br />
                                        <div class="row text-center">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <button class="btn btn-sm btn-default" style="background-color:#09385f;color:white;" ng-click="productdtl_add()">
                                                    <span class="fa fa-plus" /> &nbsp; Add
                                                </button>
                                            </div>
                                        </div>
                                        <br />
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <div class="col-lg-12 col-md-12 col-sm-12">
                                                    <div class="table-responsive table-bordered">
                                                        <div>
                                                            <table class="table">
                                                                <thead class="bg-gray text-white">
                                                                    <tr>
                                                                        <th>S.No</th>
                                                                        <th>Product</th>
                                                                        <th>Sector / Strategic Business Unit</th>
                                                                        <th>Category</th>
                                                                        <th>Variety</th>
                                                                        <th>Botanical Name</th>
                                                                        <th>Alternative Names</th>
                                                                        <th>CSA - Commodity Average</th>
                                                                        <th>CSA- Percentage of the total limit</th>
                                                                        <th>Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="data in mstproductdtl_list">
                                                                        <td>{{$index+1}}</td>
                                                                        <td>{{data.product_name}}</td>
                                                                        <td>{{data.sector_name}}</td>
                                                                        <td>{{data.category_name}}</td>
                                                                        <td>{{data.variety_name}}</td>
                                                                        <td>{{data.botanical_name}}</td>
                                                                        <td>{{data.alternative_name}}</td>
                                                                        <td>{{data.csacommodity_average}}</td>
                                                                        <td>{{data.csapercentageoftotal_limit}}</td>
                                                                        <td class="text-nowrap">
                                                                            <button title="Delete" ng-click="product_delete(data.application2product_gid)"
                                                                                    class="btn btn-danger btn-xs ">
                                                                                <em class="fa fa-trash-o"></em>
                                                                            </button>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <br />
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div ng-show="Collateralshow">
                                <div class="dd-handle ng-scope">
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp; Collateral Details </b></p>
                                        <hr />
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label><strong>Source Type </strong> <span style="color:red">*</span></label>
                                            <select name="SourceType"
                                                    ng-model="cboSourceType" class="form-control ng-valid ng-touched ng-valid-parse" style="height:37px;"
                                                    size="1">
                                                <option value=""> ----- Select Source Type -----</option>
                                                <option value="Fixed">Fixed</option>
                                                <option value="Moving">Moving</option>
                                                <option value="Property">Property</option>
                                                <option value="Deposit">Deposit</option>
                                            </select>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label"> Guideline Value </label>
                                            <br />
                                            <input id="GuidelineValue" ng-model="txtguidelinevalue" class="form-control ng-pristine ng-valid ng-touched"
                                                   ng-change="txtguidelinevaluechange()" style="text-align:right;" pattern="^[\d,]+$">
                                            <span style="font-style:italic;">Number in words:</span>
                                            <span id="words_totalamount2" style="color:#003c96fc;" class="text-bold"></span>
                                        </div>

                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label"> Guideline Value assessed on </label>
                                            <br />
                                            <p class="input-group">
                                                <input type="text" id="GVAO" name="date" ng-model="txtguideline_date" datepicker-popup="{{dp.format}}"
                                                       style="height:36px;" is-open="dp.open8" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                       close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                                <span class="input-group-btn">
                                                    <button type="button" ng-click="dp.calender8($event)" style="height:36px;" class="btn btn-default">
                                                        <em class="fa fa-calendar"></em>
                                                    </button>
                                                </span>
                                            </p>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label"> Market Value </label>
                                            <br />
                                            <input id="MarketValue" ng-model="txtmarketValue" class="form-control ng-pristine ng-valid ng-touched"
                                                   ng-change="txtMarketValuechange()" style="text-align:right;" pattern="^[\d,]+$">
                                            <span style="font-style:italic;">Number in words:</span>
                                            <span id="words_totalamount3" style="color:#003c96fc;" class="text-bold"></span>
                                        </div>

                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12">

                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label">Market Value assessed on </label>
                                            <br />
                                            <p class="input-group">
                                                <input type="text" id="MVAO" name="date" ng-model="txtmarketvalue_date" datepicker-popup="{{dp.format}}"
                                                       style="height:36px;" is-open="dp.open14" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                       close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                                <span class="input-group-btn">
                                                    <button type="button" ng-click="dp.calender14($event)" style="height:36px;" class="btn btn-default">
                                                        <em class="fa fa-calendar"></em>
                                                    </button>
                                                </span>
                                            </p>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label"> Forced Source Value </label>
                                            <br />
                                            <input id="ForcedSourceValue" ng-model="txtforcedsource_value" class="form-control ng-pristine ng-valid ng-touched"
                                                   ng-change="txtForcedSourceValuechange()" style="text-align:right;" pattern="^[\d,]+$">
                                            <span style="font-style:italic;">Number in words:</span>
                                            <span id="words_totalamount4" style="color:#003c96fc;" class="text-bold"></span>
                                        </div>

                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label"> Collateral FSV  </label>
                                            <br />
                                            <input id="CollateralSSVvalue" ng-model="txtcollateralSSV_value" class="form-control ng-pristine ng-valid ng-touched"
                                                   ng-change="txtCollateralSSVvaluechange()" style="text-align:right;" pattern="^[\d,]+$">
                                            <span style="font-style:italic;">Number in words:</span>
                                            <span id="words_totalamount5" style="color:#003c96fc;" class="text-bold"></span>
                                        </div>

                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label">Forced Value Assessed  On </label>
                                            <br />
                                            <p class="input-group">
                                                <input type="text" id="FVAO" name="date" ng-model="txtforcedvalueassessed_on" datepicker-popup="{{dp.format}}"
                                                       style="height:36px;" is-open="dp.open15" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                       close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                                <span class="input-group-btn">
                                                    <button type="button" ng-click="dp.calender15($event)" style="height:36px;" class="btn btn-default">
                                                        <em class="fa fa-calendar"></em>
                                                    </button>
                                                </span>
                                            </p>
                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <div class="col-lg-12 col-md-12 col-sm-12">
                                                    <label><strong>Observation Summary </strong> <span style="color:red">*</span></label>
                                                    <br />
                                                    <textarea ng-model="txtcolateralobservation_summary" rows="5" class="form-control" style="resize:vertical;"
                                                              id="input_13" ng-trim="false" aria-multiline="true" tabindex="0" aria-invalid="true"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp;  Collateral Document Upload </b></p>
                                            <hr />
                                            <div class="col-lg-4 col-md-4 col-sm-4">
                                                <label> Document Title </label> <span style="color:red">*</span>
                                                <br />
                                                <select name="DocumentTitle" style="height:37px;"
                                                        ng-model="cboDocumentTitle" class="form-control ng-valid ng-touched ng-valid-parse"
                                                        size="1">
                                                    <option value=""> -----Select Document Title -----</option>
                                                    <option value="Document Observation "> Document Observation </option>
                                                    <option value="Document Collateral"> Document Collateral </option>
                                                    <option value="Document Legal Opinion"> Document Legal Opinion </option>
                                                </select>
                                            </div>
                                            <div class="col-lg-6 col-sm-6 col-md-6">
                                                <div class="float-label">
                                                    <strong>Upload Documents</strong>
                                                    <br /><br />
                                                    <input type="file" id="file" tabindex="5" multiple onchange="angular.element(this).scope().upload_doc(this.files, angular.element(this).scope().documentupload, this.name)"
                                                           ng-model="txtdocument" data-classbutton="btn btn-default" data-classinput="form-control inline" data-button-text="Select" />
                                                </div>
                                            </div>
                                            <div class="col-lg-2 col-sm-2 col-md-2">
                                            </div>
                                            <br /><br />
                                            <div class="row">
                                                <div class="col-lg-12 col-sm-12 col-md-12">
                                                    <div class="col-lg-12 col-sm-12 col-md-12">
                                                        <br />
                                                        <div class="table-responsive">
                                                            <table class="table table-striped table-secondary">
                                                                <thead class="bg-gray text-white">
                                                                    <tr width="100%">
                                                                        <th scope="col">S.No</th>
                                                                        <th scope="col">Document Title</th>
                                                                        <th scope="col">Document Name</th>
                                                                        <th align="center" scope="col">
                                                                            Action&nbsp;&nbsp;&nbsp;
                                                                            <a download="" href="" title="Download All" id="btnpdf2" ng-click="downloadallcall()">
                                                                                <em class="icon-arrow-down"></em>&nbsp;
                                                                            </a>
                                                                        </th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="data in DocumentList">
                                                                        <td title="S.No">{{$index+1}}</td>
                                                                        <td title="Document Title">{{data.document_title}}</td>
                                                                        <td title="Document Name">{{data.document_name}}</td>
                                                                        <td data-title="Action">
                                                                            <button title="Download" class="btn btn-green btn-sm"
                                                                                    ng-click="downloads(data.document_path,data.document_name,data.migration_flag)">
                                                                                <a download="" href="" id="btnpdf" style="display:none;"></a>
                                                                                <em class="fa fa-download"></em>
                                                                            </button>
                                                                            <button title="View" class="btn btn-info btn-sm" ng-click="documentviewer(data.document_path,data.document_name,data.migration_flag)">
                                                                                <a download="" href="" style="display:none;"></a>  <em class="fa fa-file"></em>
                                                                            </button>
                                                                            <a title="Delete" class="btn btn-sm btn-danger" ng-click="uploaddocumentcancel(data.document_gid)">
                                                                                <span class="icon icon-trash "></span>
                                                                            </a>
                                                                        </td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                           

                                        </div>
                                        </div>
                                    </div>
                                    <br />
                                </div>
                            </div>
                            </div>
                            <br/>
                            <div class="dd-handle ng-scope" ng-show="ARF_condition">
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <br />
                                        <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp; Select the List of Buyers Details</b></p>
                                        <hr />
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label">Buyer  </label> <span style="color:red">*</span>
                                            <br />
                                            <select name="Buyer" ng-options="m.buyer_name  for m in buyerlist" ng-change="buyer()" chosen=""
                                                    ng-model="cboBuyer" class="form-control" style="height:37px;"
                                                    size="1">
                                                <option value=""> ----- Select Buyer -----</option>
                                            </select>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label"> Buyer Limit </label>
                                            <br />
                                            <input type="text" ng-model="txtbuyer_limit" tabindex="0" class="form-control" disabled />
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label"> Availed Limit </label>
                                            <br />
                                            <input type="text" ng-model="txtavailed_limit" tabindex="0" class="form-control" disabled />
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label"> Balance Limit </label>
                                            <br />
                                            <input type="text" ng-model="txtbalance_limit" tabindex="0" class="form-control" disabled />
                                        </div>
                                    </div>
                                </div>
                                <br />
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label"> Bill Tenure in Days  </label> <span style="color:red">*</span>
                                            <br />
                                            <input type="text" ng-model="txtbill_tenure"  ng-pattern="/^[0-9+]*$/" tabindex="0" class="form-control" maxlength="5"/>
                                        </div>
                                        <div class="col-lg-3 col-md-3 col-sm-3">
                                            <label class="col-form-label"> Margin % </label> <span style="color:red">*</span>
                                            <br />
                                            <input type="text" ng-model="txtmargin" ng-pattern="/^[0-9+]*$/" tabindex="0" class="form-control" step="0.01" maxlength="6" />
                                        </div>
                                        <div class="col-lg-6 col-md-6 col-sm-6">
                                            <br />
                                            <a class="btn btn-sm btn-default" style="background-color:#09385f;color:white;" ng-click="buyerdtl_add()"><span class="fa fa-plus" /></a>
                                        </div>
                                    </div>
                                </div>
                                <br /><br />
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="table-responsive table-bordered">
                                                <div style="max-height:200px;overflow:auto;">
                                                    <table class="table">
                                                        <thead class="bg-gray text-white">
                                                            <tr>
                                                                <th>S.No</th>
                                                                <th>Buyer</th>
                                                                <th>Buyer Limit</th>
                                                                <th>Availed limit</th>
                                                                <th>Balance limit</th>
                                                                <th>Bill Tenure in Days</th>
                                                                <th>Margin-%</th>
                                                                <th>Action</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="list in mstbuyer_list">
                                                                <td>{{$index+1}}</td>
                                                                <td>{{list.buyer_name}}</td>
                                                                <td>{{list.buyer_limit}}</td>
                                                                <td>{{list.availed_limit}}</td>
                                                                <td>{{list.balance_limit}}</td>
                                                                <td>{{list.bill_tenure}}</td>
                                                                <td>{{list.margin}}</td>
                                                                <td class="text-nowrap">
                                                                    <button title="Edit" ng-click="buyerdtl_edit(list.application2buyer_gid)"
                                                                            class="btn btn-green btn-xs ">
                                                                        <em class="fa fa-edit"></em>
                                                                    </button>
                                                                    <button title="Delete" ng-click="buyerdtl_delete(list.application2buyer_gid)"
                                                                            class="btn btn-danger btn-xs ">
                                                                        <em class="fa fa-trash-o"></em>
                                                                    </button>
                                                                </td>
                                                            </tr>

                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <br />
                            </div>
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <br /><br />
                                    <div class="text-center">
                                        <button type="button" class="btn btn-success"  
                                                ng-click="updateLoan()">
                                            <i class="fa fa-arrow-circle-right"></i>&nbsp;&nbsp;Update
                                        </button>
                                        <button type="button" class="btn  btn-info" 
                                                ng-click="Back()">
                                            <i class="fa fa-arrow-circle-left"></i>&nbsp;&nbsp;Back
                                        </button>
                                    </div>
                                </div>
                            </div>
                        

                            <br />
                        </div>


                    </form>
                </div>

                <br />
            </div>
        </div>
    </div>
    <script type="text/ng-template" id="/buyerdtledit.html">
        <md-toolbar>
            <div class="md-toolbar-tools" style="background-color:rgb(63, 110, 181);">
                <em style="font-size:16px" class="fa fa-edit"></em>&nbsp;<label style="font-size:16px"> Edit Buyer Details </label>
                <span flex></span>
                <button ng-click="ok()" class="pull-right btn btn-primary"><i class="fa fa-close"></i></button>
            </div>
        </md-toolbar>
        <div class="modal-content">
            <div class="modal-body ng-scope">
                <form novalidate="" name="buyerdtlform" ng-submit="form.submitLoan()" autocomplete="off" class="form-validate mb-lg">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <label class="col-form-label">Buyer <span style="color:red"> *</span> </label>
                                <br />
                                <select name="buyer_name" ng-options="m.buyer_gid as m.buyer_name  for m in buyerlist" ng-change="buyer()" chosen=""
                                        id="buyer_name" ng-model="cboBuyer" class="form-control" style="height:37px;"
                                        size="1">
                                    <option value=""> ----- Select Buyer -----</option>
                                </select>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <label class="col-form-label"> Buyer Limit<span style="color:red"> *</span>  </label>
                                <br />
                                <input type="text" ng-model="txteditbuyer_limit" tabindex="0" class="form-control" disabled />
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <label class="col-form-label"> Availed Limit <span style="color:red"> *</span> </label>
                                <br />
                                <input type="text" ng-model="txteditavailed_limit" tabindex="0" class="form-control" disabled />
                            </div>

                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <label class="col-form-label"> Balance Limit <span style="color:red"> *</span> </label>
                                <br />
                                <input type="text" ng-model="txteditbalance_limit" tabindex="0" class="form-control" disabled />
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <label class="col-form-label"> Bill Tenure in Days  <span style="color:red"> *</span> </label>
                                <br />
                                <input type="text" ng-model="txteditbill_tenuredays" maxlength="5" ng-pattern="/^[0-9+]*$/" tabindex="0" class="form-control" />
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <label class="col-form-label"> Margin % <span style="color:red"> *</span> </label>
                                <br />
                                <input type="text" ng-model="txteditmargin" maxlength="6" ng-pattern="/^[0-9+]*$/" tabindex="0" class="form-control" />
                            </div>
                        </div>
                    </div>

                    <br />
                    <div class="text-center">
                        <br />
                        <button type="button" class="btn btn-success" ng-disabled="buyerdtlform.$invalid" ng-click="update_buyerdtl()"><i class="fa fa-check"></i>&nbsp;&nbsp;Update</button>&nbsp;&nbsp;
                        <button ng-click="ok()" class="btn btn-danger"><i class="fa icon-close"></i>&nbsp;&nbsp;Close</button>

                    </div>
                </form>
            </div>
        </div>
    </script>

</div>
