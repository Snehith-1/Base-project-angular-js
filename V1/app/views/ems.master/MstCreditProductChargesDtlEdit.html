<style>
    .nav.nav-pills .active > a {
        background-color: rgb(19,14,89);
        background: linear-gradient(90deg, rgba(19,14,89,1) 0%, rgba(65,65,185,1) 35%, rgba(0,212,255,1) 100%);
        color: #ffffff;
    }
   
</style>
<script>
    function openApplication(evt, ApplicationName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      document.getElementById(ApplicationName).style.display = "block";
      evt.currentTarget.className += " active";
    }

    // Get the element with id="defaultOpen" and click on it
    document.getElementById("defaultOpen").click();

</script>
<h3>
    Application Creation
</h3>
<div ng-controller="MstCreditProductChargesDtlEditController as dp">
    <div class="panel">
        <div class="panel-heading" style="background-color:rgb(19,14,89);background: linear-gradient(90deg, rgba(19,14,89,1) 0%, rgba(65,65,185,1) 35%, rgba(0,212,255,1) 100%);color:#ffffff">
            <h5> Edit Product & Charges </h5>
        </div>
        <div class="panel">
            <div class="panel-body">
                <div class="tab">
                    <button class="tablinks btn btn-info" onclick="openApplication(event, 'Overall Limit')" id="defaultOpen" ng-click="OverallLimit_add()"> Overall Limit </button>
                    <button class="tablinks btn btn-info" onclick="openApplication(event, 'Product & Charges')" ng-click="ProductCharges_add()"> Product </button>
                    <button class="tablinks btn btn-info" onclick="openApplication(event, 'Service Charges')" ng-click="ServiceCharges_add()"> Charges </button>
                </div>
                <div id="Overall Limit" class="tabcontent">
                    <br />
                    <form name="limit" ng-submit="form.submitForm1()" novalidate="" autocomplete="off" class="form-validate form-horizontal">
                        <div class="dd-handle ng-scope" style="background-color: #f9f8f8;">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp; Overall Recommendation of Limit Details </b></p>
                                    <hr />
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Overall limit amount </label> <span style="color:red">*</span>
                                        <br />
                                        <input type="text" class="form-control" id="Overalllimitamount" name="Overalllimitamount" ng-model="txtOveralllimit_amount" maxlength="15"
                                               ng-change="Overalllimit_amountchange()" style="text-align:right" pattern="^[\d,]+$" required />
                                        <span style="font-style:italic;">Number in words:</span>
                                        <span id="words_totalamount7" style="color:#003c96fc;" class="text-bold"></span>

                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2">
                                        <label class="col-form-label">
                                            Validity of overall limit (years)
                                        </label> <span style="color:red">*</span>
                                        <br />
                                        <input type="text" ng-model="txtvalidityoveralllimit_year" maxlength="5" tabindex="0" class="form-control" required ng-change="calculatelimit()" />
                                    </div>

                                    <div class="col-lg-2 col-md-2 col-sm-2">
                                        <label class="col-form-label"> Validity of overall limit(month) </label> <span style="color:red">*</span>
                                        <br />
                                        <input type="text" ng-model="txtvalidityoveralllimit_month" maxlength="5" tabindex="0" class="form-control" required ng-change="calculatelimit()" />
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2">
                                        <label class="col-form-label"> Validity of overall limit (days) </label><span style="color:red">*</span>
                                        <br />
                                        <input type="text" ng-model="txtvalidityoveralllimit_day" maxlength="5" tabindex="0" class="form-control" required ng-change="calculatelimit()" />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Calculation of overall limit validity </label>
                                        <br />
                                        <input type="text" ng-model="txtcalculationoveralllimit_validity" tabindex="0" class="form-control" disabled />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <div ng-hide="overlimit_warning">
                                            <span style="color:red"><b>Amount Exceeded from entered loan facility amount</b> </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br />
                        </div>
                        <div class="dd-handle ng-scope">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <p class="text-primary" style="font-size:15px;"><b>&nbsp;&nbsp; CSA Category Details </b></p>
                                    <hr />
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> CSA Applicability </label> <span style="color:red">*</span>
                                        <br />
                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" id="CsaApplicability" name="CsaApplicability" value="Yes" ng-model="rdbcsaapplicability"
                                                       required="" ng-click="Csa_Applicability(rdbcsaapplicability)" />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Yes
                                            </label>
                                            <label>
                                                <input type="radio" id="CsaApplicability" name="CsaApplicability" value="No" ng-model="rdbcsaapplicability"
                                                       required="" ng-click="Csa_Applicability(rdbcsaapplicability)" />
                                                <span class="fa fa-circle"></span>No
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3" ng-show="csaactivity_show">
                                        <label class="col-form-label">
                                            CSA Activity
                                        </label> <span style="color:red">*</span>
                                        <br />
                                        <select name="CSAActivity" id="Sector" ng-options="m.sector_gid as m.sector_name  for m in csactivity_list"
                                                ng-model="cboCSAActivity" class="chosen-select form-control" chosen="" style="height:37px;"
                                                size="1">
                                            <option value=""></option>
                                        </select>
                                    </div>

                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Percentage of the total limit </label> <span style="color:red">*</span>
                                        <br />
                                        <input type="text" ng-model="txtpercentageoftotal_limit" maxlength="5" tabindex="0" class="form-control" required="" />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">

                                    </div>

                                </div>
                            </div>
                            <br />

                        </div>
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <br /><br />
                                <div class="text-center">
                                    <button type="button" class="btn btn-success" ng-disabled="limit.$invalid"
                                            ng-click="SubmitOverallLimit()">
                                        <i class="fa fa-arrow-circle-right"></i>&nbsp;&nbsp;Update
                                    </button>

                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <div id="Product & Charges" class="tabcontent">
                    <br />
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <button ng-hide="lspage=='PendingCADReview'" type="button" class="btn btn-info button-sm" ng-click="bankacct_add()"  title="Add Loan Detail">
                                <span class="btn-label">
                                    <i class="fa fa-plus"></i>
                                </span>
                                Add Loan Detail
                            </button>
                            <br><br>
                        </div>
                    </div>
                    <div class="row" ng-show="bankdtladd_show">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <form name="loan" ng-submit="form.submitForm2()" novalidate="" autocomplete="off" class="form-validate form-horizontal">

                                <div class="dd-handle ng-scope">
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <br />
                                            <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp; Loan Details </b></p>
                                            <hr />
                                            <label>Overall Limit Amount: </label>
                                            <label class="label label-primary" style="font-size:14px;"> {{lbloveralllimit_amount}}</label>
                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">

                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Facility Requested On </label> <span style="color:red">*</span>
                                                <br />
                                                <p class="input-group">
                                                    <input type="text" id="dob" name="date" ng-model="txtfacilityreqon_date" datepicker-popup="{{dp.format}}"
                                                           style="height:30px;" is-open="dp.opened" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                           required close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                                    <span class="input-group-btn">
                                                        <button type="button" ng-click="dp.open($event)" style="height:30px;" class="btn btn-default">
                                                            <em class="fa fa-calendar"></em>
                                                        </button>
                                                    </span>

                                                </p>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label">Product Type  </label> <span style="color:red">*</span>
                                                <br />
                                                <select name="Product Type " ng-options="m.loanproduct_name  for m in loanproductlist"
                                                        ng-text-change="change()" ng-model="cboProductTypelist" class="form-control" style="height:37px;" chosen=""
                                                        required size="1" ng-change="producttype()">
                                                    <option value=""> ----- Select Product Type  -----</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label">Product Sub Type </label> <span style="color:red">*</span>
                                                <br />
                                                <select name="Product Sub Type" ng-options="m.loansubproduct_name for m in loansubproductlist"
                                                        required ng-model="cboProductSubTypelist" class="form-control" style="height:37px;" chosen=""
                                                        size="1">
                                                    <option value=""> ----- Select Product Sub Type -----</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label">Loan Type </label> <span style="color:red">*</span>
                                                <br />
                                                <select name="LoanType" ng-options="m.loan_type for m in loantypelist"
                                                        required ng-model="cboLoanTypelist" class="form-control" style="height:37px;" chosen=""
                                                        size="1">
                                                    <option value=""> ----- Select Loan Type -----</option>
                                                </select>
                                            </div>

                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Facility Loan Amount </label> <span style="color:red">*</span>
                                                <br />
                                                <input id="valueamount" ng-model="txtloanfaility_amount" maxlength="15" class="form-control ng-pristine ng-valid ng-touched"
                                                       required ng-change="txtfacility()" pattern="^[\d,]+$" style="text-align:right;">
                                                <span style="font-style:italic;">Number in words:</span>
                                                <span id="words_totalamount1" style="color:#003c96fc;" class="text-bold"></span>
                                                <div ng-hide="amount_validation">
                                                    <label style="color:red;">Amount Exceeded From Overall Limit </label>
                                                </div>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Remaining </label>
                                                <br />
                                                <input type="text" ng-disabled="true" style="text-align:right;" class="form-control ng-pristine ng-valid ng-touched"
                                                       ng-model="txtremaining" />
                                            </div>

                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Rate of Interest  </label> <span style="color:red">*</span>
                                                <br />
                                                <input ng-model="txtrate_interest" maxlength="10" required class="form-control ng-pristine ng-valid ng-touched" step="0.01">
                                            </div>

                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Margin  </label> <span style="color:red">*</span>
                                                <br />
                                                <input ng-model="txt_margin" maxlength="10" required class="form-control ng-pristine ng-valid ng-touched" step="0.01">
                                            </div>

                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Penal Interest  </label> <span style="color:red">*</span>
                                                <br />
                                                <input type="text" ng-model="txtpanel_interest" maxlength="10" required tabindex="0" class="form-control" step="0.01" />
                                            </div>

                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Validity of the facility (years)   </label>
                                                <br />
                                                <input type="text" ng-model="txtvalidity_year" maxlength="5" tabindex="0" class="form-control" ng-change="calculatefacility()" />
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Validity of the facility (months) </label>
                                                <br />
                                                <input type="text" ng-model="txtvalidity_month" maxlength="5" tabindex="0" class="form-control" ng-change="calculatefacility()" />
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Validity of the facility (days) </label>
                                                <br />
                                                <input type="text" ng-model="txtvalidity_days" maxlength="5" tabindex="0" class="form-control" ng-change="calculatefacility()" />
                                            </div>

                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Calculation of overall limit validity </label>
                                                <br />
                                                <input type="text" ng-model="txtoverallfacilityvalidity_limit" tabindex="0" class="form-control" disabled />
                                            </div>

                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Tenure of the product / Credit Period (years) </label><span style="color:red">*</span>
                                                <br />
                                                <input type="text" ng-model="txttenure_year" maxlength="5" required tabindex="0" class="form-control" ng-change="calculatetenure()" />
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Tenure of the product / Credit Period (months) </label><span style="color:red">*</span>
                                                <br />
                                                <input type="text" ng-model="txttenure_month" maxlength="5" tabindex="0" required class="form-control" ng-change="calculatetenure()" />
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Tenure of the product / Credit Period (days) </label><span style="color:red">*</span>
                                                <br />
                                                <input type="text" ng-model="txttenure_days" maxlength="5" required tabindex="0" class="form-control" ng-change="calculatetenure()" />
                                            </div>

                                        </div>
                                    </div>
                                    <br />
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Calculation of overall limit validity </label>
                                                <br />
                                                <input type="text" ng-model="txtoveralltenurevalidity_limit" tabindex="0" class="form-control" disabled />
                                            </div>

                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Scheme Type </label> <span style="color:red">*</span>
                                                <br />
                                                <p style="font-size:14px;">Financial statement method</p>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Facility Type  </label> <span style="color:red">*</span>
                                                <br />
                                                <select name="FacilityType"
                                                        required ng-model="cboFacilityTypelist" class="form-control  ng-valid ng-touched ng-valid-parse" style="height:37px;"
                                                        size="1">
                                                    <option value=""> ----- Select Facility Type -----</option>
                                                    <option value="New"> New </option>
                                                    <option value="Existing"> Existing</option>

                                                </select>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Facility mode </label> <span style="color:red">*</span>
                                                <br />
                                                <select name="Facilitymode" required
                                                        ng-model="cboFacilitymodelist" class="form-control  ng-valid ng-touched ng-valid-parse" style="height:37px;"
                                                        size="1">
                                                    <option value=""> ----- Select Facility mode -----</option>
                                                    <option value="Revolving"> Revolving </option>
                                                    <option value="Non Revolving">Non Revolving </option>
                                                    <option value="Not Applicable"> Not Applicable</option>
                                                </select>
                                            </div>

                                        </div>
                                    </div>

                                    <br />
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label>Principal Frequency </label>
                                                <br />
                                                <select name="Principal Frequency" ng-options="m.principalfrequency_name for m in principalfrequencylist"
                                                        ng-model="cboprincipalfrequency" class="form-control" style="height:37px;" chosen=""
                                                        size="1">
                                                    <option value=""> ----- Select Principal Frequency -----</option>
                                                </select>
                                            </div>

                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Interest Frequency  </label>
                                                <br />
                                                <select name="Interest Frequency " ng-options="m.interestfrequency_name  for m in interestfrequencylist"
                                                        ng-model="cboInterestFrequency " class="form-control" chosen="" style="height:37px;"
                                                        size="1">
                                                    <option value=""> ----- Select Interest Frequency -----</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label>Interest to be deducted upfront <span style="color:red"> *</span> </label>
                                                <div class="radio c-radio">
                                                    <label>
                                                        <input type="radio" id="Interest" name="Interest" value="Yes" ng-model="rdbinterest_status" required />
                                                        &nbsp;&nbsp;<span class="fa fa-circle"></span>Yes
                                                    </label>
                                                    <label>
                                                        <input type="radio" id="Interest" name="Interest" value="No" ng-model="rdbinterest_status" required />
                                                        <span class="fa fa-circle"></span>No
                                                    </label>
                                                </div>
                                            </div>
                                            <!--<div class="col-lg-3 col-md-3 col-sm-3" ng-hide="cboProductTypelist.loanproduct_name == 'Agri Receivable Finance (ARF)'">
                                <label>Interest to be deducted upfront </label>
                                <input type="text" ng-model="test" tabindex="0" class="form-control" disabled />
                            </div>-->
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Moratorium Applicable </label>
                                                <br />
                                                <div class="radio c-radio">
                                                    <label>
                                                        <input type="radio" id="MoratoriumApplicable" name="Moratorium Applicable" value="Yes"
                                                               ng-model="rdbmoratorium_status" />
                                                        &nbsp;&nbsp;<span class="fa fa-circle"></span>Yes
                                                    </label>
                                                    <label>
                                                        <input type="radio" id="MoratoriumApplicable" name="Moratorium Applicable" value="No"
                                                               ng-model="rdbmoratorium_status" />
                                                        <span class="fa fa-circle"></span>No
                                                    </label>
                                                </div>

                                            </div>



                                        </div>
                                    </div>

                                    <div class="row">
                                        <br />
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="col-lg-3 col-md-3 col-sm-3">
                                                <label class="col-form-label"> Program <span style="color:red">*</span> </label>
                                                <br />
                                                <select name="program" id="program" required="" ng-options="m.program  for m in programlist"
                                                        ng-model="cboProgram" class="form-control" chosen="" style="height:37px;"
                                                        size="1">
                                                    <option value=""></option>
                                                </select>
                                            </div>
                                            <!--<div class="col-lg-3 col-md-3 col-sm-3" ng-show="txttenure_days=='0'">
                                <label class="col-form-label"> Moratorium Applicable </label>
                                <br />
                                <input type="text" ng-model="test1" tabindex="0" class="form-control" disabled />
                            </div>-->
                                            <div class="col-lg-3 col-md-3 col-sm-3" ng-show="rdbmoratorium_status=='Yes'">
                                                <label class="col-form-label"> Moratorium Type  </label> <span style="color:red">*</span>
                                                <br />
                                                <select name="Moratoriumtype"
                                                        ng-model="cbomoratorium_type" class="form-control  ng-valid ng-touched ng-valid-parse" style="height:37px;"
                                                        size="1">
                                                    <option value=""> ----- Select Moratorium Type -----</option>
                                                    <option value="Principal"> Principal </option>
                                                    <option value="Interest"> Interest </option>
                                                    <option value="Principal and interest"> Principal and interest </option>
                                                </select>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3" ng-show="rdbmoratorium_status=='Yes'">
                                                <label class="col-form-label"> Moratorium Start Date</label> <span style="color:red">*</span>
                                                <br />
                                                <p class="input-group">
                                                    <input type="text" id="MSD" name="date" ng-model="txtmoratorium_startdate" datepicker-popup="{{dp.format}}"
                                                           style="height:36px;" is-open="dp.open12" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                           close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                                    <span class="input-group-btn">
                                                        <button type="button" ng-click="dp.calender12($event)" style="height:36px;" class="btn btn-default">
                                                            <em class="fa fa-calendar"></em>
                                                        </button>
                                                    </span>
                                                </p>
                                            </div>
                                            <div class="col-lg-3 col-md-3 col-sm-3" ng-show="rdbmoratorium_status=='Yes'">
                                                <label class="col-form-label"> Moratorium End Date </label> <span style="color:red">*</span>
                                                <br />
                                                <p class="input-group">
                                                    <input type="text" id="MED" name="date" ng-model="txtmoratorium_enddate" datepicker-popup="{{dp.format}}"
                                                           style="height:36px;" is-open="dp.open13" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                           close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                                    <span class="input-group-btn">
                                                        <button type="button" ng-click="dp.calender13($event)" style="height:36px;" class="btn btn-default">
                                                            <em class="fa fa-calendar"></em>
                                                        </button>
                                                    </span>
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <br />
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <!--<div class="col-lg-3 col-md-3 col-sm-3">
                                <label class="col-form-label"> Product <span style="color:red"> *</span></label>
                                <br />
                                <select name="ProductName" id="ProductName" chosen="" ng-options="m.product_name for m in productname_list"
                                        ng-model="cboproduct_name" class="chosen-select form-control" required ng-change="productname_change(cboproduct_name)">
                                    <option value=""></option>
                                </select>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-3">
                                <label class="col-form-label"><strong> Sector / Strategic Business Unit </strong></label>
                                <input type="text" ng-model="txtsector_name" tabindex="0" disabled class="form-control" />
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-3">
                                <label class="col-form-label"><strong> Category </strong> </label>
                                <input type="text" ng-model="txtcategory_name" tabindex="0" disabled class="form-control" />
                            </div>-->
                                            <!--<div class="col-lg-3 col-md-3 col-sm-3">
                                <label class="col-form-label"><strong>Primary Value Chain</strong> <span style="color:red">*</span></label>
                                <select name="primaryvalue_chain" required="" chosen="" multiple ng-options="m.valuechain_name for m in valuechainlist"
                                        ng-model="cboPrimaryValueChain" class="form-control ng-valid ng-touched ng-valid-parse" size="1"></select>
                            </div>
                            <div class="col-lg-3 col-md-3 col-sm-3">
                                <label class="col-form-label"><strong>Secondary Value Chain</strong><span style="color:red">*</span> </label>
                                <select name="secondaryvalue_chain" required="" chosen="" multiple ng-options="m.valuechain_name for m in valuechainlist"
                                        ng-model="cboSecondaryValueChain" class="form-control ng-valid ng-touched ng-valid-parse"
                                        size="1"></select>
                            </div>-->
                                        </div>
                                    </div>
                                    <!--<div class="row">
                        <div class="col-md-12 col-lg-12 col-sm-12">
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <label class="col-form-label"> Variety <span style="color:red"> *</span> </label>
                                <br />
                                <select name="Variety" id="Variety" chosen="" ng-options="m.variety_name for m in varietyname_list" required
                                        ng-model="cbovariety_name" class="chosen-select form-control" ng-change="Variety_change(cbovariety_name)">
                                    <option value=""></option>
                                </select>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <label class="col-form-label"><strong> Botanical Name </strong></label>
                                <input type="text" ng-model="txtbotanical_name" tabindex="0" disabled class="form-control" />
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <label class="col-form-label"><strong> Alternative Names</strong></label>
                                <input type="text" ng-model="txtalternative_name" tabindex="0" disabled class="form-control" />
                            </div>
                            <br />
                        </div>
                    </div>
                    <br />-->
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <label class="col-form-label"> Purpose of Loan </label> <span style="color:red">*</span>

                                                <textarea ng-model="txtenduse_purpose" maxlength="5000" rows="2" class="form-control"
                                                          required id="input_13" ng-trim="false" aria-multiline="true" tabindex="0" aria-invalid="true"></textarea>

                                            </div>
                                        </div>
                                    </div>
                                    <br />
                                    <div class="dd-handle ng-scope">
                                        <div class="row">
                                            <div class="col-md-12 col-lg-12 col-sm-12">
                                                <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp; Product Details </b></p>
                                                <hr />
                                                <div class="row">
                                                    <div class="col-md-12 col-lg-12 col-sm-12">
                                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                                            <label class="col-form-label"> Product <span style="color:red"> *</span></label>
                                                            <br />
                                                            <select name="ProductName" id="ProductName" chosen="" ng-options="m.product_name for m in productname_list"
                                                                    ng-model="cboproduct_name" class="chosen-select form-control" ng-change="productname_change(cboproduct_name)">
                                                                <option value=""></option>
                                                            </select>
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                                            <label class="col-form-label"><strong> Sector / Strategic Business Unit </strong></label>
                                                            <input type="text" ng-model="txtsector_name" tabindex="0" disabled class="form-control" />
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                                            <label class="col-form-label"><strong> Category </strong> </label>
                                                            <input type="text" ng-model="txtcategory_name" tabindex="0" disabled class="form-control" />
                                                        </div>
                                                        <br />
                                                    </div>
                                                </div>
                                                <br />
                                                <div class="row">
                                                    <div class="col-md-12 col-lg-12 col-sm-12">
                                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                                            <label class="col-form-label"> Variety <span style="color:red"> *</span> </label>
                                                            <br />
                                                            <select name="Variety" id="Variety" chosen="" ng-options="m.variety_name for m in varietyname_list"
                                                                    ng-model="cbovariety_name" class="chosen-select form-control" ng-change="Variety_change(cbovariety_name)">
                                                                <option value=""></option>
                                                            </select>
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                                            <label class="col-form-label"><strong> Botanical Name </strong></label>
                                                            <input type="text" ng-model="txtbotanical_name" tabindex="0" disabled class="form-control" />
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                                            <label class="col-form-label"><strong> Alternative Names</strong></label>
                                                            <input type="text" ng-model="txtalternative_name" tabindex="0" disabled class="form-control" />
                                                        </div>
                                                        <br />
                                                    </div>
                                                </div>
                                                <br />
                                                <div class="row">
                                                    <div class="col-md-12 col-lg-12 col-sm-12">
                                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                                            <label class="col-form-label"> CSA - Commodity Average <span style="color:red"> *</span> </label>
                                                            <br />
                                                            <input type="text" ng-model="txtcsacommodity_average" tabindex="0" class="form-control" />
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                                            <label class="col-form-label"> CSA - Percentage of the total limit <span style="color:red"> *</span></label>
                                                            <input type="text" ng-model="txtcsapercentage_limit" tabindex="0" class="form-control" />
                                                        </div>
                                                        <div class="col-lg-4 col-md-4 col-sm-4">

                                                        </div>
                                                        <br />
                                                    </div>
                                                </div>
                                                <br />
                                                <div class="row text-center">
                                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                                        <button class="btn btn-sm btn-default" style="background-color:#09385f;color:white;" ng-click="productdtl_add()">
                                                            <span class="fa fa-plus" /> &nbsp; Add
                                                        </button>
                                                    </div>
                                                </div>
                                                <br />
                                                <div class="row">
                                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                                            <div class="table-responsive table-bordered">
                                                                <div>
                                                                    <table class="table">
                                                                        <thead class="bg-gray text-white">
                                                                            <tr>
                                                                                <th>S.No</th>
                                                                                <th>Product</th>
                                                                                <th>Sector / Strategic Business Unit</th>
                                                                                <th>Category</th>
                                                                                <th>Variety</th>
                                                                                <th>Botanical Name</th>
                                                                                <th>Alternative Names</th>
                                                                                <th>CSA - Commodity Average</th>
                                                                                <th>CSA- Percentage of the total limit</th>
                                                                                <th>Action</th>
                                                                            </tr>
                                                                        </thead>
                                                                        <tbody>
                                                                            <tr ng-repeat="data in mstproduct_list">
                                                                                <td>{{$index+1}}</td>
                                                                                <td>{{data.product_name}}</td>
                                                                                <td>{{data.sector_name}}</td>
                                                                                <td>{{data.category_name}}</td>
                                                                                <td>{{data.variety_name}}</td>
                                                                                <td>{{data.botanical_name}}</td>
                                                                                <td>{{data.alternative_name}}</td>
                                                                                <td>{{data.csacommodity_average}}</td>
                                                                                <td>{{data.csapercentageoftotal_limit}}</td>
                                                                                <td class="text-nowrap">
                                                                                    <button title="Delete" ng-click="product_delete(data.application2product_gid)"
                                                                                            class="btn btn-danger btn-xs ">
                                                                                        <em class="fa fa-trash-o"></em>
                                                                                    </button>
                                                                                </td>
                                                                            </tr>
                                                                        </tbody>
                                                                    </table>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <br />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="dd-handle ng-scope" ng-show="cboLoanTypelist.loan_type == 'Secured'">
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <br />
                                                <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp; Collateral Details </b></p>
                                                <hr />
                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label><strong>Source Type </strong> <span style="color:red">*</span></label>
                                                    <select name="SourceType"
                                                            ng-model="cboSourceType" class="form-control ng-valid ng-touched ng-valid-parse" style="height:37px;"
                                                            size="1">
                                                        <option value=""> ----- Select Source Type -----</option>
                                                        <option value="Fixed">Fixed</option>
                                                        <option value="Moving">Moving</option>
                                                        <option value="Property">Property</option>
                                                        <option value="Deposit">Deposit</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label"> Guideline Value </label>
                                                    <br />
                                                    <input id="GuidelineValue" ng-model="txtguidelinevalue" maxlength="20" class="form-control ng-pristine ng-valid ng-touched"
                                                           ng-change="txtguidelinevaluechange()" style="text-align:right;" pattern="^[\d,]+$">
                                                    <span style="font-style:italic;">Number in words:</span>
                                                    <span id="words_totalamount2" style="color:#003c96fc;" class="text-bold"></span>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label"> Guideline Value assessed on </label>
                                                    <br />
                                                    <p class="input-group">
                                                        <input type="text" id="GVAO" name="date" ng-model="txtguideline_date" datepicker-popup="{{dp.format}}"
                                                               style="height:36px;" is-open="dp.open8" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                               close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                                        <span class="input-group-btn">
                                                            <button type="button" ng-click="dp.calender8($event)" style="height:36px;" class="btn btn-default">
                                                                <em class="fa fa-calendar"></em>
                                                            </button>
                                                        </span>
                                                    </p>
                                                </div>
                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label"> Market Value </label>
                                                    <br />
                                                    <input id="MarketValue" ng-model="txtmarketValue" maxlength="20" class="form-control ng-pristine ng-valid ng-touched"
                                                           ng-change="txtMarketValuechange()" style="text-align:right;" pattern="^[\d,]+$">
                                                    <span style="font-style:italic;">Number in words:</span>
                                                    <span id="words_totalamount3" style="color:#003c96fc;" class="text-bold"></span>
                                                </div>

                                            </div>
                                        </div>
                                        <br />
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-sm-12">

                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label">Market Value assessed on </label>
                                                    <br />
                                                    <p class="input-group">
                                                        <input type="text" id="MVAO" name="date" ng-model="txtmarketvalue_date" datepicker-popup="{{dp.format}}"
                                                               style="height:36px;" is-open="dp.open14" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                               close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                                        <span class="input-group-btn">
                                                            <button type="button" ng-click="dp.calender14($event)" style="height:36px;" class="btn btn-default">
                                                                <em class="fa fa-calendar"></em>
                                                            </button>
                                                        </span>
                                                    </p>
                                                </div>
                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label"> Forced Source Value </label>
                                                    <br />
                                                    <input id="ForcedSourceValue" ng-model="txtforcedsource_value" maxlength="20" class="form-control ng-pristine ng-valid ng-touched"
                                                           ng-change="txtForcedSourceValuechange()" style="text-align:right;" pattern="^[\d,]+$">
                                                    <span style="font-style:italic;">Number in words:</span>
                                                    <span id="words_totalamount4" style="color:#003c96fc;" class="text-bold"></span>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label"> Collateral FSV  </label>
                                                    <br />
                                                    <input id="CollateralSSVvalue" ng-model="txtcollateralSSV_value" maxlength="20" class="form-control ng-pristine ng-valid ng-touched"
                                                           ng-change="txtCollateralSSVvaluechange()" style="text-align:right;" pattern="^[\d,]+$">
                                                    <span style="font-style:italic;">Number in words:</span>
                                                    <span id="words_totalamount5" style="color:#003c96fc;" class="text-bold"></span>
                                                </div>

                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label">Forced Value Assessed  On </label>
                                                    <br />
                                                    <p class="input-group">
                                                        <input type="text" id="FVAO" name="date" ng-model="txtforcedvalueassessed_on" datepicker-popup="{{dp.format}}"
                                                               style="height:36px;" is-open="dp.open15" min-date="dp.minDate" datepicker-options="dp.dateOptions"
                                                               close-text="Close" class="form-control" placeholder="DD-MM-YYYY" />
                                                        <span class="input-group-btn">
                                                            <button type="button" ng-click="dp.calender15($event)" style="height:36px;" class="btn btn-default">
                                                                <em class="fa fa-calendar"></em>
                                                            </button>
                                                        </span>
                                                    </p>
                                                </div>
                                            </div>
                                            <br />
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12">
                                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                                            <label><strong>Observation Summary </strong> <span style="color:red">*</span></label>
                                                            <br />
                                                            <textarea ng-model="txtcolateralobservation_summary" maxlength="5000" rows="2" class="form-control"
                                                                      id="input_13" ng-trim="false" aria-multiline="true" tabindex="0" aria-invalid="true"></textarea>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <br />
                                            <div class="row">
                                                <div class="col-lg-12 col-md-12 col-sm-12">
                                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                                        <br />
                                                        <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp;  Collateral Document Upload </b></p>
                                                        <hr />
                                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                                            <label> Document Title </label> <span style="color:red">*</span>
                                                            <br />
                                                            <select name="DocumentTitle" style="height:37px;"
                                                                    ng-model="cboDocumentTitle" class="form-control ng-valid ng-touched ng-valid-parse"
                                                                    size="1">
                                                                <option value=""> -----Select Document Title -----</option>
                                                                <option value="Document Observation "> Document Observation </option>
                                                                <option value="Document Collateral"> Document Collateral </option>
                                                                <option value="Document Legal Opinion"> Document Legal Opinion </option>
                                                            </select>
                                                        </div>
                                                        <div class="col-lg-6 col-sm-6 col-md-6">
                                                            <div class="float-label">
                                                                <strong>Upload Documents</strong>
                                                                <br /><br />
                                                                <input type="file" id="file" tabindex="5" multiple onchange="angular.element(this).scope().upload_collateraldoc(this.files, angular.element(this).scope().documentupload, this.name)"
                                                                       ng-model="txtdocument" data-classbutton="btn btn-default" data-classinput="form-control inline" data-button-text="Select" />
                                                            </div>
                                                        </div>
                                                        <div class="col-lg-2 col-sm-2 col-md-2">
                                                        </div>
                                                        <br /><br />
                                                        <div class="row">
                                                            <div class="col-lg-12 col-sm-12 col-md-12">
                                                                <div class="col-lg-12 col-sm-12 col-md-12">
                                                                    <br />
                                                                    <div class="table-responsive">
                                                                        <table class="table table-striped table-secondary">
                                                                            <thead class="bg-gray text-white">
                                                                                <tr width="100%">
                                                                                    <th scope="col">S.No</th>
                                                                                    <th scope="col">Document Title</th>
                                                                                    <th scope="col">Document Name</th>
                                                                                    <th align="center" scope="col">
                                                                                        Action&nbsp;&nbsp;&nbsp;
                                                                                        <a download="" href="" title="Download All" id="btnpdf1" ng-click="downloadallcoll()">
                                                                                            <em class="icon-arrow-down"></em>&nbsp;
                                                                                        </a>
                                                                                    </th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr ng-repeat="data in CollateralDocumentList">
                                                                                    <td title="S.No">{{$index+1}}</td>
                                                                                    <td title="Document Title">{{data.document_title}}</td>
                                                                                    <td title="Document Name">{{data.document_name}}</td>
                                                                                    <td data-title="Action">
                                                                                        <button title="Download" class="btn btn-green btn-sm"
                                                                                                ng-click="downloads(data.document_path,data.document_name)">
                                                                                            <a download="" href="" id="btnpdf" style="display:none;"></a>
                                                                                            <em class="fa fa-download"></em>
                                                                                        </button>
                                                                                        <button title="View" class="btn btn-info btn-sm" ng-click="documentviewer(data.document_path,data.document_name)">
                                                                                            <a download="" href="" style="display:none;"></a>  <em class="fa fa-file"></em>
                                                                                        </button>
                                                                                        <a title="Delete" class="btn btn-sm btn-danger" ng-click="uploadcollateraldocumentcancel(data.document_gid)">
                                                                                            <span class="icon icon-trash "></span>
                                                                                        </a>
                                                                                    </td>
                                                                                </tr>
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <br /><br />
                                                    </div>
                                                </div>
                                            </div>
                                            <br />
                                        </div>


                                    </div>
                                    <div class="dd-handle ng-scope" ng-show="cboProductTypelist.loanproduct_name == 'Agri Receivable Finance (ARF)'">
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <br />
                                                <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp; Select the List of Buyers Details</b></p>
                                                <hr />
                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label">Buyer  </label> <span style="color:red">*</span>
                                                    <br />
                                                    <select name="Buyer" ng-options="m.buyer_name  for m in buyerlist" ng-change="buyer()" chosen=""
                                                            ng-model="cboBuyer" class="form-control" style="height:37px;"
                                                            size="1">
                                                        <option value=""> ----- Select Buyer -----</option>
                                                    </select>
                                                </div>
                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label"> Buyer Limit </label>
                                                    <br />
                                                    <input type="text" ng-model="txtbuyer_limit" maxlength="10" tabindex="0" class="form-control" disabled />
                                                </div>
                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label"> Availed Limit </label>
                                                    <br />
                                                    <input type="text" ng-model="txtavailed_limit" maxlength="10" tabindex="0" class="form-control" disabled />
                                                </div>
                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label"> Balance Limit </label>
                                                    <br />
                                                    <input type="text" ng-model="txtbalance_limit" maxlength="10" tabindex="0" class="form-control" disabled />
                                                </div>
                                            </div>
                                        </div>
                                        <br />
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label"> Bill Tenure in Days  </label> <span style="color:red">*</span>
                                                    <br />
                                                    <input type="text" ng-model="txtbill_tenure" maxlength="5" ng-pattern="/^[0-9+]*$/" tabindex="0" class="form-control" />
                                                </div>
                                                <div class="col-lg-3 col-md-3 col-sm-3">
                                                    <label class="col-form-label"> Margin % </label> <span style="color:red">*</span>
                                                    <br />
                                                    <input type="text" ng-model="txtmargin" maxlength="6" ng-pattern="/^[0-9+]*$/" tabindex="0" class="form-control" step="0.01" />
                                                </div>
                                                <div class="col-lg-6 col-md-6 col-sm-6">
                                                    <br />
                                                    <a class="btn btn-sm btn-default" style="background-color:#09385f;color:white;" ng-click="buyerdtl_add()"><span class="fa fa-plus" /></a>
                                                </div>
                                            </div>
                                        </div>
                                        <br /><br />
                                        <div class="row">
                                            <div class="col-lg-12 col-md-12 col-sm-12">
                                                <div class="col-lg-12 col-md-12 col-sm-12">
                                                    <div class="table-responsive table-bordered">
                                                        <div style="max-height:200px;overflow:auto;">
                                                            <table class="table">
                                                                <thead class="bg-gray text-white">
                                                                    <tr>
                                                                        <th>S.No</th>
                                                                        <th>Buyer</th>
                                                                        <th>Buyer Limit</th>
                                                                        <th>Availed limit</th>
                                                                        <th>Balance limit</th>
                                                                        <th>Bill Tenure in Days</th>
                                                                        <th>Margin-%</th>
                                                                        <th>Action</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <tr ng-repeat="list in mstbuyer_list">
                                                                        <td>{{$index+1}}</td>
                                                                        <td>{{list.buyer_name}}</td>
                                                                        <td>{{list.buyer_limit}}</td>
                                                                        <td>{{list.availed_limit}}</td>
                                                                        <td>{{list.balance_limit}}</td>
                                                                        <td>{{list.bill_tenure}}</td>
                                                                        <td>{{list.margin}}</td>
                                                                        <td class="text-nowrap">
                                                                            <!--  <button title="Edit" ng-click="buyerdtl_edit(list.application2buyer_gid)"
                                                                    class="btn btn-green btn-xs ">
                                                                <em class="fa fa-edit"></em>
                                                            </button> -->
                                                                            <button title="Delete" ng-click="buyerdtl_delete(list.application2buyer_gid)"
                                                                                    class="btn btn-danger btn-xs ">
                                                                                <em class="fa fa-trash-o"></em>
                                                                            </button>
                                                                        </td>
                                                                    </tr>

                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <br />
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12">
                                            <br /><br />
                                            <div  class="text-center">
                                                <button type="button" class="btn btn-lg btn-deafult" style="background-color:#09385f;color:white;font-size: 13px;" ng-disabled="loan.$invalid"
                                                        ng-click="addLoan()">
                                                    <i class="fa fa-plus"></i>&nbsp;&nbsp;Add Product
                                                </button>

                                            </div>
                                        </div>
                                    </div>
                                    <br /><br />

                                    <br />

                                    <br />
                                </div>


                            </form>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-12 col-sm-12 col-md-12">
                            <div class="table-responsive">
                                <table class="row-border hover" id="statictable">
                                    <thead class="bg-gray text-white">
                                        <tr class="bg-gray text-white">
                                            <th style="width:5%;text-align:center;">S.No</th>
                                            <th> Facility Requested On </th>
                                            <th> Product Type </th>
                                            <th> Product Sub Type </th>
                                            <th> Facility Loan Amount </th>
                                            <th> Loan </th>
                                            <th> Facility </th>
                                            <th> Repayment </th>
                                            <th> Moratorium </th>
                                            <th style="width:6%;">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="data in mstloan_list" width="100%">
                                            <td title="S.No" style="text-align:center;">{{$index+1}}</td>
                                            <td title="Facility Requested On">{{data.facilityrequested_date}} </td>
                                            <td title="Product Type">{{data.product_type}}</td>
                                            <td title="Product Sub Type ">{{data.productsub_type}} </td>
                                            <td title="Facility Loan Amount" style="text-align:right;">
                                                {{data.lblloanfacility_amount}}<br />
                                                <span class="text-danger"> {{data.loanfacility_amountinwords}} </span> <br />
                                            </td>
                                            <td title="Loan Details">
                                                <b>Loan Type : </b> {{data.loan_type}} <br />
                                                <b>Rate of Interest : </b> {{data.rate_interest}}  <br />
                                                <b>Margin : </b> {{data.roi_margin}}  <br />
                                                <b>Penal Interest : </b> {{data.penal_interest}}
                                            </td>
                                            <td title="Facility Loan Amount">
                                                <br />
                                                <b>Validity of the facility (overall limit validity) : </b> {{data.facilityoverall_limit}} <br />
                                                <b>Tenure of the product/Credit Period (overall limit validity) : </b>{{data.tenureoverall_limit}} <br />
                                                <b>Facility Type : </b> {{data.facility_type}}
                                                <b>Facility mode : </b> {{data.facility_mode}}
                                            </td>
                                            <td title="Repayment">
                                                <b>Principal Frequency  : </b> {{data.principalfrequency_name}} <br />
                                                <b>Interest Frequency : </b> {{data.interestfrequency_name}}  <br />
                                                <b>Interest to be deducted upfront : </b> {{data.interest_status}}
                                            </td>
                                            <td title="Moratorium">
                                                <b>Moratorium Type  : </b> {{data.moratorium_type}} <br />
                                                <b>Start Date : </b>{{data.moratorium_startdate}}  <br />
                                                <b>End Date : </b> {{data.moratorium_enddate}}
                                            </td>
                                            <td class="text-nowrap" style="width:6%;">
                                                <button ng-hide="lspage=='PendingCADReview'" title="OtherDetailsView" ng-click="Other_view(data.application2loan_gid)" class="btn btn-info btn-xs">
                                                    <em class="fa fa-eye"></em>
                                                </button>
                                                <button title="Edit" ng-click="creditproductchargesloan_edit(data.application2loan_gid,data.product_gid,data.variety_gid)"
                                                        class="btn btn-green btn-xs ">
                                                    <em class="fa fa-edit"></em>
                                                </button>
                                                <button ng-hide="lspage=='PendingCADReview'" title="Delete" ng-click="Deleteloan(data.application_gid,data.application2loan_gid,data.producttype_gid)"
                                                        class="btn btn-danger btn-xs ">
                                                    <em class="fa fa-trash-o"></em>
                                                </button>
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                            <br />
                        </div>
                    </div>
                </div>

                <div id="Service Charges" class="tabcontent">
                    <br />
                    <form name="SaveProduct" ng-submit="form.submitForm1()" novalidate="" autocomplete="off" class="form-validate form-horizontal">
                        <div class="dd-handle ng-scope">
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <br />
                                    <p class="text-primary" style="font-size:16px;"><b>&nbsp;&nbsp; Service Charges Details </b></p>
                                    <hr />
                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                        <label class="col-form-label">Product Type  </label> <span style="color:red">*</span>
                                        <br />
                                        <select name="Product Type" id="Product Type" chosen="" multiple ng-options="m.product_type  for m in product_list"
                                                ng-model="cboProductTypelist" class="chosen-select form-control" required></select>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label"> Processing Fee / Initiation Fee </label> <span style="color:red">*</span>
                                        <br />
                                        <input id="processingfee" ng-model="txtprocessing_fee" maxlength="20" class="form-control ng-pristine ng-valid ng-touched"
                                               ng-change="txtamountchange1()"  pattern="^[\d,]+$" required style="text-align:right;">
                                        <span style="font-style:italic;">Number in words:</span>
                                        <span id="words_totalamount51" style="color:#003c96fc;" class="text-bold"></span>
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2">
                                        <label class="col-form-label"> Collection Type </label> <span style="color:red">*</span>
                                        <br />
                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" id="CollectionType1" name="Collection Type1" ng-change="collectdeduct()" value="Collect" ng-model="rdbprocessing_collectiontype" required />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Collect
                                            </label>
                                            <label>
                                                <input type="radio" id="CollectionType1" name="Collection Type1" value="Deduct" ng-change="collectdeduct()" ng-model="rdbprocessing_collectiontype" required />
                                                <span class="fa fa-circle"></span>Deduct
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label"> Documentation Charges </label>
                                        <br />
                                        <input id="doc_charges" ng-model="txtdoc_charges" maxlength="20" class="form-control ng-pristine ng-valid ng-touched"
                                               ng-change="txtamountchange2()"  pattern="^[\d,]+$" style="text-align:right;">
                                        <span style="font-style:italic;">Number in words:</span>
                                        <span id="words_totalamount52" style="color:#003c96fc;" class="text-bold"></span>
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2">
                                        <label class="col-form-label"> Collection Type </label> 
                                        <br />
                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" id="CollectionType2" name="Collection Type2" ng-change="collectdeduct()" value="Collect" ng-model="rdbdoccharge_collectiontype" />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Collect
                                            </label>
                                            <label>
                                                <input type="radio" id="CollectionType2" name="Collection Type2" ng-change="collectdeduct()" value="Deduct" ng-model="rdbdoccharge_collectiontype" />
                                                <span class="fa fa-circle"></span>Deduct
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label"> Field Visit Charges </label>
                                        <br />
                                        <input id="fieldvisit_charges" ng-model="txtfieldvisit_charges" maxlength="20" class="form-control ng-pristine ng-valid ng-touched"
                                               ng-change="txtamountchange3()" pattern="^[\d,]+$" style="text-align:right;">
                                        <span style="font-style:italic;">Number in words:</span>
                                        <span id="words_totalamount53" style="color:#003c96fc;" class="text-bold"></span>
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2">
                                        <label class="col-form-label"> Collection Type </label> 
                                        <br />
                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" id="CollectionType3" name="Collection Type3" ng-change="collectdeduct()" value="Collect" ng-model="rdbfieldvisit_collectiontype" />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Collect
                                            </label>
                                            <label>
                                                <input type="radio" id="CollectionType3" name="Collection Type3" ng-change="collectdeduct()" value="Deduct" ng-model="rdbfieldvisit_collectiontype" />
                                                <span class="fa fa-circle"></span>Deduct
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label"> Adhoc Fee </label> 
                                        <br />
                                        <input id="adhoc_fee" ng-model="txtadhoc_fee" maxlength="20" class="form-control ng-pristine ng-valid ng-touched"
                                               ng-change="txtamountchange4()"  pattern="^[\d,]+$" style="text-align:right;">
                                        <span style="font-style:italic;">Number in words:</span>
                                        <span id="words_totalamount54" style="color:#003c96fc;" class="text-bold"></span>
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2">
                                        <label class="col-form-label"> Collection Type </label> 
                                        <br />
                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" id="CollectionType4" name="Collection Type4" ng-change="collectdeduct()" value="Collect" ng-model="rdbadhoc_collectiontype" />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Collect
                                            </label>
                                            <label>
                                                <input type="radio" id="CollectionType4" name="Collection Type4" ng-change="collectdeduct()" value="Deduct" ng-model="rdbadhoc_collectiontype" />
                                                <span class="fa fa-circle"></span>Deduct
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label"> Term Life Insurance </label>
                                        <br />
                                        <input id="life_insurance" ng-model="txtlife_insurance" maxlength="20" class="form-control ng-pristine ng-valid ng-touched"
                                               ng-change="txtamountchange5()"  pattern="^[\d,]+$" style="text-align:right;">
                                        <span style="font-style:italic;">Number in words:</span>
                                        <span id="words_totalamount55" style="color:#003c96fc;" class="text-bold"></span>
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2">
                                        <label class="col-form-label"> Collection Type </label> 
                                        <br />
                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" id="CollectionType5" name="Collection Type5" ng-change="collectdeduct()" value="Collect" ng-model="rdblifeinsurance_collectiontype" />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Collect
                                            </label>
                                            <label>
                                                <input type="radio" id="CollectionType5" name="Collection Type5" ng-change="collectdeduct()" value="Deduct" ng-model="rdblifeinsurance_collectiontype" />
                                                <span class="fa fa-circle"></span>Deduct
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label class="col-form-label"> Personal Accident Insurance </label> 
                                        <br />
                                        <input id="acct_insurance" ng-model="txtacct_insurance" maxlength="20" class="form-control ng-pristine ng-valid ng-touched"
                                               ng-change="txtamountchange6()"  pattern="^[\d,]+$" style="text-align:right;">
                                        <span style="font-style:italic;">Number in words:</span>
                                        <span id="words_totalamount56" style="color:#003c96fc;" class="text-bold"></span>
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2"> 
                                        <label class="col-form-label"> Collection Type </label> 
                                        <br />
                                        <div class="radio c-radio">
                                            <label>
                                                <input type="radio" id="CollectionType6" name="Collection Type6" ng-change="collectdeduct()" value="Collect" ng-model="rdbpersonalaccident_collectiontype" />
                                                &nbsp;&nbsp;<span class="fa fa-circle"></span>Collect
                                            </label>
                                            <label>
                                                <input type="radio" id="CollectionType6" name="Collection Type6" ng-change="collectdeduct()" value="Deduct" ng-model="rdbpersonalaccident_collectiontype" />
                                                <span class="fa fa-circle"></span>Deduct
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Total Collectable </label>
                                        <br />
                                        <input type="text" id="total_collect" ng-model="txttotal_collect" tabindex="0" class="form-control" disabled />
                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-3">
                                        <label class="col-form-label"> Total Deductable </label>
                                        <br />
                                        <input type="text" id="total_deduct" ng-model="txttotal_deduct" tabindex="0" class="form-control" disabled />
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6">

                                    </div>
                                </div>
                            </div>
                            <br />
                        </div>
                        <br />
                        <div class="row">
                            <div class="col-lg-12 col-md-12 col-sm-12">
                                <br /><br />
                                <div class="text-center">
                                    <button type="button" class="btn btn-lg btn-deafult" style="background-color:#09385f;color:white;font-size: 13px;" ng-disabled="SaveProduct.$invalid"
                                            ng-click="SubmitServiceCharges()">
                                        <i class="fa fa-plus"></i>&nbsp;&nbsp;Add Charges
                                    </button>

                                </div>
                            </div>
                        </div>
                    </form>

                    <br />
                    <br /><br />
                    <div class="row">
                        <div class="col-lg-12 col-sm-12 col-md-12">
                            <div class="table-responsive">
                                <table class="row-border hover" id="statictable">
                                    <thead class="bg-gray text-white">
                                        <tr class="bg-gray text-white">
                                            <th style="width:5%;text-align:center;">S.No</th>
                                            <th> Product Type </th>
                                            <th> Processing Fees/Initiation Fees </th>
                                            <th> Document Charges </th>
                                            <th> Field Visit Charges </th>
                                            <th> Adhoc Fee </th>
                                            <th> Term Life Insurance </th>
                                            <th>  Personal Accident Insurance </th>
                                            <th> Total  </th>
                                            <th style="width:6%;">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="data in servicecharges_list" width="100%">
                                            <td title="S.No" style="text-align:center;">{{$index+1}}</td>
                                            <td title="Product Type">{{data.product_type}}</td>
                                            <td title="Processing Fees/Initiation Fees">
                                                <b> Processing Fees/Initiation Fees : </b> {{data.lblprocessing_fee}} <br />
                                                <span class="text-danger"> {{data.processingfeeinwords}} </span> <br />
                                                <b>Collection Type  : </b> {{data.processing_collectiontype}}  <br />
                                            </td>
                                            <td title="Document Charges">
                                                <b>Document Charges : </b> {{data.lbldoc_charges}} <br />
                                                <span class="text-danger"> {{data.doc_chargesinwords}} </span> <br />
                                                <b>Collection Type  : </b>{{data.doccharge_collectiontype}} <br />
                                            </td>
                                            <td title="Field Visit Charges">
                                                <b>Field Visit Charges  : </b> {{data.lblfieldvisit_charge}} <br />
                                                <span class="text-danger"> {{data.fieldvisit_chargeinwords}} </span> <br />
                                                <b>Collection Type: </b> {{data.fieldvisit_collectiontype}}  <br />
                                            </td>
                                            <td title="Adhoc Fee">
                                                <b>Adhoc Fee : </b> {{data.lbladhoc_fee}} <br />
                                                <span class="text-danger"> {{data.adhoc_feeinwords}} </span> <br />
                                                <b>Collection Type: </b>{{data.adhoc_collectiontype}}  <br />
                                            </td>
                                            <td title="Term Life Insurance">
                                                <b>Term Life Insurance: </b> {{data.lbllife_insurance}} <br />
                                                <span class="text-danger"> {{data.life_insuranceinwords}} </span> <br />
                                                <b>Collection Type : </b>{{data.lifeinsurance_collectiontype}}  <br />
                                            </td>
                                            <td title="Personal Accident Insurance">
                                                <b>Personal Accident Insurance : </b> {{data.lblacct_insurance}} <br />
                                                <span class="text-danger"> {{data.acct_insuranceinwords}} </span> <br />
                                                <b>Collection Type : </b>{{data.acctinsurance_collectiontype}}  <br />
                                            </td>
                                            <td title="Total">
                                                <b>Collectable: </b> {{data.total_collect}} <br />
                                                <b>Deductable : </b>{{data.total_deduct}}  <br />
                                            </td>
                                            <td class="text-nowrap" style="width:6%;">
                                                <button title="Edit" ng-click="servicedtl_edit(data.application2servicecharge_gid)"
                                                        class="btn btn-green btn-xs ">
                                                    <em class="fa fa-edit"></em>
                                                </button>
                                                <button title="Delete" ng-click="DeleteCharge(data.application2servicecharge_gid)"
                                                        class="btn btn-danger btn-xs ">
                                                    <em class="fa fa-trash-o"></em>
                                                </button>
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                            <br />
                        </div>
                    </div>
                </div>
                <br />
                <div class="text-center">
                    <button ng-click="Back()" class="btn btn-info"><i class="fa fa-arrow-circle-left"></i>&nbsp;&nbsp;Back</button>
                </div>
                <br />
            </div>
        </div>
    </div>
    <script type="text/ng-template" id="/OtherDetails.html">
        <md-toolbar>
            <div class="md-toolbar-tools" style="background-color:rgb(63, 110, 181);">
                <em style="font-size:16px" class="fa fa-file-text-o"></em>&nbsp;<label style="font-size:16px">Other Details</label>
                <span flex></span>
                <button ng-click="ok()" class="pull-right btn btn-primary"><i class="fa fa-close"></i></button>
            </div>

        </md-toolbar>
        <div class="modal-content">
            <div class="modal-body ng-scope">

                <form novalidate="" name="userform1" ng-submit="form.submitLoan()" autocomplete="off" class="form-validate mb-lg">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="dd-handle ng-scope">

                                <p class="text-primary" style="font-size:14px;" ng-show="buyer_list!=null"><b>&nbsp; Buyer Details </b></p>
                                <div class="row" ng-show="buyer_list!=null">
                                    <div class="col-lg-12 col-sm-12 col-md-12">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-secondary">
                                                <thead class="bg-gray text-white">
                                                    <tr width="100%">
                                                        <th scope="col">S.No</th>
                                                        <th scope="col">Buyer</th>
                                                        <th scope="col">Buyer Limit</th>
                                                        <th scope="col">Availed Limit</th>
                                                        <th scope="col">Balance Limit</th>
                                                        <th scope="col">Bill Tenure in Days</th>
                                                        <th scope="col">Margin %</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr ng-repeat="data in buyer_list">
                                                        <td title="S.No">{{$index+1}}</td>
                                                        <td title="Buyer">{{data.buyer_name}}</td>
                                                        <td title="Buyer Limit">{{data.buyer_limit}}</td>
                                                        <td title="Availed Limit">{{data.availed_limit}}</td>
                                                        <td title="Balance Limit">{{data.balance_limit}}</td>
                                                        <td title="Bill Tenure in Days">{{data.bill_tenure}}</td>
                                                        <td title="Margin %">{{data.margin}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>

                                <p class="text-primary" style="font-size:14px;"><b>&nbsp;  Program and Product Details </b></p>
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <div class="col-lg-4 col-md-4 col-sm-4">
                                            <label> Program : </label>
                                        </div>
                                        <div class="col-lg-8 col-md-8 col-sm-8">
                                            <p>{{program}}</p>
                                        </div>
                                        <!--<div class="col-lg-4 col-md-4 col-sm-4">
                                        <label> Product </label>
                                        <br />
                                        <p>{{product_name}}</p>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label> Sector / Strategic Business Unit </label>
                                        <br />
                                        <p>{{sector_name}}</p>
                                    </div>-->
                                    </div>
                                </div>
                                <!--<div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label> Category </label>
                                        <br />
                                        <p>{{category_name}}</p>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label> Variety </label>
                                        <br />
                                        <p>{{variety_name}}</p>
                                    </div>
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label> Botanical Name  </label>
                                        <br />
                                        <p>{{botanical_name}}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-12 col-md-12 col-sm-12">
                                    <div class="col-lg-4 col-md-4 col-sm-4">
                                        <label> Alternative Names </label>
                                        <br />
                                        <p>{{alternative_name}}</p>
                                    </div>
                                    <div class="col-lg-8 col-md-8 col-sm-8">

                                    </div>

                                </div>
                            </div>-->
                                <br />
                                <div class="row">
                                    <div class="col-lg-12 col-md-12 col-sm-12">
                                        <div>
                                            <div class="table-responsive table-bordered">
                                                <div>
                                                    <table class="table">
                                                        <thead class="bg-gray text-white">
                                                            <tr>
                                                                <th>S.No</th>
                                                                <th>Product</th>
                                                                <th>Sector / Strategic Business Unit</th>
                                                                <th>Category</th>
                                                                <th>Variety</th>
                                                                <th>Botanical Name</th>
                                                                <th>Alternative Names</th>
                                                                <th>CSA - Commodity Average</th>
                                                                <th>CSA- Percentage of the total limit</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="data in mstproductdtl_list">
                                                                <td>{{$index+1}}</td>
                                                                <td>{{data.product_name}}</td>
                                                                <td>{{data.sector_name}}</td>
                                                                <td>{{data.category_name}}</td>
                                                                <td>{{data.variety_name}}</td>
                                                                <td>{{data.botanical_name}}</td>
                                                                <td>{{data.alternative_name}}</td>
                                                                <td>{{data.csacommodity_average}}</td>
                                                                <td>{{data.csapercentageoftotal_limit}}</td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br />
                    <div class="text-center">
                        <button ng-click="ok()" class="btn btn-danger"><i class="fa icon-close"></i>&nbsp;&nbsp;Close</button>
                    </div>
                </form>
            </div>
        </div>
    </script>
        </div>
