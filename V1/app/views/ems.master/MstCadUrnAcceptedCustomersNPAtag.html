<a href="#/app/MstCadUrnAcceptedCustomers">
    <button type="button" title="Back" class="pull-right btn btn-sm btn-primary">
        <em class="fa fa-arrow-circle-left fa-1x"></em>
    </button>
</a>
<h3>
    NPA Tagged List
</h3>


<div ng-controller="MstCadUrnAcceptedCustomersNPATagController">
    <div class="panel" id="CAD Inprogress">
        <br />
        <div class="row">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="table-responsive">
                        <table datatable="ng" class="table table-hover table-striped">
                            <thead>
                                <tr class="text-white nowrap" style="background-color:#09385f;">
                                    <th class="text-center nowrap"> S.No</th>
                                    <th class="text-center nowrap"> Customer URN</th>
                                    <th class="text-center nowrap"> Customer Name </th>
                                    <th class="text-center nowrap"> Vertical </th>
                                    <th class="text-center nowrap"> Region </th> 
                                    <th class="text-center nowrap"> Tagged By</th>
                                    <th class="text-center nowrap"> Tagged Date</th>
                                    <th class="text-center nowrap"> Remarks</th>
                                    <th class="text-center nowrap"> Type </th>
                                    <th class="text-center nowrap">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="data in npatagged_list">
                                    <td data-title="'S.No'" class="text-center"> {{$index+1}} </td>
                                    <td data-title="'Customer URN'"> {{data.customer_urn}} </td>
                                    <td data-title="'Customer Name'"> {{data.customer_name}} </td>  
                                    <td data-title="'Vertical'"> {{data.vertical_name}} </td>
                                    <td data-title="'Region'"> {{data.region}} </td>                               
                                    <td data-title="'Tagged By'">
                                        <span ng-if="data.updated_by">{{data.updated_by}}</span>
                                        <span ng-if="!data.updated_by">{{data.tagged_by}}</span>    
                                    </td>
                                    <td data-title="'Tagged Date'"> 
                                        <span ng-if="data.updated_date">{{data.updated_date}}</span>
                                        <span ng-if="!data.updated_date">{{data.tagged_date}}</span>
                                    </td>
                                    <td style="text-align: center;">
                                        <em class="fa fa-question-circle" ng-click=description(data.remarks) style="font-size:24px;align-content:center;"></em>
                                    </td>
                                    <td data-title="'Application Type'" ng-if="data.renewal_flag=='Y'">
                                        <label class="label label-pink" style="font-size:10px;"> Renewal </label>
                                    </td>
                                    <td data-title="'Application Type'" ng-if="data.enhancement_flag=='Y'">
                                        <label class="label label-success" style="font-size:10px;">Enhancement </label>
                                    </td>
                                    <td data-title="'Application Type'" ng-if="data.renewal_flag=='N' && data.enhancement_flag=='N'">
                                        <label class="label label-primary" style="font-size:10px;"> New </label>
                                    </td>
                                    <td class="nowrap" data-title="'Action'" style="text-align: center;">
                                        <button title="Untag NPA" ng-click="npa_untag(data.customer2tag_gid,data.customer_urn,data.customer_name)" style="color:white;" class="btn btn-green">
                                            <em class="fa fa-user-times"></em>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div style="text-align: center;">
                <button type="button" title="Back" class="btn btn-info" ng-click="back()">
                    Back
                </button>
        </div>
        <br />
    </div>
    <script type="text/ng-template" id="/npauntag.html">
        <div class="modal-header" style="background-color:rgb(63, 110, 181);">
            <h4 id="myModalLabel" class="modal-title" style="color:white;">
                &emsp;
                <span class="btn-label" style="background-color:rgb(63, 110, 181);">
                    <i class="fa fa-user-times" style="color:white;"></i>
                </span>Untag NPA
            </h4>
        </div>
        <div class="modal-body">

            <div class="pd-sm-10">
                <form novalidate="" name="userform3" ng-submit="form.submitForm1()" autocomplete="off" class="form-validate form-horizontal">
                    <div class="row">
                        <div class="col-lg-12 col-sm-12 col-md-12">
                            <div>
                                <label>Customer Name  : &nbsp;&nbsp;</label>&nbsp;<span>{{customer_name}}</span>
                            </div>


                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div>
                                <label>Customer URN : &nbsp;&nbsp;</label>&nbsp;<span class="text-primary" style="font-size:15px;">{{customer_urn}}</span>


                            </div>
                        </div>
                    </div>
                    <br /> <div class="row">
                        <div class="col-md-12">
                            <label>Remarks &nbsp;</label><span style="color:red;">*</span>
                            <textarea ng-model="untagremarks" placeholder="Enter the Remarks" required rows="4" class="form-control"  style="resize:vertical;max-height:120px;overflow:auto;"
                                      id="input_13" ng-trim="false" aria-multiline="true" tabindex="0" aria-invalid="true"></textarea>

                        </div>
                    </div>
                    <br />
                    <p class="lead bb text-purple text-bold" style="font-size:16px;text-align:left;">Tagged History</p>

                    <div class="row ">

                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="table-responsive" >
                                <div style="max-height:200px;overflow:auto;">
                                    <table class="table table-striped table-secondary">
                                        <thead class="bg-gray text-white">
                                            <tr width="100%">
                                                <th align="center" scope="col">S.No</th>
                                                <th align="center" scope="col">NPA Updated By</th>
                                                <th align="center" scope="col">Status</th>
                                                <th class="text-center" scope="col">Remarks</th>
                
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr width="100%" ng-repeat="data in npatag_list">
                                                <td align="left" scope="col" title="'S.No'">{{$index+1}}</td>
                                                <td align="left" scope="col" title="'S.No'">{{data.created_by}} / {{data.created_date}}</td>
                                                <td align="left" scope="col" title="'S.No'">{{data.tag_status}}</td>
                                                <!-- <td align="left" scope="col" title="'Remarks'">{{data.remarks}}</td> -->
                                                <td style="text-align: center;">
                                                    <em class="fa fa-question-circle" ng-click=description(data.remarks) style="font-size:24px;align-content:center;"></em>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>

                    </div>
                    <br />
                </form>
            </div>
            <div>
                <div class="text-center">
                    <button type="button" class="btn btn-success btn-md" ng-disabled="userform3.$invalid" ng-click="untag_urn()">
                        <i class="fa fa-arrow-circle-up"></i> &nbsp;&nbsp;Confirm
                    </button>
                    <button ng-click="ok()" class="btn btn-danger"><i class="fa icon-close"></i>&nbsp;&nbsp;Close</button>
                </div>
            </div>
        </div>
        <script type="text/ng-template" id="/description.html">
            <div class="modal-header bg-primary">
                <h4 class="modal-title">
                    <span class="btn-label bg-primary">
                        <i class="fa fa-edit "></i>
                    </span> Remarks
                </h4>
            </div>
            <div class="modal-body">
                <br>
                &nbsp;&nbsp;{{description}}
                <br>
                <br>
                <div align="center">
                <button ng-click="back()" class="btn btn-danger"><i class="fa icon-close"></i>&nbsp;&nbsp;Close</button>
                </div>
            </div>
        </script>
    </script>
    <script type="text/ng-template" id="/description.html">
        <div class="modal-header bg-primary">
            <h4 class="modal-title">
                <span class="btn-label bg-primary">
                    <i class="fa fa-edit "></i>
                </span> Remarks
            </h4>
        </div>
        <div class="modal-body">
            <br>
            &nbsp;&nbsp;{{description}}
            <br>
            <br>
            <div align="center">
            <button ng-click="back()" class="btn btn-danger"><i class="fa icon-close"></i>&nbsp;&nbsp;Close</button>
            </div>
        </div>
    </script>
</div>