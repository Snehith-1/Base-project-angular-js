<h3>
    Mail Merge Summary
</h3>

<div ng-controller="iasnWomMergeWorkItem">
    <style type="text/css">
        .list-group-item:hover {
            color: #000000;
            background-image: linear-gradient(90deg, #d8eef5 0%, #adc9e7 35%, #88a9d9 100%);
            font-weight: bold;
            cursor: pointer;
        }

        .panel-scroll {
            max-height: 120px;
            overflow: auto;
        }
    </style>
    <div class="panel panel-default">
        <div class="panel-body">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">


                    <p class="lead bb text-primary text-bold text-center">{{email_subject}}
                        <label style="font-weight:bold">/</label>{{workitemref_no}}</p>

                </div>
            </div>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="col-lg-3 col-md-3 col-sm-3">
                        <label>RM Name/Mail ID</label>
                        <input ng-model="searchrm_name" id="searchrm_name" ng-keyup="complete_searchrm(searchrm_name)"
                            tabindex="0" required aria-required="true" aria-invalid="true"
                            class="form-control ng-pristine ng-invalid ng-invalid-required ng-touched" style="">

                        <ul class="list-group panel-scroll" style="height:100%; word-wrap: break-word;">
                            <li class="list-group-item" ng-repeat="m in rm_list" ng-click="fillTextboxRM(m.email_data)">
                                {{m.email_data}}</li>
                        </ul>
                        <br>
                        <label style="color:red;">{{rmmessage}}</label>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">
                        <label>Subject</label>
                        <input ng-model="searchsubject" ng-keyup="complete_searchsubject(searchsubject)" tabindex="0"
                            required aria-required="true" aria-invalid="true"
                            class="form-control ng-pristine ng-invalid ng-invalid-required ng-touched" style="">

                        <ul class="list-group panel-scroll" style="height:100%; word-wrap: break-word;">
                            <li class="list-group-item" ng-repeat="m in subject_list"
                                ng-click="fillTextboxSubject(m.email_data)">{{m.email_data}}</li>
                        </ul>
                        <br>
                        <label style="color:red;">{{subjectmessage}}</label>

                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">
                        <label>Zone</label>
                        <input ng-model="searchzone_name" tabindex="0" required aria-required="true" aria-invalid="true"
                            ng-keyup="complete_searchzone(searchzone_name)"
                            class="form-control ng-pristine ng-invalid ng-invalid-required ng-touched" style="">

                        <ul class="list-group panel-scroll" style="height:100%; word-wrap: break-word;">
                            <li class="list-group-item" ng-repeat="m in zonelist"
                                ng-click="fillTextboxZone(m.email_data)">{{m.email_data}}</li>
                        </ul>
                        <br>
                        <label style="color:red;">{{zone_message}}</label>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-3">

                        <br>

                        <button title="Search" class="btn btn-info btn-sm" ng-click="SearchWorkItem()">
                            <em class="fa fa-search"></em>&nbsp; &nbsp;Search

                        </button>
                        &nbsp;&nbsp;&nbsp;
                        <button title="Merge" class="btn btn-pink btn-sm" ng-click="MergeWorkItem()">
                            <em class="icon icon-grid"></em>&nbsp; &nbsp;Merge

                        </button>
                    </div>
                </div>
            </div>
            <br>
            <div ng-show="ShowSearch">
                <table class="table m0">
                    <thead>
                        <tr>
                            <th> Check All <br>
                                <input type="checkbox" id="c2" ng-model="all" ng-change="checkall(all);"></th>
                            </th>
                            <th> WorkItem Ref No.
                            </th>
                            <th>Employee Profile
                            </th>
                            <th class="col-lg-5" class="text-left">Mail Details</th>
                            <th class="col-lg-2" class="text-left">Email Date</th>
                            <th class="col-lg-1" class="text-left">Action</th>


                        </tr>
                    </thead>
                </table>

                <div class="dd-handle ng-scope" ng-repeat="data in UnTaggedWI_List">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="pull-left">

                                <input type="checkbox" id="c1" value={{data.checked}} " ng-model=" data.checked">
                            </div>
                            <div class="col-lg-1">
                                {{data.workitemref_no}}
                            </div>
                            <div class="col-lg-3 text-center">

                                <ul>
                                    <div dropdown="" class="dropdown dropdown-list" title="User Profile">

                                        <a dropdown-toggle="" ng-click="EmployeeProfile(data.rmemployee_gid)" class="btn btn-info btn-circle btn-sm">
                                            <strong>
                                               {{data.rmemployee_name}}
                                            </strong>
                                        </a>
                                        <!-- START Dropdown menu-->
                                        <ul class="dropdown-menu animated flipInX" style="width:300px;">
                                            <li>
                                                <!-- START list group-->
                                                <div class="list-group">
                                                    <!-- list item-->
                                                    <div class="list-group-item"
                                                        style="border: 1px solid grey;border-radius: 5px;background-color:#ffffff;">
                                                        <div class="item user-block">
                                                            <div class="user-block-picture">
                                                                <div class="user-block-status" ng-switch="user_photo">
                                                                    <img ng-src="{{user_photo}}"
                                                                        alt="Avatar"
                                                                        class="img-thumbnail img-circle"
                                                                        src="app/img/user/user-avatar.png" ng-switch-default>
                                                                        <img ng-src="app/img/user/user-avatar.png"
                                                                        alt="Avatar"
                                                                        class="img-thumbnail img-circle"
                                                                        src="app/img/user/user-avatar.png"  ng-switch-when="N">
                                                                    
                                                                </div>
                                                            </div>
                                                            <div class="media-box-body clearfix">
                                                                <br />
                                                                <p><b>Name:</b> <span class="user-block-name">
                                                                        {{user_name}}</span></p>
                                                                <p><b>User Code :</b> <span
                                                                        class="user-block-name">{{user_code}}</span></p>
                                                                <p><b>Designation :</b> <span
                                                                        class="user-block-role">{{user_designation}}</span></p>
                                                                <p><b>Department : </b><span
                                                                        class="user-block-role">{{user_department}}</span>
                                                                </p>

                                                            </div>
                                                    </div>

                                                </div>
                                                <!-- END list group-->
                                            </li>
                                        </ul>
                                        <!-- END Dropdown menu-->
                                    </div>
                                </ul>


                            </div>
                            <div class="col-lg-5 col-md-5 col-sm-5">
                                {{data.email_from}}<br>
                                {{data.email_subject}}

                            </div>
                            <div class="col-lg-2 col-md-2 col-sm-2">
                                {{data.email_date}}

                            </div>
                            <div class=" pull-right">
                                <div class="text-info">
                                    Mail Details &nbsp;&nbsp;
                                    <a ng-hide="data.hide" ng-click="data.hide=true">
                                        <button title="Click to View Mail Details"
                                            ng-click="maildetails(data.email_gid,$index)">
                                            <em class="fa fa-chevron-circle-down" style="font-size:14px;"></em>
                                        </button>
                                    </a>
                                    <a ng-show="data.hide" ng-click="data.hide=false">
                                        <button title="Click to Hide Mail Details">
                                            <em class="fa fa-chevron-circle-up" style="font-size:14px;"></em>
                                        </button>
                                    </a>
                                </div>
                            </div>
                        </div>





                    </div>
                    <br />

                    <div ng-show="data.hide" class="row">
                        <div class="col-lg-12 col-sm-12 col-md-12">

                            <p ng-bind-html=trustAsHtml(data.email_content)></p>
                        </div>
                    </div>
                </div>
            </div>

            <br>
            <div class="row">
                <div class="col-md-12 col-lg-12 col-sm-12">
                    <p class="lead bb text-purple text-bold" style="font-size:16px;">Merge Work Item Summary</p>
                </div>
            </div>
            <br />
            <table class="table m0">
                <thead>
                    <tr>
                        <th> S.No
                        </th>
                        <th> WorkItem Ref No.
                        </th>
                        <th>Employee Profile
                        </th>
                        <th class="col-lg-5" class="text-left">Mail Details</th>
                        <th class="col-lg-2" class="text-left">Email Date</th>
                        <th class="col-lg-1" class="text-right">Action</th>


                    </tr>
                </thead>
            </table>

            <div class="dd-handle ng-scope" ng-repeat="data in TaggedWI_List">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="pull-left">
                            {{$index+1}}

                        </div>
                        <div class="col-lg-1">
                            {{data.workitemref_no}}
                        </div>
                        <div class="col-lg-3 text-center">

                            <ul>
                                <div dropdown="" class="dropdown dropdown-list" title="User Profile">

                                    <a dropdown-toggle="" ng-click="EmployeeProfile(data.rmemployee_gid)" class="btn btn-info btn-circle btn-sm">
                                        <strong>
                                           {{data.rmemployee_name}}
                                        </strong>
                                    </a>
                                    <!-- START Dropdown menu-->
                                    <ul class="dropdown-menu animated flipInX" style="width:300px;">
                                        <li>
                                            <!-- START list group-->
                                            <div class="list-group">
                                                <!-- list item-->
                                                <div class="list-group-item"
                                                    style="border: 1px solid grey;border-radius: 5px;background-color:#ffffff;">
                                                    <div class="item user-block">
                                                        <div class="user-block-picture">
                                                            <div class="user-block-status" ng-switch="user_photo">
                                                                <img ng-src="{{user_photo}}"
                                                                    alt="Avatar"
                                                                    class="img-thumbnail img-circle"
                                                                    src="app/img/user/user-avatar.png" ng-switch-default>
                                                                    <img ng-src="app/img/user/user-avatar.png"
                                                                    alt="Avatar"
                                                                    class="img-thumbnail img-circle"
                                                                    src="app/img/user/user-avatar.png"  ng-switch-when="N">
                                                                
                                                            </div>
                                                        </div>
                                                        <div class="media-box-body clearfix">
                                                            <br />
                                                            <p><b>Name:</b> <span class="user-block-name">
                                                                    {{user_name}}</span></p>
                                                            <p><b>User Code :</b> <span
                                                                    class="user-block-name">{{user_code}}</span></p>
                                                            <p><b>Designation :</b> <span
                                                                    class="user-block-role">{{user_designation}}</span></p>
                                                            <p><b>Department : </b><span
                                                                    class="user-block-role">{{user_department}}</span>
                                                            </p>
                                                            <p><b>Contact No : </b><span
                                                                class="user-block-role">{{user_mobileno}}</span>
                                                        </p>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <!-- END list group-->
                                        </li>
                                    </ul>
                                    <!-- END Dropdown menu-->
                                </div>
                            </ul>


                        </div>
                        <div class="col-lg-5 col-md-5 col-sm-5">
                            {{data.email_from}}<br>
                            {{data.email_subject}}

                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-2">
                            {{data.email_date}}

                        </div>
                        <div class=" pull-right">
                         
                               
                                <a ng-hide="data.hide" ng-click="data.hide=true">
                                    <button class="text-info" title="Click to View Mail Details"
                                        ng-click="maildetails(data.email_gid,$index)">
                                        <em class="fa fa-chevron-circle-down" style="font-size:14px;"></em>
                                    </button>
                                </a>
                                <a ng-show="data.hide" ng-click="data.hide=false">
                                    <button class="text-info" title="Click to Hide Mail Details">
                                        <em class="fa fa-chevron-circle-up" style="font-size:14px;"></em>
                                    </button>
                                </a>
                           
                                <a ng-click="UndoMail(data.email_gid)">
                                    <button title="Click to Undo From Mal Merge">
                                        <em class="icon icon-action-undo" style="font-size:14px;"></em>
                                    </button>
                                </a>
                           
                        </div>
                    </div>





                </div>
                <br />

                <div ng-show="data.hide" class="row">
                    <div class="col-lg-12 col-sm-12 col-md-12">

                        <p ng-bind-html=trustAsHtml(data.email_content)></p>
                    </div>
                </div>
            </div>
            <br>
            <br>
            <div>
                <div class="text-center">
        
                    <button ng-click="back()" class="btn btn-info"><i
                            class="fa fa-arrow-circle-left"></i>&nbsp;&nbsp;Back</button>
                </div>
            </div>
        
        </div>
    </div>


</div>