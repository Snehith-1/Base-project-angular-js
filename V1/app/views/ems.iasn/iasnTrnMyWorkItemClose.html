<style type="text/css">
    .picColor:hover {
        background-color: transparent;
        box-shadow: none;
        color: #144A6E;
        border: 1px solid #A59F9D;
        transform: translateY(-3px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        text-decoration: underline;
        text-decoration-color: #141478;
    }
</style>
<h3>
    My Work Item Management
</h3>
<div ng-controller="iasnTrnMyWorkItemClose as dp">
    <div class="widget">
        <div class="row">
            <div class="col-lg-3 col-sm-3 col-md-3">
                <div class="list-group-item picColor" style="height:70px;border: 1px solid #bdb9b8;">
                    <div class="media-box">
                        <div class="pull-left" style="padding-top:6px;">
                            <span>
                                <em class="fa fa-dropbox fa-2x" style="color:#141478;"></em>
                            </span>
                        </div>
                        <div class="media-box-body clearfix">
                            <div class="media-box-heading" style="padding-top:10px;">
                                <div class="pull-right label" style="background-color:#141478;padding-top:5px;padding-bottom:5px;">{{count_myworkitempending}}</div>
                                <div style="font-size:16px;color:#141478;text-align:center;" ng-click="WorkItem()"><b>Work Item</b></div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-3 col-md-3">
                <div class="list-group-item picColor" style="height:70px;border: 1px solid #bdb9b8;">
                    <div class="media-box">
                        <div class="pull-left" style="padding-top:6px;">
                            <span>
                                <em class="fa fa-reply-all fa-2x" style="color:#AE1151;"></em>
                            </span>
                        </div>
                        <div class="media-box-body clearfix">
                            <div class="media-box-heading" style="padding-top:10px;">
                                <div class="pull-right label" style="background-color:#AE1151;padding-top:5px;padding-bottom:5px;">{{count_myworkitempushback}}</div>
                                <div style="font-size:16px;color:#AE1151;text-align:center;" ng-click="Pushback()"><b>Pushback</b></div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-3 col-md-3">
                <div class="list-group-item picColor" style="height:70px;border: 1px solid #bdb9b8;">
                    <div class="media-box">
                        <div class="pull-left" style="padding-top:6px;">
                            <span>
                                <em class="fa fa-share-square-o fa-2x" style="color:#871490;"></em>
                            </span>
                        </div>
                        <div class="media-box-body clearfix">
                            <div class="media-box-heading" style="padding-top:10px;">
                                <div class="pull-right label" style="background-color:#871490;padding-top:5px;padding-bottom:5px;">{{count_myworkitemforward}}</div>
                                <div style="font-size:16px;color:#871490;text-align:center;" ng-click="Forward()"><b>Forward</b></div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-3 col-md-3">
                <div class="list-group-item picColor" style="height:70px;border: 1px solid #bdb9b8;">
                    <div class="media-box">
                        <div class="pull-left" style="padding-top:6px;">
                            <span>
                                <em class="fa fa-times-circle text-white fa-2x" style="color:#FF0000;"></em>
                            </span>
                        </div>
                        <div class="media-box-body clearfix">
                            <div class="media-box-heading" style="padding-top:10px;">
                                <div class="pull-right label" style="background-color:#FF0000;padding-top:5px;padding-bottom:5px;">{{count_myworkitemclose}}</div>
                                <div style="font-size:16px;color:#FF0000;text-align:center;" ng-click="Close()"><b> Close</b></div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br/>
        <div class="panel">
            <br/>
            <div class="row">
                <div class="col-lg-12 col-sm-12 col-md-12">
                    <h3 style="color:#FF0000;"> &nbsp;&nbsp; Close </h3>

                </div>
                
            </div>
            <br/>
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <div class="table-responsive">
                            <table datatable="ng" class="table table-hover table-striped mb-mails">
                                <thead>
                                    <tr class="text-white" style="background-color:#09385f;">
                                        <th >
                                            S.No
                                        </th>
                                        <th  class="text-center"> 
                                            Profile
                                        </th>
                                        
                                        <th >Mail Details</th>
                                        <th >Zone</th>
                                        <th>
                                            Aging
                                        </th>
                                        <th width="12%">
                                            Closed By/On
                                        </th>
                                        <th  class="text-center">Action</th>
            
            
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="data in close_list">
                                        <td width="5%" class="text-center">{{$index+1}}</td>
                                        <!-- <td>
                                                    {{data.email_date}}
                                                </td> -->
    
                                       
                                        <td width="10%">
                                            <ul>
                                                <div dropdown="" class="dropdown dropdown-list" title="User Profile">
    
                                                    <a dropdown-toggle="" ng-click="EmployeeProfile(data.rmemployee_gid)" class="btn btn-info btn-circle btn-sm">
                                                        <strong>
                                                            {{data.rmemployee_name}}
                                                        </strong>
                                                    </a>
                                                    <!-- START Dropdown menu-->
                                                    <ul class="dropdown-menu animated flipInX" style="width:300px;">
                                                        <li>
                                                            <!-- START list group-->
                                                            <div class="list-group">
                                                                <!-- list item-->
                                                                <div class="list-group-item"
                                                                    style="border: 1px solid grey;border-radius: 5px;background-color:#ffffff;">
                                                                    <div class="item user-block">
                                                                        <div class="user-block-picture">
                                                                            <div class="user-block-status" ng-switch="user_photo">
                                                                                <img ng-src="{{user_photo}}"
                                                                                    alt="Avatar"
                                                                                    class="img-thumbnail img-circle"
                                                                                    src="app/img/user/user-avatar.png" ng-switch-default>
                                                                                    <img ng-src="app/img/user/user-avatar.png"
                                                                                    alt="Avatar"
                                                                                    class="img-thumbnail img-circle"
                                                                                    src="app/img/user/user-avatar.png"  ng-switch-when="N">
                                                                                
                                                                            </div>
                                                                        </div>
                                                                        <div class="media-box-body clearfix">
                                                                            <br />
                                                                            <p><b>Name:</b> <span class="user-block-name">
                                                                                {{user_name}}</span></p>
                                                                        <p><b>User Code :</b> <span
                                                                                class="user-block-name">{{user_code}}</span></p>
                                                                        <p><b>Designation :</b> <span
                                                                                class="user-block-role">{{user_designation}}</span></p>
                                                                        <p><b>Department : </b><span
                                                                                class="user-block-role">{{user_department}}</span>
                                                                        </p>
    
    
                                                                        </div>
                                                                    </div>
                                                                </div>
    
                                                            </div>
                                                            <!-- END list group-->
                                                        </li>
                                                    </ul>
                                                    <!-- END Dropdown menu-->
                                                </div>
                                            </ul>
    
                                        </td>
                                        <td width="40%"   ng-click="WorkItem360(data.email_gid)" class="text-left">
    
    
                                            <div class="mb-mail-date pull-right">{{data.email_date}}</div>
    
                                            <div class="mb-mail-meta">
                                                <div class="pull-left">
                                                    <div>
                                                        <b>
                                                            {{data.workitemref_no}}
                                                        </b>
                                                     
                                                    </div>
                                                    <div>{{data.email_from}}</div>
                                                    <div>{{data.email_subject}}</div>
    
                                                </div>
                                                <!-- <div ng-bind-html="data.email_content | limitTo:100"
                                                    class="mb-mail-preview">
                                                </div> -->
                                            </div>
    
                                          
                                        </td>
                                        <td width="20%" >
                                            {{data.zone_name}}
                                        </td>
                                        <td width="5%">
                                            <span class="label label-info" title="Aging">{{data.aging}}</span>
                                        </td>
                                        <td width="12%">
                                            {{data.updatedby_on}}
                                        </td>
                                        <td width="10%" >
                                            <div class="btn-group pull-right">
                                                <!-- <button type="button" class="btn  btn-sm"
                                                ng-click="WorkItem360(data.email_gid)"
                                                title="WorkItem 360">
                                                <em class="fa fa-retweet text-gray-dark"></em>
                                            </button> -->
                                                <!--<button type="button" class="btn  btn-sm"
                                                    ng-click="TransferWorkItem(data.email_gid,data.workitemref_no,data.email_from,data.email_subject,data.zone_name,data.checkeremployee_name)"
                                                    title="Transfer">
                                                    <em class="icon icon-share-alt text-gray-dark"></em>
                                                </button>-->
                                              
                                                <button type="button" class="btn  btn-sm" title="Merge"
                                                    ng-click="mergeworkitem(data.email_gid,data.email_subject,data.workitemref_no)">
                                                    <em class="icon icon-grid text-gray-dark"></em>
                                                </button>
                                            </div>
                                        </td>
    
                                    </tr>
                                </tbody>
                            </table>
    
                        </div>
            </div>
            </div>
        </div>
            <br/>
        </div>
    </div>

    <script type="text/ng-template" id="/closeWIContent.html">
        <md-toolbar>
            <div class="md-toolbar-tools" style="background-color:rgb(63, 110, 181);">
                <h2><em class="icon icon-trash"></em>&nbsp;Close Work Item</h2>
                <span flex></span>

            </div>
        </md-toolbar>
        <div class="modal-body ng-scope">
            <form novalidate="" name="teamformsubmit" ng-submit="form.submitForm1()" autocomplete="off" class="form-validate form-horizontal">
                <div class="pd-sm-10">

                    <div class="row ">
                        <div class="col-sm-12 col-lg-12 col-md-12">
                            <label>Work Item Ref No</label>
                            <br />
                           {{workitemref_no}}
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-sm-12 col-lg-12 col-md-12">
                            <label>From </label><br>
                           {{from}}
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-sm-12 col-lg-12 col-md-12">
                            <label>Subject </label><br>
                           {{subject}}
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-sm-12 col-lg-12 col-md-12">
                            <label>Remarks <span style="color:red">*</span></label>
                            <textarea ng-model="close_remarks" placeholder="Enter Remarks" rows="3" class="form-control"
                            required="" id="input_13" ng-trim="false" aria-multiline="true" tabindex="0" aria-invalid="true"></textarea>
                        </div>
                    </div>
                  <br/>
                  <div class="row" >
                    <div class="col-lg-12 col-md-12 col-sm-12">
                            <label ><strong>Mail Trigger </strong></label>
                            <div class="radio c-radio">
                                <label>
                                    <input type="radio"  name="mail_trigger" value="Y" 
                                    ng-change="onchangearchival(mail_trigger)"
                                     ng-model="Acknowledge_mail_trigger" />
                                    &nbsp;&nbsp;<span class="fa fa-circle"></span>Yes 
                                </label>
                                <label>
                                    <input type="radio"  name="mail_trigger" ng-checked="true" ng-change="onchangearchival(mail_trigger)"
                                     value="N" ng-model="Acknowledge_mail_trigger" />
                                    <span class="fa fa-circle"></span>No
                                </label>                    
                           </div>                                  
                    </div>
                </div>
                </div>
                <br />
                <div>
                    <div class="text-center">
                        <button type="button" class="btn btn-success btn-md" ng-disabled="teamformsubmit.$invalid" ng-click="CloseWIUpdate()"><i class="fa fa-arrow-circle-right"></i>&nbsp;&nbsp;Submit</button>&nbsp;&nbsp;
                        <button ng-click="close()" class="btn btn-danger"><i class="fa icon-close"></i>&nbsp;&nbsp;Close</button>
                    </div>
                </div>
            </form>
        </div>
    </script>

    <script type="text/ng-template" id="/transferWIContent.html">
        <md-toolbar>
            <div class="md-toolbar-tools" style="background-color:rgb(63, 110, 181);">
                <h2><em class="icon icon-share-alt"></em>&nbsp;Transfer Work Item</h2>
                <span flex></span>

            </div>
        </md-toolbar>
        <div class="modal-body ng-scope">
            <form novalidate="" name="transferformsubmit" ng-submit="form.submitForm1()" autocomplete="off" class="form-validate form-horizontal">
                <div class="pd-sm-10">

                    <div class="row ">
                        <div class="col-sm-6 col-lg-6 col-md-6">
                            <label>Work Item Ref No</label>
                            <br />
                           {{workitemref_no}}
                        </div>
                        <div class="col-sm-6 col-lg-6 col-md-6">
                            <label>From </label><br>
                           {{from}}
                        </div>
                    </div>
                
                    <br />
                    <div class="row">
                        <div class="col-sm-6 col-lg-6 col-md-6">
                            <label>Assign To </label><br>
                           {{checkeremployee_name}}
                        </div>
                        <div class="col-sm-6 col-lg-6 col-md-6">
                            <label>Zone </label><br>
                           {{zone_name}}
                        </div>
                    </div>
                    
                    <br />
                    <div class="row">
                        <div class="col-sm-12 col-lg-12 col-md-12">
                            <label>Subject </label><br>
                           {{subject}}
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div class="col-sm-12 col-lg-12 col-md-12">
                            <label>Transfer To </label><br>
                            <select id="transfer_to" name="transfer_to" dropzone="" chosen=""
                             ng-model="transfer_to" required=""
                            ng-options="m.employee_gid as m.employee_name for m in employee_list"
                            class="chosen-select form-control">
                            <option value=""> Select Transfer To </option>

                        </select>
                        </div>
                    </div>
                  
                   
                </div>
                <br />
                <div>
                    <div class="text-center">
                        <button type="button" class="btn btn-success btn-md" ng-disabled="transferformsubmit.$invalid" ng-click="transferWIUpdate()"><i class="fa fa-arrow-circle-right"></i>&nbsp;&nbsp;Submit</button>&nbsp;&nbsp;
                        <button ng-click="close()" class="btn btn-danger"><i class="fa icon-close"></i>&nbsp;&nbsp;Close</button>
                    </div>
                </div>
            </form>
            <br>
            <div class="row" ng-show="showtransfer">
                <div class="col-lg-12 col-sm-12 col-md-12">
                    <div class="table-responsive">
                        <table class="table table-striped table-secondary">
                            <thead class="bg-gray text-white">
                                <tr width="100%">
                                    <th align="center" scope="col">S.No</th>
                                    <th align="center" scope="col">Transfer From</th>
                                    <th align="center" scope="col">Transfer To</th>
                                    <th align="center" scope="col">Allotted By/On</th>
                                    
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="data in transferlog_list" width="100%">
                                    <td align="left" scope="col" title="'S.No'">{{$index+1}}</td>
                                    <td align="left" scope="col" title="Transfer From">{{data.assignedby_name}}</td>
                                    <td align="left" scope="col" title="Transfer To'">{{data.transferby_name}}</td>
                                    <td align="left" scope="col" title="Allotted By/On'">{{data.created_by}}/{{data.created_date}}</td>
                                   
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </script>

</div>