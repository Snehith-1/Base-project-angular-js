<h3>
    Deferral Report
   
</h3>

<div id="defid" ng-controller="deferralReport">
    <style type="text/css">
        .list-group-item:hover {
            color: #000000;
            background-image: linear-gradient(90deg, #d8eef5 0%, #adc9e7 35%, #88a9d9 100%);
            font-weight: bold;
            cursor: pointer;
        }

        .panel-scroll {
            max-height: 120px;
            overflow: auto;
        }
    </style>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="col-lg-4  col-sm-4 col-md-4">
                <strong class="mt0">Entity</strong>
                <select id="select_value_label_93" name="entity_name" dropzone="" ng-model="entity_gid" required="" 
                       class="form-control ng-valid ng-touched ng-valid-parse" size="1">
                    <option value="">---Select---</option>
                    <option data-ng-repeat="data in entity_list" value="{{data.entity_gid}}">
                        {{data.entity_name}}
                    </option>
                </select>

            </div>

            <div class="col-lg-4  col-sm-4 col-md-4">
                <strong class="mt0">Branch</strong>
                <select id="select_value_label_93" name="vertical" dropzone="" ng-model="branch" required="" 
                       class="form-control ng-valid ng-touched ng-valid-parse"  size="1">
                    <option value="">---Select---</option>
                    <option data-ng-repeat="data in branch_list" value="{{data.branch_gid}}">
                        {{data.branch_name}}
                    </option>
                </select>

            </div>
            <div class="col-lg-4  col-sm-4 col-md-4">

                <label class="col-form-label control-label"><strong>Customer </strong></label>
                <!--<select id="customername" name="customer" dropzone="" ng-model="customer" required="" class=" mda-form-control ng-pristine ng-invalid-required ng-valid md-default-theme ng-touched" size="1">
                    <option value="">---Select---</option>
                    <option data-ng-repeat="data in customer_list" value="{{data.customer_gid}}">
                        {{data.customername}}
                    </option>
                </select>-->

                <input type="text" name="customer" id="customer" ng-model="customer" required
                       ng-keyup="complete(customer)" class="form-control" placeholder="Search Customer Name Here..." />

                <ul class="list-group panel-scroll" style="height:100%; word-wrap: break-word;">
                    <li class="list-group-item" ng-repeat="m in customer_list"
                        ng-click="fillTextbox(m.customer_gid,m.customername)">{{m.customername}}</li>
                </ul>

                <label style="color:red;">{{message}}</label>

            </div>

        </div>
    </div>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">

            <div class="col-lg-4  col-sm-4 col-md-4">
                <strong class="mt0">Vertical</strong><br />
                <select id="vertical_code" name="vertical" dropzone="" ng-model="vertical" required="" 
                       class="form-control ng-valid ng-touched ng-valid-parse"   size="1">
                    <option value="">-----Select ----</option>
                    <option data-ng-repeat="data in vertical_list" value="{{data.vertical_gid}}">{{data.vertical_code}}</option>
                </select>


            </div>
            <div class="col-lg-4  col-sm-4 col-md-4">
                <strong class="mt0">Relationship Manager</strong>
                <select id="relationshipmgmt_name" name="vertical" dropzone="" ng-model="relationshipMgmt" required="" 
                        class="form-control ng-valid ng-touched ng-valid-parse" 
                        tabindex="0" aria-label="State" aria-expanded="false" size="1">
                    <option value="">---Select---</option>
                    <option data-ng-repeat="data in employee_list" value="{{data.employee_gid}}">
                        {{data.employee_name}}
                    </option>
                </select>

            </div>
            <div class="col-lg-4  col-sm-4 col-md-4">
                <strong class="mt0">Zonal Head</strong><br />
                <select id="zonal_name" name="vertical" dropzone="" ng-model="zonalHead" required="" 
                        class="form-control ng-valid ng-touched ng-valid-parse" 
                        tabindex="0" aria-label="State" aria-expanded="false" size="1">
                    <option value="">---Select---</option>
                    <option data-ng-repeat="data in employee_list" value="{{data.employee_gid}}">
                        {{data.employee_name}}
                    </option>
                </select>


            </div>
        </div>
    </div>
    <br />
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">

            <div class="col-lg-4  col-sm-4 col-md-4">
                <strong class="mt0">Business Head</strong>
                <select id="businesshead_name" name="vertical" dropzone="" ng-model="businessHead" required="" 
                        class="form-control ng-valid ng-touched ng-valid-parse" 
                        tabindex="0" aria-label="State" aria-expanded="false" size="1">
                    <option value="">---Select---</option>
                    <option data-ng-repeat="data in employee_list" value="{{data.employee_gid}}">
                        {{data.employee_name}}
                    </option>
                </select>
            </div>
            <div class="col-lg-4  col-sm-4 col-md-4">
                <strong class="mt0">Cluster Manager</strong>
                <select id="cluster_manager_name" name="vertical" dropzone="" ng-model="clustermanager" required="" 
                       class="form-control ng-valid ng-touched ng-valid-parse" 
                        tabindex="0" aria-label="State" aria-expanded="false" size="1">
                    <option value="">---Select---</option>
                    <option data-ng-repeat="data in employee_list" value="{{data.employee_gid}}">
                        {{data.employee_name}}
                    </option>
                </select>
            </div>

            <div class="col-lg-4  col-sm-4 col-md-4">
                <strong class="mt0">Credit Manager</strong>
                <select id="credit_manager_name" name="creditmanager" dropzone="" ng-model="creditmanager" required="" 
                       class="form-control ng-valid ng-touched ng-valid-parse" 
                        tabindex="0" aria-label="State" aria-expanded="false" size="1">
                    <option value="">---Select---</option>
                    <option data-ng-repeat="data in employee_list" value="{{data.employee_gid}}">
                        {{data.employee_name}}
                    </option>
                </select>
            </div>
           
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="col-lg-4  col-sm-4 col-md-4">
                <strong class="mt0">State</strong><br />
                <select name="state_code"
                    ng-model="cbostate" class="form-control ng-valid ng-touched ng-valid-parse" size="1">
                    <option value=""> -----Select -----</option>
                    <option data-ng-repeat="data in state_list" value="{{data.state_gid}}">{{data.state_name}}</option>
                </select>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="col-lg-4  col-sm-4 col-md-4">
            </div>
            <div class="col-lg-3  col-sm-3 col-md-3">
               
               
            </div>
            <div class="col-lg-5  col-sm-5 col-md-5">

                <a title="Color Indicates" style="background-color:#6047eb;" class="ng-binding ng-scope label">
                    <em class="fa"></em>
                </a>&nbsp;<lable> - Color Indicates that the Customer Tagged to Legal</lable>&nbsp;&nbsp;&nbsp;
                <button type="button" class="btn btn-green btn-md" style="background-color:#23b1e6;" ng-disabled="userform.$invalid" ng-click="search()" title="Search"><i class="fa fa-search"></i></button>&nbsp;&nbsp;
                <button type="button" class="btn btn-green btn-md" style="background-color:#0d87b5;" ng-disabled="userform.$invalid" ng-click="all()" title="Refresh"><i class="fa fa-refresh"></i></button>&nbsp;&nbsp;
                <button type="button" class="btn btn-success btn-md" ng-disabled="userform.$invalid" ng-click="export()" title="Export Excel"><i class="fa fa-file-excel-o"></i><a download="" href="" id="btnpdf" style="display:none;"></a></button>&nbsp;&nbsp;
                <button type="button" class="btn btn-green btn-md" ng-disabled="userform.$invalid" ng-click="exportnpa()" title="NPA Export Excel"><i class="fa fa-file-excel-o"></i><a download="" href="" id="btnpdf" style="display:none;"></a></button>&nbsp;&nbsp;
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-lg-12">
            <!-- START panel-->
            <div id="panelDemo13" class="panel panel-default">
                <div class="panel-body">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12">
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                Showing 1 to {{totalDisplayed}} of {{total}} Entries
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4">
        
                                Show <input ng-model="pagecount" id="pagecount" type="number" />
                                <button class="btn btn-info" id="loadmore"  ng-disabled="!pagecount" ng-click="loadMore(pagecount)">
                                    <em class="fa fa-spinner"></em> Load More
                                </button>
        
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-4">
                                <div class="input-group">
                                    <input type="text" ng-model="searchtxt" placeholder="Search Here .." class="form-control input-sm" />
                                    <span class="input-group-btn">
                                        <button type="submit" class="btn btn-default btn-sm">
                                            <i class="fa fa-search"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br>

                    <div class="table-responsive">
                        <table class="table hover table-striped ">

                            <thead>
                                <tr class="bg-success text-white">
                                    <th>S.NO</th>
                                    <th>ENTITY</th>
                                    <th>BRANCH</th>
                                    <th>URN</th>
                                    <th>CUSTOMER</th>
                                    <th>VERTICAL</th>
                                    <th>STATE</th>
                                    <th>LOAN REF NO</th>
                                    <th>SANCTION REF NO</th>
                                    <th> SANCTION DATE</th>
                                    <th>RECORD ID</th>
                                    <th>TRACKING TYPE</th>
                                    <th>DEFERRAL CATAGORY</th>
                                    <th>DEFERRAL TYPE</th>
                                    <th>ZONAL HEAD</th>
                                    <th>BUSINESS HEAD</th>
                                    <th>RELATIONSHIP MANAGER</th>
                                    <th>CLUSTER MANAGER</th>
                                    <th>CREDIT MANAGER</th>
                                    <th>ZONAL RISK MANAGER</th>
                                    <th>RISK MANAGER</th>
                                    <th>HEAD RISK MONITORING</th>
                                    <th>DUE DATE</th>
                                    <th>EXTENDED DATE</th>
                                    <th>DEFERRAL STAGE</th>
                                    <th>DEFERRAL STATUS</th>
                                    <th>CRITICALITY</th>
                                    <th>AGING</th>
                                    <th>EXTENSION COUNT</th>
                                    <th>CREATED BY</th>
                                    <th>CREATED DATE</th>

                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                               
                                <tr ng-switch="data.legaltag_flag" ng-repeat="data in deferral_data|filter :searchtxt |limitTo:totalDisplayed ">
                                    <td data-title="'S.No'">{{$index+1}}</td>
                                    <td data-title="'Entity'">{{data.entity_name}}</td>
                                    <td data-title="'Branch'">{{data.branch_name}}</td>
                                    <td data-title="'URN'">{{data.customer_urn}}</td>
                                    <td ng-switch-when="" data-title="'Customer'">{{data.customername}}</td>
                                    <td ng-switch-when="N" data-title="'Customer'">{{data.customername}}</td>
                                    <td ng-switch-when="Y" style="color:rgb(105,113,215);font-weight:bold;" data-title="'Customer'">{{data.customername}}</td>
                                    <td data-title="'Vertical'">{{data.vertical_code}}</td>
                                    <td data-title="'State'">{{data.state}}</td>
                                    <td class="nowrap" data-title="'Loan Ref No'">{{data.loanTitle}}</td>
                                    <td class="nowrap" data-title="'Sanction Ref No'">{{data.sanction_refno}}</td>
                                    <td class="nowrap" data-title="'Sanction Date'">{{data.sanction_date}}</td>
                                    <td data-title="'Record ID'">{{data.record_id}}</td>
                                    <td data-title="'Tracking Type'">{{data.tracking_type}}</td>
                                    <td data-title="'Deferral Catagory'">{{data.deferral_catagory}}</td>
                                    <td data-title="'Deferral Name'">{{data.deferral_name}}</td>
                                    <td data-title="'Zonal Head'">{{data.zonal_name}}</td>
                                    <td data-title="'Business Head'">{{data.businesshead_name}}</td>
                                    <td data-title="'RM'">{{data.relationshipmgmt_name}}</td>
                                    <td data-title="'Cluster Manager'">{{data.cluster_manager_name}}</td>
                                    <td data-title="'Credit Manager'">{{data.creditmanager}}</td>
                                    <td data-title="'Zonal Risk Manager'">{{data.zonal_rm}}</td>
                                    <td data-title="'Risk Manager'">{{data.risk_manager}}</td>
                                    <td data-title="'Risk Monitoring Head'">{{data.riskmonitoring_head}}</td>
                                    <td class="nowrap" data-title="'Due Date'">{{data.duedate}}</td>
                                    <td class="nowrap" data-title="'Due Date'">{{data.extended_date}}</td>
                                    <td data-title="'Deferral Status'">{{data.approval_status}}</td>
                                    <td data-title="'Deferral Status'">{{data.deferral_status}}</td>
                                    <td data-title="'criticallity'">{{data.criticallity}}</td>
                                    <td data-title="'Deferral Status'">{{data.aging}}</td>
                                    <td data-title="'Deferral Status'">{{data.count_extension}}</td>
                                    <td data-title="'Created Date'">{{data.Created_by}}</td>
                                    <td data-title="'Created Date'">{{data.created_date}}</td>

                                    <td data-title="'Action'">

                                        <button title="View Details" ng-click="popupView(data.deferral_gid)" class="btn btn-sm  bg-light-blue-600">
                                            <em class="fa fa-eye"></em>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- END panel-->
            </div>
        </div>
    </div>
</div>



